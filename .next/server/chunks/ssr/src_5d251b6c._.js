module.exports=[73781,a=>{"use strict";a.s(["default",()=>g],73781);var b=a.i(87924),c=a.i(38246),d=a.i(46271);let e=(0,a.i(70106).default)("code-xml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);var f=a.i(13490);function g({title:a="กำลังพัฒนา",message:g="ฟีเจอร์นี้ยังไม่พร้อมให้ใช้งานตอนนี้",subMessage:h="ทีมงานกำลังเร่งทำให้เสร็จแบบโดยเร็วที่สุด",progress:i,est:j,actions:k=[],className:l=""}){let m=(...a)=>a.filter(Boolean).join(" "),n=new f.default;return(0,b.jsxs)(d.motion.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},"aria-live":"polite",className:m("w-full rounded-2xl border border-neutral-200 dark:border-neutral-800 bg-white/70 dark:bg-neutral-900/70","backdrop-blur p-4 shadow-sm",l),children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 shrink-0 rounded-xl border border-neutral-200 dark:border-neutral-800    bg-gradient-to-br from-emerald-100 to-emerald-200 dark:from-emerald-900/40 dark:to-emerald-800/30   flex items-center justify-center","aria-hidden":!0,children:(0,b.jsx)(e,{className:"size-6 text-emerald-700 dark:text-emerald-400"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("h2",{className:"text-lg sm:text-xl font-semibold tracking-tight text-neutral-900 dark:text-neutral-50",children:a}),(0,b.jsx)("p",{className:"mt-1 text-base font-medium text-neutral-700 dark:text-neutral-300",children:g}),(0,b.jsx)("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:h})]})]}),("number"==typeof i||j)&&(0,b.jsxs)("div",{className:"mt-6 space-y-2",children:["number"==typeof i&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-neutral-500 dark:text-neutral-400",children:[(0,b.jsx)("span",{children:"ความคืบหน้า"}),(0,b.jsxs)("span",{"aria-live":"polite",children:[(0,b.jsx)("span",{className:"font-medium",children:Math.max(0,Math.min(100,i))}),"%"]})]}),(0,b.jsx)("div",{className:"h-2 w-full rounded-full bg-neutral-200 dark:bg-neutral-800 overflow-hidden",children:(0,b.jsx)("div",{className:"h-full rounded-full bg-emerald-600 dark:bg-emerald-400 transition-[width] duration-500",style:{width:`${Math.max(0,Math.min(100,i))}%`},role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.max(0,Math.min(100,i))})})]}),j&&(0,b.jsx)("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:j})]}),k.length>0&&(0,b.jsx)("div",{className:"mt-6 flex flex-wrap gap-2",children:k.map((a,d)=>{let e=m("inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm transition border focus:outline-none focus:ring-2 focus:ring-emerald-400/60",a.primary?"bg-emerald-600 text-white border-emerald-600 hover:bg-emerald-700":"bg-transparent text-neutral-700 dark:text-neutral-200 border-neutral-300 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-800/60 cursor-pointer"),f=(0,b.jsx)("span",{className:"whitespace-nowrap",children:a.label});return a.href?(0,b.jsx)(c.default,{draggable:!1,href:a.href,className:e,onMouseDown:a=>n.create(a,"dark"),rel:"noreferrer",children:f},d):(0,b.jsx)("button",{type:"button",onClick:a.onClick,onMouseDown:a=>n.create(a,"light"),className:e,children:f},d)})})]})}},67226,a=>a.a(async(b,c)=>{try{a.s(["default",()=>B]);var d=a.i(87924),e=a.i(72131),f=a.i(10237),g=a.i(63706),h=a.i(76343),i=a.i(75090),j=a.i(74308),k=a.i(13902),l=a.i(86269),m=a.i(13490),n=a.i(18213),o=a.i(46271),p=a.i(24738),q=a.i(69369),r=a.i(98347),s=a.i(8433),t=a.i(20267),u=a.i(18344),v=a.i(91392),w=a.i(37610),x=a.i(43670),y=a.i(42829),z=a.i(73781),A=b([s,t]);function B(){let{profile:a,authLoading:b}=(0,g.default)(),{setAutoSaveMessage:c}=(0,y.default)(),{resolvedTheme:A}=(0,k.useTheme)(),[B,C]=(0,e.useState)(localStorage.getItem("token")),[D,E]=(0,e.useState)(!1),[F,G]=(0,e.useState)(""),[H,I]=(0,e.useState)({hcode:"",hcode_name:""}),[J,K]=(0,e.useState)([]),[L,M]=(0,e.useState)([]),[N,O]=(0,e.useState)(null),[P,Q]=(0,e.useState)(""),[R,S]=(0,e.useState)(!1),[T,U]=(0,e.useState)(!1),[V,W]=(0,e.useState)(!1),[X,Y]=(0,e.useState)({content:[],overall:[],review_status_id:null,review_status_result:null,review_status_comment:""}),[Z,$]=(0,e.useState)(null),[_,aa]=(0,e.useState)(!1),[ab,ac]=(0,e.useState)(!1),[ad,ae]=(0,e.useState)(!1),[af,ag]=(0,e.useState)(null),ah=(0,e.useRef)(),ai=(0,e.useRef)(null),aj=new m.default;if((0,e.useEffect)(()=>E(!0),[]),(0,e.useEffect)(()=>{try{C(localStorage.getItem("token"))}catch{}},[]),!B)return(0,d.jsx)(x.default,{});if(null===B)return(0,d.jsx)(f.default,{});if(a?.email==="iinter731@gmail.com")return(0,d.jsx)(z.default,{title:"แบบประเมินคุณภาพการบันทึกเวชระเบียนผู้ป่วยนอก/ฉุกเฉิน (OPD/ER)",message:"ระบบกำลังอยู่ในระหว่างการพัฒนา",subMessage:"ขออภัยในความไม่สะดวกครับ/ค่ะ",progress:20,est:"ETA : คาดว่าจะเสร็จภายในสัปดาห์นี้",actions:[{label:"กลับไปหน้า Dashboard",href:"/",primary:!0},{label:"รีเฟรช",onClick:()=>location.reload()}]});let ak=(0,e.useCallback)(a=>{a.api.sizeColumnsToFit()},[]),al=async()=>{let a=localStorage.getItem("token");try{let b=await h.default.get("/setting/hcode",{headers:{Authorization:`Bearer ${a}`}});200===b.status&&I(b.data.data[0])}catch(a){console.log(a)}},am=async a=>{ae(!1);try{let b=await h.default.get(`mraIpd/fetchPatient/${a}`,{headers:{Authorization:`Bearer ${B}`}});200===b.status&&($(b.data.data),await an(a),(0,u.addToast)({title:"สําเร็จ",description:b.data.message,timeout:8e3,color:"success",shouldShowTimeoutProgress:!0}))}catch(b){if(console.log(b),b?.response?.status===409)return void await an(a);(0,u.addToast)({title:"เกิดข้อผิดพลาด",description:b.response.data.message,timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0})}};(0,l.useIdleTimer)({timeout:1e3,onIdle:()=>{F?.trim()&&am(F)},events:["keyup"],element:ai.current,immediateEvents:[]});let an=async a=>{U(!0);try{let b=await h.default.post("/mraIpd",{patient_an:a},{headers:{Authorization:`Bearer ${B}`}});if(200===b.status){(0,u.addToast)({title:"สําเร็จ",description:b.data.message,timeout:8e3,color:"success",shouldShowTimeoutProgress:!0});let a=b.data.data;K(a[0].form_ipd_content_of_medical_record_results),M(a[0].form_ipd_overall_finding_results),ao();let c=(Array.isArray(a)?a[0]?.patients:a?.patients)||{};$({an:c.patient_an||"",hn:c.patient_hn||"",fullname:c.patient_fullname||"",regdate:c.patient_date_admitted||"",dcgdate:c.patient_date_discharged||"",ward_name:c.patient_ward||""}),Y(b=>({...b,content:a[0].form_ipd_content_of_medical_record_results.map(a=>{let{created_at:b,updated_at:c,created_by:d,updated_by:e,total_score:f,content_of_medical_records:g,...h}=a,i={content_of_medical_record_id:g?.content_of_medical_record_id};for(let a in h){let b=h[a];"comment"===a?i[a]=b??null:"na"===a||"missing"===a||"no"===a?i[a]=!!b:i[a]="boolean"==typeof b?+!!b:null==b?0:b}return i})}))}}catch(a){console.log(a),409===a.response.status?ap():(0,u.addToast)({title:"เกิดข้อผิดพลาด",description:a.response.data.message,timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0})}finally{U(!1)}};(0,e.useEffect)(()=>{al(),ai.current.focus()},[b,B,a]);let ao=async()=>{try{let a=await h.default.get("/mraIpd/rvst",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});200===a.status&&O(a.data.data)}catch(a){console.log(a)}},ap=async()=>{ac(!0);try{let a=await h.default.get(`/mraIpd/${F}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),b=a.data.data[0];if(200===a.status){ae(!0),ag(b);let a=(Array.isArray(b)?b[0]?.patients:b?.patients)||{};$({an:a.patient_an||"",hn:a.patient_hn||"",fullname:a.patient_fullname||"",regdate:a.patient_date_admitted||"",dcgdate:a.patient_date_discharged||"",ward_name:a.patient_ward||""}),setTimeout(()=>{ah.current&&ah.current.focus()},500)}}catch(a){if(409===a.response.status){ae(!0),Q(a.response?.data.data?.pdf_ipd_file);let b=a.response.data.data?.form_ipds?.patients;$({hn:b.patient_hn||"",fullname:b.patient_fullname||"",regdate:b.patient_date_admitted||"",dcgdate:b.patient_date_discharged||"",ward_name:b.patient_ward||""})}else(0,u.addToast)({title:"เกิดข้อผิดพลาด",description:a.response.data.message,timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0})}finally{ac(!1)}},aq=(a,b)=>"na"===b?a?.missing||a?.no:"missing"===b?a?.na||a?.no:"no"===b?a?.na||a?.missing:a?.na||a?.missing||a?.no,ar=[{field:"content_of_medical_record_name",pinned:"left",headerName:"หัวข้อเวชระเบียน",valueGetter:a=>{let b=a.node.rowIndex+1,c=a.data.content_of_medical_records?.content_of_medical_record_name||"";return`${b}.${c}`},minWidth:240},{field:"na",editable:a=>!aq(a.data,"na")&&a.data.content_of_medical_records?.na_type!==!1,headerName:"NA",minWidth:60,cellRenderer:"agCheckboxCellRenderer",cellEditor:"agCheckboxCellEditor",cellStyle:a=>aq(a.data,"na")||a.data.content_of_medical_records?.na_type===!1?{backgroundColor:D&&"dark"===A?"#303030":"#D7D7D7",cursor:"not-allowed",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center"}:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}},{field:"missing",headerName:"Missing",minWidth:80,cellRenderer:"agCheckboxCellRenderer",cellEditor:"agCheckboxCellEditor",editable:a=>!aq(a.data,"missing")&&a.data.content_of_medical_records?.missing_type!==!1,cellStyle:a=>aq(a.data,"missing")||a.data.content_of_medical_records?.missing_type===!1?{backgroundColor:D&&"dark"===A?"#303030":"#D7D7D7",cursor:"not-allowed",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center"}:{display:"flex",alignItems:"center",justifyContent:"center"}},{field:"no",headerName:"No",minWidth:60,cellRenderer:"agCheckboxCellRenderer",cellEditor:"agCheckboxCellEditor",cellDataType:"boolean",editable:a=>!aq(a.data,"no")&&a.data.content_of_medical_records?.no_type!==!1,cellStyle:a=>aq(a.data,"no")||a.data.content_of_medical_records?.no_type===!1?{backgroundColor:D&&"dark"===A?"#303030":"#D7D7D7",cursor:"not-allowed",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center"}:{display:"flex",alignItems:"center",justifyContent:"center"}},...Array.from({length:9},(a,b)=>{let c=`criterion_number_${b+1}`,d=`${c}_type`;return{field:c,headerName:`เกณฑ์ ${b+1}`,minWidth:80,cellRenderer:"agCheckboxCellRenderer",cellEditor:"agCheckboxCellEditor",cellDataType:"boolean",suppressClickEdit:!0,stopEditingWhenCellsLoseFocus:!0,editable:a=>{let b=aq?.(a.data,c),e=a.data?.content_of_medical_records?.[d]===!1;return!b&&!e},onCellClicked:a=>{let b=aq?.(a.data,c),e=a.data?.content_of_medical_records?.[d]===!1;if(b||e)return;let f=!a.value;a.node.setDataValue(c,f)},cellStyle:a=>{let b=aq?.(a.data,c),e=a.data?.content_of_medical_records?.[d]===!1;return b||e?{backgroundColor:D&&"dark"===A?"#303030":"#D7D7D7",cursor:"not-allowed",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center"}:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}},valueGetter:a=>{let b=a.data?.[c];return 1===b},valueSetter:a=>(a.data[c]=+!!a.newValue,!0)}}),{field:"point_deducted",headerName:"หักคะแนน",minWidth:90,cellRenderer:"agCheckboxCellRenderer",cellEditor:"agCheckboxCellEditor",cellDataType:"boolean",suppressClickEdit:!0,stopEditingWhenCellsLoseFocus:!0,valueGetter:a=>a.data?.point_deducted===1||a.data?.point_deducted===!0,valueSetter:a=>(a.data.point_deducted=+!!a.newValue,!0),editable:a=>!aq(a.data,"point_deducted")&&a.data.content_of_medical_records?.points_deducted_type!==!1,onCellClicked:a=>{aq(a.data,"point_deducted")||a.data.content_of_medical_records?.points_deducted_type===!1||a.node.setDataValue("point_deducted",!a.value)},cellStyle:a=>aq(a.data,"point_deducted")||a.data.content_of_medical_records?.points_deducted_type===!1?{backgroundColor:D&&"dark"===A?"#303030":"#D7D7D7",cursor:"not-allowed",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center"}:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}},{field:"comment",headerName:"หมายเหตุ",cellEditor:"agTextCellEditor",editable:!0,minWidth:220,stopEditingWhenCellsLoseFocus:!0,onCellClicked:a=>a.api.startEditingCell({rowIndex:a.rowIndex,colKey:"comment"})}],as=async()=>{W(!0);let a=localStorage.getItem("token");try{let b=await h.default.put(`/mraIpd/${F}`,X,{headers:{Authorization:`Bearer ${a}`}});200===b.status&&(console.log(b.data),am(F))}catch(a){console.log(a)}finally{W(!1)}},at=async()=>{c({type:"info",message:"กําลังบันทึกอัตโนมัติ..."});let a=localStorage.getItem("token");try{let b=await h.default.put(`/mraIpd/${F}`,X,{headers:{Authorization:`Bearer ${a}`}});200===b.status&&c({type:"success",message:"บันทึกอัตโนมัติสําเร็จ"})}catch(a){console.log(a),c({type:"danger",message:"บันทึกอัตโนมัติไม่สําเร็จ"})}finally{setTimeout(()=>{c("")},5e3)}};(0,l.useIdleTimer)({timeout:2e3,onIdle:Z&&!ad&&null===X.review_status_id?at:null,events:["keydown","keyup","input","change"],element:"undefined"!=typeof document?document:null,immediateEvents:[],startOnMount:!1,debounce:500});let au=()=>{Y(a=>({...a,content:[],overall:[],review_status_id:null,review_status_result:null,review_status_comment:""}))},av=async a=>{let b=await (0,t.pdf)((0,d.jsx)(s.default,{...a})).toBlob();return await ax(b)};(0,e.useEffect)(()=>{af&&(async()=>{let a=await av(af);Q(a),aw(a,af.form_ipd_id)})()},[af]);let aw=async(a,b)=>{let c={form_ipd_id:b,binary:a,total_score:af.totalDefaultSum,score_obtained:af.totalScoreSum,percentage:af.formattedResultSum};try{let a=await h.default.post("/mraIpd/insertPdf",c,{headers:{Authorization:`Bearer ${B}`}});200===a.status&&console.log(a.data)}catch(a){console.log(a)}},ax=a=>new Promise((b,c)=>{let d=new FileReader;d.onloadend=()=>b(d.result.split(",")[1]),d.onerror=c,d.readAsDataURL(a)}),ay=async a=>{if(S(!0),a.patient_an!==F)return(0,u.addToast)({title:"เกิดข้อผิดพลาด",description:"หมายเลข AN ไม่ถูกต้อง",timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0});let b={password:a.password};try{let c=await h.default.delete(`/mraIpd/${a.patient_an}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},data:b});200===c.status&&((0,u.addToast)({title:"สําเร็จ",description:c.data.message,timeout:8e3,color:"success",shouldShowTimeoutProgress:!0}),au(),G(""),$(null),ag({}),ae(!1),K([]),aa(!1))}catch(a){console.log(a),(0,u.addToast)({title:"เกิดข้อผิดพลาด",description:a.response.data.message,timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0})}finally{S(!1)}};return(0,d.jsxs)(d.Fragment,{children:[(R||V)&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center dark:bg-black/80 bg-white/40 backdrop-blur-sm",children:(0,d.jsx)(f.default,{title:R?"กําลังลบข้อมูล...":"กําลังบันทึกข้อมูล..."})}),(0,d.jsx)(v.default,{isOpen:_,onClose:()=>aa(!1),delModal:!0,title:`คุณต้องการลบข้อมูล ${(0,w.default)(F,{keepStart:2,keepEnd:2})}`,onSubmit:ay,fields:[{type:"text",name:"patient_an",label:"กรอกหมายเลข AN",placeholder:"XXXXXXXXX",required:!0,radius:"sm"},{type:"password",name:"password",label:"กรอกรหัสผ่าน",placeholder:"**********",required:!0,radius:"sm"}]}),(0,d.jsxs)("div",{className:"select-none rounded-2xl border border-zinc-300 dark:border-[#505050] mb-4 bg-white dark:bg-[#181818] shadow-lg",children:[(0,d.jsxs)("div",{className:"flex justify-between border-b border-zinc-300 dark:border-[#505050] p-4",children:[(0,d.jsxs)("div",{className:"flex gap-1 flex-col",children:[(0,d.jsx)("p",{className:"font-medium",children:"แบบตรวจประเมินคุณภาพการบันทึกเวชระเบียนผู้ป่วยนอก/ฉุกเฉิน Medical Record Audit Form (OPD/ER)"}),(0,d.jsxs)("p",{className:"text-xs font-medium text-zinc-600 dark:text-zinc-500",children:[(0,d.jsx)("span",{className:"font-semibold mr-1",children:"เงื่อนไขการบันทึกเวชระเบียน"}),"การบันทึกคะแนน (1) กรณีที่ผ่านเกณฑ์ในแต่ละข้อ ให้ติ๊กถูก (2) กรณีที่ไม่ผ่านเกณฑ์ในแต่ละข้อ ไม่ต้องติ๊ก (3) กรณีไม่จำเป็นต้องมีบันทึก/ไม่มีข้อมูล ในเกณฑ์ข้อที่ระบุให้มี NA ได้ ให้ NA"]})]}),Z?.ward_name&&(0,d.jsx)("span",{className:"shrink-0 h-fit rounded-full border border-zinc-300 dark:border-zinc-700 px-3 py-1 text-xs text-zinc-700 dark:text-zinc-200 bg-zinc-50 dark:bg-zinc-900/60",children:Z.ward_name})]}),(0,d.jsxs)("div",{className:"p-4 flex flex-col gap-2",children:[(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(i.Input,{variant:"bordered",radius:"md",label:"รหัสสถานพยาบาล",size:"md",placeholder:"XXXXX",value:H?H.hcode:"",labelPlacement:"outside-top",isReadOnly:!0}),(0,d.jsx)(i.Input,{variant:"bordered",radius:"md",label:"ชื่อสถานพยาบาล",size:"md",placeholder:"โรงพยาบาล.....",value:H?H.hcode_name:"",labelPlacement:"outside-top",isReadOnly:!0})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(i.Input,{variant:"bordered",radius:"md",label:"บัตรประชาชน",size:"md",placeholder:"บัตรประชาชน",value:Z?Z.fullname:"",labelPlacement:"outside-top",isDisabled:!0}),(0,d.jsx)(i.Input,{variant:"bordered",radius:"md",label:"ชื่อ-สกุล",size:"md",placeholder:"ชื่อ-สกุล",value:Z?Z.fullname:"",labelPlacement:"outside-top",isDisabled:!0}),(0,d.jsx)(i.Input,{variant:"bordered",radius:"md",label:"HN",size:"md",placeholder:"HN",value:Z?Z.hn:"",labelPlacement:"outside-top",isDisabled:!0})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5 gap-2",children:[(0,d.jsx)(i.Input,{ref:ai,value:F,onChange:a=>{G(a.target.value),$(null),K([]),M([]),ae(!1),ag(null),au(),Q("")},variant:"bordered",radius:"md",label:"VM",size:"md",placeholder:"VN",labelPlacement:"outside-top",maxLength:9}),(0,d.jsx)(i.Input,{variant:"bordered",radius:"md",label:"วันที่เข้ารับบริการ",size:"md",placeholder:"Date admitted",value:Z?(0,n.default)(Z?.regdate).add(543,"years").format("DD/MM/YYYY"):"",labelPlacement:"outside-top",isDisabled:!0}),(0,d.jsx)(i.Input,{variant:"bordered",radius:"md",label:"วันที่สิ้นสุด",size:"md",placeholder:"Date discharged",value:Z?(0,n.default)(Z?.dchdate).add(543,"years").format("DD/MM/YYYY"):"",labelPlacement:"outside-top",isDisabled:!0}),(0,d.jsxs)("div",{className:"flex flex-col items-center w-full h-full",children:[(0,d.jsx)("div",{className:"flex items-center justify-between w-full",children:(0,d.jsx)("p",{className:"text-sm mb-2",children:"ตัวเลือก"})}),(0,d.jsx)("div",{className:"w-full items-center",children:(0,d.jsx)(o.motion.button,{onClick:()=>aa(!0),disabled:!ad,className:"w-full text-sm text-center text-rose-700 border-rose-700 !disabled:dark:hover:border-rose-800 border font-semibold px-6 py-2 hover:bg-red-50 !disabled:dark:hover:bg-rose-800 rounded-xl dark:bg-rose-700 dark:text-white cursor-pointer disabled:opacity-40 disabled:cursor-not-allowed",children:"ลบข้อมูล"})})]})]})]})]}),!ad&&(0,d.jsx)("div",{className:"shadow-lg rounded-2xl",children:(0,d.jsx)(j.default,{columnDefs:ar,rowData:J,loading:T,pagination:!1,onCellValueChanged:a=>{a.api.refreshCells({rowNodes:[a.node],force:!0});let b=[];a.api.forEachNode(a=>{b.push({...a.data})}),Y(a=>({...a,content:b.map(a=>{let{created_at:b,updated_at:c,created_by:d,updated_by:e,total_score:f,content_of_medical_records:g,...h}=a,i={content_of_medical_record_id:g?.content_of_medical_record_id};for(let a in h){let b=h[a];"comment"===a?i[a]=b??null:"na"===a||"missing"===a||"no"===a?i[a]=!!b:i[a]="boolean"==typeof b?+!!b:null==b?0:b}return i})}))},onGridReady:ak})}),J.length>0&&!ad&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("hr",{className:"mt-8 mb-6"}),(0,d.jsx)("p",{className:"underline underline-offset-2 select-none",children:"ประเมินคุณภาพการบันทึกเวชระเบียนในภาพรวม"}),(0,d.jsxs)("div",{className:"flex items-start gap-2 py-2",children:[(0,d.jsx)("p",{className:"font-semibold w-[130px] text-sm",children:"Overall Finding"}),(0,d.jsx)("div",{className:"flex flex-col gap-2",children:L.length>0&&L.map((a,b)=>(0,d.jsx)(p.Checkbox,{size:"sm",value:a.overall_finding_result,defaultSelected:!!L&&a.overall_finding_result,onValueChange:b=>((a,b)=>{let c=b?.overall_finding?.overall_finding_id??b?.overall_finding_id,d=b?.form_ipd_overall_finding_result_id??null;if(!c)return;let e=b?.overall_finding_result===!0;Y(b=>{let f=[...b.overall],g=f.findIndex(a=>a.overall_finding_id===c);return g>-1?a===e?f.splice(g,1):f[g]={...f[g],overall_finding_result:a,form_ipd_overall_finding_result_id:f[g].form_ipd_overall_finding_result_id??d}:a!==e&&f.push({form_ipd_overall_finding_result_id:d,overall_finding_id:c,overall_finding_result:a}),{...b,overall:f}})})(b,a),label:"ไม่ต้องการบันทึก",radius:"full",children:a.overall_finding.overall_finding_name},b))})]}),(0,d.jsxs)("div",{className:"flex items-start gap-2 py-2 select-none",children:[(0,d.jsx)("p",{className:"font-semibold w-[130px] text-sm",children:"(เลือกเพียง 1 ข้อ)"}),(0,d.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,d.jsx)(r.RadioGroup,{onValueChange:a=>(a=>{let b=N?.find(b=>b.review_status_id===a);Y(a=>({...a,review_status_id:b.review_status_id,review_status_result:!0,review_status_comment:b.review_status_comment}))})(a),children:N?.length>0&&N?.map(a=>(0,d.jsxs)(q.Radio,{size:"sm",value:a.review_status_id,children:[a.review_status_name," (",a.review_status_description,")"]},a.review_status_id))}),N&&N?.find(a=>a.review_status_id===X.review_status_id)?.review_status_type===!0&&(0,d.jsx)(i.Input,{onValueChange:a=>Y(b=>({...b,review_status_comment:a})),variant:"bordered",labelPlacement:"outside",radius:"md",label:"อื่นๆ",placeholder:"อื่นๆ",value:X.review_status_comment})]})]})]}),ad&&(""===P?(0,d.jsx)(o.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"z-50 fixed inset-0 w-full h-dvh flex items-center justify-center backdrop-blur-xs",children:(0,d.jsx)(f.default,{title:"กําลังสร้าง PDF..."})}):(0,d.jsx)("div",{className:"w-full h-[calc(100vh-15vh)] overflow-hidden rounded-2xl my-2 shadow-lg",children:(0,d.jsx)("iframe",{title:"pdf",loading:"lazy",width:"100%",height:"100%",src:`data:application/pdf;base64,${P}`,className:"w-full h-full"})})),!ad&&(0,d.jsx)(o.motion.button,{onClick:as,className:"w-full mt-4 text-emerald-700 font-semibold py-2 bg-emerald-50 border border-emerald-700 dark:hover:bg-emerald-800 rounded-2xl dark:bg-emerald-700 dark:text-white cursor-pointer disabled:opacity-40 disabled:cursor-not-allowed",onMouseDown:a=>aj.create(a),disabled:ab||0===J.length||V||null==Z,children:ab?"กำลังบันทึกข้อมูล":"บันทึก"})]})}[s,t]=A.then?(await A)():A,c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=src_5d251b6c._.js.map