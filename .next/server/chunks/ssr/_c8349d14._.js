module.exports=[91392,a=>{"use strict";a.s(["default",()=>o],91392);var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(39761),f=a.i(16173);let g=(0,a.i(70106).default)("list-minus",[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);var h=a.i(14548),i=a.i(33508),j=a.i(75090),k=a.i(4655),l=a.i(24647),m=a.i(24738),n=a.i(60208);function o({isOpen:a,onClose:o,onSubmit:p,loading:q=!1,title:r="ฟอร์ม",submitLabel:s="บันทึก",editData:t=null,fields:u=[],delModal:v=!1}){let[w,x]=(0,c.useState)({}),y=new e.default;function z(a,b){let c={};for(let d of a){let a=b?.[d.name];"checkbox"===d.type?c[d.name]="boolean"==typeof a?a:"boolean"==typeof d.defaultValue&&d.defaultValue:"checkbox-group"===d.type?c[d.name]=Array.isArray(a)?a:Array.isArray(d.defaultValue)?d.defaultValue:[]:c[d.name]=(a??d.defaultValue??"")+""}return c}if((0,c.useEffect)(()=>{a&&x(z(u,t))},[a,t,u]),!a)return null;let A=!!t,B=()=>{x(z(u,null)),o?.()};return(0,b.jsx)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 flex items-center justify-center bg-black/30 dark:bg-white/5 backdrop-blur-xs px-4",onMouseDown:a=>{a.target===a.currentTarget&&B()},children:(0,b.jsxs)(d.motion.form,{initial:{opacity:0,scale:.9,y:40},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:40},transition:{duration:.2,ease:"easeOut"},onSubmit:a=>{a.preventDefault(),p(w)},className:"bg-white dark:bg-[#181818] w-full max-w-lg rounded-2xl shadow-xl border border-zinc-200 dark:border-zinc-700 select-none",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center border-b border-zinc-200 dark:border-zinc-700 px-4 py-2",children:[(0,b.jsxs)("h2",{className:"text-md font-semibold text-zinc-900 dark:text-zinc-100 flex gap-1 items-center",children:[v?(0,b.jsx)(g,{className:"w-5 h-5"}):(0,b.jsx)(f.ListFilterPlus,{className:"w-5 h-5"}),v?`ลบข้อมูล ${r}`:A?`แก้ไข ${r}`:`เพิ่ม ${r}`]}),(0,b.jsx)(d.motion.button,{type:"button",whileTap:{scale:.98},onClick:B,onMouseUp:a=>y.create(a),className:"p-1.5 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 cursor-pointer",children:(0,b.jsx)(i.X,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})})]}),(0,b.jsx)("div",{className:"flex flex-col gap-3 max-h-[60vh] overflow-y-auto px-6 py-4",children:u.map(a=>{let c;if("select"===a.type){let c;return(0,b.jsx)(k.Select,{selectionMode:"single",selectedKeys:w[a.name]?new Set([String(w[a.name])]):new Set,onSelectionChange:(c=a.name,a=>{let b=Array.from(a)[0]??"";x(a=>({...a,[c]:b}))}),disableSelectorIconRotation:!0,className:a.className??"w-full mt-2",radius:a.radius??"sm",labelPlacement:"outside",placeholder:a.placeholder??"โปรดเลือก",isRequired:!!a.required,label:a.label,isDisabled:!!a.disableWhenEdit&&A,children:(a.options??[]).map(a=>(0,b.jsx)(l.SelectItem,{children:a.label},String(a.key)))},a.name)}if("checkbox-group"===a.type){let c;return(0,b.jsx)(n.CheckboxGroup,{label:a.label,value:Array.isArray(w[a.name])?w[a.name]:[],onValueChange:(c=a.name,a=>{x(b=>({...b,[c]:Array.isArray(a)?a:[]}))}),isRequired:!!a.required,isDisabled:!!a.disableWhenEdit&&A,className:a.className,children:(a.options??[]).map(a=>(0,b.jsx)(m.Checkbox,{value:String(a.key),children:a.label},String(a.key)))},a.name)}if("checkbox"===a.type){let c;return(0,b.jsx)(m.Checkbox,{isSelected:!!w[a.name],onValueChange:(c=a.name,a=>{x(b=>({...b,[c]:!!a}))}),isDisabled:!!a.disableWhenEdit&&A,className:a.className,size:"sm",children:a.label??a.name},a.name)}return(0,b.jsx)(j.Input,{type:"password"===a.type?"password":"number"===a.type?"number":"text",radius:a.radius??"sm",isRequired:!!a.required,label:a.label,labelPlacement:"outside-top",placeholder:a.placeholder??"",value:w[a.name]??"",onValueChange:(c=a.name,a=>{x(b=>({...b,[c]:a}))}),className:a.className},a.name)})}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 border-t border-zinc-200 dark:border-zinc-700 px-4 py-2",children:[(0,b.jsx)(d.motion.button,{type:"button",whileTap:{scale:.98},onClick:B,onMouseUp:a=>y.create(a,"dark"),className:"cursor-pointer px-6 py-1.5 rounded-xl text-sm bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-800 dark:text-zinc-100",children:"ยกเลิก"}),(0,b.jsxs)(d.motion.button,{whileTap:{scale:.98},type:"submit",className:"flex items-center gap-0.5 cursor-pointer px-8 py-1.5 rounded-xl text-sm bg-emerald-600 hover:bg-emerald-500 text-white disabled:opacity-50 disabled:cursor-not-allowed",onMouseUp:a=>y.create(a,"dark"),disabled:q,children:[(0,b.jsx)(h.Save,{size:17,strokeWidth:1.5}),q?"กำลังบันทึก...":s||(A?"บันทึกการแก้ไข":"บันทึก")]})]})]})})}},29567,a=>{"use strict";a.s(["convertDate",()=>d,"convertDateTime",()=>c]);var b=a.i(18213);let c=a=>(0,b.default)(a).locale("th").add(543,"years").format("วันที่ DD/MM/YYYY เวลา HH:mm น."),d=a=>(0,b.default)(a).locale("th").add(543,"years").format("DD MMM YYYY")},24458,a=>{"use strict";a.s(["default",()=>k],24458);var b=a.i(87924),c=a.i(21694),d=a.i(3220),e=a.i(92481),f=a.i(70106);let g=(0,f.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),h=(0,f.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var i=a.i(46271),j=a.i(39761);function k({isEdit:a,data:f,id:k,isOpenEdit:l,title:m,hdlDelete:n}){let o=new j.default;return(0,b.jsx)("div",{className:"w-full h-full py-1",children:(0,b.jsxs)("div",{className:"h-full flex gap-1.5 justify-center items-center",children:[(0,b.jsxs)(i.motion.button,{whileTap:{scale:.98},className:"h-full font-semibold dark:bg-zinc-700 bg-zinc-100 rounded-xl px-2 flex gap-0.5 items-center justify-center cursor-pointer hover:shadow",onClick:()=>{a(f),l(!0)},onMouseDown:a=>o.create(a),children:[(0,b.jsx)(g,{size:14}),"แก้ไข"]}),(0,b.jsxs)(c.Popover,{showArrow:!0,backdrop:"opaque",offset:10,placement:"bottom-end",children:[(0,b.jsx)(e.PopoverTrigger,{children:(0,b.jsxs)(i.motion.button,{whileTap:{scale:.98},onMouseUp:a=>o.create(a),className:"h-full text-white bg-rose-700 rounded-xl px-2 font-semibold cursor-pointer flex justify-center items-center gap-0.5 hover:shadow",children:[(0,b.jsx)(h,{size:14})," ลบ"]})}),(0,b.jsxs)(d.PopoverContent,{className:"flex flex-col gap-2 p-4",children:[(0,b.jsxs)("p",{className:"max-w-sm",children:['กด "ยืนยัน" เพื่อลบหัวข้อ " ',(0,b.jsx)("span",{className:"bg-amber-200 dark:bg-amber-600 px-1.5 rounded animate-pulse",children:m}),' " ออกจากระบบ']}),(0,b.jsx)(i.motion.button,{className:"w-full border border-rose-700 text-rose-700 font-semibold py-2 hover:bg-red-50 dark:hover:bg-rose-800 rounded-lg dark:bg-rose-700 dark:text-white cursor-pointer ",onMouseUp:a=>o.create(a),onClick:()=>n(k),children:"ยืนยัน"})]})]})]})})}},81893,a=>{"use strict";a.s(["default",()=>b]);let b=function(a){let{field:b,lockFn:c,highlightWhen:d="true",highlightColor:e="#303030",lockedColor:f="#ececec"}=a;return function(a){let g="function"==typeof c&&!!c(a.data,b),h=!1;if("function"==typeof d)h=!!d(a);else if("true"===d){let b;h=!0===(b=a.value)||1===b||"1"===b||"Y"===b||"y"===b||"true"===b}else"false"===d&&(h=!1===a.value||"0"===a.value||0===a.value);let i={display:"flex",justifyContent:"center",alignItems:"center",padding:0};return g?{...i,backgroundColor:f,cursor:"not-allowed",userSelect:"none"}:h?{...i,backgroundColor:e}:i}}},76250,a=>{"use strict";a.s(["default",()=>r]);var b=a.i(87924),c=a.i(76343),d=a.i(72131),e=a.i(81893),f=a.i(74308),g=a.i(13902),h=a.i(46271),i=a.i(29567),j=a.i(39761),k=a.i(91392),l=a.i(97063),m=a.i(16173),n=a.i(10237),o=a.i(18344),p=a.i(43670),q=a.i(24458);function r(){let{resolvedTheme:a}=(0,g.useTheme)(),[r,s]=(0,d.useState)(!1),[t,u]=(0,d.useState)(!1),[v,w]=(0,d.useState)(null),[x,y]=(0,d.useState)(!1),[z,A]=(0,d.useState)(!1),[B,C]=(0,d.useState)(!1),[D,E]=(0,d.useState)(!1),[F,G]=(0,d.useState)([]),[H,I]=(0,d.useState)([]),[J,K]=(0,d.useState)(localStorage.getItem("token")),L=new j.default;if((0,d.useEffect)(()=>s(!0),[]),null===localStorage.getItem("token"))return(0,b.jsx)(p.default,{});let M=[{field:"priority",headerName:"ลำดับ",minWidth:80,maxWidth:80},{field:"clinical_detail_name",headerName:"หัวข้อ",minWidth:100},{field:"check_status",headerName:"สถานะ",minWidth:80,maxWidth:80,cellStyle:(0,e.default)({field:"check_status",lockFn:(a,b)=>"true"===a[b],highlightWhen:"false",highlightColor:r&&"dark"===a?"#303030":"#D7D7D7"})},{fields:"patient_group_name",headerName:"กลุ่มคนไข้",minWidth:230,valueGetter:a=>`${a.data?.patient_services?.patient_service_name_english} - ${a.data?.patient_services?.patient_service_name_thai}`},{field:"created_at",valueGetter:a=>(0,i.convertDateTime)(a.data.created_at),headerName:"วันที่สร้าง",minWidth:200},{field:"created_by",headerName:"ชื่อที่สร้าง",minWidth:150},{field:"updated_at",valueGetter:a=>(0,i.convertDateTime)(a.data.updated_at),headerName:"วันที่แก้ไข",minWidth:200},{field:"updated_by",headerName:"ชื่อที่แก้ไข",minWidth:150},{headerName:"ตัวเลือก",cellRenderer:a=>(0,b.jsx)(q.default,{isEdit:w,isOpenEdit:u,hdlDelete:R,data:a.data,title:a.data.clinical_detail_name,id:a.data.clinical_detail_id}),minWidth:130,maxWidth:130,pinned:"right",cellStyle:{display:"flex",justifyContent:"center",alignItems:"center",padding:0},sortable:!1}];(0,d.useEffect)(()=>{N(),O()},[]);let N=async()=>{y(!0);try{let a=await c.default.get("/setting/clinicalDetails",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(a.data);let b=a.data.data.map((a,b)=>({...a,numeric_id:b+1}));G(b),y(!1)}catch(a){console.log(a),y(!1),G([])}},O=async()=>{y(!0);try{let a=(await c.default.get("/setting/pts",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data.map((a,b)=>({...a,numeric_id:b+1}));I(a)}catch(a){console.log(a)}},P=async a=>{if(null!==v)return Q(a);A(!0);try{let b=await c.default.post("/setting/clinicalDetails",a,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});200===b.status&&((0,o.addToast)({title:"สําเร็จ",description:b.data.message,timeout:8e3,color:"success",shouldShowTimeoutProgress:!0}),N(),u(!1),A(!1),w(null))}catch(a){console.log(a),(0,o.addToast)({title:"เกิดข้อผิดพลาด",description:a.response.data.message,timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0}),A(!1)}},Q=async a=>{E(!0);let{patient_service_id:b,...d}=a;try{let a=await c.default.put(`/setting/clinicalDetails/${v.clinical_detail_id}`,d,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});200===a.status&&((0,o.addToast)({title:"สําเร็จ",description:a.data.message,timeout:8e3,color:"success",shouldShowTimeoutProgress:!0}),N(),u(!1),w(null),E(!1))}catch(a){console.log(a),(0,o.addToast)({title:"เกิดข้อผิดพลาด",description:a.response.data.message,timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0}),E(!1)}},R=async a=>{C(!0);try{let b=await c.default.delete(`/setting/clinicalDetails/${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});200===b.status&&((0,o.addToast)({title:"สําเร็จ",description:b.data.message,timeout:8e3,color:"success",shouldShowTimeoutProgress:!0}),N(),u(!1),w(null),C(!1))}catch(a){console.log(a),(0,o.addToast)({title:"เกิดข้อผิดพลาด",description:a.response.data.message,timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0}),C(!1)}},S=(0,d.useMemo)(()=>H?.map(a=>({key:a.patient_service_id,label:`${a.patient_service_name_english} - ${a.patient_service_name_thai}`})),[H]),T=(0,d.useMemo)(()=>[{type:"text",name:"clinical_detail_name",label:"หัวข้อ",placeholder:"......",required:!0,radius:"sm"},{type:"checkbox",name:"check_status",label:"สถานะ",radius:"sm"},{type:"select",name:"patient_service_id",label:"เลือกแผนก",required:!0,placeholder:"เลือกแผนก",options:S,selectionMode:"single",disableWhenEdit:!0,radius:"sm",className:"w-full mt-2"}],[S]);return(0,b.jsxs)(b.Fragment,{children:[(z||B||D)&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center dark:bg-black/80 bg-white/40 backdrop-blur-sm",children:(0,b.jsx)(n.default,{title:z?"กําลังเพิ่มข้อมูล...":B?"กําลังลบข้อมูล...":"กําลังอัพเดตข้อมูล..."})}),(0,b.jsx)(k.default,{isOpen:t,onClose:()=>{u(!1),w(null)},onSubmit:P,loading:z||D,title:"Review Status",submitLabel:v?"บันทึกการแก้ไข":"บันทึก",editData:v,fields:T}),(0,b.jsxs)("div",{className:"mb-4 grid gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-lg",children:"หัวข้อ Clinic Details"}),(0,b.jsxs)("div",{className:"flex gap-1 items-center text-sm font-medium text-zinc-800 dark:text-zinc-300",children:[(0,b.jsx)(l.Info,{size:16}),(0,b.jsx)("p",{children:"ช่องข้อมูลที่มีการ ติ๊กถูก คือช่องที่จะต้องกรอกข้อมูลในแบบฟอร์ม"})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsxs)(h.motion.button,{onClick:()=>u(!0),onMouseDown:a=>L.create(a,"dark"),className:"flex gap-0.5 items-center px-3 py-2 text-sm cursor-pointer bg-emerald-600 text-white rounded-full hover:bg-emerald-500 dark:hover:bg-emerald-700",whileTap:{scale:.98},children:[(0,b.jsx)(m.ListFilterPlus,{size:18}),"เพิ่มหัวข้อ"]})})})]}),(0,b.jsx)(f.default,{columnDefs:M,rowData:F,loading:x,pagination:!1})]})}},80672,a=>{a.v(b=>Promise.all(["server/chunks/ssr/node_modules_94990923._.js"].map(b=>a.l(b))).then(()=>b(61831)))}];

//# sourceMappingURL=_c8349d14._.js.map