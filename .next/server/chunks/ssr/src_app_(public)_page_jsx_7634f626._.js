module.exports=[39979,a=>{"use strict";a.s(["default",()=>I],39979);var b=a.i(87924),c=a.i(72131),d=a.i(76343),e=a.i(62036),f=a.i(46271),g=a.i(21520),h=a.i(70106);let i=(0,h.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),j=(0,h.default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var k=a.i(2992);let l=(0,h.default)("file-pen-line",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);var m=a.i(61109),n=a.i(18344),o=a.i(80908),p=(0,a.i(93611).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-shimmer","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),q=a.i(5554),r=a.i(8933),s=(0,o.forwardRef)((a,d)=>{let{Component:e,children:f,getSkeletonProps:g,getContentProps:h}=function(a){var b,d;let e=(0,r.useProviderContext)(),[f,g]=(0,o.mapPropsVariants)(a,p.variantKeys),{as:h,children:i,isLoaded:j=!1,className:k,classNames:l,...m}=f,n=null!=(d=null!=(b=a.disableAnimation)?b:null==e?void 0:e.disableAnimation)&&d,s=(0,c.useMemo)(()=>p({...g,disableAnimation:n}),[(0,q.objectToDeps)(g),n,i]),t=(0,q.clsx)(null==l?void 0:l.base,k);return{Component:h||"div",children:i,slots:s,classNames:l,getSkeletonProps:(a={})=>({"data-loaded":(0,q.dataAttr)(j),className:s.base({class:(0,q.clsx)(t,null==a?void 0:a.className)}),...m}),getContentProps:(a={})=>({className:s.content({class:(0,q.clsx)(null==l?void 0:l.content,null==a?void 0:a.className)})})}}({...a});return(0,b.jsx)(e,{ref:d,...g(),children:(0,b.jsx)("div",{...h(),children:f})})});function t({text:a}){return(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-zinc-300 dark:border-zinc-700 p-6 text-center text-sm text-zinc-500 dark:text-zinc-400",children:a})}function u({name:a,value:c,average:d}){return(0,b.jsxs)("div",{className:"rounded-xl border flex justify-between border-zinc-200 dark:border-[#3a3a3a] p-3 bg-white/5 backdrop-blur-2xl shadow-lg shadow-zinc-950/5 dark:shadow-zinc-800/40",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-1",children:a}),(0,b.jsx)("p",{className:"text-xl font-semibold",children:Number(c).toLocaleString("th-TH")})]}),(0,b.jsx)("div",{children:d?(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mb-1 text-right",children:"ค่าเฉลี่ย"}),(0,b.jsx)("p",{className:"text-xl font-semibold",children:Number(d).toLocaleString("th-TH")})]}):null})]})}s.displayName="HeroUI.Skeleton";var v=a.i(13490);function w({name:a,value:d,total:e,token:g,fetchDashboardWard:h,setShowModal:i,averageWard:j,loading:k}){let l=Math.min(100,Math.round(Number(d||0)/e*100)),[m,n]=(0,c.useState)(!1),o=new v.default;return(0,c.useEffect)(()=>{g&&n(!0)},[]),console.log(d),(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},onClick:()=>m&&void(i(!0),h(a)),onMouseDown:a=>m&&o.create(a),className:`${m?"cursor-pointer":"cursor-default"} rounded-xl border backdrop-blur-2xl bg-white/5 border-zinc-200 dark:border-[#3a3a3a] p-3 shadow-lg shadow-zinc-950/5 dark:shadow-zinc-800/40`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:"font-medium",children:a}),(0,b.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:Number(d).toLocaleString("th-TH")})]}),(0,b.jsx)("div",{className:"mt-2 h-2 w-full rounded-full bg-zinc-100 dark:bg-zinc-600 overflow-hidden",children:(0,b.jsx)("div",{className:"h-full rounded-full shadow bg-gradient-to-r from-emerald-500 to-emerald-600 dark:bg-emerald-600",style:{width:`${l}%`},"aria-label":`${a} ${l}%`})}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-300 mt-1",children:j?`ค่าเฉลี่ย ${Number(j).toLocaleString("th-TH")} %`:""})})]})}function x({icon:a,label:c,value:d,hint:e,average:g,loading:h}){return(0,b.jsx)(f.motion.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},className:"rounded-2xl border border-zinc-300 dark:border-[#505050] bg-white dark:bg-[#181818] p-4 shadow-lg shadow-zinc-950/5",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[h?(0,b.jsx)(s,{className:"h-8 w-8 rounded-xl bg-zinc-200 dark:bg-[#303030]"}):(0,b.jsx)("div",{className:"rounded-xl bg-zinc-100 dark:bg-zinc-800 p-2.5",children:a}),(0,b.jsx)("div",{children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s,{className:"h-3 w-20 mb-2 rounded-md"}),(0,b.jsx)(s,{className:"h-6 w-24 mb-1 rounded-md"}),(0,b.jsx)(s,{className:"h-3 w-32 rounded-md"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 line-clamp-1",children:c}),(0,b.jsx)("p",{className:"text-2xl font-semibold leading-tight",children:Number(d).toLocaleString("th-TH")}),e?(0,b.jsx)("p",{className:"text-xs text-zinc-400 mt-0.5",children:e}):null]})}),void 0!==g&&(0,b.jsx)("div",{className:"ml-auto text-right",children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s,{className:"h-3 w-12 mb-2 rounded-md"}),(0,b.jsx)(s,{className:"h-6 w-20 rounded-md"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"ค่าเฉลี่ย"}),(0,b.jsx)("p",{className:"text-2xl font-semibold leading-tight",children:Number(g).toLocaleString("th-TH")})]})})]})})}var y=a.i(67900),z=a.i(33508),A=a.i(65062),B=a.i(90589);function C({data:a}){let c=new v.default,d=(0,B.useRouter)(),e=!!a.form_ipd.total_score&&!!a.form_ipd.score_obtained&&!!a.form_ipd.percentage,g=a.form_ipd.percentage||0,h=async a=>{let b=await (0,A.cryptoEncode)(a);d.replace(`/pdf/${encodeURIComponent(b)}`)};return(0,b.jsx)(f.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.25},onClick:()=>e&&h(a.patient_an),onMouseDown:a=>e&&c.create(a),className:`w-full rounded-xl border border-zinc-200 dark:border-[#3a3a3a] p-3 my-2 ${e?"cursor-pointer active:bg-white/5":"cursor-auto"}`,children:(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,b.jsxs)("p",{className:"font-bold",children:["AN ",a.patient_an]}),(0,b.jsxs)("p",{className:"text-xs line-clamp-1 w-[20%]",title:`${a?.patient_id}`,children:["(",a.patient_id,")"]})]}),(0,b.jsxs)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["คะแนนรวม : ",a?.form_ipd?.total_score||0," | คะแนนที่ได้ : ",a?.form_ipd?.score_obtained||0," | ค่าร้อยละ : ",a?.form_ipd?.percentage||0,"%"]})]}),(0,b.jsx)("p",{className:`text-xs font-semibold flex flex-col items-end h-fit px-4 py-1 rounded-full ${e?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-200":"bg-amber-100 text-amber-600 dark:bg-amber-900 dark:text-amber-200"}`,children:e?"สมบูรณ์":"ยังไม่สมบูรณ์"})]}),(0,b.jsxs)("div",{className:"my-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,b.jsx)("span",{className:"text-zinc-500",children:"คะแนนที่ได้คิดเป็น %"}),(0,b.jsx)("span",{className:"font-medium",children:null==g?"-":`${g}%`})]}),(0,b.jsx)("div",{className:"h-2 rounded-full bg-zinc-100 dark:bg-zinc-700 overflow-hidden",children:(0,b.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-500 to-emerald-600",style:{width:`${g??0}%`}})})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsxs)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["ผู้สร้าง : ",a?.form_ipd?.created_by," | เมื่อ ",new Date(a?.form_ipd?.created_at).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"})]}),(0,b.jsxs)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["ผู้แก้ไขล่าสุด : ",a?.form_ipd?.updated_by," | เมื่อ ",new Date(a?.form_ipd?.updated_at).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"})]})]})]})},a.form_ipd?.form_ipd_id)}var D=a.i(10237);let E={open:{opacity:1,transition:{duration:.18},pointerEvents:"auto"},closed:{opacity:0,transition:{duration:.18},pointerEvents:"none"}},F={open:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:260,damping:22}},closed:{opacity:0,scale:.96,y:8,transition:{duration:.16}}};function G({title:a,subtitle:d,data:e=[],onClose:g,loading:h}){let i=new v.default;return(0,c.useEffect)(()=>{let a=a=>"Escape"===a.key&&g();window.addEventListener("keydown",a);let b=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow=b}},[g]),(0,b.jsx)(f.motion.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-[2px] p-4",variants:E,initial:"closed",animate:"open",exit:"closed",onMouseDown:g,children:(0,b.jsxs)(f.motion.div,{variants:F,onMouseDown:a=>a.stopPropagation(),className:"relative w-full max-w-2xl rounded-2xl bg-white dark:bg-[#1f1f1f] shadow-2xl ring-1 ring-black/5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between border-b border-zinc-200 dark:border-zinc-700 px-4 py-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a}),!h&&(0,b.jsxs)("p",{className:"font-bold text-xs text-zinc-600 flex items-center gap-1",children:[(0,b.jsx)(y.Building2,{size:14}),d]})]}),(0,b.jsx)("button",{onMouseDown:a=>{i.create(a),g()},className:"cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10","aria-label":"Close",children:(0,b.jsx)(z.X,{size:18})})]}),(0,b.jsx)(f.motion.div,{className:"px-4 py-2 overflow-y-auto max-h-[calc(100vh-40vh)]",children:h?(0,b.jsx)("div",{className:"flex justify-center items-center my-6",children:(0,b.jsx)(D.default,{title:"กําลังโหลดข้อมูล..."})}):e.map((a,c)=>(0,b.jsx)(C,{data:a},a?.form_ipd?.form_ipd_id??a?.patient_an??c))}),(0,b.jsx)("div",{className:"text-xs text-zinc-400 flex items-center justify-end border-t border-zinc-200 dark:border-zinc-700 px-4 py-3",children:(0,b.jsx)("p",{children:"กลุ่มงานสุขภาพดิจิทัล โรงพยาบาลอากาศอำนวย"})})]})})}var H=a.i(42829);function I(){let{hnameStatus:a}=(0,H.default)(),[h,o]=(0,c.useState)({countAll:0,countWard:[],countPatientService:[]}),[p,q]=(0,c.useState)(!0),[r,v]=(0,c.useState)(null),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),I=localStorage.getItem("token");(0,g.useMotionValue)(0),(0,g.useMotionValue)(0),(0,c.useEffect)(()=>{J()},[]);let J=async()=>{try{let a=await d.default.get("/dashboard");o(a.data??{}),v(null)}catch(a){v(a)}finally{q(!1)}},K=async a=>{z(""),D(!0);try{let b=await d.default.get(`/dashboard/${a}`,{headers:{Authorization:`Bearer ${I}`}});B(b.data.data??{}),z(a)}catch(a){console.log(a),(0,n.addToast)({title:"เกิดข้อผิดพลาด",description:a.response.data.message,timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0})}finally{D(!1)}},L=(0,c.useMemo)(()=>Array.isArray(h.countWard)?h.countWard.reduce((a,b)=>a+(Number(b?.result)||0),0):0,[h.countWard]),M=(0,c.useMemo)(()=>Array.isArray(h.countPatientService)?h.countPatientService.reduce((a,b)=>a+(Number(b?.result)||0),0):0,[h.countPatientService]);return!r||a||p?a?(0,b.jsx)(m.ErrorBanner,{err:{message:"เกิดข้อผิดพลาด 404",config:{url:"/*"},response:{status:404,data:{message:"ระบบตรวจพบว่าไม่มีการตั้งค่าชื่อโรงพยาบาล กรุณาตั้งค่าก่อนใช้งาน",errors:{Hcode:"ไม่มีการตั้งค่ารหัสโรงพยาบาล",Hname:"ไม่มีการตั้งค่าชื่อโรงพยาบาล"}}}}}):(0,b.jsxs)("div",{className:"space-y-6 select-none",children:[(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(x,{icon:(0,b.jsx)(j,{className:"size-5"}),label:"จำนวนทั้งหมด",value:h?.countAll??0,average:p?void 0:h?.averageAll?.[0]?.average??0,loading:p}),(0,b.jsx)(x,{icon:(0,b.jsx)(i,{className:"size-5"}),label:"จำนวนตามประเภทบริการ",value:M,hint:h.countPatientService?.map(a=>a.patient_service_name_english).join(" • "),loading:p}),(0,b.jsx)(x,{icon:(0,b.jsx)(k.FileCheck2,{className:"size-5"}),label:"ฟอร์มที่สมบูรณ์",value:h.countAllPercentageNotNull||0,hint:`ทั้งหมด ${h.countAll||0} ฟอร์ม`,loading:p}),(0,b.jsx)(x,{icon:(0,b.jsx)(l,{className:"size-5"}),label:"ฟอร์มที่ยังไม่สมบูรณ์",value:h.countAllPercentageNull||0,hint:`ทั้งหมด ${h.countAll||0} ฟอร์ม`,loading:p})]}),(0,b.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"rounded-2xl border border-zinc-300 dark:border-[#505050] bg-white dark:bg-[#181818]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-200 dark:border-[#3a3a3a]",children:[p?(0,b.jsx)(s,{className:"h-5 w-full max-w-32 rounded-md"}):(0,b.jsx)("p",{className:"font-semibold",children:"จำนวนฟอร์มของตึก"}),p?(0,b.jsx)(s,{className:"h-4 w-12 rounded-md"}):(0,b.jsxs)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["รวม ",L.toLocaleString("th-TH")]})]}),(0,b.jsx)("div",{className:"p-4 space-y-3",children:Array.isArray(h.countWard)&&h.countWard.length>0?h.countWard.map(a=>(0,b.jsx)(w,{name:a.patient_ward,value:a.result,total:L||1,token:I,averageWard:h.averageWard.find(b=>b.patient_ward===a.patient_ward)?.average||0,fetchDashboardWard:K,setShowModal:F},a.patient_ward)):(0,b.jsx)(t,{text:p?"กําลังโหลดข้อมูล...":"ยังไม่มีข้อมูลตึก"})})]}),(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"lg:col-span-2 rounded-2xl border border-zinc-300 dark:border-[#505050] bg-white dark:bg-[#181818]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-200 dark:border-[#3a3a3a]",children:[p?(0,b.jsx)(s,{className:"h-5 w-full max-w-32 rounded-md"}):(0,b.jsx)("p",{className:"font-semibold",children:"จำนวนฟอร์มตามประเภทบริการ"}),p?(0,b.jsx)(s,{className:"h-4 w-12 rounded-md"}):(0,b.jsxs)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["รวม ",M.toLocaleString("th-TH")]})]}),(0,b.jsx)("div",{className:"p-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:Array.isArray(h.countPatientService)&&h.countPatientService.length>0?h.countPatientService.map(a=>(0,b.jsx)(u,{name:a.patient_service_name_english,value:a.result,average:h.averagePatientServiceNameEnglish.find(b=>b.patient_service_name_english===a.patient_service_name_english)?.average||0},a.patient_service_name_english)):(0,b.jsx)("div",{className:"col-span-full",children:(0,b.jsx)(t,{text:p?"กําลังโหลดข้อมูล...":"ยังไม่มีข้อมูลประเภทบริการ"})})})]})]}),(0,b.jsx)(e.AnimatePresence,{mode:"sync",children:E&&(0,b.jsx)(G,{title:"จำนวนฟอร์มของตึก",subtitle:y,data:A,onClose:()=>{F(!1),z(""),B([])},loading:C},"ward")})]}):(0,b.jsx)(m.ErrorBanner,{err:r,onRetry:J,autoRetrySec:10,onDismiss:()=>v(null)})}}];

//# sourceMappingURL=src_app_%28public%29_page_jsx_7634f626._.js.map