module.exports=[39979,a=>{"use strict";a.s(["default",()=>Dq],39979);var b,c,d,e,f,g,h,i=a.i(87924),j=a.i(72131),k=a.i(76343),l=a.i(62036),m=a.i(46271),n=a.i(70106);let o=(0,n.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),p=(0,n.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),q=(0,n.default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var r=a.i(2992);let s=(0,n.default)("file-pen-line",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);var t=a.i(61109),u=a.i(18344),v=a.i(80908),w=(0,a.i(93611).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-shimmer","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),x=a.i(5554),y=a.i(8933),z=(0,v.forwardRef)((a,b)=>{let{Component:c,children:d,getSkeletonProps:e,getContentProps:f}=function(a){var b,c;let d=(0,y.useProviderContext)(),[e,f]=(0,v.mapPropsVariants)(a,w.variantKeys),{as:g,children:h,isLoaded:i=!1,className:k,classNames:l,...m}=e,n=null!=(c=null!=(b=a.disableAnimation)?b:null==d?void 0:d.disableAnimation)&&c,o=(0,j.useMemo)(()=>w({...f,disableAnimation:n}),[(0,x.objectToDeps)(f),n,h]),p=(0,x.clsx)(null==l?void 0:l.base,k);return{Component:g||"div",children:h,slots:o,classNames:l,getSkeletonProps:(a={})=>({"data-loaded":(0,x.dataAttr)(i),className:o.base({class:(0,x.clsx)(p,null==a?void 0:a.className)}),...m}),getContentProps:(a={})=>({className:o.content({class:(0,x.clsx)(null==l?void 0:l.content,null==a?void 0:a.className)})})}}({...a});return(0,i.jsx)(c,{ref:b,...e(),children:(0,i.jsx)("div",{...f(),children:d})})});function A({text:a}){return(0,i.jsx)("div",{className:"rounded-xl border border-dashed border-zinc-300 dark:border-zinc-700 p-6 text-center text-sm text-zinc-500 dark:text-zinc-400",children:a})}z.displayName="HeroUI.Skeleton";var B=a.i(39761),C=a.i(46812);let D=(0,n.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);function E({name:a,value:b,fetchDashboardVN:c,average:d,setShowModal:e,openChartVNModal:f}){let[g,h]=(0,j.useState)(!1),k=new B.default;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{onClick:void 0,onMouseDown:void 0,className:`rounded-xl border flex justify-between border-zinc-200 dark:border-[#3a3a3a] p-3 bg-white/5 backdrop-blur-2xl shadow-lg shadow-zinc-950/5 dark:shadow-zinc-800/40 ${!1}`,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-1",children:a}),(0,i.jsx)("p",{className:"text-xl font-semibold",children:Number(b).toLocaleString("th-TH")})]}),(0,i.jsx)("div",{children:d?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mb-1 text-right",children:"ค่าเฉลี่ย"}),(0,i.jsx)("p",{className:"text-xl font-semibold",children:Number(d).toLocaleString("th-TH")})]}):null})]}),(0,i.jsx)(l.AnimatePresence,{children:g&&(0,i.jsx)(C.default,{type:"info",title:"ตัวเลือก",message:(0,i.jsxs)(m.motion.div,{className:"flex flex-col gap-3 justify-center items-center",children:[(0,i.jsx)("p",{className:"text-base font-semibold",children:"เลือกข้อมูลที่ต้องการดูของ OPD"}),(0,i.jsx)(l.AnimatePresence,{children:(0,i.jsxs)(m.motion.div,{className:"flex gap-4 items-center justify-around w-full",children:[(0,i.jsxs)(m.motion.button,{whileTap:{scale:.98},className:"w-full text-white font-semibold bg-[#00B4A2] hover:bg-[#009C8D] rounded-xl px-4 py-1.5 flex gap-1 items-center justify-center cursor-pointer hover:shadow",onClick:a=>void(f(),h(!1)),onMouseDown:a=>k.create(a,"ligth"),children:[(0,i.jsx)(p,{strokeWidth:3,size:16}),"ดูกราฟ"]}),(0,i.jsxs)(m.motion.button,{whileTap:{scale:.98},className:"w-full font-semibold dark:bg-zinc-700 bg-white rounded-xl px-4 py-1.5 flex gap-1 items-center justify-center cursor-pointer hover:shadow",onClick:a=>void(e(!0),c(),h(!1)),onMouseDown:a=>k.create(a),children:[(0,i.jsx)(D,{strokeWidth:3,size:16}),"ข้อมูล VN"]})]})})]}),onClose:()=>h(!1)})})]})}function F({name:a,value:b,total:c,token:d,fetchDashboardWard:e,setShowModal:f,averageWard:g,loading:h}){let k=Math.min(100,Math.round(Number(b||0)/c*100)),[l,n]=(0,j.useState)(!1),o=new B.default;return(0,j.useEffect)(()=>{d&&n(!0)},[]),(0,i.jsxs)(m.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},onClick:()=>l&&void(f(!0),e(a)),onMouseDown:a=>l&&o.create(a),className:`${l?"cursor-pointer":"cursor-default"} rounded-xl border backdrop-blur-2xl bg-white/5 border-zinc-200 dark:border-[#3a3a3a] p-3 shadow-lg shadow-zinc-950/5 dark:shadow-zinc-800/40`,children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("p",{className:"font-medium",children:a}),(0,i.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:Number(b).toLocaleString("th-TH")})]}),(0,i.jsx)("div",{className:"mt-2 h-2 w-full rounded-full bg-zinc-100 dark:bg-zinc-600 overflow-hidden",children:(0,i.jsx)("div",{className:"h-full rounded-full shadow bg-gradient-to-r from-emerald-500 to-emerald-600 dark:bg-emerald-600",style:{width:`${k}%`},"aria-label":`${a} ${k}%`})}),(0,i.jsx)("div",{className:"text-right",children:(0,i.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-300 mt-1",children:g?`ค่าเฉลี่ย ${Number(g).toLocaleString("th-TH")} %`:""})})]})}function G({icon:a,label:b,value:c,hint:d,average:e,loading:f}){return(0,i.jsx)(m.motion.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},className:"rounded-2xl border border-zinc-300 dark:border-[#505050] bg-white dark:bg-[#181818] p-4 shadow-lg shadow-zinc-950/5",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[f?(0,i.jsx)(z,{className:"h-8 w-8 rounded-xl bg-zinc-200 dark:bg-[#303030]"}):(0,i.jsx)("div",{className:"rounded-xl bg-zinc-100 dark:bg-zinc-800 p-2.5",children:a}),(0,i.jsx)("div",{children:f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z,{className:"h-3 w-20 mb-2 rounded-md"}),(0,i.jsx)(z,{className:"h-6 w-24 mb-1 rounded-md"}),(0,i.jsx)(z,{className:"h-3 w-32 rounded-md"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 line-clamp-1",children:b}),(0,i.jsx)("p",{className:"text-2xl font-semibold leading-tight",children:Number(c).toLocaleString("th-TH")}),d?(0,i.jsx)("p",{className:"text-xs text-zinc-400 mt-0.5",children:d}):null]})}),void 0!==e&&(0,i.jsx)("div",{className:"ml-auto text-right",children:f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z,{className:"h-3 w-12 mb-2 rounded-md"}),(0,i.jsx)(z,{className:"h-6 w-20 rounded-md"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"ค่าเฉลี่ย"}),(0,i.jsx)("p",{className:"text-2xl font-semibold leading-tight",children:Number(e).toLocaleString("th-TH")})]})})]})})}var H=a.i(67900);let I=(0,n.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),J=(0,n.default)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]);var K=a.i(33508),L=a.i(51433),M=a.i(90589);function N({data:a}){let b=new B.default,c=(0,M.useRouter)(),d=!!((a?.form_ipd?.total_score||a?.total_score)&&(a?.form_ipd?.score_obtained||a?.score_obtained)&&(a?.form_ipd?.percentage||a?.percentage)),e=a?.form_ipd?.percentage||a?.percentage||0,f=async a=>{let b=await (0,L.cryptoEncode)(a);return 9==a.length?c.replace(`/pdf/ipd/${encodeURIComponent(b)}`):c.replace(`/pdf/opd/${encodeURIComponent(b)}`)};return(0,i.jsx)(m.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.25},onClick:()=>d&&f(a.patient_an||a?.patients?.patient_vn),onMouseDown:a=>d&&b.create(a),className:`w-full rounded-xl border border-zinc-200 dark:border-[#3a3a3a] p-3 ${d?"cursor-pointer active:bg-white/5":"cursor-auto"}`,children:(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,i.jsx)("p",{className:"font-bold",children:a.patient_an&&`AN ${a.patient_an}`||a?.patients?.patient_vn&&`VN ${a?.patients?.patient_vn}`}),(0,i.jsxs)("p",{className:"text-xs line-clamp-1 w-[20%]",title:`${a?.patient_id}`,children:["(",a.patient_id,")"]})]}),(0,i.jsxs)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["คะแนนรวม : ",a?.form_ipd?.total_score||a?.total_score||0," | คะแนนที่ได้ : ",a?.form_ipd?.score_obtained||a?.score_obtained||0," | ค่าร้อยละ : ",a?.form_ipd?.percentage||a?.percentage||0,"%"]})]}),(0,i.jsx)("p",{className:`text-xs font-semibold flex flex-col items-end h-fit px-4 py-1 rounded-full text-nowrap ${d?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-200":"bg-amber-100 text-amber-600 dark:bg-amber-900 dark:text-amber-200"}`,children:d?"สมบูรณ์":"ยังไม่สมบูรณ์"})]}),(0,i.jsxs)("div",{className:"my-1",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,i.jsx)("span",{className:"text-zinc-500",children:"คะแนนที่ได้คิดเป็น %"}),(0,i.jsx)("span",{className:"font-medium",children:null==e?"-":`${e}%`})]}),(0,i.jsx)("div",{className:"h-2 rounded-full bg-zinc-100 dark:bg-zinc-700 overflow-hidden",children:(0,i.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-500 to-emerald-600",style:{width:`${e??0}%`}})})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 line-clamp-2",children:["ผู้สร้าง : ",a?.form_ipd?.created_by||a?.created_by," | เมื่อ ",new Date(a?.form_ipd?.created_at||a?.created_at).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"})]}),(0,i.jsxs)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 line-clamp-2",children:["ผู้แก้ไขล่าสุด : ",a?.form_ipd?.updated_by||a?.updated_by," | เมื่อ ",new Date(a?.form_ipd?.updated_at||a?.updated_at).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"})]})]})]})},a.form_ipd?.form_ipd_id)}var O=a.i(10237),P=a.i(42829);let Q={open:{opacity:1,transition:{duration:.18},pointerEvents:"auto"},closed:{opacity:0,transition:{duration:.18},pointerEvents:"none"}},R={open:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:260,damping:22}},closed:{opacity:0,scale:.96,y:8,transition:{duration:.16}}};function S({title:a,subtitle:b,data:c=[],onClose:d,loading:e}){let{hname:f,hcode:g}=(0,P.default)(),h=new B.default,[k,l]=(0,j.useState)(!1);(0,j.useEffect)(()=>{let a=a=>"Escape"===a.key&&d();window.addEventListener("keydown",a);let b=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow=b}},[d]);let n={compleateFormsLength:(0,j.useMemo)(()=>c.filter(a=>a.form_ipd?.percentage!=null&&a.form_ipd?.total_score!=null&&a.form_ipd?.score_obtained!=null).length,[c]),notCompleateFormsLength:(0,j.useMemo)(()=>c.filter(a=>a.form_ipd?.percentage==null&&a.form_ipd?.total_score==null&&a.form_ipd?.score_obtained==null).length,[c]),totalFormsLength:c.length};return(0,i.jsx)(m.motion.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-[2px]",variants:Q,initial:"closed",animate:"open",exit:"closed",onMouseDown:d,children:(0,i.jsxs)(m.motion.div,{initial:"closed",animate:"open",layout:!0,variants:R,onMouseDown:a=>a.stopPropagation(),className:["relative bg-white dark:bg-[#1f1f1f] shadow-2xl ring-1 ring-black/5",k?"w-screen h-screen max-w-none rounded-none":"w-full max-w-2xl rounded-2xl m-4"].join(" "),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between border-b border-zinc-200 dark:border-zinc-700 px-4 py-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-semibold",children:a}),!e&&(0,i.jsxs)("p",{className:"font-bold text-xs text-zinc-600 dark:text-zinc-400 flex items-center gap-1",children:[(0,i.jsx)(H.Building2,{size:14}),b]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(m.motion.button,{whileTap:{scale:.98},onMouseDown:a=>{h.create(a),l(a=>!a)},className:"cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10","aria-label":k?"Restore":"Maximize",title:k?"ย่อกลับ":"ขยายเต็มจอ",children:k?(0,i.jsx)(J,{size:18}):(0,i.jsx)(I,{size:18})}),!k&&(0,i.jsx)(m.motion.button,{whileTap:{scale:.98},onMouseDown:a=>{h.create(a),d()},className:"cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10","aria-label":"Close",children:(0,i.jsx)(K.X,{size:18})})]})]}),(0,i.jsx)(m.motion.div,{layout:!0,className:k?"px-4 py-2 overflow-y-auto h-[calc(100vh-6rem)]":"px-4 py-2 overflow-y-auto max-h-[calc(100vh-40vh)]",children:e?(0,i.jsx)("div",{className:"flex justify-center items-center my-6",children:(0,i.jsx)(O.default,{title:"กำลังโหลดข้อมูล..."})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex justify-between gap-2 mb-3 text-sm font-medium",children:[(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("div",{className:"bg-green-100 dark:bg-green-900/40 rounded-xl px-3 py-2",children:(0,i.jsxs)("p",{className:"text-green-700 dark:text-green-300",children:["สมบูรณ์ ",n.compleateFormsLength," ฟอร์ม"]})}),(0,i.jsx)("div",{className:"bg-amber-100 dark:bg-amber-900/40 rounded-xl px-3 py-2",children:(0,i.jsxs)("p",{className:"text-amber-700 dark:text-amber-300",children:["ยังไม่สมบูรณ์ ",n.notCompleateFormsLength," ฟอร์ม"]})})]}),(0,i.jsx)("div",{className:"bg-sky-100 dark:bg-sky-900/40 rounded-xl px-3 py-2",children:(0,i.jsxs)("p",{className:"text-sky-700 dark:text-sky-300",children:["รวมทั้งหมด ",n.totalFormsLength," ฟอร์ม"]})})]}),(0,i.jsx)(m.motion.div,{className:`grid ${k&&"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"} gap-2`,children:c.map((a,b)=>(0,i.jsx)(N,{data:a},a?.form_ipd?.form_ipd_id??a?.patient_an??b))})]})}),(0,i.jsx)("div",{className:"text-xs text-zinc-400 flex items-center justify-end border-t border-zinc-200 dark:border-zinc-700 px-4 py-3",children:(0,i.jsxs)("p",{children:[f," ",g]})})]})})}let T={open:{opacity:1,transition:{duration:.18},pointerEvents:"auto"},closed:{opacity:0,transition:{duration:.18},pointerEvents:"none"}},U={open:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:260,damping:22}},closed:{opacity:0,scale:.96,y:8,transition:{duration:.16}}};function V({title:a,subtitle:b,data:c=[],onClose:d,loading:e}){let{hname:f,hcode:g}=(0,P.default)(),h=new B.default,[k,l]=(0,j.useState)(!1);(0,j.useEffect)(()=>{let a=a=>"Escape"===a.key&&d();window.addEventListener("keydown",a);let b=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow=b}},[d]);let n={compleateFormsLength:(0,j.useMemo)(()=>c.filter(a=>a?.percentage!=null&&a?.total_score!=null&&a?.score_obtained!=null).length,[c]),notCompleateFormsLength:(0,j.useMemo)(()=>c.filter(a=>a?.percentage==null&&a?.total_score==null&&a?.score_obtained==null).length,[c]),totalFormsLength:c.length};return console.log(c),(0,i.jsx)(m.motion.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 dark:bg-white/5 backdrop-blur-xs",variants:T,initial:"closed",animate:"open",exit:"closed",onMouseDown:d,children:(0,i.jsxs)(m.motion.div,{initial:"closed",animate:"open",layout:!0,variants:U,onMouseDown:a=>a.stopPropagation(),className:["relative bg-white dark:bg-[#1f1f1f] shadow-2xl ring-1 ring-black/5",k?"w-screen h-screen max-w-none rounded-none":"w-full max-w-2xl rounded-2xl m-4"].join(" "),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between border-b border-zinc-200 dark:border-zinc-700 px-4 py-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-semibold",children:a}),!e&&b&&(0,i.jsxs)("p",{className:"font-bold text-xs text-zinc-600 dark:text-zinc-400 flex items-center gap-1",children:[(0,i.jsx)(H.Building2,{size:14}),b]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(m.motion.button,{whileTap:{scale:.98},onMouseDown:a=>{h.create(a),l(a=>!a)},className:"cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10","aria-label":k?"Restore":"Maximize",title:k?"ย่อกลับ":"ขยายเต็มจอ",children:k?(0,i.jsx)(J,{size:18}):(0,i.jsx)(I,{size:18})}),!k&&(0,i.jsx)(m.motion.button,{whileTap:{scale:.98},onMouseDown:a=>{h.create(a),d()},className:"cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10","aria-label":"Close",children:(0,i.jsx)(K.X,{size:18})})]})]}),(0,i.jsx)(m.motion.div,{layout:!0,className:k?"px-4 py-2 overflow-y-auto h-[calc(100vh-6rem)]":"px-4 py-2 overflow-y-auto max-h-[calc(100vh-40vh)]",children:e?(0,i.jsx)("div",{className:"flex justify-center items-center my-6",children:(0,i.jsx)(O.default,{title:"กำลังโหลดข้อมูล..."})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex justify-between gap-2 mb-3 text-sm font-medium",children:[(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("div",{className:"bg-green-100 dark:bg-green-900/40 rounded-xl px-3 py-2",children:(0,i.jsxs)("p",{className:"text-green-700 dark:text-green-300",children:["สมบูรณ์ ",n.compleateFormsLength," ฟอร์ม"]})}),(0,i.jsx)("div",{className:"bg-amber-100 dark:bg-amber-900/40 rounded-xl px-3 py-2",children:(0,i.jsxs)("p",{className:"text-amber-700 dark:text-amber-300",children:["ยังไม่สมบูรณ์ ",n.notCompleateFormsLength," ฟอร์ม"]})})]}),(0,i.jsx)("div",{className:"bg-sky-100 dark:bg-sky-900/40 rounded-xl px-3 py-2",children:(0,i.jsxs)("p",{className:"text-sky-700 dark:text-sky-300",children:["รวมทั้งหมด ",n.totalFormsLength," ฟอร์ม"]})})]}),(0,i.jsx)(m.motion.div,{className:`grid ${k&&"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"} gap-2`,children:c.map((a,b)=>(0,i.jsx)(N,{data:a},a?.form_opd_id??a?.patient_an??b))})]})}),(0,i.jsx)("div",{className:"text-xs text-zinc-400 flex items-center justify-end border-t border-zinc-200 dark:border-zinc-700 px-4 py-3",children:(0,i.jsxs)("p",{children:[f," ",g]})})]})})}var W=a.i(40938),X=a.i(88206),Y=a.i(50944);let Z=(0,n.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var $=Object.defineProperty,_=(a,b)=>{for(var c in b)$(a,c,{get:b[c],enumerable:!0})},aa={};_(aa,{error:()=>ae,errorOnce:()=>ai,log:()=>ac,logGroup:()=>ak,reset:()=>aj,table:()=>af,warn:()=>ad,warnOnce:()=>ah});var ab=new Set;function ac(...a){console.log(...a)}function ad(a,...b){console.warn(`AG Charts - ${a}`,...b)}function ae(a,...b){"object"==typeof a?console.error("AG Charts error",a,...b):console.error(`AG Charts - ${a}`,...b)}function af(...a){console.table(...a)}function ag(a,b,c){let d;d=a instanceof Error?a.message:"string"==typeof a?a:"object"==typeof a?JSON.stringify(a):String(a);let e=`${b}: ${d}`;ab.has(e)||(c(a),ab.add(e))}function ah(a,...b){ag(a,"Logger.warn",a=>ad(a,...b))}function ai(a,...b){ag(a,"Logger.error",a=>ae(a,...b))}function aj(){ab.clear()}function ak(a,b){console.groupCollapsed(a);try{return b()}finally{console.groupEnd()}}var al={};_(al,{detectChartDefinition:()=>at,getAxisModule:()=>au,getPresetModule:()=>av,getSeriesModule:()=>aw,hasModule:()=>ar,listModulesByType:()=>as,register:()=>ao,registerMany:()=>ap,reset:()=>aq});var am=(a=>(a.Axis="axis",a.Chart="chart",a.Preset="preset",a.Plugin="plugin",a.Series="series",a))(am||{}),an=new Map;function ao(a,b){let{def:c,version:d}=an.get(a.name)??{};if(!c||!c.enterprise&&a.enterprise&&b===d)return void an.set(a.name,{def:a,version:b});if(d===b)return void ad(`AG Charts - Module '${a.name}' already registered,',
                'ignoring (version: ${d}). Check your code for duplicate loading of charts NPM modules.`);throw Error(`AG Charts - Module '${a.name}' already registered with different version:
${d} vs ${b}

Check your package.json for conflicting dependencies - depending on your package manager
one of these commands may help:
- npm ls ag-charts-community
- yarn why ag-charts-community`)}function ap(a,b){for(let c of a)ao(c,b)}function aq(){an.clear()}function ar(a){return an.has(a)}function*as(a){for(let b of an.values())ax(a,b.def)&&(yield b.def)}function at(a){for(let b of an.values())if(ax("chart",b.def)&&b.def.detect(a))return b.def;throw Error("AG Charts - Unknown chart type; Check options are correctly structured and series types are specified")}function au(a){let b=an.get(a);if(ax("axis",b?.def))return b?.def}function av(a){let b=an.get(a);if(ax("preset",b?.def))return b?.def}function aw(a){let b=an.get(a);if(ax("series",b?.def))return b?.def}function ax(a,b){return b?.type===a}var ay=class{constructor(){this.events=new Map}on(a,b){return this.events.has(a)||this.events.set(a,new Set),this.events.get(a)?.add(b),()=>this.off(a,b)}off(a,b){let c=this.events.get(a);c&&(c.delete(b),0===c.size&&this.events.delete(a))}emit(a,b){this.events.get(a)?.forEach(a=>a(b))}clear(a){a?this.events.delete(a):this.events.clear()}},az=class{constructor(a){if(this.maxCacheSize=a,this.store=new Map,a<=0)throw Error("LRUCache size must be greater than 0")}get(a){if(!this.store.has(a))return;let b=this.store.get(a);return this.store.delete(a),this.store.set(a,b),b}has(a){return this.store.has(a)}set(a,b){return this.store.set(a,b),this.store.size>this.maxCacheSize&&this.store.delete(this.store.keys().next().value),b}clear(){this.store.clear()}};function aA(a,b,c){return Math.min(c,Math.max(a,b))}function aB(a,b,c=1e-10){return a===b||Math.abs(a-b)<c}function aC(a){return -1===Math.sign(a)||Object.is(a,-0)}function aD(a,b=2){let c=10**b;return Math.round(a*c)/c}function aE(a){if(Math.floor(a)===a)return 0;let b=String(a),c=0;if(a<1e-6||a>=1e21){let a;[b,a]=b.split("e"),null!=a&&(c=Number(a))}return Math.max((b.split(".")[1]?.length??0)-c,0)}var aF={};function aG(a){return a?aF.document?.[a]:aF.document}function aH(a){return a?aF.window?.[a]:aF.window}function aI(a,b,c){let d=aG().createElement(a);if("object"==typeof b&&(c=b,b=void 0),b)for(let a of b.split(" "))d.classList.add(a);return c&&Object.assign(d.style,c),d}function aJ(a){return aG().createElementNS("http://www.w3.org/2000/svg",a)}function aK(a,b,c,d){return a.addEventListener(b,c,d),()=>a.removeEventListener(b,c,d)}function aL(a){return null!=a}function aM(a){return Array.isArray(a)}function aN(a){return a instanceof Date}function aO(a){return aN(a)&&!isNaN(Number(a))}function aP(a){return"function"==typeof a}function aQ(a){return"object"==typeof a&&null!==a&&!aM(a)}function aR(a){return aM(a)||aS(a)}function aS(a){return"object"==typeof a&&null!==a&&a.constructor?.name==="Object"}function aT(a){if("object"!=typeof a||null===a)return!1;for(let b in a)return!1;return!0}function aU(a){return"string"==typeof a}function aV(a){return"number"==typeof a}function aW(a){return Number.isFinite(a)}function aX(a){return"symbol"==typeof a}aF.window=a.g.window,"undefined"!=typeof document?aF.document=document:aF.document=a.g.document;var aY=/^(?:(.)?([<>=^]))?([+\-( ])?([$€£¥₣₹#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,aZ=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/;function a$(a){let b,c,d=aZ.exec(a);d&&([,b,a,c]=d);let e=aY.exec(a);if(!e)return void aa.warnOnce(`The number formatter is invalid: ${a}`);let[,f,g,h,i,j,k,l,m,n,o]=e;return{fill:f,align:g,sign:h,symbol:i,zero:j,width:parseInt(k),comma:l,precision:parseInt(m),trim:!!n,type:o,prefix:b,suffix:c}}function a_(a){let b,c,d="string"==typeof a?a$(a):a;if(null==d)return;let{fill:e,align:f,sign:g="-",symbol:h,zero:i,width:j,comma:k,type:l,prefix:m="",suffix:n="",precision:o}=d,{trim:p}=d,q=null==o||isNaN(o);if(l)if(l in a1&&l in a0)b=q?a0[l]:a1[l];else if(l in a1)b=a1[l];else if(l in a0)b=a0[l];else throw Error(`The number formatter type is invalid: ${l}`);else b=a1.g,p=!0;let r=l?6:12;return q||(c=o),(a,d)=>{let o=b(a,c??d??r);return p&&(o=function(a){if(!a.endsWith("0")||-1===a.indexOf("."))return a;let b=a.length-1;for(;b>0;)if("0"==a[b])b-=1;else if("."==a[b]){b-=1;break}else break;return a.substring(0,b+1)}(o)),k&&(o=function(a,b){let c=a.indexOf(".");c<0&&(c=a.length);let d=a.substring(0,c).split(""),e=a.substring(c);for(let a=d.length-3;a>0;a-=3)d.splice(a,0,b);return`${d.join("")}${e}`}(o,k)),o=function(a,b,c=""){return"("===c?a>=0?b:`(${b})`:`${a>=0?"+"===c?"+":"":"−"}${b}`}(a,o,g),h&&"#"!==h&&(o=`${h}${o}`),"#"===h&&"x"===l&&(o=`0x${o}`),"s"===l&&(o=`${o}${a2[a4(a)]}`),("%"===l||"p"===l)&&(o=`${o}%`),null==j||isNaN(j)||(o=function(a,b,c=" ",d=">"){let e=a;if(">"!==d&&d){if("<"===d)e=e.padEnd(b,c);else if("^"===d){let a=Math.max(0,b-e.length),d=Math.ceil(a/2),f=Math.floor(a/2);e=(e=e.padStart(d+e.length,c)).padEnd(f+e.length,c)}}else e=e.padStart(b,c);return e}(o,j,e??i,f)),o=`${m}${o}${n}`}}var a0={b:a=>a3(a).toString(2),c:a=>String.fromCharCode(a),d:a=>Math.round(Math.abs(a)).toFixed(0),o:a=>a3(a).toString(8),x:a=>a3(a).toString(16),X:a=>a0.x(a).toUpperCase(),n:a=>a0.d(a),"%":a=>`${a3(100*a).toFixed(0)}`},a1={e:(a,b)=>Math.abs(a).toExponential(b),E:(a,b)=>a1.e(a,b).toUpperCase(),f:(a,b)=>Math.abs(a).toFixed(b),F:(a,b)=>a1.f(a,b).toUpperCase(),g:(a,b)=>{if(0===a)return"0";let c=Math.abs(a),d=Math.floor(Math.log10(c));return d>=-4&&d<b?c.toFixed(b-1-d):c.toExponential(b-1)},G:(a,b)=>a1.g(a,b).toUpperCase(),n:(a,b)=>a1.g(a,b),p:(a,b)=>a1.r(100*a,b),r:(a,b)=>{if(0===a)return"0";let c=Math.abs(a),d=Math.floor(Math.log10(c))-(b-1);if(d<=0)return c.toFixed(-d);let e=10**d;return(Math.round(c/e)*e).toFixed()},s:(a,b)=>{let c=a4(a);return a1.r(a/10**c,b)},"%":(a,b)=>a1.f(100*a,b)},a2={[-24]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"µ",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",24:"Y"};function a3(a){return Math.floor(Math.abs(a))}function a4(a){return aA(-24,a?3*Math.floor(Math.log10(Math.abs(a))/3):0,24)}var a5={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function a6(a,b=new Date(a.getFullYear(),0,1)){let c=a.getTimezoneOffset()-b.getTimezoneOffset();return Math.floor((a.getTime()-b.getTime()+6e4*c)/(36e5*24))}function a7(a,b){let c=new Date(a.getFullYear(),0,1).getDay(),d=new Date(a.getFullYear(),0,(b-c+7)%7+1);return d<=a?Math.floor(a6(a,d)/7)+1:0}var a8={a:a=>a5.shortDays[a.getDay()],A:a=>a5.days[a.getDay()],b:a=>a5.shortMonths[a.getMonth()],B:a=>a5.months[a.getMonth()],c:"%x, %X",d:(a,b)=>ba(a.getDate(),2,b??"0"),e:"%_d",f:(a,b)=>ba(1e3*a.getMilliseconds(),6,b??"0"),H:(a,b)=>ba(a.getHours(),2,b??"0"),I:(a,b)=>{let c=a.getHours()%12;return 0===c?"12":ba(c,2,b??"0")},j:(a,b)=>ba(a6(a)+1,3,b??"0"),m:(a,b)=>ba(a.getMonth()+1,2,b??"0"),M:(a,b)=>ba(a.getMinutes(),2,b??"0"),L:(a,b)=>ba(a.getMilliseconds(),3,b??"0"),p:a=>12>a.getHours()?"AM":"PM",Q:a=>String(a.getTime()),s:a=>String(Math.floor(a.getTime()/1e3)),S:(a,b)=>ba(a.getSeconds(),2,b??"0"),u:a=>{let b=a.getDay();return b<1&&(b+=7),String(b%7)},U:(a,b)=>ba(a7(a,0),2,b??"0"),V:(a,b)=>ba(function a(b,c=b.getFullYear()){let d=new Date(c,0,1).getDay(),e=new Date(c,0,(4-d+7)%7-3+1);return e<=b?Math.floor(a6(b,e)/7)+1:a(b,c-1)}(a),2,b??"0"),w:(a,b)=>ba(a.getDay(),2,b??"0"),W:(a,b)=>ba(a7(a,1),2,b??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(a,b)=>ba(a.getFullYear()%100,2,b??"0"),Y:(a,b)=>ba(a.getFullYear(),4,b??"0"),Z:a=>(function(a){let b=a.getTimezoneOffset(),c=Math.abs(b);return`${b>0?"-":"+"}${ba(Math.floor(c/60),2,"0")}${ba(Math.floor(c%60),2,"0")}`})(a),"%":()=>"%"},a9={_:" ",0:"0","-":""};function ba(a,b,c){let d=String(Math.floor(a));return d.length>=b?d:`${c.repeat(b-d.length)}${d}`}function bb(a){let b=[];for(;a.length>0;){let c=a.indexOf("%");if(0!==c){let d=c>0?a.substring(0,c):a;b.push(d)}if(c<0)break;let d=a9[a[c+1]];null!=d&&c++;let e=a[c+1],f=a8[e];if("function"==typeof f)b.push([f,d]);else if("string"==typeof f){let a=bb(f);b.push([a,d])}else b.push(`${d??""}${e}`);a=a.substring(c+2)}return a=>{let c="number"==typeof a?new Date(a):a;return b.map(a=>"string"==typeof a?a:a[0](c,a[1])).join("")}}function bc(a,b,c){let d,e,{leading:f=!0,trailing:g=!0}=c??{},h=!1;function i(){g&&e?(d=setTimeout(i,b),a(...e)):h=!1,e=null}return Object.assign(function(...c){h?e=c:(h=!0,d=setTimeout(i,b),f?a(...c):e=c)},{cancel(){clearTimeout(d),h=!1,e=null}})}function bd(a,b,c=""){try{return a(...b)}catch(b){let a=c?` \`${c}\``:"";ah(`Uncaught exception in user callback${a}`,b)}}function be(a,b="and",c=String,d=1/0){if(0===a.length)return"";if(1===a.length)return c(a[0]);let e=(a=a.map(c)).pop();if(a.length>=d){let c=a.length-(d-1);return`${a.slice(0,d-1).join(", ")}, and ${c} more ${b} ${e}`}return`${a.join(", ")} ${b} ${e}`}function bf(a,b=1/0){if("number"==typeof a){if(isNaN(a))return"NaN";else if(a===1/0)return"Infinity";else if(a===-1/0)return"-Infinity"}let c=JSON.stringify(a)??typeof a;return c.length>b?`${c.slice(0,b)}... (+${c.length-b} characters)`:c}var bg=/[A-Z]+(?![a-z])|[A-Z]/g;function bh(a){return aM(a)?a.map(a=>a.text).join(""):a??""}var bi=Symbol("description"),bj=Symbol("required"),bk=Symbol("marked"),bl=Symbol("undocumented"),bm=Symbol("union"),bn=[["placement","position"],["padding","spacing","gap"],["color","fill","stroke"],["whisker","wick"],["nodeClick","seriesNodeClick"],["nodeDoubleClick","seriesNodeDoubleClick"],["src","url"]].reduce((a,b)=>{for(let c of b)a.set(c.toLowerCase(),new Set(b.filter(a=>a!==c)));return a},new Map),bo=(a=>(a.Invalid="invalid",a.Required="required",a.Unknown="unknown",a))(bo||{});function bp(a,b){return aW(b)?`${a}[${b}]`:a?`${a}.${b}`:b}var bq=class{constructor(a,b,c,d,e){this.type=a,this.description=b,this.value=c,this.path=d,this.key=e}setUnionType(a,b){if(this.path.startsWith(b)){let c=this.path.slice(b.length);this.altPath=`${b}[type=${a}]${c}`}}getPrefix(){let{altPath:a=this.path,key:b}=this;return a||b?`Option \`${b?bp(a,b):a}\``:"Value"}toString(){let{description:a="unknown",type:b,value:c}=this;return"required"===b&&null==c?`${this.getPrefix()} is required and has not been provided; expecting ${a}, ignoring.`:`${this.getPrefix()} cannot be set to \`${bf(c,50)}\`; expecting ${a}, ignoring.`}},br=class extends bq{constructor(a,b,c,d){super("unknown",void 0,b,c,d),this.suggestions=a,this.key=d}getPrefix(){return`Unknown option \`${bp(this.altPath??this.path,this.key)}\``}getPostfix(){let a=be(function(a,b,c=2){let d=[],e=a.toLowerCase(),f=bn.get(e);for(let a of b){let b=a.toLowerCase();(f?.has(a)||b.includes(e)||function(a,b){if(a===b)return 0;let[c,d]=a.length<b.length?[a,b]:[b,a],e=c.length,f=d.length,g=Array(e+1).fill(0).map((a,b)=>b),h=Array(e+1);for(let a=1;a<=f;a++){h[0]=a;for(let b=1;b<=e;b++){let e=+(d[a-1]!==c[b-1]);h[b]=Math.min(g[b]+1,h[b-1]+1,g[b-1]+e)}[g,h]=[h,g]}return g[e]}(e,b)<=c)&&d.push(a)}return d}(this.key,this.suggestions),"or",a=>`\`${a}\``);return a?`; Did you mean ${a}? Ignoring.`:", ignoring."}toString(){return`${this.getPrefix()}${this.getPostfix()}`}};function bs(a,b,c=""){if(!aQ(a))return{cleared:null,invalid:[new bq("required","an object",a,c)]};let d={},e=[],f=new Set(Object.keys(a)),g=[];if(bm in b){let f=Object.keys(b),g=b[bm];if(null!=a.type&&f.includes(a.type)||null==a.type&&null!=g){let{type:f=g,...h}=a,i=bs(h,b[f],c);for(let a of(Object.assign(d,{type:f},i.cleared),i.invalid))a.setUnionType(f,c);e.push(...i.invalid)}else{let b=be(f,"or",a=>`'${a}'`);e.push(new bq("required",`a keyword such as ${b}`,a.type,c,"type"))}return{cleared:d,invalid:e}}for(let h of Object.keys(b)){let i=b[h],j=i[bj],k=a[h];if(f.delete(h),void 0===k&&(i[bl]||g.push(h),!j))continue;let l=bp(c,h);if(aP(i)){let b=i(k,{options:a,path:l});if("object"==typeof b){if(e.push(...b.invalid),b.valid){d[h]=b.cleared;continue}if(bZ(b.invalid,l))continue}else if(b){d[h]=k;continue}e.push(new bq(j?"required":"invalid",i[bi],k,c,h))}else{let a=bs(k,i,l);null!=a.cleared&&(d[h]=a.cleared),e.push(...a.invalid)}}for(let b of f){let d=a[b];void 0!==d&&e.push(new br(g,d,c,b))}return{cleared:d,invalid:e}}function bt(a,b){if(!aP(a))return{...a,[bi]:b};{let c=function(b,c){return a(b,c)};return c[bi]=b,c}}function bu(a){return Object.assign(aP(a)?(b,c)=>a(b,c):bw(a),{[bj]:!0,[bi]:a[bi]})}function bv(a){return Object.assign(aP(a)?(b,c)=>a(b,c):bw(a),{[bl]:!0,[bi]:a[bi]})}var bw=(a,b="an object",c=!1)=>bt((b,d)=>{let e=bs(b,a,d.path),f=!bZ(e.invalid,d.path);return{valid:f,cleared:f||!c?e.cleared:null,invalid:e.invalid}},b),bx=(a,b,c)=>({...a,[bi]:b,[bm]:c}),by=(...a)=>bt((b,c)=>{let d=[];for(let e of a){let a=e(b,c);if("object"==typeof a){if(d.push(...a.invalid),!a.valid)return{valid:!1,cleared:b,invalid:d};b=a.cleared}else if(!a)return!1}return{valid:!0,cleared:b,invalid:d}},a.map(a=>a[bi]).filter(Boolean).join(" and ")),bz=(...a)=>bt((b,c)=>{for(let d of a){let a=d(b,c);if("object"==typeof a?a.valid:a)return a}return!1},a.map(a=>a[bi]).filter(Boolean).join(" or ")),bA=a=>aW(a)||aO(a),bB=bt(aM,"an array"),bC=bt(function(a){return"boolean"==typeof a},"a boolean"),bD=bt(aP,"a function"),bE=bt(function(a){return aU(a)&&("none"===a||null!=function(a){null==b&&(b=new(aH("Option"))().style),b.color=a;let c=b.color||null;return b.color="",c}(a))},"a color string"),bF=bt(a=>aN(a)||(aW(a)||aU(a))&&aO(new Date(a)),"a date"),bG=bt(aL,"a defined value"),bH=bt(aW,"a number"),bI=bt(aQ,"an object"),bJ=bt(aU,"a string"),bK=bt(a=>"undefined"==typeof HTMLElement||a instanceof HTMLElement,"an html element"),bL=(a,b=1/0)=>bt(c=>aM(c)&&c.length>=a&&c.length<=b,b===1/0?`an array of at least ${a} items`:a===b?`an array of exactly ${a} items`:0===a?`an array of no more than ${b} items`:`an array of at least ${a} and no more than ${b} items`),bM=(a,b=1/0)=>bt(c=>aU(c)&&c.length>=a&&c.length<=b,b===1/0?`a string of at least ${a} characters`:a===b?`an string of exactly ${a} characters`:0===a?`an string of no more than ${b} characters`:`an string of at least ${a} and no more than ${b} characters`),bN=(a,b=!0)=>bt(c=>aW(c)&&(c>a||b&&c===a),`a number greater than ${b?"or equal to ":""}${a}`),bO=bN(0),bP=bN(0,!1),bQ=((a,b)=>bt(c=>aW(c)&&c>=a&&c<=b,`a number between ${a} and ${b} inclusive`))(0,1),bR=a=>bt((b,{options:c})=>!bA(b)||!bA(c[a])||b<c[a],`the value to be less than \`${a}\``),bS=a=>bt((b,{options:c})=>!bA(b)||!bA(c[a])||b>c[a],`the value to be greater than \`${a}\``);function bT(...a){aQ(a[0])&&(a=Object.values(a[0]));let b=be(a,"or",a=>`'${a}'`);return bt(b=>a.includes(b),`a keyword such as ${b}`)}var bU=a=>bt(b=>a===b,`the value ${JSON.stringify(a)}`),bV=(a,b,c=!0)=>bt((b,d)=>{if(!aM(b))return!1;let e=c,f=[],g=[],h=a=>e=c?e&&a:e||a;if(0===b.length)return{valid:!0,cleared:f,invalid:g};for(let c=0;c<b.length;c++){let i=b[c],j=a(i,{options:i,path:`${d.path}[${c}]`});"object"==typeof j?(e=h(j.valid),g.push(...j.invalid),null!=j.cleared&&f.push(j.cleared)):(e=h(j),j&&f.push(i))}return{valid:e,cleared:e||!c?f:null,invalid:g}},b??`${a[bi]} array`),bW=(a,b="an object array")=>bt((b,c)=>{if(!aM(b))return!1;let d=[],e=[];for(let f=0;f<b.length;f++){let g=`${c.path}[${f}]`,h=bs(b[f],a,g);bZ(h.invalid,g)||d.push(h.cleared),e.push(...h.invalid)}return{valid:!0,cleared:d,invalid:e}},b),bX=(a,b)=>bt((c,d)=>!!aP(c)&&(bk in c||{valid:!0,cleared:Object.assign((...e)=>{let f=bd(c,e);if(null==f)return;let g=a(f,{options:f,path:""});if("object"==typeof g){if(g.invalid.forEach(b$(d,b??a[bi])),g.valid)return g.cleared}else{if(g)return f;ah(`Callback \`${d.path}\` returned an invalid value \`${bf(f,50)}\`; expecting ${b??a[bi]}, ignoring.`)}},{[bk]:!0}),invalid:[]}),"a function"),bY=(a,b="an object")=>bt((c,d)=>!!aP(c)&&(bk in c||{valid:!0,cleared:Object.assign((...e)=>{let f=bd(c,e,d.path);if(null==f)return;let g=bs(f,a);return g.invalid.forEach(b$(d,b)),g.cleared},{[bk]:!0}),invalid:[]}),"a function");function bZ(a,b){return a.some(a=>"required"===a.type&&a.path===b)}function b$(a,b){return c=>{if(c instanceof br)return ah(`Callback \`${a.path}\` returned an unknown property \`${bp(c.path,c.key)}\`${c.getPostfix()}`);let d=bf(c.value,50);ah(c.key?`Callback \`${a.path}\` returned an invalid property \`${bp(c.path,c.key)}\`: \`${d}\`; expecting ${c.description}, ignoring.`:`Callback \`${a.path}\` returned an invalid value \`${d}\`; expecting ${b??c.description}, ignoring.`)}}var b_=a=>{if(!aQ(a))return!1;let b=Object.keys(a);return 1===b.length&&b[0].startsWith("$")},b0=bw({color:bE,stop:bQ},""),b1=bt(a=>{let b=-1/0;for(let c of a)if(c?.stop!=null){if(c.stop<b)return!1;b=c.stop}return!0},"color stops to be defined in ascending order"),b2=by(bL(2),bV(b0),b1),b3=bT("axis","item","series"),b4=bw({type:bu(bU("gradient")),colorStops:bu(b2),rotation:bH,gradient:bv(bT("linear","radial","conic")),bounds:bv(b3),reverse:bv(bC),colorSpace:bv(bT("rgb","oklch"))},"a gradient object with color stops"),b5={stroke:bE,strokeWidth:bO,strokeOpacity:bQ},b6=bw({type:bu(bU("gradient")),gradient:bu(bT("linear","radial","conic")),bounds:bu(b3),colorStops:bu(bz(b2,by(bL(2),bV(bE)))),rotation:bu(bH),reverse:bu(bC),colorSpace:bu(bT("rgb","oklch"))}),b7=bw({type:bu(bU("pattern")),pattern:bu(bT("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses")),path:bM(2),width:bu(bO),height:bu(bO),fill:bu(bE),fillOpacity:bu(bQ),backgroundFill:bu(bE),backgroundFillOpacity:bu(bQ),padding:bu(bO),rotation:bu(bH),scale:bu(bO),stroke:bu(bE),strokeWidth:bu(bO),strokeOpacity:bu(bQ)}),b8=bw({type:bu(bU("image")),url:bJ,width:bO,height:bO,rotation:bu(bH),backgroundFill:bu(bE),backgroundFillOpacity:bQ,fit:bu(bT("stretch","contain","cover")),repeat:bu(bT("repeat","repeat-x","repeat-y","no-repeat"))}),b9=bx({gradient:{colorStops:b2,rotation:bH,gradient:bv(bT("linear","radial","conic")),bounds:bv(b3),reverse:bv(bC),colorSpace:bv(bT("rgb","oklch"))},pattern:{pattern:bT("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses"),path:bM(2),width:bO,height:bO,rotation:bH,scale:bO,fill:bE,fillOpacity:bQ,backgroundFill:bE,backgroundFillOpacity:bQ,...b5,padding:bv(bO)},image:{url:bu(bJ),backgroundFill:bE,backgroundFillOpacity:bQ,width:bO,height:bO,fit:bT("stretch","contain","cover","none"),repeat:bT("repeat","repeat-x","repeat-y","no-repeat"),rotation:bH}},"a color object"),ca=bz(bE,bw(b9,"a color object")),cb={fill:ca,fillOpacity:bQ};cb.fillGradientDefaults=bv(b6),cb.fillPatternDefaults=bv(b7),cb.fillImageDefaults=bv(b8);var cc={lineDash:bV(bO),lineDashOffset:bH},cd={...cb,...b5,...cc,opacity:bQ,cornerRadius:bO},ce={...b5,...cc,opacity:bQ},cf={...cb,...b5,...cc,opacity:bQ};function cg(a){return{enabled:bC,range:bT("tooltip","node"),highlightedItem:a,unhighlightedItem:a}}function ch(a,b){return{enabled:bC,range:bT("tooltip","node"),highlightedItem:a,unhighlightedItem:a,highlightedSeries:b,unhighlightedSeries:b,bringToFront:bC}}var ci={start:bG,stop:bG,...b5,...cb,...cc},cj={start:bG,stop:bG,...b5,...cc},ck=bw({enabled:bC,key:bu(bT("x","y")),segments:bW(ci,"path segments array")},"a segmentation object",!0),cl=bw({enabled:bC,key:bu(bT("x","y")),segments:bW(cj,"path segments array")},"a segmentation object",!0),cm=bw({googleFont:bJ},"google font"),cn=bz(bJ,b_,cm,bV(bz(bJ,cm))),co={color:bE,fontFamily:cn,fontSize:bO,fontStyle:bT("normal","italic","oblique"),fontWeight:bz(bO,bT("normal","bold","bolder","lighter"))},cp=bw({top:bH,right:bH,bottom:bH,left:bH},"padding object"),cq=bz(bH,cp),cr={enabled:bC,stroke:bE,strokeWidth:bO,strokeOpacity:bQ},cs={border:{...cr},cornerRadius:bH,padding:cq,...cb};function ct(a,b,c,d=0,e=0){let f=Math.cos(c),g=Math.sin(c),h=a-d,i=b-e;return{x:d+h*f-i*g,y:e+h*g+i*f}}function cu(a){return void 0===a?[]:Array.isArray(a)?a:[a]}function cv(a,b){return a.reduce((a,c)=>{let d=b(c);return a[d]??(a[d]=[]),a[d].push(c),a},{})}function cw(a,b){if(null==a||null==b||a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(Array.isArray(a[c])&&Array.isArray(b[c])){if(!cw(a[c],b[c]))return!1}else if(a[c]!==b[c])return!1;return!0}function cx(a,b,c=0){if(0===a.length)return[];let d=[];for(let e=0;e<b;e++)d.push(a.at((e+c)%a.length));return d}var cy=class{constructor(){this.queue=[]}await(a=50){return new Promise(b=>{let c=()=>{clearTimeout(d),b(!0)},d=setTimeout(()=>{let a=this.queue.indexOf(c);a<0||(this.queue.splice(a,1),b(!1))},a);this.queue.push(c)})}notify(){this.queue.splice(0).forEach(a=>a())}};function cz(a=0){return new Promise(b=>{setTimeout(b,a)})}function*cA(...a){for(let b of a)null!=b&&(b[Symbol.iterator]?yield*b:yield b)}function cB(a){for(let b of a)return b;throw Error("AG Charts - no first() value found")}function*cC(a){let b=[void 0,void 0];for(let c of Object.keys(a))b[0]=c,b[1]=a[c],yield b}function cD(a){return"true"===a}function cE(a){return a}var cF={role:cE,"aria-checked":cD,"aria-controls":cE,"aria-describedby":cE,"aria-disabled":cD,"aria-expanded":cD,"aria-haspopup":cE,"aria-hidden":cD,"aria-label":cE,"aria-labelledby":cE,"aria-live":cE,"aria-orientation":cE,"aria-selected":cD,"data-focus-override":cD,"data-focus-visible-override":cD,"data-preventdefault":cD,class:cE,for:cE,id:cE,tabindex:function(a){return Number(a)},title:cE,placeholder:cE};function cG(a,b,c){null==c||""===c||""===c?a?.removeAttribute(b):a?.setAttribute(b,c.toString())}function cH(a,b){if(null!=b)for(let[c,d]of cC(b))"class"!==c&&cG(a,c,d)}function cI(a,b,c){if(!(a instanceof HTMLElement))return;let d=a.getAttribute(b);return null===d?c:cF[b]?.(d)??void 0}function cJ(a,b,c){null!=a&&(null==c?a.style.removeProperty(b):a.style.setProperty(b,c.toString()))}function cK(a,b,c,d,e){return b<a.x+a.width&&b+d>a.x&&c<a.y+a.height&&c+e>a.y}function cL(a,b,c,d=0,e=0){return b>=a.x&&b+d<=a.x+a.width&&c>=a.y&&c+e<=a.y+a.height}function cM(a,b){return a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height}function cN(a,b,c){let d;if(!(a>b)){for(;b>=a;){let e=Math.floor((b+a)/2);c(e)?(d=e,a=e+1):b=e-1}return d}}function cO(a,b,c){let d;if(!(a>b)){for(;b>=a;){let e=Math.floor((b+a)/2);c(e)?(d=e,b=e-1):a=e+1}return d}}var cP=class{constructor(a){this.getter=a}get(){let a=this.result?.deref();return a||(a=this.getter(),this.result=new WeakRef(a)),a}clear(){this.result=void 0}},cQ=class{constructor(){this.callbacks=new Set}flush(){for(let a of this.callbacks)a();this.callbacks.clear()}merge(a){for(let b of a.callbacks)this.callbacks.add(b)}register(...a){for(let b of a)b&&this.callbacks.add(b)}};function cR(a){return Array.isArray(a)&&a.length>=2&&a.every(aW)}function cS(a){return Array.isArray(a)&&a.length>=2&&a.every(cR)}function cT(a){let b=a[0],c=a[a.length-1];return aB(b[0],c[0],.001)&&aB(b[1],c[1],.001)}function cU(a){return Array.isArray(a)&&a.every(cS)&&a.every(cT)}function cV(a){return aQ(a)&&"Feature"===a.type&&function a(b){if(null===b)return!0;if(!aQ(b)||null==b.type)return!1;let{type:c,coordinates:d}=b;switch(c){case"GeometryCollection":return Array.isArray(b.geometries)&&b.geometries.every(a);case"MultiPolygon":return Array.isArray(d)&&d.every(cU);case"Polygon":return cU(d);case"MultiLineString":return Array.isArray(d)&&d.every(cS);case"LineString":case"MultiPoint":return cS(d);case"Point":return cR(d);default:return!1}}(a.geometry)}var cW=bt(function(a){return aQ(a)&&"FeatureCollection"===a.type&&Array.isArray(a.features)&&a.features.every(cV)},"a GeoJSON object"),cX=class{constructor(a,b,c){this._vertexCount=0,this._edgeCount=0,this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[],this.cachedNeighboursEdge=a,this.processedEdge=b,this.singleValueEdges=c}clear(){this._vertexCount=0,this._edgeCount=0,this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[],this.singleValueEdges?.clear()}getVertexCount(){return this._vertexCount}getEdgeCount(){return this._edgeCount}addVertex(a){let b=new cY(a);return this._vertexCount++,b}addEdge(a,b,c){c===this.cachedNeighboursEdge?a.updateCachedNeighbours().set(b.value,b):c===this.processedEdge&&(this.pendingProcessingEdgesFrom.push(a),this.pendingProcessingEdgesTo.push(b));let{edges:d}=a,e=d.get(c);e?-1===e.indexOf(b)&&(this.singleValueEdges?.has(c)?d.set(c,[b]):(e.push(b),this._edgeCount++)):(d.set(c,[b]),this._edgeCount++)}removeVertex(a){this._vertexCount--;let b=a.edges;if(b){for(let[a,c]of b)this._vertexCount-=c.length;a.clear()}}removeEdge(a,b,c){let d=a.edges.get(c);if(!d)return;let e=d.indexOf(b);-1!==e&&(d.splice(e,1),0===d.length&&a.edges.delete(c),this._edgeCount--,c===this.cachedNeighboursEdge&&a.readCachedNeighbours()?.delete(b.value))}removeEdges(a,b){a.edges.delete(b)}getVertexValue(a){return a.value}*neighbours(a){for(let[b,c]of a.edges)for(let a of c)yield a}*neighboursAndEdges(a){for(let[b,c]of a.edges)for(let a of c)yield[a,b]}neighboursWithEdgeValue(a,b){return a.edges.get(b)}findNeighbour(a,b){return a.edges.get(b)?.[0]}findNeighbourValue(a,b){let c=this.findNeighbour(a,b);if(c)return this.getVertexValue(c)}findNeighbourWithValue(a,b,c){let d=null==c?this.neighbours(a):this.neighboursWithEdgeValue(a,c);if(d){for(let a of d)if(this.getVertexValue(a)===b)return a}}findVertexAlongEdge(a,b,c){if(c===this.cachedNeighboursEdge){let c;for(let d of b)if(!(c=(c??a).readCachedNeighbours()?.get(d)))return;return c}if(0===b.length)return;let d=a;for(let a of b){let b=d?this.neighboursWithEdgeValue(d,c):void 0;if(!b)return;d=b.find(b=>b.value===a)}return d}adjacent(a,b){for(let[c,d]of a.edges)if(d.includes(b))return!0;return!1}},cY=class{constructor(a){this.value=a,this.edges=new Map}readCachedNeighbours(){return this._cachedNeighbours}updateCachedNeighbours(){return this._cachedNeighbours??(this._cachedNeighbours=new Map),this._cachedNeighbours}clear(){this.edges.clear(),this._cachedNeighbours?.clear()}},cZ=new Map;Symbol("ElementID");var c$=1;function c_(a){let b=a.constructor,c=Object.hasOwn(b,"className")?b.className:b.name;if(!c)throw Error(`The ${b} is missing the 'className' property.`);let d=(cZ.get(c)??0)+1;return cZ.set(c,d),`${c}-${d}`}function c0(){return`ag-charts-${c$++}`}function c1(){return crypto.randomUUID?.()??function(){let a=new Uint8Array(16);crypto.getRandomValues(a),a[6]=15&a[6]|64,a[8]=63&a[8]|128;let b="";for(let c=0;c<a.length;c++)(4===c||6===c||8===c||10===c)&&(b+="-"),b+=a[c].toString(16).padStart(2,"0");return b}()}var c2=/\r?\n/g;function c3({fontSize:a,fontStyle:b,fontWeight:c,fontFamily:d}){let e="";return b&&"normal"!==b&&(e+=`${b} `),c&&"normal"!==c&&400!==c&&(e+=`${c} `),e+=`${a}px ${d}`}function c4(a,b=1.15){return Math.round(a*b)}var c5=/[\s.,;:-]{1,5}$/;function c6(a){return a.replace(c5,"")+"…"}function c7(a){return a.endsWith("…")}function c8(a){return a?.text.endsWith("…")??!1}var c9=class{constructor(a,b){this.ctx=a,this.measureTextCached=b,this.baselineMap=new Map,this.charMap=new Map,this.lineHeightCache=null}baselineDistance(a){if("alphabetic"===a)return 0;if(this.baselineMap.has(a))return this.baselineMap.get(a);this.ctx.textBaseline=a;let{alphabeticBaseline:b}=this.ctx.measureText("");return this.baselineMap.set(a,b),this.ctx.textBaseline="alphabetic",b}lineHeight(){return this.lineHeightCache??(this.lineHeightCache=this.measureText("").height),this.lineHeightCache}measureText(a){let b=this.measureTextCached?.(a)??this.ctx.measureText(a),{width:c,fontBoundingBoxAscent:d=b.emHeightAscent,fontBoundingBoxDescent:e=b.emHeightDescent}=b;return{width:c,height:d+e,ascent:d,descent:e}}measureLines(a){let b="string"==typeof a?a.split(c2):a,c=0,d=0,e=b.map(a=>{let b=this.measureText(a);return c<b.width&&(c=b.width),d+=b.height,{text:a,...b}});return{width:c,height:d,lineMetrics:e}}textWidth(a,b){if(b){let b=0;for(let c=0;c<a.length;c++)b+=this.textWidth(a.charAt(c));return b}return a.length>1?this.ctx.measureText(a).width:this.charMap.get(a)??this.charWidth(a)}charWidth(a){let{width:b}=this.ctx.measureText(a);return this.charMap.set(a,b),b}},da=new az(50);function db(a){"object"==typeof a&&(a=c3(a));let b=da.get(a);if(b)return b;let c=new az(1e4),d=function(a=0,b=0){return new OffscreenCanvas(a,b).getContext("2d")}();return d.font=a,b=new c9(d,a=>{let b=c.get(a);return b||(b=d.measureText(a),c.set(a,b)),b}),da.set(a,b),b}function dc(a,b){let c={segments:[],width:0,height:0,ascent:0,descent:0},d=[c];for(let e of a){let{text:a,fontSize:f=b.fontSize,fontStyle:g=b.fontStyle,fontWeight:h=b.fontWeight,fontFamily:i=b.fontFamily,...j}=e,k={fontSize:f,fontStyle:g,fontWeight:h,fontFamily:i},l=db(k),m=a.split(c2);for(let a=0;a<m.length;a++){let b=m[a],e=l.measureText(b);a>0&&(c={segments:[],width:0,height:0,ascent:0,descent:0},d.push(c)),b&&(c.width+=e.width,c.ascent=Math.max(c.ascent,e.ascent),c.descent=Math.max(c.descent,e.descent),c.height=Math.max(c.height,c.ascent+c.descent),c.segments.push({...k,...j,text:b,textMetrics:e}))}}let e=0,f=0;for(let a of d)e=Math.max(e,a.width),f+=a.height;return{width:e,height:f,lineMetrics:d}}function dd(a,b){return"hide"===b.overflow&&a.some(c7)}function de(a,b){return dg(a,b).join("\n")}function df(a,b,c,d){let e=b.textWidth("…"),f=0,g=0;for(;g<a.length;g++){let d=b.textWidth(a.charAt(g));if(f+d>c)break;f+=d}if(a.length===g&&(!d||f+e<=c))return d?c6(a):a;for(a=a.slice(0,g).trimEnd();a.length&&b.textWidth(a)+e>c;)a=a.slice(0,-1).trimEnd();return c6(a)}function dg(a,b,c=0){let d=a.split(c2),e=db(b.font),f=[];if("never"===b.textWrap){for(let a of d){let d=df(a.trimEnd(),e,Math.max(0,b.maxWidth-c));if(!d)break;f.push(d),c=0}return dd(f,b)?[]:f}let g="hyphenate"===b.textWrap,h=null==b.textWrap||"on-space"===b.textWrap;for(let a of d){let d=a.trimEnd();if(""===d){f.push(d);continue}let i=0,j=0,k=0;for(f.length||(j=c);i<d.length;){let a=d.charAt(i);if(" "===a&&(k=i),(j+=e.textWidth(a))>b.maxWidth){if(0===i){d="";break}let a=e.textWidth(d.slice(0,i+1));if(f.length||(a+=c),a<=b.maxWidth){j=a,i++;continue}if(k){let a=function(a,b){let c=a.indexOf(" ",b);return -1===c?a.slice(b):a.slice(b,c)}(d,k+1),c=e.textWidth(a);if(c<=b.maxWidth){f.push(d.slice(0,k).trimEnd()),d=d.slice(k).trimStart(),i=0,j=0,k=0;continue}h&&c>b.maxWidth&&f.push(d.slice(0,k).trimEnd(),df(d.slice(k).trimStart(),e,b.maxWidth,!0))}else if(h){let a=df(d,e,b.maxWidth,!0);f.push(a)}if(h){d="";break}let l=g?"-":"",m=d.slice(0,i).trim();for(;m.length&&e.textWidth(m+l)>b.maxWidth;)m=m.slice(0,-1).trimEnd();if(m&&"​"!==m)f.push(m+l);else{d="";break}d=d.slice(m.length).trimStart(),i=-1,j=0,k=0}i++}d&&f.push(d)}!function(a,b,c){if(!1===c.avoidOrphans||a.length<2)return;let{length:d}=a,e=a[d-1],f=a[d-2];if(f.length<e.length)return;let g=f.lastIndexOf(" ");if(-1===g||g===f.indexOf(" ")||e.includes(" "))return;let h=f.slice(g+1);b.textWidth(e+h)<=c.maxWidth&&(a[d-2]=f.slice(0,g),a[d-1]=h+" "+e)}(f,e,b);let i=function(a,b,c){if(!aW(c.maxHeight))return a;let{height:d,lineMetrics:e}=b.measureLines(a);if(d<=c.maxHeight)return a;for(let d=0,f=0;d<e.length;d++)if((f+=e[d].height)>c.maxHeight){if("hide"===c.overflow||0===d)return[];let e=a.slice(0,d),f=e.pop();return e.concat(c7(f)?f:df(f,b,c.maxWidth,!0))}return a}(f,e,b);return dd(i,b)?[]:i}function dh(a,b){let{maxHeight:c=1/0}=b,d=[],e=0,f=0;function g(){let a=d.pop(),c=db(a),e=df(a.text,c,b.maxWidth,!0),f=c.measureText(e);d.push({...a,text:e,textMetrics:f})}for(let{width:h,height:i,segments:j}of dc(a,b.font).lineMetrics){if(f+i>c){d.length&&g();break}if(e+h<=b.maxWidth){e+=h,f+=i,d.push(...j);continue}for(let a of j){if(e+a.textMetrics.width<=b.maxWidth){e+=a.textMetrics.width,d.push(a);continue}let h=db(a),i="​"+a.text+"​",j={...b,font:a,maxHeight:c-f},k=dg(i,{...j,overflow:"hide"},e);if(0===k.length)if("never"===b.textWrap)k=dg(i,j,e);else{k=dg(i,j);let a=d.at(-1);a&&(a.text+="\n",e=0)}if(0===k.length){g();break}let l=k.findIndex(c7);-1!==l&&(k=k.slice(0,l+1));let m=k.at(-1);for(let b of k){let c=b.replaceAll("​",""),g=h.measureText(c),i={...a,text:c,textMetrics:g};b===m?e+=g.width:(i.text+="\n",e=0),f+=g.height,d.push(i)}if(-1!==l)break}}return d}db.clear=()=>da.clear();var di=Object.defineProperty,dj=Object.getOwnPropertyDescriptor,dk=(a,b)=>{for(var c in b)di(a,c,{get:b[c],enumerable:!0})},dl=(a,b,c,d)=>{for(var e,f=d>1?void 0:d?dj(b,c):b,g=a.length-1;g>=0;g--)(e=a[g])&&(f=(d?e(b,c,f):e(f))||f);return d&&f&&di(b,c,f),f},dm=class{constructor(){this.cleanup=new cQ}destroy(){this.cleanup.flush()}},dn=new class{constructor(){this.modules=[],this.dependencies=new Map,this.modulesByOptionKey=new Map}register(...a){for(let b of a){this.registerDependencies(b);let a=this.modules.find(a=>b.type===a.type&&(!("optionsKey"in b)||!("optionsKey"in a)||b.optionsKey===a.optionsKey)&&b.identifier===a.identifier);if(a){if("enterprise"===b.packageType&&"community"===a.packageType){let c=this.modules.indexOf(a);this.modules.splice(c,1,b),"optionsKey"in b&&this.modulesByOptionKey.set(b.optionsKey,b)}}else this.modules.push(b),"optionsKey"in b&&this.modulesByOptionKey.set(b.optionsKey,b)}}hasEnterpriseModules(){return this.modules.some(a=>"enterprise"===a.packageType)}*byType(...a){let b=new Set,c=this.modules.filter(b=>a.includes(b.type)),d=a=>{let b=this.dependencies.get(a);return b?.flatMap(d).concat(b)??[]},e=[];for(let f of c){let c="optionsKey"in f?f.optionsKey:f.contextKey;if(!b.has(c)){for(let f of d(c)){if(b.has(f))continue;let c=this.modulesByOptionKey.get(f);if(!c){e.push(f);continue}a.includes(c.type)&&(yield c,b.add(f))}yield f,b.add(c)}}if(e.length>0)throw Error(`Could not resolve module dependencies: ${e}`)}registerDependencies(a){if(null==a.dependencies||0===a.dependencies.length)return;let b="optionsKey"in a?a.optionsKey:a.contextKey;this.dependencies.set(b,a.dependencies)}},dp=Symbol("interpolate"),dq=a=>null!=a[dp];function dr(a,b,c,d=1/0){let e={nearest:void 0,distanceSquared:d};for(let d of c){let c=d.distanceSquared(a,b);if(0===c)return{nearest:d,distanceSquared:0};c<e.distanceSquared&&(e.nearest=d,e.distanceSquared=c)}return e}function ds(a,b,c,d=1/0){let{x:e=a,y:f=b}=c.transformPoint?.(a,b)??{},g={nearest:void 0,distanceSquared:d};for(let a of c.children){let{nearest:b,distanceSquared:c}=a.nearestSquared(e,f,g.distanceSquared);if(0===c)return{nearest:b,distanceSquared:c};c<g.distanceSquared&&(g.nearest=b,g.distanceSquared=c)}return g}var dt=class a{constructor(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d}static fromObject({x:b,y:c,width:d,height:e}){return new a(b,c,d,e)}static merge(b){let c=1/0,d=1/0,e=-1/0,f=-1/0;for(let a of b)a.x<c&&(c=a.x),a.y<d&&(d=a.y),du(a.x,a.width)>e&&(e=du(a.x,a.width)),du(a.y,a.height)>f&&(f=du(a.y,a.height));return new a(c,d,e-c,f-d)}static nearestBox(a,b,c){return dr(a,b,c)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:du(this.x,this.width),bottom:du(this.y,this.height),toJSON:()=>({})}}clone(){let{x:b,y:c,width:d,height:e}=this;return new a(b,c,d,e)}equals(a){return cM(this,a)}containsPoint(a,b){return cL(this,a,b)}intersection(b){let c=Math.max(this.x,b.x),d=Math.max(this.y,b.y),e=Math.min(du(this.x,this.width),du(b.x,b.width)),f=Math.min(du(this.y,this.height),du(b.y,b.height));if(!(c>e)&&!(d>f))return new a(c,d,e-c,f-d)}collidesBBox(a){return this.x<du(a.x,a.width)&&du(this.x,this.width)>a.x&&this.y<du(a.y,a.height)&&du(this.y,this.height)>a.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(a,b){if(this.containsPoint(a,b))return 0;let c=a-aA(this.x,a,du(this.x,this.width)),d=b-aA(this.y,b,du(this.y,this.height));return c*c+d*d}shrink(a,b){if("number"==typeof a)this.applyMargin(a,b);else for(let b of Object.keys(a)){let c=a[b];"number"==typeof c&&this.applyMargin(c,b)}return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(a,b){if("number"==typeof a)this.applyMargin(-a,b);else for(let b of Object.keys(a)){let c=a[b];"number"==typeof c&&this.applyMargin(-c,b)}return this}applyMargin(a,b){switch(b){case"top":this.y+=a;case"bottom":this.height-=a;break;case"left":this.x+=a;case"right":this.width-=a;break;case"vertical":this.y+=a,this.height-=2*a;break;case"horizontal":this.x+=a,this.width-=2*a;break;case void 0:this.x+=a,this.y+=a,this.width-=2*a,this.height-=2*a}}translate(a,b){return this.x+=a,this.y+=b,this}[dp](b,c){return new a(this.x*(1-c)+b.x*c,this.y*(1-c)+b.y*c,this.width*(1-c)+b.width*c,this.height*(1-c)+b.height*c)}};function du(a,b){return a===-1/0&&b===1/0?1/0:a+b}dt.zero=Object.freeze(new dt(0,0,0,0)),dt.NaN=Object.freeze(new dt(NaN,NaN,NaN,NaN));var dv=Date.now(),dw={create:(...a)=>Object.assign((...b)=>{if(dw.check(...a)){"function"==typeof b[0]&&(b=cu(b[0]()));let a=Date.now()-dv;if(a>2e3){let b=(Math.floor(a/100)/10).toFixed(1);aa.log(`**** ${b}s since last log message ****`)}dv=Date.now(),aa.log(...b)}},{check:()=>dw.check(...a),group:(b,c)=>dw.check(...a)?aa.logGroup(b,c):c()}),check:(...a)=>(0===a.length&&a.push(!0),cu(aH("agChartsDebug")).some(b=>a.includes(b))),inDevelopmentMode(a){if(dw.check("dev"))return a()}};function dx({context:a,pixelRatio:b,width:c,height:d}){a.save();try{a.resetTransform(),a.clearRect(0,0,Math.ceil(c*b),Math.ceil(d*b))}finally{a.restore()}}function dy(a){if(dw.check("canvas")){let b=a.save.bind(a),c=a.restore.bind(a),d=0;Object.assign(a,{save(){b(),d++},restore(){if(0===d)throw Error("AG Charts - Unable to restore() past depth 0");c(),d--},verifyDepthZero(){if(0!==d)throw Error(`AG Charts - Save/restore depth is non-zero: ${d}`)}})}}function dz(a,b,c){return[Math.floor(a*c),Math.floor(b*c)]}var dA=class{constructor(a){let{width:b,height:c,pixelRatio:d,willReadFrequently:e=!1}=a;this.width=b,this.height=c,this.pixelRatio=d;let[f,g]=dz(b,c,d);this.canvas=new OffscreenCanvas(f,g),this.context=this.canvas.getContext("2d",{willReadFrequently:e}),this.context.setTransform(d,0,0,d,0,0),dy(this.context)}drawImage(a,b=0,c=0){return a.drawImage(this.canvas,b,c)}transferToImageBitmap(){return this.canvas.transferToImageBitmap()}resize(a,b,c){if(!(a>0&&b>0))return;let{canvas:d,context:e}=this;if(a!==this.width||b!==this.height||c!==this.pixelRatio){let[e,f]=dz(a,b,c);d.width=e,d.height=f}e.setTransform(c,0,0,c,0,0),this.width=a,this.height=b,this.pixelRatio=c}clear(){dx(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}},dB=Symbol("BREAK"),dC="__decorator_config",dD="__decorator_accessors";function dE(a,b){if(null==Object.getOwnPropertyDescriptor(a,dC)&&Object.defineProperty(a,dC,{value:{}}),null==Object.getOwnPropertyDescriptor(a,dD)){let b=Object.getPrototypeOf(a)?.[dD];Object.defineProperty(a,dD,{value:b?.slice()??[]})}let c=a[dC],d=b.toString();if(null!=c[d])return c[d];c[d]={setters:[],getters:[],observers:[]};let e=Object.getOwnPropertyDescriptor(a,b),f=e?.get,g=e?.set;if(null==f||null==g){let c=a[dD],d=c.indexOf(b);-1===d&&(d=c.push(b)-1),f??(f=function(){let a=this.__accessors;return null==a&&Object.defineProperty(this,"__accessors",{value:a=c.slice().fill(void 0)}),a[d]}),g??(g=function(a){let b=this.__accessors;null==b&&Object.defineProperty(this,"__accessors",{value:b=c.slice().fill(void 0)}),b[d]=a})}return Object.defineProperty(a,b,{set:function(a){let e,{setters:h,observers:i}=c[d];for(let c of(h.some(a=>a.length>2)&&(e=f.call(this)),h))if((a=c(this,b,a,e))===dB)return;for(let b of(g.call(this,a),i))b(this,a,e)},get:function(){let a=f.call(this);for(let e of c[d].getters)if((a=e(this,b,a))===dB)return;return a},enumerable:!0,configurable:!1}),c[d]}function dF(a,b,c){return(d,e)=>{let f=dE(d,e);f.setters.push(a),b&&f.getters.unshift(b),c&&Object.assign(f,c)}}function dG(a){return(b,c)=>{dE(b,c).observers.push(a)}}function dH(a){return void 0!==a&&dC in a}function dI(a){let b=new Set;for(;dH(a);)b.add(a?.[dC]),a=Object.getPrototypeOf(a);return Array.from(b).flatMap(a=>Object.keys(a))}function dJ(a){return dI(a).reduce((b,c)=>(b[String(c)]=a[c]??null,b),{})}function dK(a,b){return Array.isArray(a)?!!Array.isArray(b)&&a.length===b.length&&a.every((a,c)=>dK(a,b[c])):aS(a)?!!aS(b)&&dL(a,b,dK):a===b}function dL(a,b,c){if(Object.is(a,b))return!0;for(let c of Object.keys(b))if(!(c in a))return!1;for(let d of Object.keys(a))if(!(d in b)||!c(a[d],b[d]))return!1;return!0}function dM(...a){let b={};for(let c of a)if(aQ(c))for(let a of dH(c)?dI(c):Object.keys(c))aS(b[a])&&aS(c[a])?b[a]=dM(b[a],c[a]):b[a]??(b[a]=c[a]);return b}function dN(...a){let b={};for(let c of a)if(aQ(c))for(let a of dH(c)?dI(c):Object.keys(c))aS(b[a])&&aS(c[a])?b[a]=dN(b[a],c[a]):a in b||(b[a]??(b[a]=c[a]));return b}function dO(a,...b){return b&&aM(a)?a.map(a=>dM(a,...b)):a}function dP(a,b){let c={};for(let[d,e]of cC(a))c[d]=b(e,d,a);return c}function dQ(a,b){let c={...a};for(let a of b)delete c[a];return c}function dR(a,b){if(null==a)return;let c={};for(let d of b)Object.hasOwn(a,d)&&(c[d]=a[d]);return c}function dS(a,b){return(aM(b)?b:b.split(".")).reduce((a,b)=>a[b],a)}var dT=new Set(["__proto__","constructor","prototype"]);function dU(a,b,c){let d=aM(b)?b.slice():b.split("."),e=d.pop();if(d.some(a=>dT.has(a)))return;let f=d.reduce((a,b)=>a[b],a);return f[e]=c,f[e]}function dV(a,b,c){if(void 0===c)return b;for(let d of a){let a=c[d];void 0!==a&&(b[d]=a)}return b}function dW(a){return null!=a&&"object"==typeof a&&aS(a)&&(Object.freeze(a),Object.getOwnPropertyNames(a).forEach(b=>{let c=a[b];null===c||"object"!=typeof c&&"function"!=typeof c||Object.isFrozen(c)||dW(c)})),a}function dX(a,b){return aS(a)&&b in a}function dY(a,b){return dX(a,b)&&"string"==typeof a[b]}var dZ=(a,b)=>a===b;function d$(a){return function(b,c){let d=`__${c}`;b[c]||function(a,b,c,d){let{changeCb:e,convertor:f,checkDirtyOnAssignment:g=!1}=d??{},h={changeCb:e,checkDirtyOnAssignment:g,convertor:f};Object.defineProperty(a,b,{set:function(a,b,c){let{checkDirtyOnAssignment:d}=c;return d?function(c){let d=b.call(this,c);return c?._dirty===!0&&this.markDirty(a),d}:b}(c,function(a,b){let{changeCb:c}=b;return c?function(b){let d=a.call(this,b);return d!==d2&&c.call(this,this),d}:a}(function(a,b){let{convertor:c}=b;return c?function(b){a.call(this,c(b))}:a}(function(a,b){let{equals:c=dZ}=b;return function(b){return c(b,this[a])?d2:(this[a]=b,this.onChangeDetection(a),b)}}(c,h),h),h),h),get:function(){return this[c]},enumerable:!0,configurable:!0})}(b,c,d,a)}}function d_(a){return d$(a)}function d0(a){return d$(a)}function d1(a){return(a??{}).equals=cw,d$(a)}var d2=Symbol("no-change"),d3=(a,b)=>Math.sign(a-b);function d4(a,b){if("number"==typeof a&&"number"==typeof b)return d3(a,b);let c="number"==typeof a?[a]:a,d="number"==typeof b?[b]:b,e=Math.min(c.length,d.length);for(let a=0;a<e;a+=1){let b=d3(c[a],d[a]);if(0!==b)return b}return d3(c.length,d.length)}var d5=(a=>(a[a.All=0]="All",a[a.None=1]="None",a))(d5||{}),d6=class a{constructor(b){this.serialNumber=a._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=c_(this),this.name=void 0,this.transitionOut=void 0,this.pointerEvents=0,this._datum=void 0,this._previousDatum=void 0,this.scene=void 0,this._debugDirtyProperties=void 0,this.parentNode=void 0,this.cachedBBox=void 0,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.batchLevel=0,this.batchDirty=!1,this.name=b?.name,this.tag=b?.tag??NaN,this.zIndex=b?.zIndex??0,this.scene=b?.scene,(b?.debugDirty??a._debugEnabled)&&(this._debugDirtyProperties=new Map([["__first__",[]]]))}static toSVG(a,b,c){let d=a?.toSVG();if(null==d||!d.elements.length&&!d.defs?.length)return;let e=aJ("svg");if(e.setAttribute("width",String(b)),e.setAttribute("height",String(c)),e.setAttribute("viewBox",`0 0 ${b} ${c}`),e.setAttribute("overflow","visible"),d.defs?.length){let a=aJ("defs");a.append(...d.defs),e.append(a)}return e.append(...d.elements),e.outerHTML}static*extractBBoxes(a,b){for(let c of a)if(!b||c.visible&&!c.transitionOut){let a=c.getBBox();a&&(yield a)}}get datum(){return this._datum}set datum(a){this._datum!==a&&(this._previousDatum=this._datum,this._datum=a)}get previousDatum(){return this._previousDatum}get layerManager(){return this.scene?.layersManager}get imageLoader(){return this.scene?.imageLoader}closestDatum(){for(let{datum:a}of this.traverseUp(!0))if(null!=a)return a}preRender(a,b=1){if(this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=b,this.childNodeCounts.thisComplexity=b,this.batchLevel>0||this.batchDirty)throw Error("AG Charts - illegal rendering state; batched update in progress");return this.childNodeCounts}isolatedRender(a){a.ctx.save();try{this.render(a)}catch(b){let a=b.errorCount??1;if(a>=5)throw b.errorCount=a,b;aa.warnOnce("Error during rendering",b,b.stack)}finally{a.ctx.restore()}}render(a){let{stats:b}=a;if(this.debugDirtyProperties(),a.debugNodeSearch){let b=this.name??this.id;a.debugNodeSearch.some(a=>"string"==typeof a?a===b:a.test(b))&&(a.debugNodes[this.name??this.id]=this)}b&&(b.nodesRendered++,b.opsPerformed+=this.childNodeCounts.thisComplexity)}setScene(a){this.scene=a}*traverseUp(a){let b=this;for(a&&(yield b);b=b.parentNode;)yield b}isRoot(){return!this.parentNode}removeChild(a){throw Error(`AG Charts - internal error, unknown child node ${a.name??a.id} in $${this.name??this.id}`)}remove(){this.parentNode?.removeChild(this)}destroy(){this.parentNode?.removeChild(this)}batchedUpdate(a){this.batchLevel++,a(),this.batchLevel--,0===this.batchLevel&&this.batchDirty&&(this.markDirty(),this.batchDirty=!1)}setProperties(a){return this.batchLevel++,Object.assign(this,a),this.batchLevel--,0===this.batchLevel&&this.batchDirty&&(this.markDirty(),this.batchDirty=!1),this}containsPoint(a,b){return!1}pickNode(a,b){if(this.containsPoint(a,b))return this}pickNodes(a,b,c=[]){return this.containsPoint(a,b)&&c.push(this),c}getBBox(){return this.cachedBBox??(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}onChangeDetection(a){this.markDirty(a)}markDirtyChildrenOrder(){this.cachedBBox=void 0}markDirty(a){if(this.batchLevel>0){this.batchDirty=!0;return}null!=a&&this._debugDirtyProperties&&this.markDebugProperties(a),this.cachedBBox=void 0,this.parentNode?.markDirty()}markDebugProperties(a){let b=this._debugDirtyProperties?.get(a)??[],c=Error().stack?.split("\n").filter(a=>"Error"!==a&&!a.includes(".markDebugProperties")&&!a.includes(".markDirty")&&!a.includes("Object.assign ")&&!a.includes(`${this.constructor.name}.`))??"unknown";b.push(c[0].replace(" at ","").trim()),this._debugDirtyProperties?.set(a,b)}debugDirtyProperties(){null!=this._debugDirtyProperties&&(this._debugDirtyProperties.has("__first__")||this._debugDirtyProperties.forEach((a,b)=>{a.length>1&&(console.groupCollapsed(`Property changed multiple times before render: ${this.constructor.name}.${b} (${a.length}x)`),a.forEach(a=>console.log(a)),console.groupEnd())}),this._debugDirtyProperties.clear())}onZIndexChange(){this.parentNode?.markDirtyChildrenOrder()}toSVG(){}};d6._nextSerialNumber=0,d6._debugEnabled=!1,dl([d$()],d6.prototype,"visible",2),dl([d$({equals:dK,changeCb:a=>a.onZIndexChange()})],d6.prototype,"zIndex",2);var d7=d6,d8=2*Math.PI,d9=Math.PI/2;function ea(a){return a%=d8,a+=d8,a%=d8}function eb(a){return a%=d8,(a+=d8)!==d8&&(a%=d8),a}function ec(a){return(a%=d8)<-Math.PI?a+=d8:a>=Math.PI&&(a-=d8),a}function ed(a,b,c){let d=ea(a),e=ea(b),f=ea(c);return e<f?e<=d&&d<=f:e>f?e<=d||d<=f:b!==c}function ee(a){return a/180*Math.PI}function ef(a){return a/Math.PI*180}function eg(a,b){return a=ea(a),(b=ea(b))-a+(a>b?d8:0)}function eh(a){let b=ea(a);return b<=d9?b/d9:b<=Math.PI?(Math.PI-b)/d9:b<=1.5*Math.PI?(b-Math.PI)/d9:(d8-b)/d9}function ei(a,b,c){let d=eh(c);return a*d+b*Math.abs(1-d)}function ej(a){return a?ea(ee(a)):0}var ek=(a,b,c)=>a*(1-c)+b*c,el=a=>{let b=Math.abs(a);return b<=.04045?a/12.92:(a<0?-1:1)*((b+.055)/1.055)**2.4},em=a=>{let b=Math.abs(a);return b>.0031308?(a<0?-1:1)*(1.055*b**(1/2.4)-.055):12.92*a},en=class a{constructor(a,b,c,d=1){this.r=aA(0,a||0,1),this.g=aA(0,b||0,1),this.b=aA(0,c||0,1),this.a=aA(0,d||0,1)}static validColorString(b){return b.indexOf("#")>=0?!!a.parseHex(b):b.indexOf("rgb")>=0?!!a.stringToRgba(b):a.nameToHex.has(b.toLowerCase())}static fromString(b){if(b.indexOf("#")>=0)return a.fromHexString(b);let c=a.nameToHex.get(b.toLowerCase());if(c)return a.fromHexString(c);if(b.indexOf("rgb")>=0)return a.fromRgbaString(b);throw Error(`Invalid color string: '${b}'`)}static parseHex(a){let b;switch((a=a.replace(/ /g,"").slice(1)).length){case 6:case 8:b=[];for(let c=0;c<a.length;c+=2)b.push(parseInt(`${a[c]}${a[c+1]}`,16));break;case 3:case 4:b=a.split("").map(a=>parseInt(a,16)).map(a=>a+16*a)}if(b?.length>=3&&b.every(a=>a>=0))return 3===b.length&&b.push(255),b}static fromHexString(b){let c=a.parseHex(b);if(c){let[b,d,e,f]=c;return new a(b/255,d/255,e/255,f/255)}throw Error(`Malformed hexadecimal color string: '${b}'`)}static stringToRgba(a){let b=-1,c=-1;for(let d=0;d<a.length;d++){let e=a[d];if(-1===b&&"("===e)b=d;else if(")"===e){c=d;break}}if(-1===b||-1===c)return;let d=a.substring(b+1,c).split(","),e=[];for(let a=0;a<d.length;a++){let b=d[a],c=parseFloat(b);if(!Number.isFinite(c))return;c=b.indexOf("%")>=0?aA(0,c,100)/100:3===a?aA(0,c,1):aA(0,c,255)/255,e.push(c)}return e}static fromRgbaString(b){let c=a.stringToRgba(b);if(c){if(3===c.length)return new a(c[0],c[1],c[2]);else if(4===c.length)return new a(c[0],c[1],c[2],c[3])}throw Error(`Malformed rgb/rgba color string: '${b}'`)}static fromArray(b){if(4===b.length)return new a(b[0],b[1],b[2],b[3]);if(3===b.length)return new a(b[0],b[1],b[2]);throw Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(b,c,d,e=1){let f=a.HSBtoRGB(b,c,d);return new a(f[0],f[1],f[2],e)}static fromHSL(b,c,d,e=1){let f=a.HSLtoRGB(b,c,d);return new a(f[0],f[1],f[2],e)}static fromOKLCH(b,c,d,e=1){let f=a.OKLCHtoRGB(b,c,d);return new a(f[0],f[1],f[2],e)}static padHex(a){return 1===a.length?"0"+a:a}toHexString(){let b="#"+a.padHex(Math.round(255*this.r).toString(16))+a.padHex(Math.round(255*this.g).toString(16))+a.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(b+=a.padHex(Math.round(255*this.a).toString(16))),b}toRgbaString(a=3){let b=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],c=Math.pow(10,a);return 1!==this.a?(b.push(Math.round(this.a*c)/c),`rgba(${b.join(", ")})`):`rgb(${b.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return a.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(a,b,c){let d=el(a),e=el(b),f=el(c),g=Math.cbrt(.4122214708*d+.5363325363*e+.0514459929*f),h=Math.cbrt(.2119034982*d+.6806995451*e+.1073969566*f),i=Math.cbrt(.0883024619*d+.2817188376*e+.6299787005*f),j=1.9779984951*g-2.428592205*h+.4505937099*i,k=.0259040371*g+.7827717662*h-.808675766*i,l=180*Math.atan2(k,j)/Math.PI;return[.2104542553*g+.793617785*h-.0040720468*i,Math.hypot(j,k),l>=0?l:l+360]}static OKLCHtoRGB(a,b,c){let d=b*Math.cos(c*Math.PI/180),e=b*Math.sin(c*Math.PI/180),f=(a+.3963377774*d+.2158037573*e)**3,g=(a-.1055613458*d-.0638541728*e)**3,h=(a-.0894841775*d-1.291485548*e)**3,i=em(4.0767416621*f-3.3077115913*g+.2309699292*h);return[i,em(-1.2684380046*f+2.6097574011*g-.3413193965*h),em(-.0041960863*f-.7034186147*g+1.707614701*h)]}static RGBtoHSL(a,b,c){let d,e,f=Math.min(a,b,c),g=Math.max(a,b,c),h=(g+f)/2;if(g===f)d=0,e=0;else{let i=g-f;e=h>.5?i/(2-g-f):i/(g+f),d=(g===a?(b-c)/i+6*(b<c):g===b?(c-a)/i+2:(a-b)/i+4)*60}return[d,e,h]}static HSLtoRGB(a,b,c){if(a=(a%360+360)%360,0===b)return[c,c,c];let d=c<.5?c*(1+b):c+b-c*b,e=2*c-d;function f(a){return(a<0&&(a+=1),a>1&&(a-=1),a<1/6)?e+(d-e)*6*a:a<.5?d:a<2/3?e+(d-e)*(2/3-a)*6:e}let g=f(a/360+1/3);return[g,f(a/360),f(a/360-1/3)]}static RGBtoHSB(a,b,c){let d=Math.min(a,b,c),e=Math.max(a,b,c),f=0;if(d!==e){let g=e-d,h=(e-a)/g,i=(e-b)/g,j=(e-c)/g;(f=(a===e?j-i:b===e?2+h-j:4+i-h)/6)<0&&(f+=1)}return[360*f,0===e?0:(e-d)/e,e]}static HSBtoRGB(a,b,c){a=(a%360+360)%360/360;let d=0,e=0,f=0;if(0===b)d=e=f=c;else{let g=(a-Math.floor(a))*6,h=g-Math.floor(g),i=c*(1-b),j=c*(1-b*h),k=c*(1-b*(1-h));switch(0|g){case 0:d=c,e=k,f=i;break;case 1:d=j,e=c,f=i;break;case 2:d=i,e=c,f=k;break;case 3:d=i,e=j,f=c;break;case 4:d=k,e=i,f=c;break;case 5:d=c,e=i,f=j}}return[d,e,f]}static mix(b,c,d){return new a(ek(b.r,c.r,d),ek(b.g,c.g,d),ek(b.b,c.b,d),ek(b.a,c.a,d))}static lighten(b,c){let d=a.RGBtoOKLCH(b.r,b.g,b.b);return a.fromOKLCH(aA(0,d[0]+c,1),d[1],d[2])}static darken(b,c){let d=a.RGBtoOKLCH(b.r,b.g,b.b);return a.fromOKLCH(aA(0,d[0]-c,1),d[1],d[2])}static interpolate(b,c){let d=1/(b.length-1),e=b.map(b=>a.RGBtoOKLCH(b.r,b.g,b.b));return Array.from({length:c},(f,g)=>{let h=g/(c-1),i=b.length<=2?0:Math.min(Math.floor(h*(b.length-1)),b.length-2),j=(h-i*d)/d,k=e[i],l=e[i+1];return a.fromOKLCH(ek(k[0],l[0],j),ek(k[1],l[1],j),ek(k[2],l[2],j))})}};en.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]);var eo=(a=>(a[a.Leading=0]="Leading",a[a.Trailing=1]="Trailing",a[a.Interpolate=2]="Interpolate",a))(eo||{}),ep=class{ticks(a,b,c){}niceDomain(a,b=this.domain){return b}get bandwidth(){}get step(){}get inset(){}},eq=(a,b)=>{let c=Symbol(String(b));a[c]=void 0,Object.defineProperty(a,b,{get(){return this[c]},set(a){this[c]!==a&&(this[c]=a,this.invalid=!0)},enumerable:!0,configurable:!1})},er=a=>{let b=en.fromString(a),[c,d,e]=en.RGBtoOKLCH(b.r,b.g,b.b);return{l:c,c:d,h:e,a:b.a}},es=a=>a.c<1e-6||a.l<1e-6||a.l>.999999,et=class extends ep{constructor(){super(...arguments),this.type="color",this.defaultTickCount=0,this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(er)}update(){let{domain:a,range:b}=this;a.length<2&&(aa.warnOnce("`colorDomain` should have at least 2 values."),0===a.length?a.push(0,1):1===a.length&&a.push(a[0]+1));for(let b=1;b<a.length;b++)if(a[b-1]>a[b]){aa.warnOnce("`colorDomain` values should be supplied in ascending order."),a.sort((a,b)=>a-b);break}if(b.length<a.length)for(let c=b.length;c<a.length;c++)b.push(b.length>0?b[0]:"black");this.parsedRange=this.range.map(er)}normalizeDomains(...a){return{domain:a.flat(),animatable:!0}}toDomain(){}convert(a){let b,c;this.refresh();let{domain:d,range:e,parsedRange:f}=this,g=d[0],h=d.at(-1),i=e[0],j=e[e.length-1];if(a<=g)return i;if(a>=h)return j;if(2===d.length){let d=(a-g)/(h-g),f=1/(e.length-1);b=e.length<=2?0:Math.min(Math.floor(d*(e.length-1)),e.length-2),c=(d-b*f)/f}else{for(b=0;b<d.length-2&&!(a<d[b+1]);b++);let e=d[b];c=(a-e)/(d[b+1]-e)}return((a,b,c)=>{let d;if(c=aA(0,c,1),es(a))d=b.h;else if(es(b))d=a.h;else{let e=a.h,f=b.h,g=b.h-a.h;g>180?f-=360:g<-180&&(f+=360),d=e*(1-c)+f*c}let e=a.c*(1-c)+b.c*c,f=a.l*(1-c)+b.l*c,g=a.a*(1-c)+b.a*c;return en.fromOKLCH(f,e,d,g)})(f[b],f[b+1],c).toRgbaString()}invert(){}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&aa.warnOnce("Expected update to not invalidate scale"))}};dl([eq],et.prototype,"domain",2),dl([eq],et.prototype,"range",2);var eu=class{constructor(a,b=[],c){this.colorSpace=a,this.stops=b,this.bbox=c,this._cache=void 0}createGradient(a,b,c){let d=this.bbox??b;if(!d.isFinite())return;if(null!=this._cache&&this._cache.ctx===a&&this._cache.bbox.equals(d))return this._cache.gradient;let{stops:e,colorSpace:f}=this;if(0===e.length)return;if(1===e.length)return e[0].color;let g=this.createCanvasGradient(a,d,c);if(null==g)return;let h="oklch"===f,i=e[0];g.addColorStop(i.stop,i.color);for(let a=1;a<e.length;a+=1){let b=e[a];if(h){let a=new et;a.domain=[i.stop,b.stop],a.range=[i.color,b.color];for(let c=i.stop+.05;c<b.stop;c+=.05)g.addColorStop(c,a.convert(c))}g.addColorStop(b.stop,b.color),i=b}return"createPattern"in g&&(g=g.createPattern()),this._cache={ctx:a,bbox:d,gradient:g},g}toSvg(a){let b=this.bbox??a,c=this.createSvgGradient(b);return this.stops.forEach(({stop:a,color:b})=>{let d=aJ("stop");d.setAttribute("offset",`${a}`),d.setAttribute("stop-color",`${b}`),c.appendChild(d)}),c}},ev=class extends eu{constructor(a,b,c=0,d){super(a,b,d),this.angle=c}createCanvasGradient(a,b,c){let{angle:d}=this,e=ej(d+-90),f=c?.centerX??b.x+.5*b.width,g=c?.centerY??b.y+.5*b.height;return a.createConicGradient(e,f,g)}createSvgGradient(a){return aJ("linearGradient")}},ew=class extends eu{constructor(a,b,c=0,d){super(a,b,d),this.angle=c}getGradientPoints(a){let{angle:b}=this,c=ej(b+90),d=Math.cos(c),e=Math.sin(c),f=a.width,g=a.height,h=a.x+.5*f,i=a.y+.5*g,j=Math.sqrt(g*g+f*f)/2*Math.abs(Math.cos((c<Math.PI/2?c:c<Math.PI?Math.PI-c:c<1.5*Math.PI?c-Math.PI:2*Math.PI-c)-Math.atan2(g,f)));return{x0:h+d*j,y0:i+e*j,x1:h-d*j,y1:i-e*j}}createCanvasGradient(a,b){let{x0:c,y0:d,x1:e,y1:f}=this.getGradientPoints(b);if(!(isNaN(c)||isNaN(d)||isNaN(e)||isNaN(f)))return a.createLinearGradient(c,d,e,f)}createSvgGradient(a){let{x0:b,y0:c,x1:d,y1:e}=this.getGradientPoints(a),f=aJ("linearGradient");return f.setAttribute("x1",String(b)),f.setAttribute("y1",String(c)),f.setAttribute("x2",String(d)),f.setAttribute("y2",String(e)),f.setAttribute("gradientUnits","userSpaceOnUse"),f}},ex=class extends eu{constructor(a,b,c){super(a,b,c)}createCanvasGradient(a,b,c){let d=c?.centerX??b.x+.5*b.width,e=c?.centerY??b.y+.5*b.height,f=c?.innerRadius??0,g=c?.outerRadius??Math.hypot(.5*b.width,.5*b.height)/Math.SQRT2;return a.createRadialGradient(d,e,f,d,e,g)}createSvgGradient(a){let b=a.x+.5*a.width,c=a.y+.5*a.height,d=aJ("radialGradient");return d.setAttribute("cx",String(b)),d.setAttribute("cy",String(c)),d.setAttribute("r",String(Math.hypot(.5*a.width,.5*a.height)/Math.SQRT2)),d.setAttribute("gradientUnits","userSpaceOnUse"),d}},ey=function(a,b){dE(a,b).optional=!0},ez=class{handleUnknownProperties(a,b){}set(a){let{className:b=this.constructor.name}=this.constructor;if(null==a)return this.clear(),this;if("object"!=typeof a)return aa.warn(`unable to set ${b} - expecting a properties object`),this;let c=new Set(Object.keys(a));for(let b of dI(this))if(c.has(b)){let d=a[b];if(eB(this[b]))if(this[b]instanceof eA){let a=this[b].reset(d);null==a?aa.warn(`unable to set [${String(b)}] - expecting a properties array`):this[b]=a}else this[b].set(d);else aS(d)?this[b]=dN(d,this[b]??{}):this[b]=d;c.delete(b)}for(let d of(this.handleUnknownProperties(c,a),c))aa.warn(`unable to set [${String(d)}] in ${b} - property is unknown`);return this}clear(){for(let a of dI(this)){let b=this[a];eB(b)?b.clear():this[a]=void 0}return this}toJson(){return dI(this).reduce((a,b)=>{let c=this[b];return a[String(b)]=eB(c)?c.toJson():c,a},{})}},eA=class a extends Array{constructor(a,...b){super(b.length),Object.defineProperty(this,"itemFactory",{value:a?.prototype?.constructor?.name?b=>new a().set(b):a,enumerable:!1,configurable:!1}),this.set(b)}set(a){if(aM(a)){this.length=a.length;for(let b=0;b<a.length;b++)this[b]=this.itemFactory(a[b])}return this}reset(b){if(Array.isArray(b))return new a(this.itemFactory,...b)}toJson(){return this.map(a=>a?.toJson?.()??a)}};function eB(a){return a instanceof ez||a instanceof eA}var eC=class extends ez{constructor(){super(...arguments),this.color="black"}};function eD(a){return a.flatMap((b,c)=>{let{stop:d}=b,e=a.at(c+1)?.color;return null!=e?[b,{stop:d,color:e}]:[b]})}function eE(a,b,c,d="continuous"){let e,f=a.map(a=>"string"==typeof a?{color:a}:a);if(0===f.length){let a=+("discrete"===d),c=b.map((b,c,{length:d})=>({stop:(c+a)/(d-1+a),color:b}));return"discrete"===d?eD(c):c}if(!function(a){let b;for(let c of a)if(c?.stop!=null){if(null!=b&&c.stop<b)return!1;b=c.stop}return!0}(f))return aa.warnOnce("[fills] must have the stops defined in ascending order"),[];let g=Math.min(...c),h=Math.max(...c),i="discrete"===d,j=new Float64Array(f.length),k=0,l=-1;for(let a=0;a<f.length;a+=1){let b=f[a];if(a>=l){l=f.length-1;for(let b=a+1;b<f.length;b+=1)if(f[b]?.stop!=null){l=b;break}}let c=b?.stop;if(null==c){let b=f[k]?.stop,d=f[l]?.stop,e=b??g,j=i&&null==b?1:0;c=e+((d??h)-e)*(a-k+j)/(l-k+j)}else k=a;j[a]=Math.max(0,Math.min(1,(c-g)/(h-g)))}let m=f.find(a=>null!=a.color)?.color,n=f.map((a,c)=>{let d=a?.color,f=j[c];return null!=d?m=d:null!=m?d=m:(null==e&&((e=new et).domain=[0,1],e.range=b),d=e.convert(f)),{stop:f,color:d}});return"discrete"===d?eD(n):n}dl([ey],eC.prototype,"stop",2),dl([ey],eC.prototype,"color",2);var eF=class{constructor(a,b){this.imageLoader=a,this._cache=void 0,this.url=b.url,this.backgroundFill=b.backgroundFill??"black",this.backgroundFillOpacity=b.backgroundFillOpacity??1,this.repeat=b.repeat??"no-repeat",this.width=b.width,this.height=b.height,this.fit=b.fit??"stretch",this.rotation=b.rotation??0}createCanvasImage(a,b,c,d){if(!b)return null;let[e,f]=this.getSize(b.width,b.height,c,d);return e<1||f<1?(aa.warnOnce("Image fill is too small to render, ignoring."),null):a.createPattern(b,this.repeat)}getSize(a,b,c,d){let{fit:e}=this,f=a,g=b,h=1,i=c/d,j=a/b;return"stretch"===e||0===a||0===b?(f=c,g=d):"contain"===e?h=j>i?c/a:d/b:"cover"===e&&(h=j>i?d/b:c/a),[Math.max(1,f*h),Math.max(1,g*h)]}setImageTransform(a,b){if("string"==typeof a)return;let{url:c,rotation:d,width:e,height:f}=this,g=this.imageLoader?.loadImage(c);if(!g)return;let h=ej(d),i=Math.cos(h),j=Math.sin(h),[k,l]=this.getSize(g.width,g.height,e??b.width,f??b.height),m=k/g.width,n=l/g.height,o=b.x+b.width/2,p=b.y+b.height/2;a?.setTransform(new DOMMatrix([i*m,j*n,-j*m,i*n,o-(i*k-j*l)/2,p-(j*k+i*l)/2]))}createPattern(a,b,c,d){let e=this.width??b,f=this.height??c,g=this._cache;if(null!=g&&g.ctx===a&&g.width===e&&g.height===f)return g.pattern;let h=this.imageLoader?.loadImage(this.url,d),i=this.createCanvasImage(a,h,e,f);if(null!=i)return this._cache={ctx:a,pattern:i,width:e,height:f},i}toSvg(a,b){let{url:c,rotation:d,backgroundFill:e,backgroundFillOpacity:f}=this,{x:g,y:h,width:i,height:j}=a,k=aJ("pattern");k.setAttribute("viewBox",`0 0 ${i} ${j}`),k.setAttribute("x",String(g)),k.setAttribute("y",String(h)),k.setAttribute("width",String(i)),k.setAttribute("height",String(j)),k.setAttribute("patternUnits","userSpaceOnUse");let l=aJ("rect");l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("width",String(i)),l.setAttribute("height",String(j)),l.setAttribute("fill",e),l.setAttribute("fill-opacity",String(f)),k.appendChild(l);let m=aJ("image");return m.setAttribute("href",c),m.setAttribute("x","0"),m.setAttribute("y","0"),m.setAttribute("width",String(i)),m.setAttribute("height",String(j)),m.setAttribute("preserveAspectRatio","none"),m.setAttribute("transform",`scale(${1/b}) rotate(${d}, ${i/2}, ${j/2})`),k.appendChild(m),k}};function eG(a,b,c,d){let e=a-c,f=b-d;return e*e+f*f}function eH(a,b,c,d,e,f,g){if(c===e&&d===f)return Math.min(g,eG(a,b,c,d));let h=e-c,i=f-d,j=Math.max(0,Math.min(1,((a-c)*h+(b-d)*i)/(h*h+i*i)));return Math.min(g,eG(a,b,c+j*h,d+j*i))}var eI=/^[\t\n\f\r ]*([achlmqstvz])[\t\n\f\r ]*/i,eJ=/^[+-]?((\d*\.\d+)|(\d+\.)|(\d+))(e[+-]?\d+)?/i,eK=/[\t\n\f\r ]*,?[\t\n\f\r ]*/,eL=/^[01]/,eM={z:[],h:[eJ],v:[eJ],m:[eJ,eJ],l:[eJ,eJ],t:[eJ,eJ],s:[eJ,eJ,eJ,eJ],q:[eJ,eJ,eJ,eJ],c:[eJ,eJ,eJ,eJ,eJ,eJ],a:[eJ,eJ,eJ,eL,eL,eJ,eJ]};function eN(a,b,c,d,e,f,g,h){let i=(c-a)*(h-f)-(d-b)*(g-e);if(0===i)return 0;let j=((g-e)*(b-f)-(a-e)*(h-f))/i,k=((c-a)*(b-f)-(d-b)*(a-e))/i;return+(j>=0&&j<=1&&k>=0&&k<=1)}function eO(a,b,c,d){return[-a+3*b-3*c+d,3*a-6*b+3*c,-3*a+3*b,a]}function eP(a,b,c,d,e){return(1-e)**3*a+3*(1-e)**2*e*b+3*(1-e)*e**2*c+e**3*d}function eQ(a,b,c,d,e){if(e<=Math.min(a,d))return a<d?0:1;if(e>=Math.max(a,d))return+(a<d);let f=0,g=1,h=NaN;for(let i=0;i<12;i+=1)eP(a,b,c,d,h=(f+g)/2)<e?f=h:g=h;return h}function eR(a,b,c,d,e,f,g,h,i){let j=(1-i)*a+i*c,k=(1-i)*b+i*d,l=(1-i)*c+i*e,m=(1-i)*d+i*f,n=(1-i)*e+i*g,o=(1-i)*f+i*h,p=(1-i)*j+i*l,q=(1-i)*k+i*m,r=(1-i)*l+i*n,s=(1-i)*m+i*o,t=(1-i)*p+i*r,u=(1-i)*q+i*s;return[[{x:a,y:b},{x:j,y:k},{x:p,y:q},{x:t,y:u}],[{x:t,y:u},{x:r,y:s},{x:n,y:o},{x:g,y:h}]]}function eS(a,b,c,d){let e=-a+3*b-3*c+d,f=2*(a-2*b+c),g=-a+b;if(0===e){if(0!==f){let a=-g/f;if(a>0&&a<1)return[a]}return[]}let h=f*f-4*e*g;if(h>=0){let a=Math.sqrt(h);return[(-f+a)/(2*e),(-f-a)/(2*e)].filter(a=>a>0&&a<1)}return[]}function eT(a,b,c,d,e,f,g,h){return[...eS(a,c,e,g),...eS(b,d,f,h)]}function eU(a,b,c){let d=Math.hypot(eP(a[0].x,a[1].x,a[2].x,a[3].x,.5)-b,eP(a[0].y,a[1].y,a[2].y,a[3].y,.5)-c),e=Math.min(Math.hypot(a[0].x-b,a[0].y-c),Math.hypot(a[1].x-b,a[1].y-c),Math.hypot(a[2].x-b,a[2].y-c),Math.hypot(a[3].x-b,a[3].y-c));return{points:a,distance:d,minDistance:e}}function eV(a,b,c,d,e,f,g,h,i,j,k=1){let l,m={value:eU([{x:a,y:b},{x:c,y:d},{x:e,y:f},{x:g,y:h}],i,j),next:null};for(;null!=m;){let{points:a,distance:b,minDistance:c}=m.value;if(m=m.next,(null==l||b<l.distance)&&(l={distance:b,minDistance:c}),null!=l&&l.distance-c<=k)continue;let[d,e]=eR(a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y,.5);m=function(a,b,c){let d=a,e=d;for(let a of b)if(null==d||c(d.value,a)>0)e=d={value:a,next:d};else{for(;null!=e.next&&0>=c(e.next.value,a);)e=e.next;e.next={value:a,next:e.next}}return d}(m,[eU(d,i,j),eU(e,i,j)].sort(eW),eW)}return l?.distance??1/0}var eW=(a,b)=>b.minDistance-a.minDistance,eX=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.cx=NaN,this.cy=NaN,this.sx=NaN,this.sy=NaN,this.openedPath=!1,this.closedPath=!1}isEmpty(){return 0===this.commands.length}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(a,b){this.openedPath=!0,this.sx=a,this.sy=b,this.cx=a,this.cy=b,this.path2d.moveTo(a,b),this.commands.push(0),this.params.push(a,b)}lineTo(a,b){this.openedPath?(this.cx=a,this.cy=b,this.path2d.lineTo(a,b),this.commands.push(1),this.params.push(a,b)):this.moveTo(a,b)}cubicCurveTo(a,b,c,d,e,f){this.openedPath||this.moveTo(a,b),this.path2d.bezierCurveTo(a,b,c,d,e,f),this.commands.push(2),this.params.push(a,b,c,d,e,f)}closePath(){this.openedPath&&(this.cx=this.sx,this.cy=this.sy,this.sx=NaN,this.sy=NaN,this.path2d.closePath(),this.commands.push(3),this.openedPath=!1,this.closedPath=!0)}rect(a,b,c,d){this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath()}roundRect(a,b,c,d,e){e=Math.min(e,c/2,d/2),this.moveTo(a,b+e),this.arc(a+e,b+e,e,Math.PI,1.5*Math.PI),this.lineTo(a+e,b),this.lineTo(a+c-e,b),this.arc(a+c-e,b+e,e,1.5*Math.PI,2*Math.PI),this.lineTo(a+c,b+e),this.lineTo(a+c,b+d-e),this.arc(a+c-e,b+d-e,e,0,Math.PI/2),this.lineTo(a+c-e,b+d),this.lineTo(a+e,b+d),this.arc(a+ +e,b+d-e,e,Math.PI/2,Math.PI),this.lineTo(a,b+d-e),this.closePath()}ellipse(a,b,c,d,e,f,g,h=!1){let i=d/c,j=Math.cos(e),k=Math.sin(e),l=-i*k,m=i*j,n=c*Math.cos(f),o=c*Math.sin(f),p=a+j*n+l*o,q=b+k*n+m*o,r=(p-this.cx)**2+(q-this.cy)**2;this.openedPath?r>1e-6&&this.lineTo(p,q):this.moveTo(p,q);let s=h?-ea(f-g):ea(g-f);1e-6>Math.abs(Math.abs(g-f)-2*Math.PI)&&s<2*Math.PI&&(s+=2*Math.PI*(h?-1:1));let t=Math.max(Math.ceil(Math.abs(s)/(Math.PI/2)),1),u=s/t,v=4/3*Math.tan(u/4);for(let d=0;d<t;d+=1){let e=f+u*(d+0),g=f+u*(d+1),h=c*Math.sin(e),i=c*Math.cos(e),n=c*Math.sin(g),o=c*Math.cos(g),p=i-v*h,q=h+v*i,r=o+v*n,s=n-v*o;this.cubicCurveTo(a+j*p+l*q,b+k*p+m*q,a+j*r+l*s,b+k*r+m*s,a+j*o+l*n,b+k*o+m*n)}}arc(a,b,c,d,e,f){this.ellipse(a,b,c,c,0,d,e,f)}appendSvg(a){let b,c,d=function(a){let b;if(!a)return;let c=[],d=0;for(;d<a.length;){let e,f=eI.exec(a.slice(d));if(null==f){if(!b)return void aa.warnOnce(`Invalid SVG path, error at index ${d}: Missing command.`);e=b}else e=f[1],d+=f[0].length;let g=function(a,b,c){let d=eM[a.toLocaleLowerCase()],e={command:a,params:[]};for(let f of d){let d=b.slice(c),g=f.exec(d);if(null!=g){e.params.push(parseFloat(g[0])),c+=g[0].length;let a=eK.exec(d.slice(g[0].length));null!=a&&(c+=a[0].length)}else if(1!==e.params.length)return void aa.warnOnce(`Invalid SVG path, error at index ${c}: No path segment parameters for command [${a}]`);else break}return[c,e]}(e,a,d);if(!g)return;d=g[0],b=e,c.push(g[1])}return c}(a);if(null==d)return!1;let e=0,f=0,g=0,h=0;for(let{command:a,params:i}of d){b??(b=i[0]),c??(c=i[1]);let d=a===a.toLowerCase(),j=d?b:0,k=d?c:0;switch(a.toLowerCase()){case"m":this.moveTo(j+i[0],k+i[1]),b=j+i[0],c=k+i[1],e=b,f=c;break;case"c":this.cubicCurveTo(j+i[0],k+i[1],j+i[2],k+i[3],j+i[4],k+i[5]),g=j+i[2],h=k+i[3],b=j+i[4],c=k+i[5];break;case"s":this.cubicCurveTo(b+b-g,c+c-h,j+i[0],k+i[1],j+i[2],k+i[3]),g=j+i[0],h=k+i[1],b=j+i[2],c=k+i[3];break;case"q":this.cubicCurveTo((j+2*i[0])/3,(k+2*i[1])/3,(2*i[0]+i[2])/3,(2*i[1]+i[3])/3,i[2],i[3]),g=i[0],h=i[1],b=i[2],c=i[3];break;case"t":this.cubicCurveTo((b+2*(b+b-g))/3,(c+2*(c+c-h))/3,(2*(b+b-g)+i[0])/3,(2*(c+c-h)+i[1])/3,i[0],i[1]),g=b+b-g,h=c+c-h,b=i[0],c=i[1];break;case"a":this.svgEllipse(b,c,i[0],i[1],i[2]*Math.PI/180,i[3],i[4],j+i[5],k+i[6]),b=j+i[5],c=k+i[6];break;case"h":this.lineTo(j+i[0],c),b=j+i[0];break;case"l":this.lineTo(j+i[0],k+i[1]),b=j+i[0],c=k+i[1];break;case"v":this.lineTo(b,k+i[0]),c=k+i[0];break;case"z":this.closePath(),b=e,c=f;break;default:throw Error(`Could not translate command '${a}' with '${i.join(" ")}'`)}}return!0}svgEllipse(a,b,c,d,e,f,g,h,i){let j=(a-h)/2,k=(b-i)/2,l=Math.sin(e),m=Math.cos(e),n=m*j+l*k,o=-l*j+m*k,p=n/(c=Math.abs(c)),q=o/(d=Math.abs(d)),r=p*p+q*q,s=(a+h)/2,t=(b+i)/2,u=0,v=0;r>=1?(c*=r=Math.sqrt(r),d*=r):(r=Math.sqrt(1/r-1),f===g&&(r=-r),s+=m*(u=r*c*q)-l*(v=-r*d*p),t+=l*u+m*v);let w=Math.atan2((o-v)/d,(n-u)/c),x=Math.atan2((-o-v)/d,(-n-u)/c)-w;this.ellipse(s,t,c,d,e,w,w+x,!!(1-g))}clear(a){a&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(a,b){let c=this.commands,d=this.params,e=c.length,f=NaN,g=NaN,h=0,i=0,j=0;for(let k=0,l=0;k<e;k++)switch(c[k]){case 0:j+=eN(f,g,h,i,-1e4,-1e4,a,b),f=h=d[l++],g=i=d[l++];break;case 1:j+=eN(h,i,d[l++],d[l++],-1e4,-1e4,a,b),h=d[l-2],i=d[l-1];break;case 2:j+=function(a,b,c,d,e,f,g,h,i,j,k,l){let m=0,n=-1e4-l,o=k- -1e4,p=eO(a,c,e,g),q=eO(b,d,f,h),r=n*p[0]+o*q[0],s=n*p[1]+o*q[1];for(let a of function(a,b,c,d,e=1e-6){if(Math.abs(a)<e)return function(a,b,c,d=1e-6){if(Math.abs(a)<d){let a=-c/b;return 0!==b&&a>=0&&a<=1?[a]:[]}let e=b*b-4*a*c,f=[];if(Math.abs(e)<d){let c=-b/(2*a);c>=0&&c<=1&&f.push(c)}else if(e>0){let c=Math.sqrt(e),d=(-b-c)/(2*a),g=(-b+c)/(2*a);d>=0&&d<=1&&f.push(d),g>=0&&g<=1&&f.push(g)}return f}(b,c,d,e);let f=b/a,g=c/a,h=(3*g-f*f)/9,i=(9*f*g-d/a*27-2*f*f*f)/54,j=h*h*h+i*i,k=1/3,l=[];if(j>=0){let a=Math.sqrt(j),b=Math.sign(i+a)*Math.pow(Math.abs(i+a),k),c=Math.sign(i-a)*Math.pow(Math.abs(i-a),k),d=Math.abs(Math.sqrt(3)*(b-c)/2),g=-k*f+(b+c);if(g>=0&&g<=1&&l.push(g),Math.abs(d)<e){let a=-k*f-(b+c)/2;a>=0&&a<=1&&l.push(a)}}else{let a=Math.acos(i/Math.sqrt(-h*h*h)),b=k*f,c=2*Math.sqrt(-h),d=c*Math.cos(k*a)-b,e=c*Math.cos(k*(a+2*Math.PI))-b,g=c*Math.cos(k*(a+4*Math.PI))-b;d>=0&&d<=1&&l.push(d),e>=0&&e<=1&&l.push(e),g>=0&&g<=1&&l.push(g)}return l}(r,s,n*p[2]+o*q[2],n*p[3]+o*q[3]+(-1e4*(l- -1e4)-j*(k-i)))){let b,c=a*a,d=a*c,e=p[0]*d+p[1]*c+p[2]*a+p[3],f=q[0]*d+q[1]*c+q[2]*a+q[3];(b=i===k?(f-j)/(l-j):(e-i)/(k-i))>=0&&b<=1&&m++}return m}(h,i,d[l++],d[l++],d[l++],d[l++],d[l++],d[l++],-1e4,-1e4,a,b),h=d[l-2],i=d[l-1];break;case 3:j+=eN(f,g,h,i,-1e4,-1e4,a,b)}return j%2==1}distanceSquared(a,b){let c=1/0,d=this.commands,e=this.params,f=d.length,g=NaN,h=NaN,i=0,j=0;for(let k=0,l=0;k<f;k++)switch(d[k]){case 0:i=g=e[l++],j=h=e[l++];break;case 1:c=eH(a,b,i,j,i=e[l++],j=e[l++],c);break;case 2:{let d=i,f=j,g=e[l++],h=e[l++],k=e[l++];c=eV(d,f,g,h,k,e[l++],i=e[l++],j=e[l++],a,b)**2;break}case 3:c=eH(a,b,i,j,g,h,c)}return c}toSVG(a=(a,b)=>({x:a,y:b})){let b=[],{commands:c,params:d}=this,e=(c,e)=>{b.push(c);for(let c=0;c<e;c+=2){let{x:c,y:e}=a(d[f++],d[f++]);b.push(c,e)}},f=0;for(let a of c)switch(a){case 0:e("M",2);break;case 1:e("L",2);break;case 2:e("C",6);break;case 3:e("Z",0)}return b.join(" ")}computeBBox(){let{commands:a,params:b}=this,[c,d,e,f]=[1/0,1/0,-1/0,-1/0],[g,h]=[NaN,NaN],[i,j]=[NaN,NaN],k=(a,b)=>{c=Math.min(b,c),d=Math.min(a,d),e=Math.max(a,e),f=Math.max(b,f),g=a,h=b},l=0;for(let c of a)switch(c){case 0:k(b[l++],b[l++]),i=g,j=h;break;case 1:k(b[l++],b[l++]);break;case 2:{let a=g,c=h,d=b[l++],e=b[l++],f=b[l++],i=b[l++],j=b[l++],m=b[l++];eT(a,c,d,e,f,i,j,m).forEach(b=>{k(eP(a,d,f,j,b),eP(c,e,i,m,b))}),k(j,m);break}case 3:k(i,j),i=NaN,j=NaN}return new dt(d,c,e-d,f-c)}};function eY(a,b,c){let d=Math.round(b*a)/a;return null==c?d:0===c?0:c<1?Math.ceil(c*a)/a:Math.round((c+b)*a)/a-d}function eZ(a,b){return Math.floor(b*a)/a}function e$(a,b,c){let{width:d,height:e,padding:f,strokeWidth:g}=b,h=d/2,i=e/2,j=Math.max(1,d-f-g/2),k=Math.max(1,e-f-g/2),l=!1;for(let[b,d]of c){let c=h+(b-.5)*j,e=i+(d-.5)*k;l?a.lineTo(c,e):a.moveTo(c,e),l=!0}a.closePath()}var e_={circles(a,{width:b,strokeWidth:c,padding:d}){let e=b/2,f=Math.max(1,e-d-c/2);a.arc(e,e,f,0,2*Math.PI)},squares(a,{width:b,height:c,pixelRatio:d,padding:e,strokeWidth:f}){let g=e+f/2;a.moveTo(eY(d,g),eY(d,g)),a.lineTo(eY(d,b-g),eY(d,g)),a.lineTo(eY(d,b-g),eY(d,c-g)),a.lineTo(eY(d,g),eY(d,c-g)),a.closePath()},triangles(a,b){e$(a,b,[[.5,0],[1,1],[0,1]])},diamonds(a,b){e$(a,b,[[.5,0],[1,.5],[.5,1],[0,.5]])},stars(a,{width:b,height:c,padding:d}){let e=Math.max(1,(b-d)/2),f=e/2,g=Math.PI/2;for(let d=0;d<10;d++){let h=d%2==0?e:f,i=d*Math.PI/5-g,j=b/2+Math.cos(i)*h,k=c/2+Math.sin(i)*h;a.lineTo(j,k)}a.closePath()},hearts(a,{width:b,height:c,padding:d}){let e=Math.max(1,b/4-d/2),f=b/2,g=c/2+e/2;a.arc(f-e,g-e,e,ee(130),ee(330)),a.arc(f+e,g-e,e,ee(220),ee(50)),a.lineTo(f,g+e),a.closePath()},crosses(a,b){e$(a,b,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},"vertical-lines"(a,{width:b,height:c,pixelRatio:d,strokeWidth:e}){let f=eY(d,b/2)-e%2/2;a.moveTo(f,0),a.lineTo(f,c)},"horizontal-lines"(a,{width:b,height:c,pixelRatio:d,strokeWidth:e}){let f=eY(d,c/2)-e%2/2;a.moveTo(0,f),a.lineTo(b,f)},"forward-slanted-lines"(a,{width:b,height:c,strokeWidth:d}){let e=Math.atan2(c,b),f=d*Math.cos(e),g=d*Math.sin(e);a.moveTo(-f,g),a.lineTo(f,-g),a.moveTo(-f,c+g),a.lineTo(b+f,-g),a.moveTo(b-f,c+g),a.lineTo(b+f,c-g)},"backward-slanted-lines"(a,{width:b,height:c,strokeWidth:d}){let e=Math.atan2(c,b),f=d*Math.cos(e),g=d*Math.sin(e);a.moveTo(b-f,-g),a.lineTo(b+f,g),a.moveTo(-f,-g),a.lineTo(b+f,c+g),a.moveTo(-f,c-g),a.lineTo(f,c+g)}},e0=class{constructor(a){this._cache=void 0,this.width=Math.max(a?.width??10,1),this.height=Math.max(a?.height??10,1),this.fill=a.fill??"none",this.fillOpacity=a.fillOpacity??1,this.backgroundFill=a.backgroundFill??"none",this.backgroundFillOpacity=a.backgroundFillOpacity??1,this.stroke=a.stroke??"black",this.strokeOpacity=a.strokeOpacity??1,this.strokeWidth=a.strokeWidth??1,this.padding=a.padding??1,this.pattern=a.pattern??"forward-slanted-lines",this.rotation=a.rotation??0,this.scale=a.scale??1,this.path=a.path}getPath(a){let{pattern:b,width:c,height:d,padding:e,strokeWidth:f,path:g}=this,h=new eX,i=null!=e_[b];return g&&i&&(i=!h.appendSvg(g)),i&&e_[b](h,{width:c,height:d,pixelRatio:a,strokeWidth:f,padding:e}),h}renderStroke(a,b){let{stroke:c,strokeWidth:d,strokeOpacity:e}=this;d&&(b.strokeStyle=c,b.lineWidth=d,b.globalAlpha=e,b.stroke(a))}renderFill(a,b){let{fill:c,fillOpacity:d}=this;"none"!==c&&(b.fillStyle=c,b.globalAlpha=d,b.fill(a))}createCanvasPattern(a,b){let{width:c,height:d,scale:e,backgroundFill:f,backgroundFillOpacity:g}=this;if(c*e<1||d*e<1)return aa.warnOnce("Pattern fill is too small to render, ignoring."),null;let h=new dA({width:c,height:d,pixelRatio:b*e}),i=h.context;"none"!==f&&(i.fillStyle=f,i.globalAlpha=g,i.fillRect(0,0,c,d));let j=this.getPath(b).getPath2D();this.renderFill(j,i),this.renderStroke(j,i);let k=a.createPattern(h.canvas,"repeat");return this.setPatternTransform(k,b),h.destroy(),k}setPatternTransform(a,b,c=0,d=0){if(null==a)return;let e=ej(this.rotation),f=1/b,g=Math.cos(e)*f,h=Math.sin(e)*f;a.setTransform(new DOMMatrix([g,h,-h,g,c,d]))}createPattern(a,b){if(null!=this._cache&&this._cache.ctx===a&&this._cache.pixelRatio===b)return this._cache.pattern;let c=this.createCanvasPattern(a,b);if(null!=c)return this._cache={ctx:a,pattern:c,pixelRatio:b},c}toSvg(){let{width:a,height:b,fill:c,fillOpacity:d,backgroundFill:e,backgroundFillOpacity:f,stroke:g,strokeWidth:h,strokeOpacity:i,rotation:j,scale:k}=this,l=aJ("pattern");l.setAttribute("viewBox",`0 0 ${a} ${b}`),l.setAttribute("width",String(a)),l.setAttribute("height",String(b)),l.setAttribute("patternUnits","userSpaceOnUse");let m=aJ("rect");m.setAttribute("x","0"),m.setAttribute("y","0"),m.setAttribute("width",String(a)),m.setAttribute("height",String(b)),m.setAttribute("fill",e),m.setAttribute("fill-opacity",String(f)),l.appendChild(m);let n=aJ("path");return n.setAttribute("fill",c),n.setAttribute("fill-opacity",String(d)),n.setAttribute("stroke-opacity",String(i)),n.setAttribute("stroke",g),n.setAttribute("stroke-width",String(h)),n.setAttribute("transform",`rotate(${j}) scale(${k})`),n.setAttribute("d",this.getPath(1).toSVG()),l.appendChild(n),l}};function e1(a){return aQ(a)&&"gradient"==a.type}function e2(a){return null!==a&&aQ(a)&&"pattern"==a.type}function e3(a){return null!==a&&aQ(a)&&"image"==a.type}function e4(a){return e1(a)||e2(a)}function e5(a,b){let{fontStyle:c,fontWeight:d,fontSize:e,fontFamily:f}=b;c&&a.setAttribute("font-style",c),d&&a.setAttribute("font-weight",String(d)),null!=e&&a.setAttribute("font-size",String(e)),f&&a.setAttribute("font-family",f)}var e6=class extends d7{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill="black",this.strokeWidth=0,this.lineDashOffset=0,this.opacity=1}getGradient(a){if(e1(a))return this.createGradient(a)}createGradient(a){let{colorSpace:b="rgb",gradient:c="linear",colorStops:d,rotation:e=0,reverse:f=!1}=a;if(null==d)return;let g=eE(d,["black"],[0,1]);switch(f&&(g=g.map(a=>({color:a.color,stop:1-a.stop})).reverse()),c){case"linear":return new ew(b,g,e);case"radial":return new ex(b,g);case"conic":return new ev(b,g,e)}}getPattern(a){if(e2(a))return this.createPattern(a)}createPattern(a){return new e0(a)}getImage(a){if(e3(a))return this.createImage(a)}createImage(a){return new eF(this.imageLoader,a)}onFillChange(){"object"==typeof this.fill&&dK(this._cachedFill??{},this.fill)||(this.fillGradient=this.getGradient(this.fill),this.fillPattern=this.getPattern(this.fill),this.fillImage=this.getImage(this.fill),this._cachedFill=this.fill)}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(a,b){return eY(this.layerManager?.canvas?.pixelRatio??1,a,b)}markDirty(a){super.markDirty(a),this.cachedDefaultGradientFillBBox=void 0}fillStroke(a,b){this.renderFill(a,b),this.renderStroke(a,b)}renderFill(a,b){let{fill:c,fillOpacity:d,fillImage:e}=this;if(null!=c&&"none"!==c&&d>0){let{globalAlpha:c}=a;e&&(a.globalAlpha=e.backgroundFillOpacity,a.fillStyle=e.backgroundFill,this.executeFill(a,b),a.globalAlpha=c),this.applyFillAndAlpha(a),this.applyShadow(a),this.executeFill(a,b),a.globalAlpha=c,a.shadowColor="rgba(0, 0, 0, 0)"}}executeFill(a,b){b?a.fill(b):a.fill()}applyFillAndAlpha(a){let{fill:b,fillGradient:c,fillPattern:d,fillImage:e,fillOpacity:f=1,opacity:g=1}=this;if(a.globalAlpha*=g*f,c){let{fillBBox:b=this.getDefaultGradientFillBBox()??this.getBBox(),fillParams:d}=this;a.fillStyle=c.createGradient(a,b,d)??"black"}else if(d){let{x:b,y:c}=this.getBBox(),e=this.layerManager?.canvas?.pixelRatio??1,f=d.createPattern(a,e);d.setPatternTransform(f,e,b,c),f?a.fillStyle=f:(a.fillStyle=d.fill,a.globalAlpha*=d.fillOpacity)}else if(e){let b=this.getBBox(),c=e.createPattern(a,b.width,b.height,this);e.setImageTransform(c,b),a.fillStyle=c??"transparent"}else a.fillStyle="string"==typeof b?b:"black"}applyStrokeAndAlpha(a){let{stroke:b,strokeOpacity:c=1,strokeGradient:d,opacity:e=1}=this;a.strokeStyle=d?.createGradient(a,this.getBBox())??("string"==typeof b?b:void 0)??"black",a.globalAlpha*=e*c}applyShadow(a){let b=this.layerManager?.canvas.pixelRatio??1,c=this.fillShadow;c?.enabled&&(a.shadowColor=c.color,a.shadowOffsetX=c.xOffset*b,a.shadowOffsetY=c.yOffset*b,a.shadowBlur=c.blur*b)}renderStroke(a,b){let{stroke:c,strokeWidth:d,strokeOpacity:e,lineDash:f,lineDashOffset:g,lineCap:h,lineJoin:i,miterLimit:j}=this;if(null!=c&&"none"!==c&&d>0&&e>0){let{globalAlpha:c}=a;this.applyStrokeAndAlpha(a),a.lineWidth=d,f&&a.setLineDash(f),g&&(a.lineDashOffset=g),h&&(a.lineCap=h),i&&(a.lineJoin=i),null!=j&&(a.miterLimit=j),this.executeStroke(a,b),a.globalAlpha=c}}executeStroke(a,b){b?a.stroke(b):a.stroke()}getDefaultGradientFillBBox(){return this.cachedDefaultGradientFillBBox??(this.cachedDefaultGradientFillBBox=Object.freeze(this.computeDefaultGradientFillBBox())),this.cachedDefaultGradientFillBBox}computeDefaultGradientFillBBox(){}containsPoint(a,b){return this.isPointInPath(a,b)}applySvgFillAttributes(a,b){let{fill:c,fillOpacity:d}=this;if("string"==typeof c)a.setAttribute("fill",c);else if(e1(c)&&this.fillGradient){b??(b=[]);let c=this.fillGradient.toSvg(this.fillBBox??this.getBBox()),d=c1();c.setAttribute("id",d),b.push(c),a.setAttribute("fill",`url(#${d})`)}else if(e2(c)&&this.fillPattern){b??(b=[]);let c=this.fillPattern.toSvg(),d=c1();c.setAttribute("id",d),b.push(c),a.setAttribute("fill",`url(#${d})`)}else if(e3(c)&&this.fillImage){b??(b=[]);let c=this.layerManager?.canvas?.pixelRatio??1,d=this.fillImage.toSvg(this.getBBox(),c),e=c1();d.setAttribute("id",e),b.push(d),a.setAttribute("fill",`url(#${e})`)}else a.setAttribute("fill","none");return a.setAttribute("fill-opacity",String(d)),b}applySvgStrokeAttributes(a){let{stroke:b,strokeOpacity:c,strokeWidth:d,lineDash:e,lineDashOffset:f}=this,{stroke:g,strokeWidth:h,strokeOpacity:i}={stroke:aU(b)?b:void 0,strokeOpacity:c,strokeWidth:d};g&&a.setAttribute("stroke",g),null!=h&&a.setAttribute("stroke-width",String(h)),null!=i&&a.setAttribute("stroke-opacity",String(i));let{lineDash:j,lineDashOffset:k}={lineDash:e,lineDashOffset:f};if(j?.some(a=>0!==a)){let b=j.length%2==1?[...j,...j]:j;a.setAttribute("stroke-dasharray",b.join(" ")),null!=k&&a.setAttribute("stroke-dashoffset",String(k))}}};dl([d$()],e6.prototype,"fillOpacity",2),dl([d$()],e6.prototype,"strokeOpacity",2),dl([d$({equals:dK,changeCb:a=>a.onFillChange()})],e6.prototype,"fill",2),dl([d$({equals:dK,changeCb:a=>a.onStrokeChange()})],e6.prototype,"stroke",2),dl([d$()],e6.prototype,"strokeWidth",2),dl([d1()],e6.prototype,"lineDash",2),dl([d$()],e6.prototype,"lineDashOffset",2),dl([d$()],e6.prototype,"lineCap",2),dl([d$()],e6.prototype,"lineJoin",2),dl([d$()],e6.prototype,"miterLimit",2),dl([d$({convertor:a=>aA(0,a??1,1)})],e6.prototype,"opacity",2),dl([d$({equals:dZ,checkDirtyOnAssignment:!0})],e6.prototype,"fillShadow",2),dl([d$({equals:cM,changeCb:a=>a.onFillChange()})],e6.prototype,"fillBBox",2),dl([d$({equals:dK,changeCb:a=>a.onFillChange()})],e6.prototype,"fillParams",2);var e7=[1,0,0,1,0,0],e8=class a{get e(){return[...this.elements]}constructor(a=e7){this.elements=[...a]}setElements(a){let b=this.elements;return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],this}get identity(){let a=this.elements;return aB(a[0],1)&&aB(a[1],0)&&aB(a[2],0)&&aB(a[3],1)&&aB(a[4],0)&&aB(a[5],0)}AxB(a,b,c){let d=a[0]*b[0]+a[2]*b[1],e=a[1]*b[0]+a[3]*b[1],f=a[0]*b[2]+a[2]*b[3],g=a[1]*b[2]+a[3]*b[3],h=a[0]*b[4]+a[2]*b[5]+a[4],i=a[1]*b[4]+a[3]*b[5]+a[5];(c=c??a)[0]=d,c[1]=e,c[2]=f,c[3]=g,c[4]=h,c[5]=i}multiplySelf(a){return this.AxB(this.elements,a.elements),this}multiply(b){let c=Array(6);return b instanceof a?this.AxB(this.elements,b.elements,c):this.AxB(this.elements,[b.a,b.b,b.c,b.d,b.e,b.f],c),new a(c)}preMultiplySelf(a){return this.AxB(a.elements,this.elements,this.elements),this}inverse(){let b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=1/(c*f-d*e);return c*=i,d*=i,e*=i,new a([f*=i,-d,-e,c,e*h-f*g,d*g-c*h])}invertSelf(){let a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=1/(b*e-c*d);return b*=h,c*=h,d*=h,e*=h,a[0]=e,a[1]=-c,a[2]=-d,a[3]=b,a[4]=d*g-e*f,a[5]=c*f-b*g,this}transformPoint(a,b){let c=this.elements;return{x:a*c[0]+b*c[2]+c[4],y:a*c[1]+b*c[3]+c[5]}}transformBBox(a,b){let c=this.elements,d=c[0],e=c[1],f=c[2],g=c[3],h=.5*a.width,i=.5*a.height,j=a.x+h,k=a.y+i,l=Math.abs(h*d)+Math.abs(i*f),m=Math.abs(h*e)+Math.abs(i*g);return b??(b=new dt(0,0,0,0)),b.x=j*d+k*f+c[4]-l,b.y=j*e+k*g+c[5]-m,b.width=l+l,b.height=m+m,b}toContext(a){if(this.identity)return;let b=this.elements;a.transform(b[0],b[1],b[2],b[3],b[4],b[5])}static updateTransformMatrix(a,b,c,d,e,f,g){let h,i,j,k;1===b&&1===c?(h=0,i=0):(h=g?.scalingCenterX??0,i=g?.scalingCenterY??0);let l=Math.cos(d),m=Math.sin(d);0===d?(j=0,k=0):(j=g?.rotationCenterX??0,k=g?.rotationCenterY??0);let n=h*(1-b)-j,o=i*(1-c)-k;return a.setElements([l*b,m*b,-m*c,l*c,l*n-m*o+j+e,m*n+l*o+k+f]),a}};function e9(a){return!0===a.constructor[fa]}var fa=Symbol("isMatrixTransform");function fb(a){var b;let c=a;if(!0===a[fa])return a;let d=Symbol("matrix_combined_transform");class e extends c{constructor(){super(...arguments),this[b]=new e8,this._dirtyTransform=!0}onChangeDetection(a){super.onChangeDetection(a),this._dirtyTransform=!0,this.batchLevel>0||this.markDirty("transform")}updateMatrix(a){}computeTransformMatrix(){this._dirtyTransform&&(this[d].setElements(e7),this.updateMatrix(this[d]),this._dirtyTransform=!1)}toParent(a){return(this.computeTransformMatrix(),this[d].identity)?a.clone():this[d].transformBBox(a)}toParentPoint(a,b){return(this.computeTransformMatrix(),this[d].identity)?{x:a,y:b}:this[d].transformPoint(a,b)}fromParent(a){return(this.computeTransformMatrix(),this[d].identity)?a.clone():this[d].inverse().transformBBox(a)}fromParentPoint(a,b){return(this.computeTransformMatrix(),this[d].identity)?{x:a,y:b}:this[d].inverse().transformPoint(a,b)}computeBBox(){let a=super.computeBBox();return a?this.toParent(a):a}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(a,b){return{x:a,y:b}=this.fromParentPoint(a,b),super.pickNode(a,b)}pickNodes(a,b,c){return{x:a,y:b}=this.fromParentPoint(a,b),super.pickNodes(a,b,c)}render(a){this.computeTransformMatrix();let{ctx:b}=a,c=this[d],e=!1;try{c.identity||(b.save(),e=!0,c.toContext(b)),super.render(a)}finally{e&&b.restore()}}toSVG(){this.computeTransformMatrix();let a=super.toSVG(),b=this[d];if(b.identity||null==a)return a;let c=aJ("g");c.append(...a.elements);let[e,f,g,h,i,j]=b.e;return c.setAttribute("transform",`matrix(${e} ${f} ${g} ${h} ${i} ${j})`),{elements:[c],defs:a.defs}}}return b=d,e[fa]=!0,e}function fc(a){var b;let c=a,d=Symbol("matrix_rotation");class e extends fb(c){constructor(){super(...arguments),this[b]=new e8,this.rotationCenterX=0,this.rotationCenterY=0,this.rotation=0}updateMatrix(a){super.updateMatrix(a);let{rotation:b,rotationCenterX:c,rotationCenterY:e}=this;0!==b&&(e8.updateTransformMatrix(this[d],1,1,b,0,0,{rotationCenterX:c,rotationCenterY:e}),a.multiplySelf(this[d]))}}return b=d,dl([d$()],e.prototype,"rotationCenterX",2),dl([d$()],e.prototype,"rotationCenterY",2),dl([d$()],e.prototype,"rotation",2),e}function fd(a){var b;let c=a,d=Symbol("matrix_scale");class e extends fb(c){constructor(){super(...arguments),this[b]=new e8,this.scalingX=1,this.scalingY=1,this.scalingCenterX=0,this.scalingCenterY=0}updateMatrix(a){super.updateMatrix(a);let{scalingX:b,scalingY:c,scalingCenterX:e,scalingCenterY:f}=this;(1!==b||1!==c)&&(e8.updateTransformMatrix(this[d],b,c,0,0,0,{scalingCenterX:e,scalingCenterY:f}),a.multiplySelf(this[d]))}}return b=d,dl([d$()],e.prototype,"scalingX",2),dl([d$()],e.prototype,"scalingY",2),dl([d$()],e.prototype,"scalingCenterX",2),dl([d$()],e.prototype,"scalingCenterY",2),e}function fe(a){var b;let c=a,d=Symbol("matrix_translation");class e extends fb(c){constructor(){super(...arguments),this[b]=new e8,this.translationX=0,this.translationY=0}updateMatrix(a){super.updateMatrix(a);let{translationX:b,translationY:c}=this;(0!==b||0!==c)&&(e8.updateTransformMatrix(this[d],1,1,0,b,c),a.multiplySelf(this[d]))}}return b=d,dl([d$()],e.prototype,"translationX",2),dl([d$()],e.prototype,"translationY",2),e}var ff=class{static fromCanvas(a,b){let c=[];for(let b of a.traverseUp())e9(b)&&c.unshift(b);for(let a of c)b=a.fromParent(b);return e9(a)&&(b=a.fromParent(b)),b}static toCanvas(a,b){for(let c of(null==b?b=a.getBBox():e9(a)&&(b=a.toParent(b)),a.traverseUp()))e9(c)&&(b=c.toParent(b));return b}static fromCanvasPoint(a,b,c){let d=[];for(let b of a.traverseUp())e9(b)&&d.unshift(b);for(let a of d)({x:b,y:c}=a.fromParentPoint(b,c));return e9(a)&&({x:b,y:c}=a.fromParentPoint(b,c)),{x:b,y:c}}static toCanvasPoint(a,b,c){for(let d of(e9(a)&&({x:b,y:c}=a.toParentPoint(b,c)),a.traverseUp()))e9(d)&&({x:b,y:c}=d.toParentPoint(b,c));return{x:b,y:c}}},fg=class a extends d7{constructor(a){super(a),this.childNodes=new Set,this.dirty=!1,this.dirtyZIndex=!1,this.clipRect=void 0,this.opacity=1,this.layer=void 0,this.image=void 0,this._lastWidth=NaN,this._lastHeight=NaN,this._lastDevicePixelRatio=NaN,this.isContainerNode=!0,this.renderToOffscreenCanvas=a?.renderToOffscreenCanvas===!0,this.optimizeForInfrequentRedraws=a?.optimizeForInfrequentRedraws===!0}static is(b){return b instanceof a}static computeChildrenBBox(a,b=!0){return dt.merge(d7.extractBBoxes(a,b))}static compareChildren(a,b){return d4(a.zIndex,b.zIndex)||a.serialNumber-b.serialNumber}containsPoint(a,b){return!0}computeBBox(){return a.computeChildrenBBox(this.children())}computeSafeClippingBBox(a){let b=this.computeBBox();if(b?.isFinite()!==!0)return;let c=0;for(let a of this.descendants())a instanceof e6&&(c=Math.max(c,a.strokeWidth));let d=Math.max(1,c/2*4),{x:e,y:f}=ff.toCanvasPoint(this,0,0),g=eZ(a,e+b.x-d)-e,h=eZ(a,f+b.y-d)-f,i=Math.ceil(b.x+b.width-g+d),j=Math.ceil(b.y+b.height-h+d);return new dt(g,h,i,j)}prepareSharedCanvas(a,b,d){return null==c||c.pixelRatio!==d?c=new dA({width:a,height:b,pixelRatio:d}):c.resize(a,b,d),c}setScene(a){for(let b of(super.setScene(a),this.layer&&(this.scene?.layersManager.removeLayer(this.layer),this.layer=void 0),this.children()))b.setScene(a)}markDirty(a){this.dirty=!0,super.markDirty(a)}markDirtyChildrenOrder(){super.markDirtyChildrenOrder(),this.dirtyZIndex=!0,this.markDirty()}append(a){for(let b of null!=a&&"object"==typeof a&&Symbol.iterator in a?a:[a])b.parentNode?.removeChild(b),this.childNodes.add(b),b.parentNode=this,b.setScene(this.scene);this.markDirtyChildrenOrder(),this.markDirty()}appendChild(a){return this.append(a),a}removeChild(a){if(!this.childNodes?.delete(a))throw Error(`AG Charts - internal error, unknown child node ${a.name??a.id} in $${this.name??this.id}`);a.parentNode=void 0,a.setScene(),this.markDirtyChildrenOrder(),this.markDirty()}clear(){for(let a of this.children())delete a.parentNode,a.setScene();this.childNodes?.clear(),this.markDirty()}pickNode(a,b){if(this.visible&&1!==this.pointerEvents&&this.containsPoint(a,b)){if(null!=this.childNodes&&0!==this.childNodes.size){let c=[...this.children()];for(let d=c.length-1;d>=0;d--){let e=c[d].pickNode(a,b);if(null!=e)return e}}else if(!this.isContainerNode)return this}}pickNodes(a,b,c=[]){if(!this.visible||1===this.pointerEvents||!this.containsPoint(a,b))return c;for(let d of(this.isContainerNode||c.push(this),this.children()))d.pickNodes(a,b,c);return c}isDirty(a){let{width:b,height:c,devicePixelRatio:d}=a,{dirty:e,layer:f}=this,g=null!=f&&(this._lastWidth!==b||this._lastHeight!==c),h=this._lastDevicePixelRatio!==d;return this._lastWidth=b,this._lastHeight=c,this._lastDevicePixelRatio=d,e||g||h}preRender(a){let b;if(this.dirty){for(let c of(b=super.preRender(a,0),this.children())){let d=c.preRender(a);b.groups+=d.groups,b.nonGroups+=d.nonGroups,b.complexity+=d.complexity}b.groups+=1,b.nonGroups-=1}else b=this.childNodeCounts;return this.renderToOffscreenCanvas&&!this.optimizeForInfrequentRedraws&&b.nonGroups>0&&this.getVisibility()?this.layer??(this.layer=this.layerManager?.addLayer({name:this.name})):null!=this.layer&&(this.layerManager?.removeLayer(this.layer),this.layer=void 0),b}render(a){let{layer:b,renderToOffscreenCanvas:c}=this,d={...a},e=this.isDirty(a);if(this.dirty=!1,!c){this.renderInContext(d),super.render(d);return}let{ctx:f,stats:g,devicePixelRatio:h}=a,{image:i}=this;if(e){i?.bitmap.close(),i=void 0;let a=b?void 0:this.computeSafeClippingBBox(h),c=(a,...b)=>{let c=a.context;d.ctx=c,a.clear(),c.save();try{c.setTransform(...b),c.globalAlpha=1,this.renderInContext(d)}finally{c.restore(),c.verifyDepthZero?.()}};if(b)c(b,f.getTransform());else if(a){let{x:b,y:d,width:e,height:f}=a,g=this.prepareSharedCanvas(e,f,h);c(g,h,0,0,h,-b*h,-d*h),i={bitmap:g.transferToImageBitmap(),x:b,y:d,width:e,height:f}}this.image=i,g&&g.layersRendered++}else g&&g.layersSkipped++;let{globalAlpha:j}=f;if(f.globalAlpha=j*this.opacity,b){f.save();try{f.resetTransform(),b.drawImage(f)}finally{f.restore()}}else if(i){let{bitmap:a,x:b,y:c,width:d,height:e}=i;f.drawImage(a,0,0,d*h,e*h,b,c,d,e)}f.globalAlpha=j,super.render(d)}applyClip(a,b){let{x:c,y:d,width:e,height:f}=b;a.beginPath(),a.rect(c,d,e,f),a.clip()}renderInContext(b){let{ctx:c,stats:d}=b;this.dirtyZIndex&&(this.sortChildren(a.compareChildren),this.dirtyZIndex=!1),c.save();try{for(let a of(c.globalAlpha*=this.opacity,null!=this.clipRect&&(this.applyClip(c,this.clipRect),b.clipBBox=ff.toCanvas(this,this.clipRect)),this.children())){if(!a.visible){d&&(d.nodesSkipped+=a.childNodeCounts.nonGroups+a.childNodeCounts.groups,d.opsSkipped+=a.childNodeCounts.complexity);continue}a.isolatedRender(b)}}finally{c.restore()}}sortChildren(a){if(!this.childNodes)return;let b=[...this.childNodes].sort(a);for(let a of(this.childNodes.clear(),b))this.childNodes.add(a)}*children(){yield*this.childNodes}*excludeChildren(a){for(let b of this.children())(!a.instance||b instanceof a.instance)&&(!a.name||b.name===a.name)||(yield b)}*descendants(){for(let b of this.children())yield b,b instanceof a&&(yield*b.descendants())}setClipRect(a){this.clipRect=a?ff.fromCanvas(this,a):void 0}setClipRectCanvasSpace(a){this.clipRect=a}getVisibility(){for(let a of this.traverseUp(!0))if(!a.visible)return!1;return!0}toSVG(){if(!this.visible)return;let a=[],b=[];for(let c of this.children()){let d=c.toSVG();null!=d&&(b.push(...d.elements),null!=d.defs&&a.push(...d.defs))}return{elements:b,defs:a}}};fg.className="Group",dl([d$({convertor:a=>aA(0,a,1)})],fg.prototype,"opacity",2);var fh=fg,fi=class extends fd(fh){},fj=class extends fc(fh){},fk=class extends fe(fh){},fl=class extends fc(fe(fh)){};function fm(a,b){return null!=a&&"context"in a&&null!=b[0]&&"object"==typeof b[0]&&void 0===b[0].context&&(b[0].context=a.context,!0)}function fn(a,b,...c){if(Array.isArray(a)){for(let b of a)if(fm(b,c))break}else fm(a,c);return b(...c)}var fo=class{constructor(){this.cache=new WeakMap}call(a,b,...c){let d,e=this.cache.get(b);try{d=JSON.stringify(c)}catch{return this.invoke(a,b,e,void 0,...c)}return(null==e&&(e=new Map,this.cache.set(b,e)),e.has(d))?e.get(d):this.invoke(a,b,e,d,...c)}invoke(a,b,c,d,...e){try{let f=fn(a,b,...e);return c&&null!=d&&c.set(d,f),f}catch(a){aa.warnOnce("User callback errored, ignoring",a);return}}invalidateCache(){this.cache=new WeakMap}};function fp(a,b){if(!a)return;let{x:c,y:d,width:e,height:f}=function(a){let{x:b,y:c,width:d,height:e}=a;return(null==d||d>0)&&(null==e||e>0)?a:(null!=b&&null!=d&&d<0&&(b-=d=-d),null!=c&&null!=e&&e<0&&(c-=e=-e),{x:b,y:c,width:d,height:e})}(b);fu(a.style,"width",e),fu(a.style,"height",f),fu(a.style,"left",c),fu(a.style,"top",d)}function fq(a){let b=parseFloat(a.style.width)||a.offsetWidth,c=parseFloat(a.style.height)||a.offsetHeight;return{x:parseFloat(a.style.left)||a.offsetLeft,y:parseFloat(a.style.top)||a.offsetTop,width:b,height:c}}function fr(a){if(a.focus({preventScroll:!0}),a.lastChild?.textContent==null)return;let b=aG().createRange();b.setStart(a.lastChild,a.lastChild.textContent.length),b.setEnd(a.lastChild,a.lastChild.textContent.length);let c=aH().getSelection();c?.removeAllRanges(),c?.addRange(b)}function fs(){let a=aH("navigator");if("scheduling"in a){let b=a.scheduling;if("isInputPending"in b)return b.isInputPending({includeContinuous:!0})}return!1}function ft(a){return`ag-charts-icon ag-charts-icon-${a}`}function fu(a,b,c){null==c?a.removeProperty(b):a.setProperty(b,`${c}px`)}var fv="class-instance";function fw(a,b,c){if(aM(b)){if(!aM(a)||a.length!==b.length||b.some((b,d)=>null!=fw(a[d],b,c)))return b}else if(aS(b)){if(!aS(a))return b;let d={};for(let e of new Set([...Object.keys(a),...Object.keys(b)]))if(a[e]===b[e])continue;else if(c?.has(e))d[e]=b[e];else if(typeof a[e]==typeof b[e]){let f=fw(a[e],b[e],c);null!==f&&(d[e]=f)}else d[e]=b[e];return Object.keys(d).length?d:null}else if(a!==b)return b;return null}function fx(a,b){for(let c of Object.keys(a))if(a[c]!==b?.[c])return!1;return!0}function fy(a,b){return aM(a)?function(a,b){let c=[],d=b?.seen;for(let e of a){if("object"==typeof e&&d?.includes(e)){aa.warn("cycle detected in array",e);continue}d?.push(e),c.push(fy(e,b)),d?.pop()}return c}(a,b):aS(a)?function(a,b){let c={};for(let d of Object.keys(a))b?.assign?.has(d)?c[d]=a[d]:b?.shallow?.has(d)?c[d]=fz(a[d]):c[d]=fy(a[d],b);return c}(a,b):a instanceof Map?new Map(fy(Array.from(a))):fz(a)}function fz(a){return aM(a)?a.slice(0):aS(a)?{...a}:aN(a)?new Date(a):a instanceof RegExp?new RegExp(a.source,a.flags):a}function fA(a,b,c,d,e,f){if(aM(a)){f=b(a,d,e,f);let g=0;for(let h of a)f=fA(h,b,c,d?.[g],e,f),g++}else if(aS(a))for(let g of(f=b(a,d,e,f),Object.keys(a)))c?.has(g)||(f=fA(a[g],b,c,d?.[g],e,f));return f}function fB(a,b,c={}){let{path:d,matcherPath:e=d?.replace(/(\[[0-9+]+])/i,"[]"),skip:f=[]}=c;if(null==a)throw Error(`AG Charts - target is uninitialised: ${d??"<root>"}`);if(null==b)return a;if(eB(a))return a.set(b);let g=fC(a);for(let h of Object.keys(b)){if(dT.has(h))continue;let i=`${e?e+".":""}${h}`;if(f.includes(i))continue;let j=b[h],k=`${d?d+".":""}${h}`,l=a.constructor,m=a[h];try{let b=fC(m),d=fC(j);if(g===fv&&!(h in a||"context"===h)){if(void 0===j)continue;aa.warn(`unable to set [${k}] in ${l?.name} - property is unknown`);continue}if(null!=b&&null!=d&&d!==b&&(b!==fv||"object"!==d)){aa.warn(`unable to set [${k}] in ${l?.name} - can't apply type of [${d}], allowed types are: [${b}]`);continue}if(eB(m))void 0===j?m.clear():m.set(j);else if("object"===d&&"context"!==h){if(!(h in a)){aa.warn(`unable to set [${k}] in ${l?.name} - property is unknown`);continue}null==m?a[h]=j:fB(m,j,{...c,path:k,matcherPath:i})}else a[h]=j}catch(a){aa.warn(`unable to set [${k}] in [${l?.name}]; nested error is: ${a.message}`)}}return a}function fC(a){return null==a?null:aN(a)?"primitive":aM(a)?"array":aQ(a)?aS(a)?"object":fv:aP(a)?"function":"primitive"}var fD=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(a){return new Promise(b=>{this.acquireQueue.push([a,b]),this.available&&this.dispatchNext().catch(a=>aa.errorOnce(a))})}async acquireImmediately(a){return!!this.available&&(await this.acquire(a),!0)}async waitForClearAcquireQueue(){return this.acquire(()=>Promise.resolve(void 0))}async dispatchNext(){this.available=!1;let[a,b]=this.acquireQueue.shift()??[];for(;a;){try{await a(),b?.()}catch(a){aa.error("mutex callback error",a),b?.()}[a,b]=this.acquireQueue.shift()??[]}this.available=!0}},fE=class{constructor(){this.eventListeners=new Map}addEventListener(a,b){if("function"!=typeof b)throw Error("AG Charts - listener must be a Function");let c=this.eventListeners.get(a);c?c.add(b):this.eventListeners.set(a,new Set([b]))}removeEventListener(a,b){let c=this.eventListeners.get(a);null!=c&&(c.delete(b),0===c.size&&this.eventListeners.delete(a))}hasEventListener(a){return this.eventListeners.has(a)}clearEventListeners(){this.eventListeners.clear()}fireEvent(a){this.eventListeners.get(a.type)?.forEach(b=>b(a))}},fF=class extends ez{constructor(a=0,b=a,c=a,d=b){super(),this.top=a,this.right=b,this.bottom=c,this.left=d}};function fG(a,b){let c=aM(a)?a:a.split(".");if(1===c.length){let[a]=c;return dF((b,c,d)=>b[a]=d,b=>b[a],b)}return dF((a,b,d)=>dU(a,c,d),a=>dS(a,c),b)}function fH(a){return dF((b,c,d)=>b[a]=d)}function fI(a,b){return dF((c,d,e)=>c[a][b??d]=e)}function fJ(a){let{newValue:b,oldValue:c,changeValue:d}=a;return dF((a,e,f,g)=>(f!==g&&(void 0!==g&&c?.call(a,g),void 0!==f&&b?.call(a,f),d?.call(a,f,g)),f))}function fK(a){return dG(a)}function fL(a,b){let c,d,e=0,f=!1,g=()=>f,h=()=>{f=!1,d?.(),d=void 0,c=void 0,e>0&&a(i)},i=()=>{let a=e;e=0,f=!0;let c=b({count:a});if(!c)return void h();c.then(h,h)};return{schedule(b){0!==e||g()||a(i,b),e++},async await(){if(g())for(c??(c=new Promise(a=>{d=a}));g();)await c}}}dl([ey],fF.prototype,"top",2),dl([ey],fF.prototype,"right",2),dl([ey],fF.prototype,"bottom",2),dl([ey],fF.prototype,"left",2);var fM=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel","touchstart","touchmove","touchend","touchcancel"];function fN(a,b,c){let{offsetX:d,offsetY:e,clientX:f,clientY:g}=b,{currentX:h,currentY:i}=fQ.calcCurrentXY(c,b);return{type:a,device:"mouse",offsetX:d,offsetY:e,clientX:f,clientY:g,currentX:h,currentY:i,sourceEvent:b}}function fO(a,b,c){return{type:a,sourceEvent:b}}var fP={blur:a=>({type:"blur",sourceEvent:a}),change:a=>({type:"change",sourceEvent:a}),contextmenu:(a,b)=>fN("contextmenu",a,b),focus:a=>({type:"focus",sourceEvent:a}),keydown:a=>({type:"keydown",sourceEvent:a}),keyup:a=>({type:"keyup",sourceEvent:a}),click:(a,b)=>fN("click",a,b),dblclick:(a,b)=>fN("dblclick",a,b),mouseenter:(a,b)=>fN("mouseenter",a,b),mousemove:(a,b)=>fN("mousemove",a,b),mouseleave:(a,b)=>fN("mouseleave",a,b),wheel:a=>{let{offsetX:b,offsetY:c,clientX:d,clientY:e}=a,f=0===a.deltaMode?.01:1;return{type:"wheel",offsetX:b,offsetY:c,clientX:d,clientY:e,deltaX:a.deltaX*f,deltaY:a.deltaY*f,sourceEvent:a}},touchstart:(a,b)=>fO("touchstart",a,b),touchmove:(a,b)=>fO("touchmove",a,b),touchend:(a,b)=>fO("touchend",a,b),touchcancel:(a,b)=>fO("touchcancel",a,b)},fQ=class{static alloc(a,b,c){return fP[a](b,c)}static isHTMLEvent(a){return fM.includes(a)}static calcCurrentXY(a,b){let c=a.getBoundingClientRect();return{currentX:b.clientX-c.x,currentY:b.clientY-c.y}}},fR=class{constructor(){this.widgetListeners={},this.sourceListeners={}}initSourceHandler(a,b){this.sourceListeners??(this.sourceListeners={}),this.sourceListeners[a]=b}lazyGetWidgetListeners(a,b){var c;if(!(a in(this.sourceListeners??{}))){let c=c=>{let d=fQ.alloc(a,c,b.getElement());this.dispatch(a,b,d)},d={};a.startsWith("touch")&&(d.passive=!1),this.initSourceHandler(a,c),b.getElement().addEventListener(a,c,d)}return this.widgetListeners??(this.widgetListeners={}),(c=this.widgetListeners)[a]??(c[a]=[]),this.widgetListeners[a]}add(a,b,c){this.lazyGetWidgetListeners(a,b).push(c)}remove(a,b,c){let d=this.lazyGetWidgetListeners(a,b),e=d.indexOf(c);e>-1&&d.splice(e,1)}destroy(a){if(this.widgetListeners=void 0,this.sourceListeners){for(let[b,c]of cC(this.sourceListeners))a.getElement().removeEventListener(b,c);this.sourceListeners=void 0}}dispatch(a,b,c){for(let d of this.widgetListeners?.[a]??[])d(c,b)}},fS=class{constructor(a,b,c,d){this.glob=a,this.self=b,this.window=aH(),this.cleanup=new cQ,this.mousegeneral=a=>{a.stopPropagation(),a.stopImmediatePropagation()},this.mousemove=a=>{a.stopPropagation(),a.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mousemove(a)},this.mouseup=a=>{0===a.button&&(a.stopPropagation(),a.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mouseup(a),this.destroy())};let{window:e,mousegeneral:f,mousemove:g,mouseup:h}=this;this.cleanup.register(aK(e,"mousedown",f,{capture:!0}),aK(e,"mouseenter",f,{capture:!0}),aK(e,"mouseleave",f,{capture:!0}),aK(e,"mouseout",f,{capture:!0}),aK(e,"mouseover",f,{capture:!0}),aK(e,"mousemove",g,{capture:!0}),aK(e,"mouseup",h,{capture:!0})),b.mouseDragger=this,a.globalMouseDragCallbacks=c,a.globalMouseDragCallbacks.mousedown(d),d.stopPropagation(),d.stopImmediatePropagation()}destroy(){this.cleanup.flush(),this.glob.globalMouseDragCallbacks=void 0,this.self.mouseDragger=void 0}},fT=!1,fU=class{constructor(a,b,c,d,e){this.glob=a,this.self=b,this.initialTouch=d,this.target=e,this.cleanup=new cQ,this.longTapInterrupted=!1,this.longtap=()=>{let{target:a,initialTouch:b}=this;if(!this.longTapInterrupted){let c=new cQ;a.dispatchEvent(new TouchEvent("touchcancel",{touches:[b],bubbles:!0})),fT=!0;let d=a=>{fT=!1,a.preventDefault(),c.flush()};c.register(aK(a,"touchmove",a=>a.preventDefault(),{passive:!1}),aK(a,"touchend",d,{passive:!1}),aK(a,"touchcancel",d,{passive:!1}));let{clientX:e,clientY:f}=b,g=new PointerEvent("contextmenu",{bubbles:!0,cancelable:!0,view:aH(),clientX:e,clientY:f,pointerType:"touch"});a.dispatchEvent(g)}},this.touchmove=a=>{let{glob:b,self:c,initialTouch:d}=this,e=this.findInitialFinger(a.targetTouches);null!=e&&(this.longTapInterrupted=this.longTapInterrupted||function(a,b){let c=a.clientX-b.clientX,d=a.clientY-b.clientY;return c*c+d*d}(d,e)>100,c.dragTouchEnabled&&b.globalTouchDragCallbacks?.touchmove(a,e))},this.touchend=a=>{this.longTapInterrupted=!0;let b=this.findInitialFinger(a.changedTouches,a.touches);null!=b&&this.glob.globalTouchDragCallbacks?.touchend(a,b),this.destroy()},this.longtapTimer=setTimeout(this.longtap,500);let{touchmove:f,touchend:g}=this;this.cleanup.register(aK(e,"touchmove",f,{passive:!1}),aK(e,"touchstart",g,{passive:!1}),aK(e,"touchend",g,{passive:!1}),aK(e,"touchcancel",g,{passive:!1})),b.touchDragger=this,a.globalTouchDragCallbacks=c}destroy(){clearTimeout(this.longtapTimer),this.cleanup.flush(),this.glob.globalTouchDragCallbacks=void 0,this.self.touchDragger=void 0}findInitialFinger(...a){return Array.from(a.map(a=>Array.from(a)).flat()).find(a=>a.identifier===this.initialTouch.identifier)}};function fV(a,b,c,d){let{currentX:e,currentY:f}=fQ.calcCurrentXY(a.getElement(),d),g=d.pageX-c.pageX,h=d.pageY-c.pageY;return{type:b,device:"mouse",offsetX:c.offsetX+g,offsetY:c.offsetY+h,clientX:d.clientX,clientY:d.clientY,currentX:e,currentY:f,originDeltaX:g,originDeltaY:h,sourceEvent:d}}function fW(a,b,c,d,e){let{currentX:f,currentY:g}=fQ.calcCurrentXY(a.getElement(),e),h=e.pageX-c.pageX,i=e.pageY-c.pageY;return{type:b,device:"touch",offsetX:c.offsetX+h,offsetY:c.offsetY+i,clientX:e.clientX,clientY:e.clientY,currentX:f,currentY:g,originDeltaX:h,originDeltaY:i,sourceEvent:d}}var fX={},fY=class{constructor(a){this.dispatchCallback=a,this.dragTouchEnabled=!0}destroy(){this.dragTriggerRemover?.(),this.dragTriggerRemover=void 0,this.listeners?.clear(),this.mouseDragger?.destroy(),this.touchDragger?.destroy()}getListenerSet(a){this.listeners??(this.listeners=new Map);let b=this.listeners.get(a);return void 0===b&&(b=new Set,this.listeners.set(a,b)),b}add(a,b,c){switch(this.getListenerSet(a).add(c),a){case"drag-start":case"drag-move":case"drag-end":this.registerDragTrigger(b)}}remove(a,b,c){this.getListenerSet(a).delete(c)}registerDragTrigger(a){if(null==this.dragTriggerRemover){let b=a.getElement(),c=new cQ;c.register(aK(b,"mousedown",b=>this.triggerMouseDrag(a,b)),aK(b,"touchstart",b=>this.triggerTouchDrag(a,b),{passive:!1})),this.dragTriggerRemover=()=>c.flush()}}triggerMouseDrag(a,b){0===b.button&&this.startMouseDrag(a,b)}startMouseDrag(a,b){let c={pageX:NaN,pageY:NaN,offsetX:NaN,offsetY:NaN};dV(["pageX","pageY","offsetX","offsetY"],c,b),this.mouseDragger=function(a,b,c,d){if(null==a.globalMouseDragCallbacks)return new fS(a,b,c,d)}(fX,this,{mousedown:b=>{let d=fV(a,"drag-start",c,b);this.dispatch("drag-start",a,d)},mousemove:b=>{let d=fV(a,"drag-move",c,b);this.dispatch("drag-move",a,d)},mouseup:b=>{let d=fV(a,"drag-end",c,b);this.dispatch("drag-end",a,d),this.endDrag(a,d)}},b)}endDrag(a,{sourceEvent:b,clientX:c,clientY:d}){let e=a.getElement();cL(e.getBoundingClientRect(),c,d)||(e.dispatchEvent(new MouseEvent("mouseleave",b)),b.target?.dispatchEvent(new MouseEvent("mouseenter",b)))}triggerTouchDrag(a,b){let c=b.targetTouches[0];1===b.targetTouches.length&&null!=c&&this.startOneFingerTouch(a,b,c)}startOneFingerTouch(a,b,c){let d={pageX:NaN,pageY:NaN,...function(a,{pageX:b,pageY:c}){let{x:d,y:e}=a.getElement().getBoundingClientRect();return{offsetX:b-d,offsetY:c-e}}(a,c)};dV(["pageX","pageY"],d,c);let e=a.getElement();this.touchDragger=function(a,b,c,d,e){if(null==a.globalTouchDragCallbacks&&!fT)return new fU(a,b,c,d,e)}(fX,this,{touchmove:(b,c)=>{let e=fW(a,"drag-move",d,b,c);this.dispatch("drag-move",a,e)},touchend:(b,c)=>{let e=fW(a,"drag-end",d,b,c);this.dispatch("drag-end",a,e)}},c,e);let f=fW(a,"drag-start",d,b,c);this.dispatch("drag-start",a,f)}dispatch(a,b,c){for(let d of this.getListenerSet(a))d(c,b);this.dispatchCallback(a,c)}},fZ=class{constructor(a){this.elem=a}setBounds(a){fp(this.elemContainer??this.elem,a)}getBounds(){return fq(this.elemContainer??this.elem)}static setElementContainer(a,b){fp(b,a.getBounds());var c=a.elem;for(let[a,b]of cC({width:"100%",height:"100%"}))cJ(c,a,b);a.elem.remove(),a.elemContainer=b,a.elemContainer.replaceChildren(a.elem)}},f$=class extends fZ{constructor(){super(...arguments),this.index=NaN,this.children=[]}set id(a){cG(this.elem,"id",a)}get id(){return cI(this.elem,"id")}getElement(){return this.elem}getBoundingClientRect(){return this.elem.getBoundingClientRect()}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){this.destroyListener?.(),this.destroyListener=void 0,this.parent?.removeChild(this),this.children.forEach(a=>{a.parent=void 0,a.destroy()}),this.children.length=0,this.destructor(),this.remove(),this.internalListener?.destroy(),this.htmlListener?.destroy(this)}remove(){this.elem.remove(),this.elemContainer?.remove()}setHidden(a){cJ(this.elem,"display",a?"none":void 0)}isHidden(){return aH()?.getComputedStyle?.(this.elem).display==="none"}setCursor(a){cJ(this.elem,"cursor",a)}setTextContent(a){this.elem.textContent=a??null}setAriaDescribedBy(a){cG(this.elem,"aria-describedby",a)}setAriaHidden(a){cG(this.elem,"aria-hidden",a)}setAriaLabel(a){cG(this.elem,"aria-label",a)}setAriaExpanded(a){cG(this.elem,"aria-expanded",a)}setAriaControls(a){cG(this.elem,"aria-controls",a)}setAriaHasPopup(a){cG(this.elem,"aria-haspopup",a)}setInnerHTML(a){this.elem.innerHTML=a}setPointerEvents(a){cJ(this.elem,"pointer-events",a)}setCSSVariable(a,b){this.elem.style.setProperty(a,b)}isDisabled(){return cI(this.elem,"aria-disabled",!1)}hasPopup(){let a=cI(this.elem,"aria-haspopup");return void 0!==a&&"false"!==a}parseFloat(a){return""===a?0:parseFloat(a)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}cssWidth(){return this.parseFloat(this.elem.style.width)}cssHeight(){return this.parseFloat(this.elem.style.height)}focus(a){this.elem.focus(a)}setFocusOverride(a){cG(this.elem,"data-focus-override",a)}setPreventsDefault(a){cG(this.elem,"data-preventdefault",a)}setTabIndex(a){cG(this.elem,"tabindex",a)}addChild(a){this.addChildToDOM(a,this.getBefore(a)),this.children.push(a),a.index=this.children.length-1,a.parent=this,this.onChildAdded(a)}removeChild(a){let b=this.children.findIndex(b=>b===a);this.children.splice(b,1),this.removeChildFromDOM(a),this.onChildRemoved(a)}moveChild(a,b){a.domIndex!==b&&(a.domIndex=b,this.removeChildFromDOM(a),this.addChildToDOM(a,this.getBefore(a)))}addClass(...a){this.elem.classList.add(...a)}removeClass(...a){this.elem.classList.remove(...a)}toggleClass(a,b){this.elem.classList.toggle(a,b)}appendOrInsert(a,b){b?b.getElement().insertAdjacentElement("beforebegin",a):this.elem.appendChild(a)}addChildToDOM(a,b){this.appendOrInsert(a.getElement(),b)}removeChildFromDOM(a){this.elem.removeChild(a.getElement())}onChildAdded(a){}onChildRemoved(a){}getBefore({domIndex:a}){if(void 0!==a)return this.children.filter(b=>void 0!==b.domIndex&&b.domIndex>a).reduce((a,b)=>!a||b.domIndex<a.domIndex?b:a,void 0)}addListener(a,b){return fQ.isHTMLEvent(a)?(this.htmlListener??(this.htmlListener=new fR),this.htmlListener.add(a,this,b)):(this.internalListener??(this.internalListener=new fY(this.onDispatch.bind(this))),this.internalListener.add(a,this,b)),()=>this.removeListener(a,b)}removeListener(a,b){fQ.isHTMLEvent(a)?this.htmlListener?.remove(a,this,b):null!=this.htmlListener&&this.internalListener?.remove(a,this,b)}setDragTouchEnabled(a){this.internalListener??(this.internalListener=new fY(this.onDispatch.bind(this))),this.internalListener.dragTouchEnabled=a}onDispatch(a,b){if(!b.sourceEvent?.bubbles)return;let{parent:c}=this;for(;null!=c;){let{internalListener:d}=c;if(null!=d){let e={...b,...fQ.calcCurrentXY(c.getElement(),b)};d.dispatch(a,c,e)}c=c.parent}}static addWindowEvent(a,b){return aK(aH(),"pagehide",a=>{a.persisted||b()})}};function f_(a,b,c,d,e={},f=dt.zero){if(!dw.check("scene:stats","scene:stats:verbose"))return;let{layersRendered:g=0,layersSkipped:h=0,nodesRendered:i=0,nodesSkipped:j=0,opsPerformed:k=0,opsSkipped:l=0}=d??{},m=performance.now(),{start:n,...o}=b,p=Object.entries(o).map(([a,b])=>f4(a,b)).filter(a=>null!=a).join(" + "),q=Object.entries(e).map(([a,b])=>`${a}: ${JSON.stringify(b)}`).join(" ; "),r=dw.check("scene:stats:verbose"),s=function(){if(!("memory"in performance))return;let{totalJSHeapSize:a,usedJSHeapSize:b,jsHeapSizeLimit:c}=performance.memory,d=[];for(let e of[b,a,c])"number"==typeof e&&d.push(function(a){for(let b of["B","KB","MB","GB"]){if(a<1536)return`${a.toFixed(1)}${b}`;a/=1024}return`${a.toFixed(1)}TB}`}(e));return`Heap ${d.join(" / ")}`}(),t=[`${f4("⏱️",n,m)} (${p})`,`${q}`,`Layers: ${r?f3(g,h):a.size}`,r?`Nodes: ${f3(i,j)}`:null,r?`Ops: ${f3(k,l)}`:null,r&&s?s:null].filter(aU),u=new c9(c),v=new Map(t.map(a=>[a,u.measureText(a)])),w=Math.max(...Array.from(v.values(),a=>a.width)),x=function(a,b){let c=0;for(let d of a)c+=b(d);return c}(v.values(),a=>a.height),y=2+f.x;c.save();try{c.fillStyle="white",c.fillRect(y,0,w,x),c.fillStyle="black";let a=0;for(let[b,d]of v.entries())a+=d.height,c.fillText(b,y,a)}catch(a){aa.warnOnce("Error during debug stats rendering",a)}finally{c.restore()}}var f0=new Set,f1=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function f2(a,b){if(!dw.check(!0,"scene"))return{};let c=0;return{node:"json"===b?function(a){let{...b}=a;for(let a of Object.keys(b))f1.has(a)||"number"==typeof b[a]||"string"==typeof b[a]||"boolean"!=typeof b[a]&&(f0.add(a),delete b[a]);return b}(a):a,name:a.name??a.id,dirty:a instanceof fh?a.dirty:void 0,...Array.from(a instanceof fh?a.children():[],a=>f2(a,b)).reduce((a,b)=>{let{name:d}=b,{node:{visible:e,opacity:f,zIndex:g,translationX:h,translationY:i,rotation:j,scalingX:k,scalingY:l},node:m}=b;(!e||f<=0)&&(d=`(${d})`),fh.is(m)&&m.renderToOffscreenCanvas&&(d=`*${d}*`);let n=Array.isArray(g)?`(${g.join(", ")})`:g,o=[`${(c++).toString().padStart(3,"0")}|`,`${d??"<unknown>"}`,`z: ${n}`,h&&`x: ${h}`,i&&`y: ${i}`,j&&`r: ${j}`,null!=k&&1!==k&&`sx: ${k}`,null!=l&&1!==l&&`sy: ${l}`].filter(a=>!!a).join(" "),p=o,q=1;for(;null!=a[p]&&q<100;)p=`${o} (${q++})`;return a[p]=b,a},{})}}function f3(a,b){let c=a+b;return`${a} / ${c} (${Math.round(100*a/c)}%)`}function f4(a,b,c){return`${a}: ${Math.round(100*(null!=c?c-b:b))/100}ms`}var f5=(a,{x0:b,y0:c,x1:d,y1:e,cx:f,cy:g},h,i)=>{if(i&&a.moveTo(b,c),b!==d||c!==e){let i=Math.atan2(c-g,b-f),j=Math.atan2(e-g,d-f);a.arc(f,g,h,i,j)}else a.lineTo(b,c)},f6=class extends e6{constructor(){super(...arguments),this.path=new eX,this._clipX=NaN,this._clipY=NaN,this.clip=!1,this._dirtyPath=!0,this.lastPixelRatio=NaN}set clipX(a){this._clipX=a,this.dirtyPath=!0}set clipY(a){this._clipY=a,this.dirtyPath=!0}set dirtyPath(a){this._dirtyPath!==a&&(this._dirtyPath=a,a&&this.markDirty("path"))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(this.fillShadow?.isDirty()??!1)||(this._clipPath?.isDirty()??!1))}resetPathDirty(){this.path.clear(!0),this._dirtyPath=!1}isPathDirty(){return this.path.isDirty()}onChangeDetection(a){this._dirtyPath||(this._dirtyPath=!0,super.onChangeDetection(a))}computeBBox(){return this.updatePathIfDirty(),this.path.computeBBox()}isPointInPath(a,b){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(a,b)}distanceSquared(a,b){return this.distanceSquaredTransformedPoint(a,b)}svgPathData(a){return this.updatePathIfDirty(),this.path.toSVG(a)}distanceSquaredTransformedPoint(a,b){return(this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(a,b))?0:this.path.distanceSquared(a,b)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(a){return a.devicePixelRatio!==this.lastPixelRatio&&(this.dirtyPath=!0),this.lastPixelRatio=a.devicePixelRatio,this.updatePathIfDirty(),super.preRender(a,this.path.commands.length)}render(a){let{ctx:b}=a;if(!this.clip||isNaN(this._clipX)||isNaN(this._clipY))this._clipPath=void 0,this.drawPath(b);else{b.save();try{let a=this.strokeWidth/2;this._clipPath??(this._clipPath=new eX),this._clipPath.clear(),this._clipPath.rect(-a,-a,this._clipX+a,this._clipY+a+a),b.clip(this._clipPath?.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(b)}finally{b.restore()}}this.fillShadow?.markClean(),super.render(a)}drawPath(a){this.fillStroke(a,this.path.getPath2D())}toSVG(){if(!this.visible)return;let a=aJ("path");a.setAttribute("d",this.svgPathData());let b=this.applySvgFillAttributes(a,[]);return this.applySvgStrokeAttributes(a),{elements:[a],defs:b}}};f6.className="Path",dl([d$()],f6.prototype,"clip",2),dl([d$()],f6.prototype,"clipX",1),dl([d$()],f6.prototype,"clipY",1);var f7=(a,b,c,d,e)=>{let f=!1,g=!1,h=d-Math.sqrt(Math.max(e**2-c**2,0)),i=0,j=0,k=c-Math.sqrt(Math.max(e**2-d**2,0));return h>a?(f=!0,h=a,i=c-Math.sqrt(Math.max(e**2-(d-a)**2))):aB(h,0)&&(h=0),k>b?(g=!0,j=d-Math.sqrt(Math.max(e**2-(c-b)**2)),k=b):aB(k,0)&&(k=0),{leading0:h,leading1:i,trailing0:j,trailing1:k,leadingClipped:f,trailingClipped:g}},f8=(a,b,c,d,e,f,g)=>{let h,i,j,k,{topLeft:l,topRight:m,bottomRight:n,bottomLeft:o}=f,p=Math.max(l+o,m+n),q=Math.max(l+m,o+n);if(p<=0&&q<=0){if(null==g)a.rect(b,c,d,e);else{let f=Math.max(b,g.x),h=Math.min(b+d,g.x+g.width),i=Math.max(c,g.y),j=Math.min(c+e,g.y+g.height);a.rect(f,i,h-f,j-i)}return}if(null==g&&l===m&&l===n&&l===o)return void a.roundRect(b,c,d,e,l);if(d<0&&(b+=d,d=Math.abs(d)),e<0&&(c+=e,e=Math.abs(e)),d<=0||e<=0)return;if(null==g)g=new dt(b,c,d,e);else{let a=Math.max(b,g.x),f=Math.min(b+d,g.x+g.width),h=Math.max(c,g.y);g=new dt(a,h,f-a,Math.min(c+e,g.y+g.height)-h)}let r=Math.max(p/e,q/d,1);r>1&&(l/=r,m/=r,n/=r,o/=r);let s=!0,t=!0,u=!0,v=!0;{let a=f7(g.height,g.width,Math.max(b+l-g.x,0),Math.max(c+l-g.y,0),l);a.leadingClipped&&(v=!1),a.trailingClipped&&(t=!1);let d=Math.max(g.x+a.leading1,g.x),e=Math.max(g.y+a.leading0,g.y),f=Math.max(g.x+a.trailing1,g.x),i=Math.max(g.y+a.trailing0,g.y);h={x0:d,y0:e,x1:f,y1:i,cx:b+l,cy:c+l}}if(t){let a=f7(g.width,g.height,Math.max(c+m-g.y,0),Math.max(g.x+g.width-(b+d-m),0),m);a.leadingClipped&&(s=!1),a.trailingClipped&&(u=!1);let e=Math.min(g.x+g.width-a.leading0,g.x+g.width),f=Math.max(g.y+a.leading1,g.y),h=Math.min(g.x+g.width-a.trailing0,g.x+g.width),j=Math.max(g.y+a.trailing1,g.y);i={x0:e,y0:f,x1:h,y1:j,cx:b+d-m,cy:c+m}}if(u){let a=f7(g.height,g.width,Math.max(g.x+g.width-(b+d-n),0),Math.max(g.y+g.height-(c+e-n),0),n);a.leadingClipped&&(t=!1),a.trailingClipped&&(v=!1);let f=Math.min(g.x+g.width-a.leading1,g.x+g.width),h=Math.min(g.y+g.height-a.leading0,g.y+g.height),i=Math.min(g.x+g.width-a.trailing1,g.x+g.width),k=Math.min(g.y+g.height-a.trailing0,g.y+g.height);j={x0:f,y0:h,x1:i,y1:k,cx:b+d-n,cy:c+e-n}}if(v){let a=f7(g.width,g.height,Math.max(g.y+g.height-(c+e-o),0),Math.max(b+o-g.x,0),o);a.leadingClipped&&(u=!1),a.trailingClipped&&(s=!1);let d=Math.max(g.x+a.leading0,g.x),f=Math.min(g.y+g.height-a.leading1,g.y+g.height),h=Math.max(g.x+a.trailing0,g.x),i=Math.min(g.y+g.height-a.trailing1,g.y+g.height);k={x0:d,y0:f,x1:h,y1:i,cx:b+o,cy:c+e-o}}let w=!1;s&&null!=h&&(f5(a,h,l,!w),w||(w=!0)),t&&null!=i&&(f5(a,i,m,!w),w||(w=!0)),u&&null!=j&&(f5(a,j,n,!w),w||(w=!0)),v&&null!=k&&f5(a,k,o,!w),a.closePath()},f9=class extends f6{constructor(){super(...arguments),this.borderPath=new eX,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=this.strokeWidth,this.effectiveStrokeWidth=this.strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(a){this.topLeftCornerRadius=a,this.topRightCornerRadius=a,this.bottomRightCornerRadius=a,this.bottomLeftCornerRadius=a}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){let{path:a,borderPath:b,crisp:c,topLeftCornerRadius:d,topRightCornerRadius:e,bottomRightCornerRadius:f,bottomLeftCornerRadius:g}=this,{x:h,y:i,width:j,height:k,strokeWidth:l,clipBBox:m}=this,n=1/(this.layerManager?.canvas.pixelRatio??1),o=1;if(a.clear(!0),b.clear(!0),0===j||0===k){this.effectiveStrokeWidth=0,this.lastUpdatePathStrokeWidth=0,this.microPixelEffectOpacity=0;return}if(c&&(j<=n&&(o*=j/n),k<=n&&(o*=k/n),j=this.align(h,j),k=this.align(i,k),h=this.align(h),i=this.align(i),m=null!=m?new dt(this.align(m.x),this.align(m.y),this.align(m.x,m.width),this.align(m.y,m.height)):void 0),l)if(j<n){let a=h+n/2;b.moveTo(a,i),b.lineTo(a,i+k),l=n,this.borderClipPath=void 0}else if(k<n){let a=i+n/2;b.moveTo(h,a),b.lineTo(h+j,a),l=n,this.borderClipPath=void 0}else if(l<j&&l<k){let c=l/2;h+=c,i+=c,j-=l,k-=l;let n=m?.clone().shrink(c),o={topLeft:d>0?d-l:0,topRight:e>0?e-l:0,bottomRight:f>0?f-l:0,bottomLeft:g>0?g-l:0};this.borderClipPath=void 0,j>0&&k>0&&(null==n||n?.width>0&&n?.height>0)&&(f8(a,h,i,j,k,o,n),f8(b,h,i,j,k,o,n))}else this.borderClipPath=this.borderClipPath??new eX,this.borderClipPath.clear(!0),this.borderClipPath.rect(h,i,j,k),b.rect(h,i,j,k);else this.borderClipPath=void 0,f8(a,h,i,j,k,{topLeft:d,topRight:e,bottomRight:f,bottomLeft:g},m);if([d,e,f,g].every(a=>0===a)){let a=this.getBBox();this.hittester=a.containsPoint.bind(a),this.distanceSquared=(a,b)=>this.getBBox().distanceSquared(a,b)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=l,this.lastUpdatePathStrokeWidth=l,this.microPixelEffectOpacity=o}computeBBox(){let{x:a,y:b,width:c,height:d,clipBBox:e}=this;return e?.clone()??new dt(a,b,c,d)}isPointInPath(a,b){return this.hittester(a,b)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(a,b){return this.distanceCalculator(a,b)}applyFillAndAlpha(a){super.applyFillAndAlpha(a),a.globalAlpha*=this.microPixelEffectOpacity}applyStrokeAndAlpha(a){super.applyStrokeAndAlpha(a),a.globalAlpha*=this.microPixelEffectOpacity}renderStroke(a){let{stroke:b,effectiveStrokeWidth:c}=this;if(b&&c){let{globalAlpha:b}=a,{lineDash:d,lineDashOffset:e,lineCap:f,lineJoin:g,borderPath:h,borderClipPath:i}=this;i&&a.clip(i.getPath2D()),this.applyStrokeAndAlpha(a),a.lineWidth=c,d&&a.setLineDash(d),e&&(a.lineDashOffset=e),f&&(a.lineCap=f),g&&(a.lineJoin=g),a.stroke(h.getPath2D()),a.globalAlpha=b}}};f9.className="Rect",dl([d$()],f9.prototype,"x",2),dl([d$()],f9.prototype,"y",2),dl([d$()],f9.prototype,"width",2),dl([d$()],f9.prototype,"height",2),dl([d$()],f9.prototype,"topLeftCornerRadius",2),dl([d$()],f9.prototype,"topRightCornerRadius",2),dl([d$()],f9.prototype,"bottomRightCornerRadius",2),dl([d$()],f9.prototype,"bottomLeftCornerRadius",2),dl([d$({equals:cM})],f9.prototype,"clipBBox",2),dl([d$()],f9.prototype,"crisp",2);var ga=class a extends e6{constructor(b){super(b),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontCache=void 0,this.fontSize=a.defaultFontSize,this.fontFamily="sans-serif",this.textAlign="start",this.textBaseline="alphabetic",this.boxPadding=0,this.trimText=b?.trimText??!0}onTextChange(){if(this.richText?.clear(),this.textMap?.clear(),aM(this.text))this.lines=[],this.richText??(this.richText=new fh),this.richText.setScene(this.scene),this.richText.append(this.text.flatMap(a=>a.text.split(c2)).filter(Boolean).map(()=>new a({trimText:!1})));else{let a=this.text?.split("\n")??[];this.lines=this.trimText?a.map(a=>a.trim()):a}}get font(){return this.fontCache??(this.fontCache=c3(this)),this.fontCache}static computeBBox(b,c,d,e){let{font:f,lineHeight:g,textAlign:h,textBaseline:i}=e,{width:j,height:k,lineMetrics:l}=db(f).measureLines(b),m=g?g*l.length:k,n=a.calcTopOffset(m,l,i);return new dt(c-a.calcLeftOffset(j,h),d-n,j,m)}static calcTopOffset(a,b,c){switch(c){case"alphabetic":return b[0]?.ascent??0;case"middle":return a/2;case"bottom":return a;default:return 0}}static calcLeftOffset(a,b){let c=0;switch(b){case"center":c=.5;break;case"right":case"end":c=1}return a*c}computeBBox(){if(this.generateTextMap(),this.textMap?.size){let b=dt.merge(this.textMap.values());return b.x=this.x-a.calcLeftOffset(b.width,this.textAlign),b.y=this.y,b}let{x:b,y:c,lines:d,textBaseline:e,textAlign:f}=this,g=a.computeBBox(d,b,c,{font:this,textBaseline:e,textAlign:f});return null!=this.boxing&&g.grow(this.boxPadding),g}getTextMeasureBBox(){return this.computeBBox()}getPlainText(){return bh(this.text)}isPointInPath(a,b){return this.getBBox()?.containsPoint(a,b)??!1}setScene(a){this.richText?.setScene(a),super.setScene(a)}generateTextMap(){if(!aM(this.text)||this.textMap?.size)return;this.textMap??(this.textMap=new Map);let a=0,b=this.richText.children();for(let{width:c,height:d,ascent:e,segments:f}of dc(this.text,this).lineMetrics){let g=0;for(let{color:d,textMetrics:h,...i}of f){let f=b.next().value;f.x=this.x-c/2+g,f.y=e+a,f.setProperties({...i,fill:d??this.fill});let j=f.getBBox();this.textMap.set(f,j),g+=h.width}a+=d}}render(b){let{ctx:c,stats:d}=b;if(!this.text||!this.layerManager)return d&&(d.nodesSkipped+=1),super.render(b);if(aM(this.text)){this.generateTextMap();let a=this.richText.getBBox(),d=0;switch(this.textAlign){case"left":case"start":d=a.width/2;break;case"right":case"end":d=-(a.width/2)}this.renderBoxing(b,a.clone().translate(d,this.y)),c.save(),c.translate(d,this.y),this.richText.render(b),c.restore()}else this.renderText(b);if(a.debug.check()&&!this.textMap?.size){let a=this.getBBox();c.strokeStyle="red",c.lineWidth=1,c.strokeRect(a.x,a.y,a.width,a.height)}super.render(b)}markDirty(a){return this.textMap?.clear(),super.markDirty(a)}renderText(a){let{fill:b,stroke:c,strokeWidth:d,font:e,textAlign:f}=this;if(!b&&!(c&&d)||!this.layerManager)return super.render(a);let{ctx:g}=a;g.font!==e&&(g.font=e),g.textAlign=f,this.renderBoxing(a),this.fillStroke(g)}renderBoxing(b,c){if(!this.boxing)return;let d=c??a.computeBBox(this.lines,this.x,this.y,this);if(0===d.width||0===d.height)return;let{x:e,y:f,width:g,height:h}=d.grow(this.boxPadding);this.boxing.opacity=this.opacity,this.boxing.x=e,this.boxing.y=f,this.boxing.width=g,this.boxing.height=h,this.boxing.preRender(b),this.boxing.render(b)}executeFill(a){this.renderLines((b,c,d)=>a.fillText(b,c,d))}executeStroke(a){this.renderLines((b,c,d)=>a.strokeText(b,c,d))}renderLines(a){let{x:b,y:c,lines:d}=this;if(!Number.isFinite(b)||!Number.isFinite(c))return;let e=db(this),{lineMetrics:f}=e.measureLines(d),{textBaseline:g,lineHeight:h=f[0].height}=this,i=0;for(let j of("top"===g?i=f[0].ascent:("middle"===g||"bottom"===g)&&(i=h*(1-d.length),"middle"===g?(i/=2,i-=e.baselineDistance(g)):i-=f[0].descent),f))a(j.text,b,c+i),i+=h}setFont(a){this.fontFamily=a.fontFamily,this.fontSize=a.fontSize,this.fontStyle=a.fontStyle,this.fontWeight=a.fontWeight}setAlign(a){this.textAlign=a.textAlign,this.textBaseline=a.textBaseline}setBoxing(a){let b=a.border?.enabled?a.border?.stroke:void 0;null!=a.fill||null!=b?(this.boxing??(this.boxing=new f9({scene:this.scene})),this.boxing.fill=a.fill,this.boxing.fillOpacity=a.fillOpacity??1,this.boxing.cornerRadius=a.cornerRadius??0,this.boxing.stroke=b,this.boxing.strokeWidth=a.border?.strokeWidth??0,this.boxing.strokeOpacity=a.border?.strokeOpacity??1,this.boxPadding=a.padding??0):this.boxing&&(this.boxing.destroy(),this.boxing=void 0)}getBoxingProperties(){let{fill:a,fillOpacity:b,cornerRadius:c,stroke:d,strokeWidth:e,strokeOpacity:f}=this.boxing??{};return{border:{enabled:null!=d,stroke:d,strokeWidth:e,strokeOpacity:f},cornerRadius:c,fill:a,fillOpacity:b,padding:this.boxPadding}}toSVG(){if(!this.visible||!this.text)return;let a=aJ("text");if(aU(this.text))this.applySvgFillAttributes(a),e5(a,this),a.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),a.setAttribute("alignment-baseline",this.textBaseline),a.setAttribute("x",String(this.x)),a.setAttribute("y",String(this.y)),a.textContent=this.text;else for(let b of this.text){let c=aJ("tspan");e5(c,{fontSize:b.fontSize??this.fontSize,fontFamily:b.fontFamily??this.fontFamily,fontWeight:b.fontWeight??this.fontWeight,fontStyle:b.fontStyle??this.fontStyle}),this.applySvgFillAttributes(c),c.textContent=b.text,a.append(c)}return{elements:[a]}}};ga.className="Text",ga.debug=dw.create(!0,"scene:text"),ga.defaultFontSize=10,dl([d$()],ga.prototype,"x",2),dl([d$()],ga.prototype,"y",2),dl([d$({changeCb:a=>a.onTextChange()})],ga.prototype,"text",2),dl([d$({changeCb:a=>{a.fontCache=void 0}})],ga.prototype,"fontStyle",2),dl([d$({changeCb:a=>{a.fontCache=void 0}})],ga.prototype,"fontWeight",2),dl([d$({changeCb:a=>{a.fontCache=void 0}})],ga.prototype,"fontSize",2),dl([d$({changeCb:a=>{a.fontCache=void 0}})],ga.prototype,"fontFamily",2),dl([d$()],ga.prototype,"textAlign",2),dl([d$()],ga.prototype,"textBaseline",2),dl([d$()],ga.prototype,"lineHeight",2);var gb=ga,gc=class extends fc(gb){},gd=class extends fc(fe(gb)){},ge={};dk(ge,{BASE_FONT_SIZE:()=>gg,CARTESIAN_AXIS_TYPE:()=>gj,CARTESIAN_POSITION:()=>gi,FONT_SIZE:()=>gf,FONT_SIZE_RATIO:()=>gh,POLAR_AXIS_SHAPE:()=>gl,POLAR_AXIS_TYPE:()=>gk});var gf=(a=>(a[a.SMALLEST=8]="SMALLEST",a[a.SMALLER=10]="SMALLER",a[a.SMALL=12]="SMALL",a[a.MEDIUM=13]="MEDIUM",a[a.LARGE=14]="LARGE",a[a.LARGEST=17]="LARGEST",a))(gf||{}),gg=12,gh=(a=>(a[a.SMALLEST=8/gg]="SMALLEST",a[a.SMALLER=10/gg]="SMALLER",a[a.SMALL=12/gg]="SMALL",a[a.MEDIUM=13/gg]="MEDIUM",a[a.LARGE=14/gg]="LARGE",a[a.LARGEST=17/gg]="LARGEST",a))(gh||{}),gi=(a=>(a.TOP="top",a.TOP_RIGHT="top-right",a.TOP_LEFT="top-left",a.RIGHT="right",a.RIGHT_TOP="right-top",a.RIGHT_BOTTOM="right-bottom",a.BOTTOM="bottom",a.BOTTOM_RIGHT="bottom-right",a.BOTTOM_LEFT="bottom-left",a.LEFT="left",a.LEFT_TOP="left-top",a.LEFT_BOTTOM="left-bottom",a))(gi||{}),gj=(a=>(a.CATEGORY="category",a.GROUPED_CATEGORY="grouped-category",a.ORDINAL_TIME="ordinal-time",a.UNIT_TIME="unit-time",a.TIME="time",a.NUMBER="number",a.LOG="log",a))(gj||{}),gk=(a=>(a.ANGLE_CATEGORY="angle-category",a.ANGLE_NUMBER="angle-number",a.RADIUS_CATEGORY="radius-category",a.RADIUS_NUMBER="radius-number",a))(gk||{}),gl=(a=>(a.CIRCLE="circle",a.POLYGON="polygon",a))(gl||{}),gm=class extends ez{constructor(){super(...arguments),this.id=c_(this),this.node=new gc({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(a,b){return a.eventsHub.on("layout:complete",()=>this.updateA11yText(a,b))}computeTextWrap(a,b){let c,{text:d,padding:e,wrapping:f}=this,g=Math.min(this.maxWidth??1/0,a)-2*e,h=this.maxHeight??b-2*e,i={maxWidth:g,maxHeight:h,font:this,textWrap:f};if(!isFinite(g)&&!isFinite(h)){this.node.text=d;return}aM(d)?(c=dh(d,i),this.truncated=c.some(c8)):(c=de(d??"",i),this.truncated=c7(c)),this.node.text=c}updateA11yText(a,b){let{proxyInteractionService:c}=a;if(this.enabled&&this.text){let d=ff.toCanvas(this.node);if(d){let{id:e}=this;this.proxyText??(this.proxyText=c.createProxyElement({type:"text",domManagerId:e,where:b})),this.proxyText.textContent=bh(this.text),this.proxyText.setBounds(d),this.proxyText.addListener("mousemove",b=>this.handleMouseMove(a,b)),this.proxyText.addListener("mouseleave",b=>this.handleMouseLeave(a,b))}}else this.proxyText?.destroy(),this.proxyText=void 0}handleMouseMove(a,b){if(null!=b&&this.enabled&&this.truncated){let{x:c,y:d}=ff.toCanvas(this.node),e=b.sourceEvent.offsetX+c,f=b.sourceEvent.offsetY+d;a.tooltipManager.updateTooltip(this.id,{canvasX:e,canvasY:f,showArrow:!1},[{type:"structured",title:bh(this.text)}])}}handleMouseLeave(a,b){a.tooltipManager.removeTooltip(this.id)}};gm.SMALL_PADDING=10,dl([ey,fI("node","visible")],gm.prototype,"enabled",2),dl([ey,fI("node")],gm.prototype,"text",2),dl([ey,fI("node")],gm.prototype,"textAlign",2),dl([ey,fI("node")],gm.prototype,"fontStyle",2),dl([ey,fI("node")],gm.prototype,"fontWeight",2),dl([ey,fI("node")],gm.prototype,"fontSize",2),dl([ey,fI("node")],gm.prototype,"fontFamily",2),dl([ey,fI("node","fill")],gm.prototype,"color",2),dl([ey],gm.prototype,"spacing",2),dl([ey],gm.prototype,"maxWidth",2),dl([ey],gm.prototype,"maxHeight",2),dl([ey],gm.prototype,"wrapping",2),dl([ey],gm.prototype,"padding",2),dl([ey],gm.prototype,"layoutStyle",2);var gn=(a=>(a.X="x",a.Y="y",a.Angle="angle",a.Radius="radius",a))(gn||{});function go(a){switch(a){case"x":case"y":case"angle":case"radius":return!0;default:return!1}}var gp=class{constructor(){this.title=new gm,this.subtitle=new gm,this.footnote=new gm}positionCaptions(a){let{title:b,subtitle:c,footnote:d}=this,e=a.layoutBox.height/10;b.enabled&&(this.positionCaption("top",b,a.layoutBox,e),this.shrinkLayoutByCaption("top",b,a.layoutBox)),c.enabled&&(this.positionCaption("top",c,a.layoutBox,e),this.shrinkLayoutByCaption("top",c,a.layoutBox)),d.enabled&&(this.positionCaption("bottom",d,a.layoutBox,e),this.shrinkLayoutByCaption("bottom",d,a.layoutBox))}positionAbsoluteCaptions(a){let{title:b,subtitle:c,footnote:d}=this,{rect:e}=a.series;for(let a of[b,c,d])if("overlay"===a.layoutStyle){if("left"===a.textAlign)a.node.x=e.x+a.padding;else if("right"===a.textAlign){let b=a.node.getBBox();a.node.x=e.x+e.width-b.width-a.padding}}}computeX(a,b){return"left"===a?b.x:"right"===a?b.x+b.width:b.x+b.width/2}positionCaption(a,b,c,d){if(!b.text)return;let{lineMetrics:e}=aM(b.text)?dc(b.text,b):db(b).measureLines(b.text),f=Math.max(e[0].height,d);b.node.x=this.computeX(b.textAlign,c)+b.padding,b.node.y=c.y+("top"===a?0:c.height)+b.padding,b.node.textBaseline=a,b.computeTextWrap(c.width,f)}shrinkLayoutByCaption(a,b,c){if("block"===b.layoutStyle){let d=b.node.getBBox().clone(),{spacing:e=0}=b;"bottom"===a&&aM(b.text)&&(b.node.y-=d.height,d.y-=d.height),c.shrink("top"===a?Math.ceil(d.y-c.y+d.height+e):Math.ceil(c.y+c.height-d.y+e),a)}}};dl([ey],gp.prototype,"title",2),dl([ey],gp.prototype,"subtitle",2),dl([ey],gp.prototype,"footnote",2);var gq=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],gr=class{constructor(a){this.chartService=a,this.mementoOriginatorKey="chartType"}createMemento(){let a=this.chartService.publicApi?.getOptions()?.chartType;return a??(a="candlestick"),a}guardMemento(a){return null==a||gq.includes(a)}restoreMemento(a,b,c){null!=c&&this.chartService.publicApi?.updateDelta({chartType:c}).catch(a=>aa.error("error restoring state",a))}},gs="12.2.0",gt=Symbol("previous-memento-not-found"),gu=class{constructor(a){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=dw.create(!0,"history"),this.cleanup=new cQ,this.cleanup.register(a.on("series:undo",this.undo.bind(this)),a.on("series:redo",this.redo.bind(this)))}destroy(){this.cleanup.flush()}addMementoOriginator(a){this.originators.set(a.mementoOriginatorKey,a),this.clearState.set(a.mementoOriginatorKey,a.createMemento()),this.debugEvent("History add originator:",a.mementoOriginatorKey)}clear(){for(let[a,b]of(this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1,this.originators.entries()))this.clearState.set(a,b.createMemento())}record(a,...b){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));let c=new Map;for(let a of b){if(!this.originators.has(a.mementoOriginatorKey))throw Error(`Originator [${a.mementoOriginatorKey}] has not been added to the HistoryManager.`);c.set(a.mementoOriginatorKey,a.createMemento())}this.history.push({label:a,mementos:c}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${a}]`)}undo(){let a=this.history[this.historyIndex];if(a){for(let b of a.mementos.keys()){let a=this.findPreviousMemento(b);if(a===gt)throw Error(`Could not find previous memento for [${b}].`);this.restoreMemento(b,a)}this.historyIndex-=1,this.debugEvent(`History undo: [${a.label}]`)}}redo(){let a=this.history[this.historyIndex+1];if(a){for(let[b,c]of a.mementos.entries())this.restoreMemento(b,c);this.historyIndex+=1,this.debugEvent(`History redo: [${a.label}]`)}}findPreviousMemento(a){for(let b=this.historyIndex-1;b>=0;b--)if(this.history[b].mementos.has(a))return this.history[b].mementos.get(a);return this.clearState.has(a)?this.clearState.get(a):gt}restoreMemento(a,b){this.originators.get(a)?.restoreMemento(gs,gs,b)}debugEvent(...a){this.debug(...a,this.history.map((a,b)=>b===this.historyIndex?`** ${a.label} **`:a.label))}},gv=class a{constructor(a){this.version=a.split("-")[0]}save(...a){let b={version:this.version};for(let c of Object.values(a))b[c.mementoOriginatorKey]=this.encode(c,c.createMemento());return b}restore(a,...b){if("object"!=typeof a)return void aa.warnOnce(`Could not restore data of type [${typeof a}], expecting an object, ignoring.`);if(null==a)return void aa.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");if(!("version"in a)||"string"!=typeof a.version)return void aa.warnOnce("Could not restore data, missing [version] string in object, ignoring.");for(let c of b){let b=this.decode(c,a[c.mementoOriginatorKey]),d=[];if(!c.guardMemento(b,d)){let a=d.length>0?`

${d.join("\n\n")}

`:"";aa.warnOnce(`Could not restore [${c.mementoOriginatorKey}] data, value was invalid, ignoring.${a}`,b);return}c.restoreMemento(this.version,a.version,b)}}encode(b,c){try{return JSON.parse(JSON.stringify(c,a.encodeTypes))}catch(a){throw Error(`Failed to encode [${b.mementoOriginatorKey}] value [${a}].`,{cause:a})}}decode(b,c){if(null==c)return c;try{return JSON.parse(JSON.stringify(c),a.decodeTypes)}catch(a){throw Error(`Failed to decode [${b.mementoOriginatorKey}] value [${a}].`,{cause:a})}}static encodeTypes(a,b){return aN(this[a])?{__type:"date",value:this[a].toISOString()}:b}static decodeTypes(a,b){return aQ(this[a])&&"__type"in this[a]&&"date"===this[a].__type?new Date(this[a].value):b}},gw=class{constructor(){this.caretaker=new gv(gs),this.state=new Map}setState(a,b){dK(this.state.get(a.mementoOriginatorKey),b)||this.setStateAndRestore(a,b)}setStateAndRestore(a,b){this.state.set(a.mementoOriginatorKey,b),this.restoreState(a)}restoreState(a){let{caretaker:b,state:c}=this;if(!c.has(a.mementoOriginatorKey))return;let d=c.get(a.mementoOriginatorKey);b.restore({version:b.version,[a.mementoOriginatorKey]:d},a)}},gx=class{constructor(){this.cleanup=new cQ,this.destroyed=!1}destroy(){this.cleanup.flush(),this.destroyed=!0}},gy=class a{constructor(a,b,c){this.element=a,this.topTabGuard=b,this.bottomTabGuard=c,this.cleanup=new cQ,this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,!1),this.initTabGuard(this.bottomTabGuard,!0),this.element.addEventListener("focus",()=>this.onFocus(),{capture:!0}),this.element.addEventListener("blur",a=>this.onBlur(a),{capture:!0})}set tabIndex(a){this.guardTabIndex=a,0===this.guardTabIndex?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){this.cleanup.flush()}initTabGuard(a,b){this.cleanup.register(aK(a,"focus",()=>this.onTab(a,b)))}setGuardIndices(a){cG(this.topTabGuard,"tabindex",a),cG(this.bottomTabGuard,"tabindex",a)}onFocus(){this.hasFocus=!0,0!==this.guardTabIndex&&this.setGuardIndices(0)}onBlur({relatedTarget:a}){let{topTabGuard:b,bottomTabGuard:c}=this;this.hasFocus=!1,0!==this.guardTabIndex&&a!==b&&a!==c&&this.setGuardIndices(this.guardTabIndex)}onTab(a,b){if(0!==this.guardTabIndex){let c;0===a.tabIndex?(c=this.findExitTarget(!b),this.setGuardIndices(this.guardTabIndex)):c=this.findEnterTarget(b),c?.focus()}}static queryFocusable(a,b){let c=aH();return Array.from(a.querySelectorAll(b)).filter(a=>{if(a instanceof HTMLElement){let b=c.getComputedStyle(a);return"none"!==b.display&&"none"!==b.visibility}return!1})}findEnterTarget(b){let c=a.queryFocusable(this.element,'[tabindex="0"]'),d=b?c.length-1:0;return c[d]}findExitTarget(b){let c=a.queryFocusable(aG(),"[tabindex]").filter(a=>a.tabIndex>0).sort((a,b)=>a.tabIndex-b.tabIndex),{before:d,after:e}=a.findBeforeAndAfter(c,this.guardTabIndex);return b?d:e}static findBeforeAndAfter(a,b){let c,d,e=0,f=a.length-1;for(;e<=f;){let g=Math.floor((e+f)/2),h=a[g].tabIndex;if(h===b){c=a[g-1]||void 0,d=a[g+1]||void 0;break}h<b?(c=a[g],e=g+1):(d=a[g],f=g-1)}return{before:c,after:d}}};function gz(a,b,c=["Escape"]){return aK(a,"keydown",a=>{gF(a,...c)&&b(a)})}function gA(a,b){let c=aK(aH(),"mousedown",d=>{[0,2].includes(d.button)&&!gC(a,d)&&(b(),c())});return c}function gB(a,b){let c=aK(aH(),"touchstart",d=>{Array.from(d.targetTouches).some(b=>!gC(a,b))&&(b(),c())});return c}function gC(a,b){return b.target instanceof Element&&null!=b.target.shadowRoot||b.target instanceof Node&&a.contains(b.target)}function gD(a,b,c){let d=a=>{for(let c of b)cG(c,"data-focus-visible-override",a)};return d(c),aK(a,"keydown",()=>d(!0),{once:!0})}function gE(a){return!(a.shiftKey||a.altKey||a.ctrlKey||a.metaKey)}function gF(a,...b){return gE(a)&&b.some(b=>a.key===b)}function gG(a,b,c){return aK(a,"keydown",a=>{gF(a,c)&&b.focus()})}var gH={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function gI(a){let{orientation:b,buttons:c,wrapAround:d=!1,onEscape:e,onFocus:f,onBlur:g}=a,{nextKey:h,prevKey:i}=gH[b],j=a=>{a.target&&"tabIndex"in a.target&&(c.forEach(a=>a.tabIndex=-1),a.target.tabIndex=0)},[k,l]=d?[c.length,c.length]:[0,1/0],m=new cQ;for(let a=0;a<c.length;a++){let b=c[(k+a-1)%l],d=c[a],n=c[(k+a+1)%l];m.register(aK(d,"focus",j),f&&aK(d,"focus",f),g&&aK(d,"blur",g),e&&gz(d,e),b&&gG(d,b,i),n&&gG(d,n,h),aK(d,"keydown",a=>{gF(a,h,i)&&a.preventDefault()})),d.tabIndex=0===a?0:-1}return m}function gJ(a,b){return c=>{if("true"===a.ariaDisabled)return c.preventDefault();b(c)}}function gK(a){return"button"in a?0===a.button:gE(a)&&("Space"===a.code||"Enter"===a.key)}function gL(a){if(a?.target instanceof HTMLElement&&"tabindex"in a.target.attributes)return a.target}function gM(a){return aK(a,"keydown",a=>{!a.defaultPrevented&&cI(a.target,"data-preventdefault",!0)&&gF(a,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&a.preventDefault()})}var gN=class{constructor(a){this.callback=a,this.devicePixelRatio=aH("devicePixelRatio")??1,this.devicePixelRatioMediaQuery=void 0,this.devicePixelRatioListener=a=>{a.matches||(this.devicePixelRatio=aH("devicePixelRatio")??1,this.unregisterDevicePixelRatioListener(),this.registerDevicePixelRatioListener(),this.callback(this.pixelRatio))}}get pixelRatio(){return this.devicePixelRatio}observe(){this.registerDevicePixelRatioListener()}disconnect(){this.unregisterDevicePixelRatioListener()}unregisterDevicePixelRatioListener(){this.devicePixelRatioMediaQuery?.removeEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=void 0}registerDevicePixelRatioListener(){let a=aH("matchMedia")?.(`(resolution: ${this.pixelRatio}dppx)`);a?.addEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=a}},gO=class{constructor(){let a;this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach(([a,b])=>this.observe(a,b)),this.queuedObserveRequests=[],this.observeWindow()},"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(a=>{for(let{target:b,contentRect:{width:c,height:d}}of a){let a=this.elements.get(b);this.checkSize(a,b,c,d)}})),this.pixelRatioObserver=new gN(()=>{clearTimeout(a),a=setTimeout(()=>this.checkPixelRatio(),0)}),this.documentReady="complete"===aG("readyState"),this.documentReady?this.observeWindow():aH()?.addEventListener("load",this.onLoad)}destroy(){aH()?.removeEventListener("load",this.onLoad),this.resizeObserver?.disconnect(),this.resizeObserver=void 0,this.pixelRatioObserver?.disconnect(),this.pixelRatioObserver=void 0}observeWindow(){this.pixelRatioObserver?.observe()}checkPixelRatio(){let a=this.pixelRatioObserver?.pixelRatio??1;for(let[b,c]of this.elements)if(null!=c.size&&c.size.pixelRatio!==a){let{width:d,height:e}=c.size;c.size={width:d,height:e,pixelRatio:a},c.cb(c.size,b)}}checkSize(a,b,c,d){a&&(c!==a.size?.width||d!==a.size?.height)&&(a.size={width:c,height:d,pixelRatio:this.pixelRatioObserver?.pixelRatio??1},a.cb(a.size,b))}observe(a,b){if(!this.documentReady)return void this.queuedObserveRequests.push([a,b]);this.elements.has(a)?this.removeFromQueue(a):this.resizeObserver?.observe(a),this.elements.set(a,{cb:b})}unobserve(a){this.resizeObserver?.unobserve(a),this.elements.delete(a),this.removeFromQueue(a),this.elements.size||this.destroy()}removeFromQueue(a){this.queuedObserveRequests=this.queuedObserveRequests.filter(([b])=>b!==a)}},gP=class extends Map{constructor(a,b){super(),this.defaultValue=a,this.defaultState=b}set(a,b){return this.delete(a),void 0!==b&&super.set(a,b),delete this.cachedState,delete this.cachedValue,this}delete(a){return delete this.cachedState,delete this.cachedValue,super.delete(a)}stateId(){return this.cachedState??(this.cachedState=Array.from(this.keys()).pop()??this.defaultState),this.cachedState}stateValue(){return this.cachedValue??(this.cachedValue=Array.from(this.values()).pop()??this.defaultValue),this.cachedValue}},gQ=["styles","canvas","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area","tooltip-container"],gR=new Set(["styles","canvas-container","canvas","tooltip-container"]),gS={safeHorizontal:"ag-charts-wrapper--safe-horizontal",safeVertical:"ag-charts-wrapper--safe-vertical"},gT=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}],["tooltip-container",{childElementType:"div"}]]),gU={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON:()=>gU};function gV(a,b){let c=aI("div");return c.className="ag-charts-tab-guard",a.insertAdjacentElement(b,c),c}var gW=class a extends gx{constructor(a,b,c,d,e="normal"){super(),this.eventsHub=a,this.chart=b,this.styleContainer=d,this.mode=e,this.anchorName=`--${c_(this)}`,this.styles=new Map,this.pendingContainer=void 0,this.container=void 0,this.documentRoot=void 0,this.initiallyConnected=void 0,this.containerSize=void 0,this.sizeMonitor=new gO,this.cursorState=new gP("default"),this.minWidth=0,this.minHeight=0,this.element=this.initDOM(),this.rootElements=this.initRootElements(),this.rootElements.canvas.element.style.setProperty("anchor-name",this.anchorName);let f=!1;if(this.observer=function(a,b){if("undefined"==typeof IntersectionObserver)return;let c=new IntersectionObserver(c=>{for(let d of c)d.target===a&&b(d.intersectionRatio)},{root:a});return c.observe(a),c}(this.element,a=>{0!==a||f||this.eventsHub.emit("dom:hidden",null),f=0===a}),this.setSizeOptions(),this.updateContainerSize(),this.addStyles("ag-charts-community",'.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{--align-items: center;--justify-content: center;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ag-charts-wrapper--safe-horizontal{--justify-content: flex-start}.ag-charts-wrapper--safe-vertical{--align-items: flex-start}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--align-items);justify-content:var(--justify-content)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none;-webkit-user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{pointer-events:none}.ag-charts-canvas canvas{display:block}.ag-charts-series-area{outline:none;pointer-events:auto;position:absolute}.ag-charts-swapchain{top:0;left:0;outline:none;opacity:0;pointer-events:none;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none;-webkit-user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-accent-color: #2196f3;--ag-charts-background-color: #fff;--ag-charts-border-color: #dddddd;--ag-charts-border-radius: 4px;--ag-charts-chart-background-color: #fff;--ag-charts-chart-padding: 20px;--ag-charts-focus-shadow: 0 0 0 3px #2196f3;--ag-charts-foreground-color: #181d1f;--ag-charts-font-family: Verdana, sans-serif;--ag-charts-font-size: 12px;--ag-charts-font-weight: 400;--ag-charts-popup-shadow: 0 0 16px rgba(0, 0, 0, .15);--ag-charts-subtle-text-color: #8c8c8c;--ag-charts-text-color: #181d1f;--ag-charts-chrome-background-color: #fafafa;--ag-charts-chrome-font-family: Verdana, sans-serif;--ag-charts-chrome-font-size: 12px;--ag-charts-chrome-font-weight: 400;--ag-charts-chrome-subtle-text-color: #8c8c8c;--ag-charts-chrome-text-color: #181d1f;--ag-charts-button-background-color: #fff;--ag-charts-button-border: 1px solid #dddddd;--ag-charts-button-font-weight: normal;--ag-charts-button-text-color: inherit;--ag-charts-input-background-color: #fff;--ag-charts-input-border: 1px solid #dddddd;--ag-charts-input-text-color: #181d1f;--ag-charts-menu-background-color: #fafafa;--ag-charts-menu-border: 1px solid #dddddd;--ag-charts-menu-text-color: #181d1f;--ag-charts-panel-background-color: #fafafa;--ag-charts-panel-text-color: #181d1f;--ag-charts-tooltip-background-color: #fafafa;--ag-charts-tooltip-border: 1px solid #dddddd;--ag-charts-tooltip-text-color: #181d1f;--ag-charts-tooltip-subtle-text-color: #8c8c8c;--ag-charts-crosshair-label-background-color: #fafafa;--ag-charts-crosshair-label-text-color: #181d1f;--ag-charts-spacing: 4px;--ag-charts-icon-size: 16px;--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 12%);--ag-charts-input-border-radius: var(--ag-charts-border-radius);--ag-charts-input-focus-border-color: var(--ag-charts-accent-color);--ag-charts-input-focus-text-color: var(--ag-charts-accent-color);--ag-charts-input-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-input-disabled-border-color: var(--ag-charts-border-color);--ag-charts-input-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-input-text-color) 50% );--ag-charts-input-placeholder-text-color: color-mix( in srgb, var(--ag-charts-input-background-color), var(--ag-charts-input-text-color) 60% );--ag-charts-button-border-radius: var(--ag-charts-border-radius);--ag-charts-button-focus-background-color: color-mix( in srgb, var(--ag-charts-button-background-color), var(--ag-charts-accent-color) 12% );--ag-charts-button-focus-border-color: var(--ag-charts-accent-color);--ag-charts-button-focus-text-color: var(--ag-charts-accent-color);--ag-charts-button-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-button-disabled-border-color: var(--ag-charts-border-color);--ag-charts-button-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-chrome-text-color) 50% );--ag-charts-checkbox-background-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 35% );--ag-charts-checkbox-checked-background-color: var(--ag-charts-accent-color);--ag-charts-tooltip-border-radius: var(--ag-charts-border-radius);--ag-charts-menu-border-radius: var(--ag-charts-border-radius);--ag-charts-chrome-font-size-small: var(--ag-charts-chrome-font-size);--ag-charts-chrome-font-size-medium: calc(var(--ag-charts-chrome-font-size) * (13 / 12));--ag-charts-chrome-font-size-large: calc(var(--ag-charts-chrome-font-size) * (14 / 12));--ag-charts-border: 1px solid var(--ag-charts-border-color);--ag-charts-focus-border: 1px solid var(--ag-charts-accent-color);--ag-charts-focus-border-shadow: 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%);--ag-charts-layer-menu: 6;--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1}.ag-charts-theme-default-dark{--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 22%)}.ag-chart-canvas-wrapper .ag-charts-theme-default{--ag-charts-border-radius: var(--ag-border-radius, 4px);--ag-charts-border: var(--ag-borders-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-focus-shadow: var(--ag-focus-shadow, 0 0 0 3px var(--ag-charts-accent-color));--ag-charts-focus-border-shadow: var( --ag-focus-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%) )}.ag-charts-icon{display:block;width:20px;height:20px;speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-trend-based-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJtNC45OTYgMTIuNjc0IDMuMjkxLTUuNzQzLjg2OC40OTctMy4yOTEgNS43NDN6Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4zNTEiIGN5PSIxNC41IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTggNmgtN1Y1aDd6bTAgNC41aC03di0xaDd6bTAgNC41SDZ2LTFoMTJ6Ii8+PC9zdmc+)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-chevron-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03LjQ3IDUuNDdhLjc1Ljc1IDAgMCAxIDEuMDYgMGw0IDRhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtNCA0YS43NS43NSAwIDAgMS0xLjA2LTEuMDZMMTAuOTQgMTAgNy40NyA2LjUzYS43NS43NSAwIDAgMSAwLTEuMDYiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;--input-padding: calc(var(--ag-charts-spacing) * 2);--input-padding-large: calc(var(--ag-charts-spacing) * 2.5);color:var(--ag-charts-input-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);transition-duration:.25s;transition-property:none;transition-timing-function:ease-out}.ag-charts-input:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-button-background-color);border:var(--ag-charts-button-border);border-radius:var(--ag-charts-button-border-radius);color:var(--ag-charts-button-text-color);cursor:pointer;padding:var(--input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-focus-color)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{--checkbox-transition-duration: .1s;appearance:none;background:var(--ag-charts-checkbox-background-color);border-radius:calc(var(--ag-charts-border-radius) * 9);cursor:pointer;height:18px;margin:0;transition-duration:var(--checkbox-transition-duration);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:calc(var(--ag-charts-border-radius) * 7);content:" ";height:14px;margin:2px;transition-duration:var(--checkbox-transition-duration);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-checkbox-checked-background-color)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:var(--ag-charts-input-border);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--textarea-line-height: 1.38;background:var(--ag-charts-input-background-color);border:var(--ag-charts-input-border);border-radius:var(--ag-charts-input-border-radius);line-height:var(--textarea-line-height);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);padding:var(--input-padding-large) var(--input-padding)}.ag-charts-textarea::placeholder{color:var(--ag-charts-input-placeholder-text-color)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-legend-toolbar{pointer-events:auto}.ag-charts-proxy-legend-toolbar>div[role=listitem]{pointer-events:none}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;-webkit-user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:solid 1px var(--ag-charts-chrome-background-color);box-shadow:var(--ag-charts-focus-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;overflow:visible}.ag-charts-focus-svg-outer-path{stroke:var(--ag-charts-chrome-background-color);stroke-width:4px}.ag-charts-focus-svg-inner-path{stroke:var(--ag-charts-accent-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{--tooltip-arrow-size: 8px;--tooltip-row-spacing: 8px;--tooltip-column-spacing: 16px;position:fixed;inset:unset;margin:0;padding:0;overflow:visible;top:var(--top, 0px);left:var(--left, 0px);width:max-content;max-width:100%;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);color:var(--ag-charts-tooltip-text-color);background:var(--ag-charts-tooltip-background-color);border:var(--ag-charts-tooltip-border);border-radius:var(--ag-charts-tooltip-border-radius);box-shadow:var(--ag-charts-popup-shadow)}.ag-charts-tooltip--compact .ag-charts-tooltip-content{--tooltip-row-spacing: 2px;--tooltip-column-spacing: 8px;padding:3px 6px}.ag-charts-tooltip--arrow-top:before,.ag-charts-tooltip--arrow-right:before,.ag-charts-tooltip--arrow-bottom:before,.ag-charts-tooltip--arrow-left:before{content:"";position:absolute;display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;border-bottom-color:transparent;border-right-color:transparent;background:inherit;clip-path:polygon(0 0,100% 0,100% 1px,1px 100%,0 100%)}.ag-charts-tooltip--arrow-top:before{bottom:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * .5)) rotate(45deg)}.ag-charts-tooltip--arrow-bottom:before{top:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(225deg)}.ag-charts-tooltip--arrow-left:before{right:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * .5)) rotate(315deg)}.ag-charts-tooltip--arrow-right:before{left:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * -.5)) rotate(135deg)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none;-webkit-user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:8px 12px;gap:var(--tooltip-row-spacing)}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;place-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:var(--tooltip-column-spacing);align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-tooltip-footer{grid-column:1 / -1;color:var(--ag-charts-tooltip-subtle-text-color);text-align:center}.ag-charts-popover{position:absolute;border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);background:var(--ag-charts-panel-background-color);color:var(--ag-charts-chrome-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);box-shadow:var(--ag-charts-popup-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-menu-text-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-focus-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--ag-charts-layer-menu)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-accent-color);background:var(--ag-charts-focus-color);color:var(--ag-charts-accent-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{--toolbar-gap: calc(var(--ag-charts-spacing) * 2);--toolbar-size: 34px;--toolbar-button-padding: 6px;align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-button-border);color:var(--ag-charts-button-text-color);cursor:pointer;display:flex;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-medium);font-weight:var(--ag-charts-chrome-font-weight);justify-content:center;min-height:var(--toolbar-size);min-width:var(--toolbar-size);padding:var(--toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-focus-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-focus-color);border-color:var(--ag-charts-accent-color);color:var(--ag-charts-accent-color);z-index:2}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-button-disabled-background-color);color:var(--ag-charts-button-disabled-text-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{margin:0 0 0 -1px}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-border-radius);border-bottom-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}\n'),this.setContainer(c),this.cleanup.register(gM(this.element)),"normal"===this.mode){let a=this.rootElements["canvas-center"].element;if(null==a)throw Error("Error initializing tab guards");let b=gV(a,"beforebegin"),c=gV(a,"afterend");this.tabGuards=new gy(a,b,c)}}initDOM(){if("normal"===this.mode){let a=aI("div");return a.innerHTML='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay ag-charts-tooltip-container"></div></div></div></div>',a.firstChild}let a=aI("div");a.role="presentation",a.dataset.agCharts="",a.classList.add("ag-charts-wrapper");let b=aI("div");return a.appendChild(b),b.role="presentation",b.classList.add("ag-charts-series-area"),a}initRootElements(){let{mode:a,element:b}=this,c={};for(let d of gQ){let e,f=`ag-charts-${d}`;if(null==(e="normal"===a?b.classList.contains(f)?b:b.getElementsByClassName(f)[0]:gR.has(d)?b:b.getElementsByClassName(f)[0]??aI("div")))throw Error(`AG Charts - unable to find DOM element ${f}`);c[d]={element:e,children:new Map,listeners:[]}}return c}destroy(){super.destroy(),this.observer?.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),this.pendingContainer=void 0,Object.values(this.rootElements).forEach(a=>{a.children.forEach(a=>a.remove()),a.element.remove()}),this.element.remove()}postRenderUpdate(){"minimal"!==this.mode&&null!=this.pendingContainer&&this.pendingContainer!==this.container&&(0===a.batchedUpdateContainer.length&&aH().setTimeout(this.applyBatchedUpdateContainer.bind(this),0),a.batchedUpdateContainer.push(this))}applyBatchedUpdateContainer(){for(let b of a.batchedUpdateContainer)b.destroyed||b.updateContainer();a.batchedUpdateContainer.splice(0)}setSizeOptions(a=300,b=300,c,d){let{style:e}=this.element;e.width=`${c??a}px`,e.height=`${d??b}px`,this.minWidth=c??a,this.minHeight=d??b,this.updateContainerClassName()}updateContainerSize(){let{style:a}=this.rootElements["canvas-center"].element;a.visibility=null==this.containerSize?"hidden":"",this.containerSize?(a.width=`${this.containerSize.width??0}px`,a.height=`${this.containerSize.height??0}px`):(a.width="",a.height=""),this.updateContainerClassName()}setTabGuardIndex(a){this.tabGuards&&(this.tabGuards.tabIndex=a)}setContainer(a){a!==this.container&&(this.pendingContainer=a,("minimal"===this.mode||null==this.container)&&this.updateContainer())}updateContainer(){let{pendingContainer:a}=this;if(null!=a&&a!==this.container){if(this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container)),null!=this.documentRoot)for(let a of this.rootElements.styles.children.keys())this.removeChild("styles",a);for(let[b,c]of(this.container=a,this.pendingContainer=void 0,this.documentRoot=this.getShadowDocumentRoot(a),this.initiallyConnected=a.isConnected,this.styles))this.addStyles(b,c);a.appendChild(this.element),this.sizeMonitor.observe(a,a=>{this.containerSize=a,this.updateContainerSize(),this.eventsHub.emit("dom:resize",null)}),this.eventsHub.emit("dom:container-change",null)}}setThemeClass(a){this.element.classList.forEach(b=>{b.startsWith("ag-charts-theme-")&&b!==a&&this.element.classList.remove(b)}),this.element.classList.add(a)}setThemeParameters(a){for(let[b,c]of cC(a)){let a=`${c}`;b.endsWith("Size")||b.endsWith("Radius")?a=`${c}px`:b.endsWith("Border")&&"boolean"==typeof c&&(a=c?"var(--ag-charts-border)":"none"),this.element.style.setProperty(`--ag-charts-${b.replace(bg,(a,b)=>(b>0?"-":"")+a.toLowerCase())}`,a)}}updateCanvasLabel(a){cG(this.rootElements["canvas-proxy"].element,"aria-label",a)}getEventElement(a,b){return["focus","blur","keydown","keyup"].includes(b)?this.rootElements["series-area"].element:a}addEventListener(a,b,c){return aK(this.getEventElement(this.element,a),a,b,c)}removeEventListener(a,b,c){this.getEventElement(this.element,a).removeEventListener(a,b,c)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){let a=aH(),b=new dt(0,0,a.innerWidth,a.innerHeight),c=this.getRawOverlayClientRect();return b.intersection(c)?.toDOMRect()??gU}getRawOverlayClientRect(){let a=this.element,b=this.element.getRootNode()?.fullscreenElement;for(;null!=a;){let c;if(null!=b&&a===b)c=!0;else{let b=a.computedStyleMap?.(),d=b?.get("overflow-y")?.toString();c="auto"===d||"scroll"===d}if(c)return dt.fromObject(a.getBoundingClientRect());a=a.parentElement}if(null!=this.documentRoot)return dt.fromObject(this.documentRoot.getBoundingClientRect());let{innerWidth:c,innerHeight:d}=aH();return new dt(0,0,c,d)}getShadowDocumentRoot(a=this.container){let b=a?.ownerDocument?.body??aG("body");for(;null!=a;){if(a===b)return;if(a.parentNode instanceof DocumentFragment)return a;a=a.parentNode}}getParent(a){return this.rootElements[a].element}getChildBoundingClientRect(a){let{children:b}=this.rootElements[a],c=[];for(let a of b.values())c.push(dt.fromObject(a.getBoundingClientRect()));return dt.merge(c)}isManagedChildDOMElement(a,b,c){let{children:d}=this.rootElements[b],e=d?.get(c);return null!=e&&a.contains(e)}contains(a,b){return null==b?this.element.contains(a):this.rootElements[b].element.contains(a)}addStyles(b,c){let d,e="data-ag-charts";if(this.styles.set(b,c),null==this.container)return;let f=a=>a.getAttribute(e)===b,g=a=>{let b,c=new Set(["TITLE","META"]),d=!0;for(let g of a.children){if(d&&c.has(g.tagName)){b=g;continue}if(d=!1,f(g))return;g.hasAttribute(e)&&(b=g)}let g=aI("style");return null!=this.chart.styleNonce&&(g.nonce=this.chart.styleNonce),null==b?a.prepend(g):a.insertBefore(g,b.nextSibling),g};this.styleContainer?d=g(this.styleContainer):!1===this.initiallyConnected?d=this.addChild("styles",b):null!=this.documentRoot||a.headStyles.has(b)?null!=this.documentRoot&&(d=this.addChild("styles",b)):(d=g(aG("head")),a.headStyles.add(b)),null==d||f(d)||(d.setAttribute(e,b),d.innerHTML=c)}removeStyles(a){this.removeChild("styles",a)}updateCursor(a,b){this.cursorState.set(a,b),this.element.style.cursor=this.cursorState.stateValue()}getCursor(){return this.element.style.cursor}addChild(a,b,c,d){let{element:e,children:f,listeners:g}=this.rootElements[a];if(!f)throw Error("AG Charts - unable to create DOM elements after destroy()");if(f.has(b))return f.get(b);let{childElementType:h="div"}=gT.get(a)??{};if(c&&c.tagName.toLowerCase()!==h.toLowerCase())throw Error("AG Charts - mismatching DOM element type");let i=c??aI(h);for(let[a,b,c]of g)i.addEventListener(a,b,c);if(f.set(b,i),"style"===h&&null!=this.chart.styleNonce&&(i.nonce=this.chart.styleNonce),d){let a=e.querySelector(d.query);if(null==a)throw Error(`AG Charts - addChild query failed ${d.query}`);a.insertAdjacentElement(d.where,i)}else e?.appendChild(i);return i}removeChild(a,b){let{children:c}=this.rootElements[a];c&&(c.get(b)?.remove(),c.delete(b))}incrementDataCounter(a){let{dataset:b}=this.element;b[a]??(b[a]="0"),b[a]=String(Number(b[a])+1)}setDataBoolean(a,b){this.element.dataset[a]=String(b)}updateContainerClassName(){let{element:a,containerSize:b,minWidth:c,minHeight:d}=this;a.classList.toggle(gS.safeHorizontal,c>=(b?.width??1/0)),a.classList.toggle(gS.safeVertical,d>=(b?.height??1/0))}};gW.batchedUpdateContainer=[],gW.headStyles=new Set;var gX=class extends f${constructor(){super(aI("div")),this.textElement=aJ("text"),this.textElement.role="presentation",this.svgElement=aJ("svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(a){this.textElement.textContent=a;let b=this.textElement,c=b.getBBox?.();c&&this.svgElement.setAttribute("viewBox",`${c.x} ${c.y} ${c.width} ${c.height}`)}get textContent(){return this.textElement.textContent}destructor(){}},gY=class{constructor(a,b){this.getDispatcher=b,this.onExpanded=()=>{this.controller.setAriaExpanded(!0);let a=this.getDispatcher();if(a&&this.controls){let b={type:"expand-controlled-widget",controlled:this.controls};a.dispatch("expand-controlled-widget",this.controller,b)}},this.onCollapsed=a=>{this.controller.setAriaExpanded(!1),"0"===a.mode&&this.controller.focus()},a.setAriaExpanded(!1),this.controller=a}destroy(){this.controls?.collapse({mode:"2"}),this.setControlled(void 0)}setControlled(a){this.controls&&(this.controls.removeListener("expand-widget",this.onExpanded),this.controls.removeListener("collapse-widget",this.onCollapsed)),this.controls=a,this.controls&&(this.controller.setAriaControls(this.controls.id),this.controls.addListener("expand-widget",this.onExpanded),this.controls.addListener("collapse-widget",this.onCollapsed))}getControlled(){return this.controls}expandControlled(a){this.controller.isDisabled()||this.controls?.expand({controller:this.controller,sourceEvent:void 0,overrideFocusVisible:a?.overrideFocusVisible})}},gZ=class extends f${constructor(a,b){super(a),cG(this.elem,"role",b),this.setEnabled(!0),this.addListener("keydown",({sourceEvent:a})=>{gK(a)&&(a.preventDefault(),this.htmlListener?.dispatch("click",this,{type:"click",device:"keyboard",sourceEvent:a}))})}lazyControllerImpl(){return this.controllerImpl??(this.controllerImpl=new gY(this,()=>this.internalListener)),this.controllerImpl}destructor(){this.controllerImpl?.destroy()}setEnabled(a){cG(this.elem,"aria-disabled",!a)}setControlled(a){return this.lazyControllerImpl().setControlled(a)}getControlled(){return this.lazyControllerImpl().getControlled()}expandControlled(a){return this.lazyControllerImpl().expandControlled(a)}addListener(a,b){return super.addListener(a,(c,d)=>{("click"===a||"dblclick"===a)&&this.isDisabled()||b(c,d)})}},g$=class extends gZ{constructor(){super(aI("button"))}},g_=class extends f${constructor(){super(aI("div")),cG(this.elem,"role","group")}destructor(){}},g0=class extends f${constructor(a,b){super(aI("div")),this.focusedChildIndex=0,this.onChildFocus=(a,b)=>{let c=this.children[this.focusedChildIndex];this.focusedChildIndex=b.index,c?.setTabIndex(-1),b.setTabIndex(0)},this.onChildKeyDown=(a,b)=>{let c=this.orientation,[d,e]="both"===c?[gH.horizontal,gH.vertical]:[gH[c],void 0],f=-1;if(gE(a.sourceEvent)){let c=a.sourceEvent.key;c===d.nextKey||c===e?.nextKey?f=b.index+1:(c===d.prevKey||c===e?.prevKey)&&(f=b.index-1)}this.children[f]?.focus()},cG(this.elem,"role",b),this.orientation=a}get orientation(){return cI(this.elem,"aria-orientation")??"both"}set orientation(a){cG(this.elem,"aria-orientation","both"!==a?a:void 0)}focus(){this.children[this.focusedChildIndex]?.focus()}clear(){for(let a of(this.focusedChildIndex=0,this.children))this.removeChildListeners(a),a.parent=void 0;this.elem.textContent="",this.children.length=0}addChildListeners(a){a.addListener("focus",this.onChildFocus),a.addListener("keydown",this.onChildKeyDown)}removeChildListeners(a){a.removeListener("focus",this.onChildFocus),a.removeListener("keydown",this.onChildKeyDown)}onChildAdded(a){this.addChildListeners(a),a.setTabIndex(1===this.children.length?0:-1)}onChildRemoved(a){this.removeChildListeners(a);let{focusedChildIndex:b,children:c}=this,d=b===a.index;for(let a=0;a<c.length;a++){let d=c[a];d.index===b&&(this.focusedChildIndex=a),d.index=a}if(d){let a=c[b]??c[b-1];a?(this.focusedChildIndex=a.index,a.setTabIndex(0)):this.focusedChildIndex=0}}},g1=class extends g0{constructor(){super("both","list"),this.setHidden(!0)}destructor(){this.children.forEach(a=>a.getElement().parentElement.remove())}addChildToDOM(a,b){let c=aI("div");cG(c,"role","listitem"),cJ(c,"position","absolute"),f$.setElementContainer(a,c),this.appendOrInsert(c,b),this.setHidden(!1)}removeChildFromDOM(a){a.getElement().parentElement.remove(),this.setHidden(0===this.children.length)}setHidden(a){0===this.children.length&&(a=!0),super.setHidden(a)}},g2=class extends f${constructor(a){super(a)}destructor(){}},g3=new Intl.NumberFormat("en-US",{style:"percent"});function g4(a,b=2){return"number"==typeof a?g7(a,b):"string"==typeof a?a:String(a??"")}function g5(a){return g3.format(a)}var g6=new Map().set(2,new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}));function g7(a,b){let c=g6.get(b);return c||(c=new Intl.NumberFormat("en-US",{maximumFractionDigits:b,useGrouping:!1}),g6.set(b,c)),c.format(a)}var g8=class a extends f${constructor(){super(aI("input")),this._step=a.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(a){this._step=a,this.getElement().step=a.attributeValue}get keyboardStep(){return this._keyboardStep?.step??this._step}set keyboardStep(a){if(a!==this._keyboardStep?.step&&(void 0!==this._keyboardStep&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),void 0!==a)){let b=()=>this.getElement().step=a.attributeValue,c=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:a,onKeyDown:b,onKeyUp:c,onBlur:c},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){return cI(this.elem,"aria-orientation")??"both"}set orientation(b){cG(this.elem,"aria-orientation","both"!==b?b:void 0),a.registerDefaultPreventers(this,b)}destructor(){}clampValueRatio(a,b){let c=this.getValueRatio(),d=aA(a,c,b);return d!==c&&this.setValueRatio(d),d}setValueRatio(a,b){let{divider:c}=this.step,d=Math.round(1e4*a)/c,{ariaValueText:e=g5(d/c)}=b??{},f=this.getElement();f.value=`${d}`,f.ariaValueText=e}getValueRatio(){return this.getElement().valueAsNumber/this.step.divider}static registerDefaultPreventers(b,c){"both"===c?b.removeListener("keydown",a.onKeyDown):b.addListener("keydown",a.onKeyDown)}static onKeyDown(a,b){let c=[],{orientation:d}=b;"horizontal"===d?c=["ArrowUp","ArrowDown"]:"vertical"===d&&(c=["ArrowLeft","ArrowRight"]),c.includes(a.sourceEvent.code)&&a.sourceEvent.preventDefault()}};g8.STEP_ONE={attributeValue:"1",divider:1},g8.STEP_HUNDRETH={attributeValue:"0.01",divider:100};var g9=class extends g${constructor(){super(),cG(this.elem,"role","switch"),this.setChecked(!1)}setChecked(a){cG(this.elem,"aria-checked",a)}},ha=class extends g0{constructor(a="horizontal"){super(a,"toolbar")}destructor(){}};function hb(a,b){return b.params?.type===a}function hc(a){let b={params:a,result:void 0};return b.result=function(a){if("button"===a)return new g$;if("slider"===a)return new g8;if("toolbar"===a)return new ha;if("group"===a)return new g_;if("list"===a)return new g1;else if("region"===a)return new g2(aI("div"));else if("text"===a)return new gX;else if("listswitch"===a)return new g9;else throw Error("AG Charts - error allocating meta")}(b.params.type),b}var hd=class{constructor(a,b,c){this.eventsHub=a,this.localeManager=b,this.domManager=c,this.cleanup=new cQ}destroy(){this.cleanup.flush()}addLocalisation(a){a(),this.cleanup.register(this.eventsHub.on("locale:change",a))}createProxyContainer(a){let b=hc(a),{params:c,result:d}=b,e=d.getElement();return this.domManager.addChild("canvas-proxy",c.domManagerId,e),e.classList.add(...c.classList,"ag-charts-proxy-container"),e.role=c.type,hb("toolbar",b)&&(b.result.orientation=b.params.orientation),this.addLocalisation(()=>{e.ariaLabel=this.localeManager.t(c.ariaLabel.id,c.ariaLabel.params)}),d}createProxyElement(a){let b=hc(a);if(hb("button",b)){let{params:a,result:c}=b,d=c.getElement();if(this.initInteract(a,c),"string"==typeof a.textContent)d.textContent=a.textContent;else{let{textContent:b}=a;this.addLocalisation(()=>{d.textContent=this.localeManager.t(b.id,b.params)})}this.setParent(b.params,b.result)}if(hb("slider",b)){let{params:a,result:c}=b,d=c.getElement();this.initInteract(a,c),d.type="range",d.role="presentation",d.style.margin="0px",this.addLocalisation(()=>{d.ariaLabel=this.localeManager.t(a.ariaLabel.id,a.ariaLabel.params)}),this.setParent(b.params,b.result)}if(hb("text",b)){let{params:a,result:c}=b;this.initElement(a,c),this.setParent(b.params,b.result)}if(hb("listswitch",b)){let{params:a,result:c}=b;this.initInteract(a,c),c.setTextContent(a.textContent),c.setChecked(a.ariaChecked),c.setAriaDescribedBy(a.ariaDescribedBy),this.setParent(b.params,b.result)}if(hb("region",b)){let{params:a,result:c}=b,d=c.getElement();this.initInteract(a,c),d.role="region",this.setParent(b.params,b.result)}return b.result}initElement(a,b){let c=b.getElement();return cJ(c,"cursor",a.cursor),c.classList.toggle("ag-charts-proxy-elem",!0),c}initInteract(a,b){let{tabIndex:c,domIndex:d}=a,e=this.initElement(a,b);void 0!==c&&(e.tabIndex=c),void 0!==d&&(b.domIndex=d)}setParent(a,b){if("parent"in a)a.parent?.addChild(b);else{let c={where:a.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",a.domManagerId,b.getElement(),c),b.destroyListener=()=>{this.domManager.removeChild("canvas-proxy",a.domManagerId)}}}},he={ariaInitSeriesArea:"interactive chart",ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceStandaloneChart:"chart, ${caption}",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationsToolbar:"Annotations",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColor:"Color",ariaLabelColorPicker:"Color picker",ariaLabelColorPickerAlpha:"Transparency",ariaLabelColorPickerHue:"Hue",ariaLabelColorPickerMultiColor:"Multi Color",ariaLabelColorPickerPalette:"Palette",ariaLabelFinancialCharts:"Financial Charts",ariaLabelGaugeTarget:"Target",ariaLabelGaugeValue:"Value",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaRoleDescription2DSlider:"2D slider",ariaValueColorPalette:"s ${s}[percent0to2dp], v ${v}[percent0to2dp]",ariaValueColorPaletteFirstV:"v ${v}[percent0to2dp], s ${s}[percent0to2dp]",ariaValuePanRange:"${min}[percent0to2dp] to ${max}[percent0to2dp]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsFibonacciRetracementTrendBased:"Fib Trend Based",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",contextMenuResetZoom:"Reset zoom",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}",tooltipPaginationStatus:"${index}[number] of ${count}[number]"},hf=/\$\{(\w+)}(?:\[(\w+)])?/gi,hg={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),percent0to2dp:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},hh=class{constructor(a){this.eventsHub=a,this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(a){this.localeText!==a&&(this.localeText=a,this.eventsHub.emit("locale:change",null))}setLocaleTextFormatter(a){this.getLocaleText=a,this.getLocaleText!==a&&(this.getLocaleText=a,this.eventsHub.emit("locale:change",null))}t(a,b={}){let{localeText:c=he,getLocaleText:d}=this,e=c[a];return d?.({key:a,defaultValue:e,variables:b})??(({defaultValue:a,variables:b})=>a?.replaceAll(hf,(a,c,d)=>{let e=b[c],f=null!=d?hg[d]:null;return(null!=d&&null==f&&aa.warnOnce(`Format style [${d}] is not supported`),null!=f)?f.format(e):"number"==typeof e?hg.number.format(e):e instanceof Date?hg.datetime.format(e):String(e)}))({key:a,defaultValue:e,variables:b})??a}},hi=class{constructor(a){this.enabled=!0,this.width=600,this.height=300;let{width:b,height:c,canvasElement:d,willReadFrequently:e=!1}=a;this.pixelRatio=a.pixelRatio??aH("devicePixelRatio")??1,this.element=d??aI("canvas"),this.element.style.display="block",this.element.style.width=(b??this.width)+"px",this.element.style.height=(c??this.height)+"px",this.element.width=Math.round((b??this.width)*this.pixelRatio),this.element.height=Math.round((c??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:e}),this.onEnabledChange(),this.resize(b??0,c??0,this.pixelRatio),dy(this.context)}drawImage(a,b=0,c=0){return a.drawImage(this.context.canvas,b,c)}toDataURL(a){return this.element.toDataURL(a)}resize(a,b,c){if(!(a>0&&b>0))return;let{element:d,context:e}=this;d.width=Math.round(a*c),d.height=Math.round(b*c),e.setTransform(c,0,0,c,0,0),d.style.width=a+"px",d.style.height=b+"px",this.width=a,this.height=b,this.pixelRatio=c}clear(){dx(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}reset(){this.context.reset(),this.context.verifyDepthZero?.()}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}};dl([dG(a=>a.onEnabledChange())],hi.prototype,"enabled",2);var hj=class extends ay{constructor(){super(...arguments),this.cache=new Map,this.imageLoadingCount=0}loadImage(a,b){let c=this.cache.get(a);if(c?.image)return c.image;if(null!=c&&b)return void c.nodes.add(b);if(!b)return;let d={image:void 0,nodes:new Set([b])},e=new Image;return this.imageLoadingCount++,e.onload=()=>{for(let a of(d.image=e,d.nodes))a.markDirty();d.nodes.clear(),this.imageLoadingCount--,this.emit("image-loaded",{uri:a})},e.onerror=()=>{this.imageLoadingCount--,d.nodes.clear(),this.emit("image-error",{uri:a})},e.src=a,this.cache.set(a,d),d.image}waitingToLoad(){return this.imageLoadingCount>0}destroy(){this.cache.forEach(a=>{a.nodes.clear()}),this.cache.clear()}},hk=class{constructor(a){this.canvas=a,this.debug=dw.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(a,b,c){this.canvas.resize(a,b,c),this.layersMap.forEach(({canvas:d})=>d.resize(a,b,c))}addLayer(a){let{width:b,height:c,pixelRatio:d}=this.canvas,{name:e}=a,f=new dA({width:b,height:c,pixelRatio:d});return this.layersMap.set(f,{id:this.nextLayerId++,name:e,canvas:f}),this.debug("Scene.addLayer() - layers",this.layersMap),f}removeLayer(a){this.layersMap.has(a)&&(this.layersMap.delete(a),a.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(let a of this.layersMap.values())a.canvas.destroy();this.layersMap.clear()}},hl=class extends ay{constructor(a){super(),this.debug=dw.create(!0,"scene"),this.id=c_(this),this.imageLoader=new hj,this.root=null,this.pendingSize=null,this.isDirty=!1,this.cleanup=new cQ,this.updateDebugFlags(),this.canvas=new hi(a),this.layersManager=new hk(this.canvas),this.cleanup.register(this.imageLoader.on("image-loaded",()=>{this.emit("scene-changed",{})}),this.imageLoader.on("image-error",({uri:a})=>{aa.warnOnce(`Unable to load image ${a}`)}))}waitingForUpdate(){return this.imageLoader?.waitingToLoad()??!1}get width(){return this.pendingSize?.[0]??this.canvas.width}get height(){return this.pendingSize?.[1]??this.canvas.height}get pixelRatio(){return this.pendingSize?.[2]??this.canvas.pixelRatio}setContainer(a){let{element:b}=this.canvas;return b.parentElement?.removeChild(b),a.appendChild(b),this}setRoot(a){return this.root===a||(this.isDirty=!0,this.root?.setScene(),this.root=a,a&&(a.visible=!0,a.setScene(this))),this}updateDebugFlags(){dw.inDevelopmentMode(()=>d7._debugEnabled=!0)}clearCanvas(){this.canvas.clear()}attachNode(a){return this.appendChild(a),()=>this.removeChild(a)}appendChild(a){return this.root?.appendChild(a),this}removeChild(a){return this.root?.removeChild(a),this}download(a,b){!function(a,b){let c=aG("body"),d=aI("a",{display:"none"});d.href=a,d.download=b,c.appendChild(d),d.click(),setTimeout(()=>c.removeChild(d))}(this.canvas.toDataURL(b),a?.trim()??"image")}getDataURL(a){return this.canvas.toDataURL(a)}resize(a,b,c){return a=Math.round(a),b=Math.round(b),c??(c=this.pixelRatio),a>0&&b>0&&(a!==this.width||b!==this.height||c!==this.pixelRatio)&&(this.pendingSize=[a,b,c],this.isDirty=!0,!0)}render(a){let b,{debugSplitTimes:c={start:performance.now()},extraDebugStats:d,seriesRect:e}=a??{},{canvas:f,canvas:{context:g}={},root:h,pendingSize:i,width:j,height:k,pixelRatio:l}=this;if(!g)return;let m=performance.now(),n=!1;if(i&&(n=!0,this.layersManager.resize(...i),this.pendingSize=null),h&&!h.visible){this.isDirty=!1;return}if(h instanceof fh&&(b=h.dirty),null!=h&&!1===b&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{tree:f2(h,"console")}),f_(this.layersManager,c,g,void 0,d,e);return}let o={ctx:g,width:j,height:k,devicePixelRatio:l,debugNodes:{}};dw.check("scene:stats:verbose")&&(o.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0});let p=cu(aH("agChartsSceneDebug")),q=[];for(let a of p)"layout"===a?q.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):q.push(a);o.debugNodeSearch=q;let r=!1;if((!1!==b||n)&&(r=!0,f.clear()),h&&dw.check("scene:dirtyTree")){let{dirtyTree:a,paths:b}=function a(b){let c=b instanceof fh?b.dirty:void 0;if(!c)return{dirtyTree:{},paths:[]};let d=Array.from(b instanceof fh?b.children():[],b=>a(b)).filter(a=>a.paths.length>0),e=fh.is(b)?b.name??b.id:b.id,f=d.length?d.flatMap(a=>a.paths).map(a=>`${e}.${a}`):[e];return{dirtyTree:{name:e,node:b,dirty:c,...d.map(a=>a.dirtyTree).filter(a=>null!=a.dirty).reduce((a,b)=>(a[b.name??"<unknown>"]=b,a),{})},paths:f}}(h);dw.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:a,paths:b})}if(h&&r){if(h.visible&&h.preRender(o),this.debug.check()){let a=f2(h,"console");this.debug("Scene.render() - before",{canvasCleared:r,tree:a})}if(h.visible)try{g.save(),h.render(o),g.restore()}catch(a){throw this.canvas.reset(),a}}c["✍️"]=performance.now()-m,g.verifyDepthZero?.(),this.isDirty=!1,f_(this.layersManager,c,g,o.stats,d,e);var s=o.debugNodes;g.save();try{for(let[a,b]of Object.entries(s)){let c=ff.toCanvas(b);if(!c){aa.log(`Scene.render() - no bbox for debugged node [${a}].`);continue}g.globalAlpha=.8,g.strokeStyle="red",g.lineWidth=1,g.strokeRect(c.x,c.y,c.width,c.height),g.fillStyle="red",g.strokeStyle="white",g.font="16px sans-serif",g.textBaseline="top",g.textAlign="left",g.lineWidth=2,g.strokeText(a,c.x,c.y,c.width),g.fillText(a,c.x,c.y,c.width)}}catch(a){aa.warnOnce("Error during debug rendering",a)}finally{g.restore()}h&&this.debug.check()&&this.debug("Scene.render() - after",{tree:f2(h,"console"),canvasCleared:r})}toSVG(){let{root:a,width:b,height:c}=this;if(null!=a)return d7.toSVG(a,b,c)}strip(){let{context:a,pixelRatio:b}=this.canvas;a.setTransform(b,0,0,b,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1,this.clear()}destroy(){this.strip(),this.canvas.destroy(),this.imageLoader.destroy(),this.cleanup.flush(),Object.assign(this,{canvas:void 0})}};hl.className="Scene";var hm=class{constructor(a,b,c){this.eventsHub=a,this.annotationRoot=b,this.fireChartEvent=c,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(a){return null==a||aM(a)}restoreMemento(a,b,c){this.annotations=this.cleanData(c??[]).map(a=>{let b=this.getAnnotationTypeStyles(a.type);return dM(a,b)}),this.eventsHub.emit("annotations:restore",{annotations:this.annotations})}updateData(a){this.annotations=this.cleanData(a??[])}fireChangedEvent(){this.fireChartEvent({type:"annotations",annotations:fy([...this.annotations])})}attachNode(a){return this.annotationRoot.append(a),()=>(this.annotationRoot?.removeChild(a),this)}setAnnotationStyles(a){this.styles=a}getAnnotationTypeStyles(a){return this.styles?.[a]}cleanData(a){for(let b of a)"textAlign"in b&&delete b.textAlign;return a}},hn=(a=>(a[a.CHART_BACKGROUND=0]="CHART_BACKGROUND",a[a.AXIS_BAND_HIGHLIGHT=1]="AXIS_BAND_HIGHLIGHT",a[a.AXIS_GRID=2]="AXIS_GRID",a[a.AXIS=3]="AXIS",a[a.SERIES_AREA_CONTAINER=4]="SERIES_AREA_CONTAINER",a[a.ZOOM_SELECTION=5]="ZOOM_SELECTION",a[a.SERIES_CROSSLINE_RANGE=6]="SERIES_CROSSLINE_RANGE",a[a.SERIES_LAYER=7]="SERIES_LAYER",a[a.AXIS_FOREGROUND=8]="AXIS_FOREGROUND",a[a.SERIES_CROSSHAIR=9]="SERIES_CROSSHAIR",a[a.SERIES_CROSSLINE_LINE=10]="SERIES_CROSSLINE_LINE",a[a.SERIES_ANNOTATION=11]="SERIES_ANNOTATION",a[a.CHART_ANNOTATION=12]="CHART_ANNOTATION",a[a.CHART_ANNOTATION_FOCUSED=13]="CHART_ANNOTATION_FOCUSED",a[a.STATUS_BAR=14]="STATUS_BAR",a[a.SERIES_LABEL=15]="SERIES_LABEL",a[a.LEGEND=16]="LEGEND",a[a.NAVIGATOR=17]="NAVIGATOR",a[a.FOREGROUND=18]="FOREGROUND",a))(hn||{}),ho=class{constructor(a,b){this.eventsHub=a,this.sceneRoot=b,this.axes=new Map,this.axisGridGroup=new fh({name:"Axes-Grids",zIndex:2}),this.axisGroup=new fh({name:"Axes",zIndex:3}),this.axisLabelGroup=new fh({name:"Axes-Labels",zIndex:15}),this.axisCrosslineRangeGroup=new fh({name:"Axes-Crosslines-Range",zIndex:6}),this.axisCrosslineLineGroup=new fh({name:"Axes-Crosslines-Line",zIndex:10}),this.axisCrosslineLabelGroup=new fh({name:"Axes-Crosslines-Label",zIndex:15}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(a,b){let c={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(let d of a)b.includes(d)||(d.detachAxis(c),d.destroy());for(let d of b)a?.includes(d)||d.attachAxis(c);for(let a of(this.axes.clear(),b)){let b=a.createAxisContext();this.axes.has(b.direction)?this.axes.get(b.direction)?.push(b):this.axes.set(b.direction,[b])}this.eventsHub.emit("axis:change",null)}getAxisContext(a){return this.axes.get(a)??[]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}},hp=(a=>(a[a.FULL=0]="FULL",a[a.UPDATE_DATA=1]="UPDATE_DATA",a[a.PROCESS_DATA=2]="PROCESS_DATA",a[a.PROCESS_DOMAIN=3]="PROCESS_DOMAIN",a[a.PERFORM_LAYOUT=4]="PERFORM_LAYOUT",a[a.SERIES_UPDATE=5]="SERIES_UPDATE",a[a.PRE_SCENE_RENDER=6]="PRE_SCENE_RENDER",a[a.SCENE_RENDER=7]="SCENE_RENDER",a[a.NONE=8]="NONE",a))(hp||{}),hq=class{constructor(a,b,c){this.eventsHub=a,this.caller=b,this.animationManager=c,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.pendingData=void 0,this.debug=dw.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(a){"function"==typeof a&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=a,this.isLoadingInitialData=!0,this.animationManager.skip(),this.eventsHub.emit("data:source-change",null))}clearCallback(){this.dataSourceCallback=void 0}load(a){let{pendingData:b}=this;if(null!=b&&b.params.windowStart?.valueOf()===a.windowStart?.valueOf()&&b.params.windowEnd?.valueOf()===a.windowEnd?.valueOf()){let a=this.requestCounter++;this.isLoadingInitialData=!1,this.dispatch(a,b.data);return}this.isLoadingData=!0,this.throttledFetch(a)}isLazy(){return null!=this.dataSourceCallback}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}async getData(){let{latestRequest:a}=this;if(!a)return;let{params:b,fetchRequest:c}=a;return{params:b,data:await c}}restoreData(a){this.pendingData=a}createThrottledFetch(a){return bc(a=>this.fetch(a).catch(a=>aa.error("callback failed",a)),a,{leading:!1,trailing:!0})}createThrottledDispatch(a){return bc((a,b)=>this.dispatch(a,b),a,{leading:!0,trailing:!0})}dispatch(a,b){this.debug(`DataService - dispatching 'data-load' | ${a}`),this.eventsHub.emit("data:load",{data:b})}async fetch(a){"context"in this.caller&&(a.context=this.caller.context);let b=Promise.resolve().then(async()=>{let c;if(!this.dataSourceCallback)throw Error("DataService - [dataSource.getData] callback not initialised");let d=performance.now(),e=this.requestCounter++;this.debug(`DataService - requesting | ${e}`);try{c=await this.dataSourceCallback(a),this.debug(`DataService - response | ${performance.now()-d}ms | ${e}`)}catch(a){this.debug(`DataService - request failed | ${e}`),aa.errorOnce(`DataService - request failed | [${a}]`)}this.isLoadingInitialData=!1;let f=this.freshRequests.indexOf(b);return -1===f||this.dispatchOnlyLatest&&f!==this.freshRequests.length-1?this.debug(`DataService - discarding stale request | ${e}`):(this.freshRequests=this.freshRequests.slice(f+1),0===this.freshRequests.length&&(this.isLoadingData=!1),Array.isArray(c)?this.throttledDispatch(e,c):this.eventsHub.emit("data:error",null)),c});this.latestRequest={params:a,fetchRequest:b},this.freshRequests.push(b),await b}};dl([fJ({newValue(a){this.throttledDispatch=this.createThrottledDispatch(a)}})],hq.prototype,"dispatchThrottle",2),dl([fJ({newValue(a){this.throttledFetch=this.createThrottledFetch(a)}})],hq.prototype,"requestThrottle",2);var hr=class{constructor(a,b){this.domManager=a,this.updateService=b,this.observers=[]}updateFonts(a){a&&0!==a.size&&(this.loadFonts(a),a.forEach(a=>{this.observeFontStatus(a)}))}destroy(){for(let a of this.observers)a.disconnect();this.observers=[]}loadFonts(a){let b=Array.from(a).map(a=>encodeURIComponent(a)),c=":wght@100;200;300;400;500;600;700;800;900",d=`${c}&family=`,e=`@import url('https://fonts.googleapis.com/css2?family=${b.join(d)}${c}&display=swap');
`;this.domManager.addStyles(`google-font-${b.join("-")}`,e)}observeFontStatus(a){let b=window.document.createElement("div");b.style.setProperty("position","absolute"),b.style.setProperty("top","0"),b.style.setProperty("margin","0"),b.style.setProperty("padding","0"),b.style.setProperty("overflow","hidden"),b.style.setProperty("visibility","hidden"),b.style.setProperty("width","auto"),b.style.setProperty("max-width","none"),b.style.setProperty("font-synthesis","none"),b.style.setProperty("font-family",a),b.style.setProperty("font-size","16px"),b.style.setProperty("white-space","nowrap"),b.textContent="UVWxyz",this.domManager.addChild("canvas-container",`font-check-${encodeURIComponent(a)}`,b);let c=new ResizeObserver(a=>{let b=a?.at(0)?.contentBoxSize.at(0)?.inlineSize;null!=b&&b>0&&(db.clear(),this.updateService.update(4))});c.observe(b),this.observers.push(c)}},hs=(a=>(a.POINTER="pointer",a.NODE="node",a.CHART="chart",a))(hs||{}),ht=(a=>(a.TOP="top",a.RIGHT="right",a.BOTTOM="bottom",a.LEFT="left",a.TOP_RIGHT="top-right",a.BOTTOM_RIGHT="bottom-right",a.BOTTOM_LEFT="bottom-left",a.TOP_LEFT="top-left",a.CENTER="center",a))(ht||{}),hu=class{constructor(){this.registeredListeners=new Map}addListener(a,b){let c={symbol:Symbol(a),handler:b};return this.registeredListeners.has(a)?this.registeredListeners.get(a).push(c):this.registeredListeners.set(a,[c]),()=>this.removeListener(c.symbol)}removeListener(a){for(let[b,c]of this.registeredListeners.entries()){let d=c.findIndex(b=>b.symbol===a);if(d>=0){c.splice(d,1),0===c.length&&this.registeredListeners.delete(b);break}}}dispatch(a,...b){for(let c of this.getListenersByType(a))try{c.handler(...b)}catch(a){aa.errorOnce(a)}}getListenersByType(a){return this.registeredListeners.get(a)??[]}destroy(){this.registeredListeners.clear()}},hv=new WeakMap;function hw(a,b){let c=JSON.stringify(a,null,0);return hv.has(b)||hv.set(b,new Map),hv.get(b)?.has(c)||hv.get(b)?.set(c,b(a)),hv.get(b)?.get(c)}var hx=class{constructor(){this.weak=new WeakMap,this.strong=new Map,this.set=!1,this.value=void 0}};function hy(a,b){let c=new hx,d=(...d)=>{let e=c;for(let a of d){let b="object"==typeof a||"symbol"==typeof a?e.weak:e.strong,c=b.get(a);null==c&&(c=new hx,b.set(a,c)),e=c}if(e.set)return b?.("hit",a,d),e.value;{let c=a(...d);return e.set=!0,e.value=c,b?.("miss",a,d),c}};return d.reset=()=>{c=new hx},d}function hz(a,b){let c=new Map,d={},e=new WeakMap;return(...f)=>{let g=0===f.length?[d]:((...a)=>a.map(a=>"object"==typeof a||"symbol"==typeof a?a:(c.has(a)||c.set(a,{v:a}),c.get(a))))(...f),h=e;for(let a of g.slice(0,-1))h.has(a)||h.set(a,new WeakMap),h=h.get(a);let i=g.at(-1),j=h.get(i);return j?b?.("hit",a,f):(j=a(...f),h.set(i,j),b?.("miss",a,f)),j}}var hA={millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e",month:"%b",year:"%Y"},hB={millisecond:"%Y %b %e %H:%M:%S.%L",second:"%Y %b %e %H:%M:%S",minute:"%Y %b %e %H:%M",hour:"%Y %b %e %H:%M",day:"%Y %b %e",month:"%Y %b",year:"%Y"},hC={year:0,month:1,day:2,hour:3,minute:4,second:5,millisecond:6},hD=/%[-_0]?L/,hE=/%[-_0]?S/,hF=/%[-_0]?M/,hG=/%[-_0]?[HI]/,hH=/^%[-_0]?[de]$/,hI=/^%[-_0]?[Bbm]$/,hJ=/^%[-_0]?[Yy]$/,hK=class a extends hu{constructor(){super(...arguments),this.formats=new Map,this.dateFormatter=hy((b,c,d,e,f)=>{let g=a.mergeSpecifiers(b,c)??hA;return a.getFormatter("date",g,d,e,{truncateDate:f})}),this.formatter=void 0}static mergeSpecifiers(...a){let b;for(let c of a)"string"==typeof c?b=c:aS(c)&&(b=aS(b)?{...b,...c}:c);return b}static getFormatter(a,b,c,d="long",{truncateDate:e}={}){if(aS(b))return"date"!==a?void aa.warn("Date formatter configuration is not supported for non-date types."):(c??(c="millisecond"),bb("component"===d?b?.[c]??hA[c]:function(a,b,c){let d,e;if("string"==typeof a)return a;a??(a=hA);let{millisecond:f=hA.millisecond,second:g=hA.second,minute:h=hA.minute,hour:i=hA.hour,day:j=hA.day,month:k=hA.month,year:l=hA.year}=a,m=hC[b],n=hB[b],o=c?hC[c]:-1;if(o<hC.year&&m>=hC.year&&!hJ.test(l)||o<hC.month&&m>=hC.month&&!hI.test(k)||o<hC.day&&m>=hC.day&&!hH.test(j))return n;switch(b){case"year":return l;case"month":return o<hC.year?`${k} ${l}`:k;case"day":return o<hC.year?`${k} ${j} ${l}`:`${k} ${j}`;case"hour":d=i;break;case"minute":d=h;break;case"second":d=g;break;case"millisecond":d=f;break;default:return n}return m>=hC.hour&&!hG.test(d)||m>=hC.minute&&!hF.test(d)||m>=hC.second&&!hE.test(d)||m>=hC.millisecond&&!hD.test(d)?n:(o<hC.year?e=`${k} ${j} ${l}`:o<hC.month&&(e=`${k} ${j}`),e?`${d} ${e}`:d)}(b,c,e)));switch(a){case"number":{let a=a$(b);if(null==a)return;return a_(a)}case"date":return bb(b);case"category":return a=>b.replace("%s",String(a))}}setFormatter(a){this.formatter!==a&&(this.formatter=a,this.formats.clear(),this.dateFormatter.reset(),this.dispatch("format-changed"))}format(b,c,{specifier:d,truncateDate:e}={}){if(null==c.value)return;let{formatter:f}=this;if(null==f)return;if("function"==typeof f){let a=b(f,c);return null!=a?String(a):void 0}let g=f[c.property];if(null==g)return;if("function"==typeof g){let a=b(g,c);return null!=a?String(a):void 0}if("date"===c.type){let{unit:a,style:b}=c,f=this.dateFormatter(g,d,a,b,e);return f?.(c.value)}let h=d??g;if("string"!=typeof h)return;let i=this.formats.get(h);return null==i&&(i=a.getFormatter(c.type,h),this.formats.set(h,i)),i?.(c.value,"number"===c.type?c.fractionDigits:void 0)}defaultFormat(a,{specifier:b,truncateDate:c}={}){let{formatter:d}=this,e="function"==typeof d?void 0:d?.[a.property];switch(a.type){case"date":{let{unit:d,style:f}=a,g=this.dateFormatter(null!=e&&"function"!=typeof e?e:void 0,b,d,f,c);return g?.(a.value)??String(a.value)}case"number":return g4(a.value,a.fractionDigits);case"category":if(Array.isArray(a.value))return a.value.join(" - ");if("string"==typeof a.value)return a.value;if("number"==typeof a.value)return g4(a.value);else return String(a.value)}}};function hL(a,b){if("string"==typeof a)try{a=en.fromString(a)}catch{a=en.fromArray([0,0,0])}if("string"==typeof b)try{b=en.fromString(b)}catch{b=en.fromArray([0,0,0])}return c=>en.mix(a,b,c).toRgbaString()}var hM={};dk(hM,{easeIn:()=>hO,easeInOut:()=>hQ,easeInOutQuad:()=>hT,easeInQuad:()=>hR,easeOut:()=>hP,easeOutQuad:()=>hS,inverseEaseOut:()=>hU,linear:()=>hN});var hN=a=>a,hO=a=>1-Math.cos(a*Math.PI/2),hP=a=>Math.sin(a*Math.PI/2),hQ=a=>-(Math.cos(a*Math.PI)-1)/2,hR=a=>a*a,hS=a=>1-(1-a)**2,hT=a=>a<.5?2*a*a:1-(-2*a+2)**2/2,hU=a=>2*Math.asin(a)/Math.PI,hV=["initial","remove","update","add","trailing","end","none"],hW={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:.2,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1.2,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},hX=(a=>(a.Loop="loop",a.Reverse="reverse",a))(hX||{});function hY(a){return a.every(a=>a instanceof d7)?{nodes:a,selections:[]}:{nodes:[],selections:a}}var hZ=class{constructor(a){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=a.id,this.groupId=a.groupId,this.autoplay=a.autoplay??!0,this.ease=a.ease??hN,this.phase=a.phase;let b=a.duration??hW[this.phase].animationDuration;this.duration=b*a.defaultDuration,this.delay=(a.delay??0)*a.defaultDuration,this.onComplete=a.onComplete,this.onPlay=a.onPlay,this.onStop=a.onStop,this.onUpdate=a.onUpdate,this.interpolate=this.createInterpolator(a.from,a.to),this.from=a.from,!0===a.skip&&(this.onUpdate?.(a.to,!1,this),this.onStop?.(this),this.onComplete?.(this),this.isComplete=!0),!1!==a.collapsable&&(this.duration=this.checkCollapse(a,this.duration))}checkCollapse(a,b){return!function a(b,c){return b===c||(Array.isArray(b)&&Array.isArray(c)?b.length===c.length&&b.every((b,d)=>a(b,c[d])):dq(b)&&dq(c)?b.equals(c):!!(aS(b)&&aS(c))&&dL(b,c,a))}(a.from,a.to)?b:0}play(a=!1){if(!this.isPlaying&&!this.isComplete)this.isPlaying=!0,this.onPlay?.(this),this.autoplay&&(this.autoplay=!1,a&&this.onUpdate?.(this.from,!0,this))}stop(){this.isPlaying=!1,this.isComplete||(this.isComplete=!0,this.onStop?.(this))}update(a){if(this.isComplete)return a;!this.isPlaying&&this.autoplay&&this.play(!0);let b=this.elapsed;if(this.elapsed+=a,this.delay>this.elapsed)return 0;let c=this.interpolate(this.isReverse?1-this.delta:this.delta);this.onUpdate?.(c,!1,this);let d=this.delay+this.duration;return this.elapsed>=d?(this.stop(),this.isComplete=!0,this.onComplete?.(this),a-(d-b)):0}get delta(){return this.ease(aA(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(a,b){if("object"!=typeof b||dq(b))return this.interpolateValue(a,b);if(Array.isArray(b)){let c=[];for(let d=0;d<b.length;d++){let e=this.createInterpolator(a[d],b[d]);null!=e&&c.push(e)}return a=>{let b=[];for(let d of c)b.push(d(a));return b}}let c=[];for(let d of Object.keys(b)){let e=this.createInterpolator(a[d],b[d]);null!=e&&c.push([d,e])}return a=>{let b={};for(let[d,e]of c)b[d]=e(a);return b}}interpolateValue(a,b){if(null!=a&&null!=b){if(dq(a))return c=>a[dp](b,c);try{switch(typeof a){case"number":return c=>Number(a)*(1-c)+Number(b)*c;case"string":return hL(a,b);case"boolean":if(a===b)return()=>a;break;case"object":return()=>a;default:throw Error(`Unable to interpolate values: ${a}, ${b}`)}}catch{}throw Error(`Unable to interpolate values: ${a}, ${b}`)}}},h$=class{constructor(a){this.maxAnimationTime=a,this.debug=dw.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(hV.map(a=>[a,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(hV[this.currentPhase])??[]}checkOverlappingId(a){null!=a&&this.controllers.has(a)&&(this.controllers.get(a).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${a}`),this.skip())}addAnimation(a){if(!a.isComplete){if(hV.indexOf(a.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",a.id),a.stop();return}this.controllers.set(a.id,a),this.phases.get(a.phase)?.push(a)}}removeAnimation(a){this.controllers.delete(a.id);let b=this.phases.get(a.phase),c=b?.indexOf(a);null!=c&&c>=0&&b?.splice(c,1)}progress(a){if(!this.isReady)return;let b=0===a?.01:a,c=()=>{let a=hV[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:a,phaseMeta:hW[a]}},{phase:d,phaseControllers:e,phaseMeta:f}=c(),g=()=>null==hV[this.currentPhase],h=()=>{for({phase:d,phaseControllers:e,phaseMeta:f}=c();!g()&&0===e.length;)this.currentPhase++,({phase:d,phaseControllers:e,phaseMeta:f}=c()),this.debug(`AnimationBatch - phase changing to ${d}`,{unusedTime:b},e)},i=this.controllers.size;this.debug(`AnimationBatch - ${a}ms; phase ${d} with ${e?.length} of ${i}`);do{let a=b,c=f.skipIfNoEarlierAnimations&&0===this.animationTimeConsumed,d=0;for(let f of e)c?f.stop():b=Math.min(f.update(a),b),f.isComplete&&(d++,this.removeAnimation(f));this.animationTimeConsumed+=a-b,this.debug(`AnimationBatch - updated ${e.length} controllers; ${d} completed`,e),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),h()}while(b>0&&!g())this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let a=!0;for(let[,b]of this.controllers)if(b.duration>0&&!0!==hW[b.phase].skipIfNoEarlierAnimations){a=!1;break}if(!a)for(let[,a]of this.controllers)a.autoplay&&a.play(!0)}skip(a=!0){if(!1===this.skipAnimations&&!0===a){for(let a of this.controllers.values())a.stop();this.controllers.clear()}this.skipAnimations=a}play(){for(let a of this.controllers.values())a.play()}stop(){for(let a of this.controllers.values())try{a.stop(),this.removeAnimation(a)}catch(a){aa.error("Error during animation stop",a)}this.dispatchStopped()}stopByAnimationId(a){if(null!=a&&this.controllers.has(a)){let b=this.controllers.get(a);b&&(b.stop(),this.removeAnimation(b))}}stopByAnimationGroupId(a){for(let b of this.controllers.values())b.groupId===a&&this.stopByAnimationId(b.id)}dispatchStopped(){this.stoppedCbs.forEach(a=>a()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}getRemainingTime(a){if(!this.isActive())return 0;let b=0;for(let[c,d]of this.phases)0!==d.length&&(null==a||a===c)&&(b+=Math.max(...d.map(a=>a.isComplete?0:a.delay+a.duration-(a.elapsed??0))));return b}destroy(){this.stop(),this.controllers.clear()}},h_=(a=>(a[a.Default=32]="Default",a[a.ZoomDrag=16]="ZoomDrag",a[a.Annotations=8]="Annotations",a[a.ContextMenu=4]="ContextMenu",a[a.Animation=2]="Animation",a[a.AnnotationsSelected=1]="AnnotationsSelected",a[a.Clickable=41]="Clickable",a[a.Focusable=34]="Focusable",a[a.Keyable=43]="Keyable",a[a.ContextMenuable=36]="ContextMenuable",a[a.AnnotationsMoveable=9]="AnnotationsMoveable",a[a.AnnotationsDraggable=57]="AnnotationsDraggable",a[a.ZoomDraggable=50]="ZoomDraggable",a[a.ZoomClickable=34]="ZoomClickable",a[a.ZoomWheelable=59]="ZoomWheelable",a[a.All=63]="All",a))(h_||{}),h0=class{constructor(){this.stateQueue=34}pushState(a){this.stateQueue|=a}popState(a){this.stateQueue&=~a}isState(a){return!!(this.stateQueue&-this.stateQueue&a)}};function h1(a){return null==a||!isNaN(a)&&a>=0&&a<=2}var h2=class{constructor(a,b){this.interactionManager=a,this.chartUpdateMutex=b,this.defaultDuration=1e3,this.maxAnimatableItems=1/0,this.batch=new h$(1.5*this.defaultDuration),this.debug=dw.create(!0,"animation"),this.events=new ay,this.rafAvailable="undefined"!=typeof requestAnimationFrame,this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0}addListener(a,b){return this.events.on(a,b)}animate(a){let b=this.batch;try{b.checkOverlappingId(a.id)}catch(a){this.failsafeOnError(a);return}let{id:c}=a;null==c&&(c=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);let d=this.isSkipped()||"none"===a.phase;d&&this.debug("AnimationManager - skipping animation");let{delay:e,duration:f}=a;if(!h1(e))throw Error(`Animation delay of ${e} is unsupported (${c})`);if(!h1(f))throw Error(`Animation duration of ${f} is unsupported (${c})`);let g=new hZ({...a,id:c,skip:d,autoplay:!!this.isPlaying&&a.autoplay,phase:a.phase,defaultDuration:this.defaultDuration});if(!this.forceTimeJump(g,this.defaultDuration))return this.batch.addAnimation(g),g}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(a){this.failsafeOnError(a)}this.requestAnimation()}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(a){try{this.batch.stopByAnimationId(a)}catch(a){this.failsafeOnError(a)}}stopByAnimationGroupId(a){try{this.batch.stopByAnimationGroupId(a)}catch(a){this.failsafeOnError(a)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(a=!0){this.skipAnimations=a}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}getRemainingTime(a){return this.batch.getRemainingTime(a)}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(a){this.requestId=aH().requestAnimationFrame(b=>{a(b).catch(a=>aa.error(a))})}forceTimeJump(a,b){return!1}requestAnimation(){let a;if(!this.rafAvailable||!this.batch.isActive()||null!==this.requestId)return;let b=async c=>{await this.debug.group("AnimationManager.onAnimationFrame()",async()=>{let d=()=>{let b=c-(a??c);a=c,this.debug("AnimationManager",{controllersCount:this.batch.size,deltaTime:b}),this.interactionManager.pushState(2);try{this.batch.progress(b)}catch(a){this.failsafeOnError(a)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:b})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(d):await this.chartUpdateMutex.acquire(d),this.batch.isActive()?this.scheduleAnimationFrame(b):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))})};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(b)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}),this.requestId=null,this.startBatch())}failsafeOnError(a,b=!0){aa.error("Error during animation, skipping animations",a),b&&this.cancelAnimation()}startBatch(a){this.debug(`AnimationManager - startBatch() with skipAnimations=${a}.`),this.reset(),this.batch.destroy(),this.batch=new h$(1.5*this.defaultDuration),!0===a&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(a){this.batch.stoppedCbs.add(a)}destroy(){this.stop(),this.events.clear()}},h3=class{constructor(){this.download={type:"action",showOn:"always",label:"contextMenuDownload",enabled:!0,action:void 0,items:void 0},this["zoom-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuZoomToCursor",enabled:!0,action:void 0,items:void 0},this["pan-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuPanToCursor",enabled:!0,action:void 0,items:void 0},this["reset-zoom"]={type:"action",showOn:"series-area",label:"contextMenuResetZoom",enabled:!0,action:void 0,items:void 0},this["toggle-series-visibility"]={type:"action",showOn:"legend-item",label:"contextMenuToggleSeriesVisibility",enabled:!0,action:void 0,items:void 0},this["toggle-other-series"]={type:"action",showOn:"legend-item",label:"contextMenuToggleOtherSeries",enabled:!0,action:void 0,items:void 0},this.separator={type:"separator",showOn:"always",label:"separator",enabled:!0,action:void 0,items:void 0}}},h4=class{constructor(){this.defaults=["download","zoom-to-cursor","pan-to-cursor","reset-zoom","toggle-series-visibility","toggle-other-series"]}},h5=class{constructor(){this.items=new h3,this.lists=new h4}},h6=class{constructor(a){this.eventsHub=a,this.builtins=new h5,this.hiddenActions=new Set,this.setVisible("zoom-to-cursor",!1),this.setVisible("pan-to-cursor",!1),this.setVisible("reset-zoom",!1)}static check(a,b){return b.showOn==a}static checkCallback(a,b,c){return a===b}dispatchContext(a,b,c,d){let{widgetEvent:e}=b;if(e.sourceEvent.defaultPrevented)return;let f={showOn:a,x:d?.x??b.canvasX,y:d?.y??b.canvasY,context:c,widgetEvent:e};this.eventsHub.emit("context-menu:setup",f),this.eventsHub.emit("context-menu:complete",f)}isVisible(a){return!this.hiddenActions.has(a)}setVisible(a,b){b?this.hiddenActions.delete(a):this.hiddenActions.add(a)}},h7=class{constructor(a){this.eventsHub=a,this.highlightStates=new gP}updateHighlight(a,b){let c=this.getActiveHighlight();this.highlightStates.set(a,b);let d=this.getActiveHighlight();this.isEqual(d,c)||this.eventsHub.emit("highlight:change",{callerId:a,currentHighlight:d,previousHighlight:c})}getActiveHighlight(){return this.highlightStates.stateValue()}isEqual(a,b){return a===b||null!=a&&null!=b&&a?.series===b?.series&&a?.itemId===b?.itemId&&a?.datum===b?.datum}},h8=(a=>(a[a.None=0]="None",a[a.Item=1]="Item",a[a.Series=2]="Series",a[a.OtherSeries=3]="OtherSeries",a[a.OtherItem=4]="OtherItem",a))(h8||{}),h9=[0,1,2,3,4];function ia(a){switch(a){case 1:return"highlighted-item";case 4:return"unhighlighted-item";case 2:return"highlighted-series";case 3:return"unhighlighted-series";case 0:return"none";default:return a}}var ib=class extends ez{};dl([ey],ib.prototype,"fill",2),dl([ey],ib.prototype,"fillOpacity",2),dl([ey],ib.prototype,"stroke",2),dl([ey],ib.prototype,"strokeWidth",2),dl([ey],ib.prototype,"strokeOpacity",2),dl([ey],ib.prototype,"lineDash",2),dl([ey],ib.prototype,"lineDashOffset",2);var ic=class extends ez{constructor(){super(...arguments),this.enabled=!0,this.range="tooltip",this.bringToFront=!1,this.highlightedItem={},this.unhighlightedItem={},this.highlightedSeries={},this.unhighlightedSeries={}}getItemHighlightStyle(a){switch(a){case 1:return this.highlightedItem;case 4:return this.unhighlightedItem;case 2:return this.highlightedSeries;case 3:return this.unhighlightedSeries}}getSeriesHighlightStyle(a){switch(a){case 1:case 4:case 2:return this.highlightedSeries;case 3:return this.unhighlightedSeries}}getStyle(a){return dM(this.getItemHighlightStyle(a),this.getSeriesHighlightStyle(a))}};dl([ey],ic.prototype,"enabled",2),dl([ey],ic.prototype,"range",2),dl([ey],ic.prototype,"bringToFront",2),dl([ey],ic.prototype,"highlightedItem",2),dl([ey],ic.prototype,"unhighlightedItem",2),dl([ey],ic.prototype,"highlightedSeries",2),dl([ey],ic.prototype,"unhighlightedSeries",2);var id=class extends ez{};dl([ey],id.prototype,"strokeWidth",2),dl([ey],id.prototype,"dimOpacity",2),dl([ey],id.prototype,"enabled",2);var ie=class extends ez{constructor(){super(...arguments),this.color="black"}};dl([ey],ie.prototype,"color",2);var ig=class extends ez{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};dl([ey],ig.prototype,"start",2),dl([ey],ig.prototype,"stop",2),dl([ey],ig.prototype,"fill",2),dl([ey],ig.prototype,"fillOpacity",2),dl([ey],ig.prototype,"stroke",2),dl([ey],ig.prototype,"strokeWidth",2),dl([ey],ig.prototype,"strokeOpacity",2),dl([ey],ig.prototype,"lineDash",2),dl([ey],ig.prototype,"lineDashOffset",2);var ih=class{constructor(){this.key="x",this.segments=new eA(ig)}};dl([ey],ih.prototype,"enabled",2),dl([ey],ih.prototype,"key",2),dl([ey],ih.prototype,"segments",2);var ii=class extends ez{constructor(){super(...arguments),this.type="gradient",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.reverse=!1,this.colorSpace="rgb"}};dl([ey],ii.prototype,"type",2),dl([ey],ii.prototype,"colorStops",2),dl([ey],ii.prototype,"bounds",2),dl([ey],ii.prototype,"gradient",2),dl([ey],ii.prototype,"rotation",2),dl([ey],ii.prototype,"reverse",2),dl([ey],ii.prototype,"colorSpace",2);var ij=class extends ez{constructor(){super(...arguments),this.type="pattern",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.scale=1,this.reverse=!1,this.pattern="forward-slanted-lines",this.width=26,this.height=26,this.padding=6,this.fill="black",this.fillOpacity=1,this.backgroundFill="white",this.backgroundFillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0}};dl([ey],ij.prototype,"type",2),dl([ey],ij.prototype,"colorStops",2),dl([ey],ij.prototype,"bounds",2),dl([ey],ij.prototype,"gradient",2),dl([ey],ij.prototype,"rotation",2),dl([ey],ij.prototype,"scale",2),dl([ey],ij.prototype,"reverse",2),dl([ey],ij.prototype,"path",2),dl([ey],ij.prototype,"pattern",2),dl([ey],ij.prototype,"width",2),dl([ey],ij.prototype,"height",2),dl([ey],ij.prototype,"padding",2),dl([ey],ij.prototype,"fill",2),dl([ey],ij.prototype,"fillOpacity",2),dl([ey],ij.prototype,"backgroundFill",2),dl([ey],ij.prototype,"backgroundFillOpacity",2),dl([ey],ij.prototype,"stroke",2),dl([ey],ij.prototype,"strokeOpacity",2),dl([ey],ij.prototype,"strokeWidth",2);var ik=class extends ez{constructor(){super(...arguments),this.type="image",this.url="",this.rotation=0,this.scale=1,this.backgroundFill="black",this.backgroundFillOpacity=1,this.repeat="no-repeat",this.fit="contain"}};dl([ey],ik.prototype,"type",2),dl([ey],ik.prototype,"url",2),dl([ey],ik.prototype,"rotation",2),dl([ey],ik.prototype,"scale",2),dl([ey],ik.prototype,"backgroundFill",2),dl([ey],ik.prototype,"backgroundFillOpacity",2),dl([ey],ik.prototype,"repeat",2),dl([ey],ik.prototype,"fit",2);var il=class extends ez{constructor(a=!0){super(),this.deprecated=a,this.item=new ib,this.series=new id,this.text=new ie}set(a){return this.deprecated&&aa.warnOnce("highlightStyle is deprecated, use highlight instead."),super.set(a)}};dl([ey],il.prototype,"item",2),dl([ey],il.prototype,"series",2),dl([ey],il.prototype,"text",2);var im=class extends ez{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new ic,this.highlightStyle=new il}handleUnknownProperties(a,b){"context"in b&&(this.context=b.context,a.delete("context"))}};function io(a,b){if(null==a||0===b.length)return[!1,!1];let c=a.valueOf(),d=b[0],e=b[b.length-1];if("string"==typeof d)return[c===d,c===e];let f=d.valueOf(),g=e.valueOf();return f>g&&([f,g]=[g,f]),[c===f,c===g]}function ip(a,b,c,d,e,f){let[g,h]=io(b,f),[i,j]=io(a,e);return{xKey:c,yKey:d,xValue:a,yValue:b,first:i,last:j,min:g,max:h}}function iq(a,b,[c,d],e){let f=cO(0,b-1,d=>{let f=e(1===a?d:b-d)?.[1]??NaN;return!Number.isFinite(f)||f>=c})??0,g=cN(0,b-1,c=>{let f=e(1===a?c:b-c)?.[0]??NaN;return!Number.isFinite(f)||f<=d})??b-1;return -1===a&&([f,g]=[b-g,b-f]),[f=Math.max(f,0),g=Math.min(g+1,b)]}function ir(a,b,c){if(c){let{x:a,y:b,width:d,height:e}=c;return{canvasX:a+d/2,canvasY:b+e/2}}let d=b.yBar?.upperPoint??b.midPoint??a.datumMidPoint?.(b);if(d){let{x:b,y:c}=ff.toCanvasPoint(a.contentGroup,d.x,d.y);return{canvasX:Math.round(b),canvasY:Math.round(c)}}}function is(a,b,c,d,e){let f=-1,g=0,h=0,i=!1;for(;g<d&&f<=b-a;){f+=1;let d=c+h;if(i||(h*=-1),h>=0&&(h+=1),i&&h<0&&(h-=1),d<a||d>b){i=!0;continue}e(d)&&(g+=1)}return g}function it(a){let b={};for(let c of h9)b[c]=a(void 0,!1,c);return b}function iu(a,...b){let c={};for(let d of b??["default"])for(let b of h9)(c[d]??(c[d]={}))[b]=a(void 0,!1,b,d);return c}dl([ey],im.prototype,"id",2),dl([ey],im.prototype,"visible",2),dl([ey],im.prototype,"focusPriority",2),dl([ey],im.prototype,"showInLegend",2),dl([ey],im.prototype,"cursor",2),dl([ey],im.prototype,"nodeClickRange",2),dl([ey],im.prototype,"highlight",2),dl([ey],im.prototype,"highlightStyle",2);var iv=class{constructor(a,b,c,d){this.domManager=c,this.tooltip=d,this.stateTracker=new gP,this.suppressState=new gP(!1),this.appliedState=null,this.cleanup=new cQ,this.cleanup.register(d.setup(b,c),a.on("dom:hidden",()=>this.tooltip.hide()))}destroy(){this.cleanup.flush()}updateTooltip(a,b,c,d){c??(c=this.stateTracker.get(a)?.content),this.stateTracker.set(a,{meta:b,content:c,pagination:d}),this.applyStates()}removeTooltip(a){this.stateTracker.delete(a),this.applyStates()}suppressTooltip(a){this.suppressState.set(a,!0)}unsuppressTooltip(a){this.suppressState.delete(a)}applyStates(){let a=this.stateTracker.stateId(),b=a?this.stateTracker.get(a):void 0;if(this.suppressState.stateValue()||b?.meta==null||b?.content==null){this.appliedState=null,this.tooltip.hide();return}let c=this.domManager.getBoundingClientRect(),d="extended"===this.tooltip.bounds?this.domManager.getOverlayClientRect():c;if(dK(this.appliedState?.content,b?.content)&&dK(this.appliedState?.pagination,b?.pagination)){let a=this.tooltip.isVisible();this.tooltip.show(d,c,b?.meta,null,void 0,a)}else this.tooltip.show(d,c,b?.meta,b?.content,b?.pagination);this.appliedState=b}static makeTooltipMeta(a,b,c,d){let{canvasX:e,canvasY:f}=a,g=b.properties.tooltip,{placement:h,anchorTo:i,xOffset:j,yOffset:k}=g.position,l=ir(b,c,d);return{canvasX:e,canvasY:f,nodeCanvasX:l?.canvasX??e,nodeCanvasY:l?.canvasY??f,enableInteraction:g.interaction?.enabled??!1,showArrow:g.showArrow,position:{placement:h,anchorTo:i,xOffset:j,yOffset:k}}}};function iw(a,b){let{device:c,offsetX:d,offsetY:e,clientX:f,clientY:g,currentX:h,currentY:i,sourceEvent:j}=b;return{type:a,device:c,offsetX:d,offsetY:e,clientX:f,clientY:g,currentX:h,currentY:i,sourceEvent:j}}var ix=class{constructor(a){this.cleanup=new cQ,this.events=new ay,this.isDragging=!1,this.touch={distanceTravelledX:0,distanceTravelledY:0,clientX:0,clientY:0},this.cleanup.register(a.addListener("touchstart",this.onTouchStart.bind(this)),a.addListener("touchmove",this.onTouchMove.bind(this)),a.addListener("touchend",this.onTouchEnd.bind(this)),a.addListener("mousemove",this.onMouseMove.bind(this)),a.addListener("dblclick",this.onDblClick.bind(this)),a.addListener("drag-start",this.onDragStart.bind(this)),a.addListener("drag-move",this.onDragMove.bind(this)),a.addListener("drag-end",this.onDragEnd.bind(this)))}destroy(){this.cleanup.flush()}onTouchStart(a){let{clientX:b,clientY:c}=a.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX=0,this.touch.distanceTravelledY=0,this.touch.clientX=b,this.touch.clientY=c}onTouchMove(a){let{clientX:b,clientY:c}=a.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX+=Math.abs(this.touch.clientX-b),this.touch.distanceTravelledY+=Math.abs(this.touch.clientY-c),this.touch.clientX=b,this.touch.clientY=c}onTouchEnd(a){a.sourceEvent.preventDefault()}onMouseMove(a){this.events.emit("mousemove",a)}onDblClick(a){this.events.emit("dblclick",a)}onDragStart(a){this.dragStartEvent=a}onDragMove(a){var b,c;null!=this.dragStartEvent&&(b=a.originDeltaX,b*b+(c=a.originDeltaY)*c>=9)&&(this.events.emit("drag-start",this.dragStartEvent),this.events.emit("drag-move",{...this.dragStartEvent,type:"drag-move"}),this.dragStartEvent=void 0,this.isDragging=!0),this.isDragging&&this.events.emit("drag-move",a)}onDragEnd(a){if(this.isDragging){this.events.emit("drag-end",a),this.isDragging=!1;return}if("mouse"===a.device){let b=iw("click",a);this.events.emit("click",b)}else if("touchend"===a.sourceEvent.type){var b,c;if(b=this.touch.distanceTravelledX,b*b+(c=this.touch.distanceTravelledY)*c>=9)return;let d=iw("click",a);this.events.emit("click",d);let e=Date.now();if(void 0!==this.lastClick&&e-this.lastClick.time<=505&&function(a,b){let c=a.clientX-b.clientX,d=a.clientY-b.clientY;return c*c+d*d<900}(this.lastClick,a)){let b=iw("dblclick",a);this.events.emit("dblclick",b),this.lastClick=void 0}else this.lastClick={time:e,clientX:a.clientX,clientY:a.clientY}}}},iy=class extends g2{constructor(a){super(a)}addChildToDOM(){}removeChildFromDOM(){}},iz=class{constructor(a,b){this.seriesWidget=new iy(a.getParent("series-area")),this.chartWidget=new iy(a.getParent("canvas-proxy")),this.containerWidget=new iy(a.getParent("canvas-container")),this.containerWidget.addChild(this.chartWidget),this.chartWidget.addChild(this.seriesWidget),b.withDragInterpretation&&(this.seriesDragInterpreter=new ix(this.seriesWidget))}destroy(){this.seriesDragInterpreter?.destroy(),this.seriesWidget.destroy(),this.chartWidget.destroy(),this.containerWidget.destroy()}};function iA(a,b){let[c,d]=iB(b);return aA(c,a,d)}function iB(a){if(0===a.length)return[];let b=[1/0,-1/0];for(let c of a)c<b[0]&&(b[0]=c),c>b[1]&&(b[1]=c);return b}function iC(a){let[b,c]=iB(a);return c-b}function iD(a){return(a|=0)<=0?1:1===a?2:1<<32-Math.clz32(a-1)}function iE(a){return(a|=0)<=0?0:1===a?1:1<<31-Math.clz32(a)}var iF=class a extends ep{constructor(b=[],c=[]){super(),this.domain=b,this.range=c,this.defaultTickCount=a.defaultTickCount,this.defaultClamp=!1}static is(b){return b instanceof a}normalizeDomains(...a){return iH(...a)}calcBandwidth(a=1,b=1){let{domain:c}=this,d=this.getPixelRange();if(0===c.length)return d;let e=Math.abs(c[1].valueOf()-c[0].valueOf())/a+1;return 0!==b&&(e=Math.min(e,Math.floor(d))),d/Math.max(1,e)}convert(a,b){let{domain:c}=this;if(!c||c.length<2||null==a)return NaN;let{range:d}=this,e=b?.clamp??this.defaultClamp,f=c[0].valueOf(),g=c[1].valueOf(),h=a.valueOf();if(this.transform&&(f=this.transform(f),g=this.transform(g),h=this.transform(h)),e){let[a,b]=iB([f,g]);if(h<a)return d[0];if(h>b)return d[1]}if(f===g)return(d[0]+d[1])/2;if(h===f)return d[0];if(h===g)return d[1];let i=d[0];return i+(h-f)/(g-f)*(d[1]-i)}invert(a,b){let c,{domain:d}=this;if(d.length<2)return;let e=d[0].valueOf(),f=d[1].valueOf();this.transform&&(e=this.transform(e),f=this.transform(f));let{range:g}=this,[h,i]=g;return c=h===i?this.toDomain((e+f)/2):this.toDomain(e+(a-h)/(i-h)*(f-e)),this.transformInvert?this.transformInvert(c):c}getPixelRange(){let[a,b]=this.range;return Math.abs(b-a)}};iF.defaultTickCount=5;var iG=iF;function iH(...a){let b,c,d=1/0,e=-1/0;for(let f of a)for(let a of f){let f=a.valueOf();f<d&&(d=f,b=a),f>e&&(e=f,c=a)}return null!=b&&null!=c?{domain:[b,c],animatable:!0}:{domain:[],animatable:!1}}var iI=class a extends ep{constructor(){super(...arguments),this.invalid=!0,this.range=[0,1],this.round=!1,this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(b){return b instanceof a}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(a){a=aA(0,a,1),this._paddingInner=a,this._paddingOuter=a}get padding(){return this._paddingInner}set paddingInner(a){this.invalid=!0,this._paddingInner=aA(0,a,1)}get paddingInner(){return this._paddingInner}set paddingOuter(a){this.invalid=!0,this._paddingOuter=aA(0,a,1)}get paddingOuter(){return this._paddingOuter}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&aa.warnOnce("Expected update to not invalidate scale"))}convert(a,b){this.refresh();let c=this.findIndex(a,b?.alignment);return null==c||c<0||c>=this.bands.length?NaN:this.ordinalRange(c)}invertNearestIndex(a){this.refresh();let b=this.bands.length;if(0===b)return -1;let c=0,d=b-1,e=1/0,f=0;for(;c<=d;){let b=(d+c)/2|0,g=this.ordinalRange(b),h=Math.abs(g-a);if(0===h)return b;h<e&&(e=h,f=b),g<a?c=b+1:d=b-1}return f}update(){let a,[b,c]=this.range,{_paddingInner:d}=this,{_paddingOuter:e,bands:f}=this,g=f.length;if(0===g)return;let h=c-b;1===g?(d=0,a=h*(1-2*e)):a=h/Math.max(1,g-d+2*e);let i=this.round&&Math.floor(a)>0,j=i?Math.floor(a):a,k=b+(h-j*(g-d))/2,l=j*(1-d);i&&(k=Math.round(k),l=Math.round(l)),this._step=j,this._inset=k,this._bandwidth=l,this._rawBandwidth=a*(1-d)}ordinalRange(a){let{_inset:b,_step:c,range:d}=this;return aA(Math.min(d[0],d[1]),b+c*a,Math.max(d[0],d[1]))}};dl([eq],iI.prototype,"range",2),dl([eq],iI.prototype,"round",2);var iJ=iI,iK=class a extends iJ{static is(b){return b instanceof a}toDomain(a){return new Date(a)}get reversed(){let{domain:a}=this;return a.length>0&&a[0].valueOf()>a[a.length-1].valueOf()}convert(a,b){let c;this.refresh(),a instanceof Date||(a=new Date(a));let{domain:d,bands:e,reversed:f}=this;if(d.length<=0)return NaN;let g=this.ordinalRange(0),h=this.ordinalRange(e.length-1);if(0===e.length)return g;if(b?.clamp===!0){let{range:b}=this;if(a<e[0])return b[0];if(a>e[e.length-1])return b[1]}if(2!==(b?.alignment??0)){let c=super.convert(a,b);return f?h-(c-g):c}let i=a.valueOf(),j=this.findIndex(a)??0;f?(j=Math.min(Math.max(j,1),e.length-1),c=-1):(j=Math.min(Math.max(j,0),e.length-2),c=1);let k=e[j].valueOf(),l=e[j+c].valueOf(),m=this.ordinalRange(j),n=(i-k)/(l-k)*(this.ordinalRange(j+c)-m)+m;return f?h-(n-g):n}invert(a,b=!1){let c;this.refresh();let{domain:d,bands:e}=this;if(d.length<=0)return;let f=d[0].valueOf()>d[d.length-1].valueOf();return c=b?this.invertNearestIndex(a-this.bandwidth/2):cO(0,e.length-1,b=>this.ordinalRange(b)>=a)??e.length-1,e[f?e.length-1-c:c]}findIndex(a,b=0){let{bands:c}=this,d=a.valueOf();return 1===b?cO(0,c.length-1,a=>c[a].valueOf()>=d):cN(0,c.length-1,a=>c[a].valueOf()<=d)}},iL={bottomCenter:function(a){return{x:(a.x1+a.x2)/2,y:Math.max(a.y1,a.y2)}},center:function(a){return{x:(a.x1+a.x2)/2,y:(a.y1+a.y2)/2}},clone:function(a){return{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}},collides:function(a,b){let c=iM(a),d=iM(b);return c.x1<=d.x2&&c.x2>=d.x1&&c.y1<=d.y2&&c.y2>=d.y1},end:function(a){return{x:a.x2,y:a.y2}},from:function(a,b,c,d){if("number"==typeof a)return{x1:a,y1:b,x2:c,y2:d};if("width"in a)return iM({x1:a.x,y1:a.y,x2:a.x+a.width,y2:a.y+a.height});throw Error(`Values can not be converted into a vector4: [${JSON.stringify(a)}] [${b}] [${c}] [${d}]`)},height:function(a){return Math.abs(a.y2-a.y1)},round:function(a){return{x1:Math.round(a.x1),y1:Math.round(a.y1),x2:Math.round(a.x2),y2:Math.round(a.y2)}},start:function(a){return{x:a.x1,y:a.y1}},topCenter:function(a){return{x:(a.x1+a.x2)/2,y:Math.min(a.y1,a.y2)}},origin:function(){return{x1:0,y1:0,x2:0,y2:0}},width:function(a){return Math.abs(a.x2-a.x1)}};function iM(a){return{x1:Math.min(a.x1,a.x2),x2:Math.max(a.x1,a.x2),y1:Math.min(a.y1,a.y2),y2:Math.max(a.y1,a.y2)}}function iN(a,b,c){var d,e;return[(d=c.min,a+(b-a)/(c.max-d)*(0-d)),(e=c.min,a+(b-a)/(c.max-e)*(1-e))]}function iO(a,b,c,d,e,f){if(c<=e&&f<=d)return c;let g=e-c,h=f-d;return aA(a,c+(Math.abs(g)<Math.abs(h)?g:h),b)}function iP(a,b){let c=a?.valueOf(),d=b?.valueOf();return"number"!=typeof c||"number"!=typeof d?[void 0,void 0]:c<d?[0,1]:[1,0]}var iQ=class{constructor(){this.enabled=!1,this.padding=0,this.manuallyAdjusted=!1}},iR=a=>bt((b,{options:c})=>!(iG.is(a?.scale)||iK.is(a?.scale))||null==b||null==c.end||b<c.end,"to be less than end"),iS=class extends gx{constructor(a,b){super(),this.eventsHub=a,this.fireChartEvent=b,this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new gP(void 0,"initial"),this.axes=[],this.didLayoutAxes=!1,this.autoScaleYAxis=new iQ,this.lastRestoredState=void 0,this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0,this.boundFireOnceChartEvent=this.fireOnceChartEvent.bind(this),this.cleanup.register(a.on("layout:complete",()=>{this.didLayoutAxes=!0;let{pendingMemento:a}=this;a&&this.restoreMemento(a.version,a.mementoVersion,a.memento),this.autoScaleYZoom("zoom-manager")}))}createMemento(){return this.getMementoRanges()}guardMemento(a,b){if(null==a)return!0;if(!aQ(a))return!1;let c=this.getPrimaryAxis("x"),d=this.getPrimaryAxis("y"),{invalid:e}=bs(a,{rangeX:{start:iR(c),end:bG},rangeY:{start:iR(d),end:bG},ratioX:{start:bG,end:bG},ratioY:{start:bG,end:bG},autoScaledAxes:bG});return!(e.length>0)||(b.push(...e.map(String)),!1)}restoreMemento(a,b,c){let{independentAxes:d}=this;if(!this.axes||!this.didLayoutAxes){this.pendingMemento={version:a,mementoVersion:b,memento:c};return}this.pendingMemento=void 0;let e=this.getDefinedZoom();if(c?.rangeX?e.x=this.rangeToRatio(c.rangeX,"x")??{min:0,max:1}:c?.ratioX?e.x={min:c.ratioX.start??0,max:c.ratioX.end??1}:e.x={min:0,max:1},!this.navigatorModule||this.zoomModule){let a=c?.autoScaledAxes?.includes("y");if(c?.rangeY)a??(a=!1),e.y=this.rangeToRatio(c.rangeY,"y")??{min:0,max:1};else if(c?.ratioY)a??(a=!1),e.y={min:c.ratioY.start??0,max:c.ratioY.end??1};else{a??(a=!0);let b=a?this.getAutoScaleYZoom(e.x):void 0;e.y=b??{min:0,max:1}}e.autoScaleYAxis=a}if(this.lastRestoredState=e,!0!==d)return void this.updateZoom("zoom-manager",e);for(let a of[this.getPrimaryAxis("x"),this.getPrimaryAxis("y")])a&&this.updateAxisZoom("zoom-manager",a.id,e[a.direction])}updateAxes(a){let{axes:b,axisZoomManagers:c}=this,d=new Map(c);for(let e of(c.clear(),b.length=0,a))"string"==typeof e?c.set(e,d.get(e)??new iT(e)):(b.push(e),c.set(e.id,d.get(e.id)??new iT(e)));this.state.size>0&&b.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}setIndependentAxes(a=!0){this.independentAxes=a}setAutoScaleYAxis(a,b){this.autoScaleYAxis.enabled=a,this.autoScaleYAxis.padding=b,a&&this.autoScaleYZoom("toggle-auto-scale")}setNavigatorEnabled(a=!0){this.navigatorModule=a}setZoomModuleEnabled(a=!0){this.zoomModule=a}isNavigatorEnabled(){return this.navigatorModule}isZoomEnabled(){return this.zoomModule}updateZoom(a,b){if(b?.x&&(b.x.min<0||b.x.max>1)&&(aa.warnOnce(`Attempted to update x-axis zoom to an invalid ratio of [{ min: ${b.x.min}, max: ${b.x.max} }], expecting a ratio of 0 to 1, ignoring.`),b.x=void 0),b?.y&&(b.y.min<0||b.y.max>1)&&(aa.warnOnce(`Attempted to update y-axis zoom to an invalid ratio of [{ min: ${b.y.min}, max: ${b.y.max} }], expecting a ratio of 0 to 1, ignoring.`),b.y=void 0),0===this.axisZoomManagers.size){let c=this.state.stateId();("initial"===c||c===a)&&this.state.set(a,b);return}this.state.set(a,b);let c=b?.autoScaleYAxis;null!=c&&(this.autoScaleYAxis.manuallyAdjusted=!c),this.axisZoomManagers.forEach(c=>{c.updateZoom(a,b?.[c.direction])}),this.applyChanges(a)}updateAxisZoom(a,b,c){this.axisZoomManagers.get(b)?.updateZoom(a,c),this.applyChanges(a)}resetZoom(a){this.autoScaleYAxis.manuallyAdjusted=!1;let b=this.getRestoredZoom();this.updateZoom(a,{x:{min:b?.x?.min??0,max:b?.x?.max??1},y:{min:b?.y?.min??0,max:b?.y?.max??1},autoScaleYAxis:b?.autoScaleYAxis??!0})}resetAxisZoom(a,b){let c=this.axisZoomManagers.get(b),d=c?.direction;if(null==d)return;let e=this.getRestoredZoom();if("y"===d){let a=e?.autoScaleYAxis??!0;this.autoScaleYAxis.manuallyAdjusted=!a}for(let b of this.axes)b.direction===d&&this.updateAxisZoom(a,b.id,e?.[d]??{min:0,max:1})}setAxisManuallyAdjusted(a,b){"y"===this.axisZoomManagers.get(b)?.direction&&(this.autoScaleYAxis.manuallyAdjusted=!0)}updatePrimaryAxisZoom(a,b,c){let d=this.getPrimaryAxis(b);d&&this.updateAxisZoom(a,d.id,c)}panToBBox(a,b,c){if(!this.isZoomEnabled()&&!this.isNavigatorEnabled())return!1;let d=this.getZoom();if(void 0===d||!d.x&&!d.y)return!1;if(!(b.width>0&&b.height>0&&Math.abs(c.width)<=Math.abs(b.width)&&Math.abs(c.height)<=Math.abs(b.height)))return aa.warnOnce("cannot pan to target BBox - chart too small?"),!1;let e=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;let{x:r={min:0,max:1},y:s={min:0,max:1}}=b,t=iL.from(c),u=iL.from(a),v=function(a,b,c){let[d,e]=iN(a.x1,a.x2,b),[f,g]=iN(a.y1,a.y2,c);return{x1:d,x2:e,y1:f,y2:g}}(u,r,s),w=iO(v.x1,v.x2,u.x1,u.x2,t.x1,t.x2),x=iO(v.y1,v.y2,u.y1,u.y2,t.y1,t.y2),y={x:{min:(d=u.x1,e=r.min,f=u.x2,e+(w-d)/(f-d)*(r.max-e)),max:(g=u.x1,h=r.min,i=u.x2,j=r.max,h+(w+a.width-g)/(i-g)*(j-h))},y:{min:(k=u.y1,l=s.min,m=u.y2,l+(x-k)/(m-k)*(s.max-l)),max:(n=u.y1,o=s.min,p=u.y2,q=s.max,o+(x+a.height-n)/(p-n)*(q-o))}},z=y.x.max-y.x.min,A=y.y.max-y.y.min;return y.x.min=aA(0,y.x.min,1-z),y.x.max=y.x.min+z,y.y.min=aA(0,y.y.min,1-A),y.y.max=y.y.min+A,y}(b,d,c);return this.independentAxes?(this.updatePrimaryAxisZoom(a,"x",e.x),this.updatePrimaryAxisZoom(a,"y",e.y)):this.updateZoom(a,e),!0}fireZoomPanStartEvent(a){this.eventsHub.emit("zoom:pan-start",{callerId:a})}extendToEnd(a,b,c){return this.extendWith(a,b,a=>Number(a)-c)}extendWith(a,b,c){let d=this.getPrimaryAxis(b);if(!d)return;let e=this.getDomainExtents(d);if(!e)return;let[,f]=e,g=c(f),h=this.rangeToRatio({start:g},b);h&&this.updateZoom(a,{[b]:h})}updateWith(a,b,c){let d=this.getPrimaryAxis(b);if(!d)return;let e=this.getDomainExtents(d);if(!e)return;let[f,g]=e;[f,g]=c(f,g);let h=this.rangeToRatio({start:f,end:g},b);h&&this.updateZoom(a,{[b]:h})}getZoom(){let a,b;if(this.axisZoomManagers.forEach(c=>{"x"===c.direction?a??(a=c.getZoom()):"y"===c.direction&&(b??(b=c.getZoom()))}),a||b)return{x:a,y:b}}getAxisZoom(a){return this.axisZoomManagers.get(a)?.getZoom()??{min:0,max:1}}getAxisZooms(){let a={};for(let[b,c]of this.axisZoomManagers.entries())a[b]={direction:c.direction,zoom:c.getZoom()};return a}getRestoredZoom(){return this.lastRestoredState}getPrimaryAxisId(a){return this.getPrimaryAxis(a)?.id}getBoundSeries(){let a,b=this.getPrimaryAxis("x"),c=this.getPrimaryAxis("y");if(this.independentAxes){let d=new Set(b?.boundSeries??[]),e=new Set(c?.boundSeries??[]);for(let b of(a=new Set,d))e.has(b)&&a.add(b)}else a=new Set([...b?.boundSeries??[],...c?.boundSeries??[]]);return a}constrainZoomToItemCount(a,b){let c,{autoScaleYAxis:d}=this,e=d.enabled&&!d.manuallyAdjusted,f=[a.x.min,a.x.max],g=e?void 0:[a.y.min,a.y.max];for(let a of this.getBoundSeries()){let c=a.getZoomRangeFittingItems(f,g,b);if(null==c)return;f=c.x,g=c.y}let h={min:f[0],max:f[1]};if(c??(c=this.getAutoScaleYZoom(h)),g&&(c={min:g[0],max:g[1]}),null!=c)return{x:h,y:c}}isVisibleItemsCountAtLeast(a,b){let{autoScaleYAxis:c}=this,d=this.getBoundSeries(),e=[a.x.min,a.x.max],f=c.enabled&&!c.manuallyAdjusted?void 0:[a.y.min,a.y.max],g=0;for(let a of d){let c=b-(g??0);if((g+=a.getVisibleItems(e,f,c))>=b)return!0}return 0===d.size}getMementoRanges(){let a,b=this.getDefinedZoom();return this.autoScaleYAxis.enabled&&(a=this.autoScaleYAxis.manuallyAdjusted?[]:["y"]),{rangeX:this.getRangeDirection(b.x,"x"),rangeY:this.getRangeDirection(b.y,"y"),ratioX:{start:b.x.min,end:b.x.max},ratioY:{start:b.y.min,end:b.y.max},autoScaledAxes:a}}getAutoScaleYZoom(a){let b;if(!this.isZoomEnabled())return;let{independentAxes:c,autoScaleYAxis:d}=this;if(!d.enabled||d.manuallyAdjusted)return;let{padding:e}=d;return(b=c?this.primaryAxisZoom("y",a,{padding:e}):this.combinedAxisZoom("y",a,{padding:e}),0===a.min&&1===a.max)?null!=b?{min:0,max:1}:void 0:b}autoScaleYZoom(a,b=!0){let{independentAxes:c}=this,d=this.getZoom();if(d?.x==null)return;let e=this.getAutoScaleYZoom(d.x);if(!(null==e||dK(d.y,e))){if(c){let a=this.getPrimaryAxis("y"),b=null==a?void 0:this.axisZoomManagers.get(a.id);b?.updateZoom("zoom-manager",e)}else for(let a of this.axisZoomManagers.values())"y"===a.direction&&a.updateZoom("zoom-manager",e);b&&this.applyChanges(a)}}applyChanges(a){if(this.autoScaleYZoom(a,!1),!Array.from(this.axisZoomManagers.values(),a=>a.applyChanges()).includes(!0))return;let b={};for(let[a,c]of this.axisZoomManagers.entries())b[a]=c.getZoom();this.eventsHub.emit("zoom:change",{...this.getZoom(),axes:b,callerId:a}),this.eventsHub.on("layout:complete",this.boundFireOnceChartEvent)}fireOnceChartEvent(){this.fireChartEvent({type:"zoom",...this.getMementoRanges()}),this.eventsHub.off("layout:complete",this.boundFireOnceChartEvent)}getRangeDirection(a,b){let c,d,e=this.getPrimaryAxis(b);if(!e||!iG.is(e.scale)&&!iK.is(e.scale))return;let f=this.getDomainPixelExtents(e);if(!f)return;let[g,h]=f;return g<=h?(c=e.scale.invert(0),d=e.scale.invert(g+(h-g)*a.max)):(c=e.scale.invert(g-(g-h)*a.min),d=e.scale.invert(0)),{start:c,end:d}}rangeToRatio(a,b){let c=this.getPrimaryAxis(b);if(!c)return;let d=this.getDomainPixelExtents(c);if(!d)return;let[e,f]=d,{scale:g}=c,{start:h,end:i}=a,[j=0,k=1]=iP(h,i),l=null==h?e:g.convert(h,{alignment:j}),m=null==i?f:g.convert(i,{alignment:k})+(g.bandwidth??0);if(!aW(l)||!aW(m))return;let[n,o]=[Math.min(e,f),Math.max(e,f)];if(l<n||l>o)return void aa.warnOnce(`Invalid range start [${h}], expecting a value between [${g.invert(e)}] and [${g.invert(f)}], ignoring.`);if(m<n||m>o)return void aa.warnOnce(`Invalid range end [${i}], expecting a value between [${g.invert(e)}] and [${g.invert(f)}], ignoring.`);l=Math.min(o,Math.max(n,l)),m=Math.min(o,Math.max(n,m));let p=f-e;if(0===p)return;let q=Math.abs((l-e)/p),r=Math.abs((m-e)/p);if(!(q>=r))return{min:q,max:r}}getPrimaryAxis(a){return this.axes?.find(b=>b.direction===a)}getDomainExtents(a){let{domain:b}=a.scale,c=b.at(0),d=b.at(-1);if(null!=c&&null!=d)return[c,d]}getDomainPixelExtents(a){let[b,c]=a.scale.range;if(aW(b)&&aW(c))return[b,c]}getDefinedZoom(){let a=this.getZoom();return{x:{min:a?.x?.min??0,max:a?.x?.max??1},y:{min:a?.y?.min??0,max:a?.y?.max??1}}}zoomBounds(a,b,c,d){let e=a.scale,f=e.range;e.range=[0,1];let g=b.scale,h=g.range;g.range=[0,1];let i=1,j=!1,k=0,l=!1;for(let a of b.boundSeries){if(!a.visible)continue;let{connectsToYAxis:b}=a;for(let d of a.getRange("y",[c.min,c.max])){let a=g.convert(d);Number.isFinite(a)&&(a<i&&(i=a,j=!b||d<0),a>k&&(k=a,l=!b||d>0))}}if(aW(b.min)&&(i=0),aW(b.max)&&(k=1),e.range=f,g.range=h,i>=k)return;let m=Math.min((k-i)*(1+((j?d:0)+(l?d:0))),1);if(!(m<=0)){if(j&&l){let a=(k+i)/2;i=a-m/2,k=a+m/2}else!j&&l?k=i+m:j&&!l&&(i=k-m);return i<0?(k+=-i,i=0):k>1&&(i-=k-1,k=1),{min:i,max:k}}}primaryAxisZoom(a,b,{padding:c=0}={}){let d=this.getPrimaryAxis("x"===a?"y":"x"),e=this.getPrimaryAxis(a);if(null!=d&&null!=e)return this.zoomBounds(d,e,b,c)}combinedAxisZoom(a,b,{padding:c=0}={}){let d="x"===a?"y":"x",e=new Map;for(let a of this.axes)if(a.direction===d)for(let b of a.boundSeries)e.set(b,a);let f=1,g=0;for(let d of this.axes)if(d.direction===a)for(let a of d.boundSeries){let h=e.get(a);if(null==h)continue;let i=this.zoomBounds(h,d,b,c);if(null==i)return;f=Math.min(f,i.min),g=Math.max(g,i.max)}if(f<1e-6&&(f=0),g>.999999&&(g=1),!(f>g))return{min:f,max:g}}},iT=class{constructor(a){let b,c;"string"==typeof a?(this.direction=a,b=0,c=1):(this.direction=a.direction,[b=0,c=1]=a.visibleRange),this.state=new gP({min:b,max:c}),this.currentZoom=this.state.stateValue()}updateZoom(a,b){this.state.set(a,b)}getZoom(){return fy(this.state.stateValue())}hasChanges(){let a=this.currentZoom,b=this.state.stateValue();return a.min!==b.min||a.max!==b.max}applyChanges(){let a=this.hasChanges();return this.currentZoom=this.state.stateValue(),a}},iU=(a=>(a[a.Caption=0]="Caption",a[a.Legend=1]="Legend",a[a.ToolbarLeft=2]="ToolbarLeft",a[a.ToolbarBottom=3]="ToolbarBottom",a[a.Navigator=4]="Navigator",a[a.Overlay=5]="Overlay",a))(iU||{}),iV=class{constructor(a){this.eventsHub=a,this.elements=new Map}registerElement(a,b){return this.elements.has(a)?this.elements.get(a).add(b):this.elements.set(a,new Set([b])),()=>this.elements.get(a)?.delete(b)}createContext(a,b){let c=new iW(a,b);for(let a of Object.values(iU))"number"==typeof a&&this.elements.get(a)?.forEach(a=>a(c));return c}emitLayoutComplete(a,b){let{width:c,height:d}=a;this.eventsHub.emit("layout:complete",{axes:b.axes??[],chart:{width:c,height:d},clipSeries:b.clipSeries??!1,series:b.series})}},iW=class{constructor(a,b){this.width=a,this.height=b,this.layoutBox=new dt(0,0,a,b)}};function iX(a){return null!=a&&"object"==typeof a.point&&"object"==typeof a.label}var iY={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}},iZ=class{constructor(){this.labelData=new Map}updateLabels(a,b,c=dt.zero){let d={x:-b.left,y:-b.top,width:c.width+b.left+b.right,height:c.height+b.top+b.bottom},e=new Set(a.map(a=>a.id));for(let a of this.labelData.keys())e.has(a)||this.labelData.delete(a);for(let b of a){let a=b.getLabelData();a.every(iX)&&this.labelData.set(b.id,a)}let f=function(a,b,c=5){let d=new Map,e=[],f=new Map(Array.from(a.entries(),([a,b])=>[a,b.toSorted((a,b)=>b.point.size-a.point.size)])),g=[...f.values()].flat();for(let[a,h]of f.entries()){let f=[];if(h[0]?.label){for(let a=0,d=h.length;a<d;a++){let d=h[a],{point:i,label:j,anchor:k}=d,{text:l,width:m,height:n}=j,o=i.size/2,p=0,q=0;if(o>0&&null!=d.placement){let a=iY[d.placement];p=(m/2+o+c)*a.x,q=(n/2+o+c)*a.y}let r=i.x-m/2+p,s=i.y-n/2+q;if(k&&(r-=(k.x-.5)*i.size,s-=(k.y-.5)*i.size),cL(b,r,s,m,n)&&!g.some(a=>(function({point:a,anchor:b},c,d,e,f){if(0===a.size)return!1;let g=a.x,h=a.y;null!=b&&(g-=(b.x-.5)*a.size,h-=(b.y-.5)*a.size);let i=g;g<c?i=c:g>c+e&&(i=c+e);let j=h;return h<d?j=d:h>d+f&&(j=d+f),Math.sqrt((g-i)**2+(h-j)**2)<=a.size/2})(a,r,s,m,n))&&!e.some(a=>cK(a,r,s,m,n))){let b={index:a,text:l,x:r,y:s,width:m,height:n,datum:d};f.push(b),e.push(b)}}d.set(a,f)}}return d}(this.labelData,d,5);for(let b of a)b.updatePlacedLabelData?.(f.get(b.id)??[])}},i$=class{constructor(a){this.eventsHub=a,this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter(({hideInLegend:a,isFixed:b})=>!a&&!b).map(({enabled:a,seriesId:b,itemId:c,legendItemName:d})=>({visible:a,seriesId:b,itemId:c,legendItemName:d}))}guardMemento(a){return null==a||aM(a)}restoreMemento(a,b,c){c?.forEach(a=>{let{seriesId:b,data:c}=this.getRestoredData(a)??{};b&&c&&this.updateData(b,c)}),this.update()}getRestoredData(a){let{seriesId:b,itemId:c,legendItemName:d,visible:e}=a;if(b){let a=(this.legendDataMap.get(b)??[]).map(a=>{let d=a.seriesId===b&&(!c||a.itemId===c);return d&&a.isFixed&&this.warnFixed(a.seriesId,a.itemId),!a.isFixed&&d?{...a,enabled:e}:a});return{seriesId:b,data:a}}if(null!=c||null!=d)for(let a of this.getData()){if(null!=c&&a.itemId!==c||null!=d&&a.legendItemName!==d)continue;if(a.isFixed)return void this.warnFixed(a.seriesId,c);let b=(this.legendDataMap.get(a.seriesId)??[]).map(a=>a.itemId===c||a.legendItemName===d?{...a,enabled:e}:a);return{seriesId:a.seriesId,data:b}}}warnFixed(a,b){aa.warnOnce(`The legend item with seriesId [${a}] and itemId [${b}] is not configurable, this series item cannot be toggled through the legend.`)}update(a){this.eventsHub.emit("legend:change",{legendData:a??this.getData()})}updateData(a,b=[]){this.legendDataMap.set(a,b)}clearData(){this.legendDataMap.clear()}toggleItem(a,b,c,d){if(d)return void this.getData().forEach(b=>{let c=(this.legendDataMap.get(b.seriesId)??[]).map(b=>b.legendItemName===d?{...b,enabled:a}:b);this.updateData(b.seriesId,c)});let e=this.getData(b),f=1===e.length,g=e.map(b=>null==c&&f||b.itemId===c?{...b,enabled:a}:b);this.updateData(b,g)}getData(a){return a?this.legendDataMap.get(a)??[]:[...this.legendDataMap].reduce((a,[b,c])=>a.concat(c),[])}getDatum({seriesId:a,itemId:b}={}){return this.getData(a).find(a=>a.itemId===b)}getSeriesEnabled(a){let b=this.getData(a);if(b.length>0)return b.some(a=>a.enabled)}getItemEnabled({seriesId:a,itemId:b}={}){return this.getDatum({seriesId:a,itemId:b})?.enabled??!0}},i_=class{updateCallback(a){this.resolvePartialCallback=a}resolvePartial(a,b,c){return this.resolvePartialCallback?.(a,b,c)}},i0=class{constructor(){this.groups=new Map}registerSeries({internalId:a,seriesGrouping:b,visible:c,type:d}){if(!b)return;let e=this.groups.get(d);null==e&&(e=new Map,this.groups.set(d,e)),e.set(a,{grouping:b,visible:c})}updateSeries({internalId:a,seriesGrouping:b,visible:c,type:d}){if(!b)return;let e=this.groups.get(d)?.get(a);e&&(e.grouping=b,e.visible=c)}deregisterSeries({internalId:a,type:b}){let c=this.groups.get(b);null!=c&&(c.delete(a),0===c.size&&this.groups.delete(b))}getVisiblePeerGroupIndex({type:a,seriesGrouping:b,visible:c}){if(!b)return{visibleGroupCount:+!!c,visibleSameStackCount:+!!c,index:0};let d=new Set,e=new Set,f=this.groups.get(a);for(let a of f?.values()??[])a.visible&&(d.add(a.grouping.groupIndex),a.grouping.groupIndex===b.groupIndex&&e.add(a.grouping.stackIndex));let g=Array.from(d);return g.sort((a,b)=>a-b),{visibleGroupCount:g.length,visibleSameStackCount:e.size,index:g.indexOf(b.groupIndex)}}},i1=class{constructor(a){this.updateCallback=a,this.events=new ay}addListener(a,b){return this.events.on(a,b)}destroy(){this.events.clear()}update(a=0,b){this.updateCallback(a,b)}dispatchUpdateComplete(a){this.events.emit("update-complete",{type:"update-complete",apiUpdate:a})}dispatchPreDomUpdate(){this.events.emit("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(){this.events.emit("pre-scene-render",{type:"pre-scene-render"})}dispatchProcessData({series:a}){this.events.emit("process-data",{type:"process-data",series:a})}},i2=class{constructor(a,b){this.eventsHub=new ay,this.callbackCache=new fo,this.highlightManager=new h7(this.eventsHub),this.formatManager=new hK,this.layoutManager=new iV(this.eventsHub),this.localeManager=new hh(this.eventsHub),this.seriesStateManager=new i0,this.stateManager=new gw,this.seriesLabelLayoutManager=new iZ,this.cleanup=new cQ,this.contextModules=[];let{scene:c,root:d,syncManager:e,container:f,fireEvent:g,updateCallback:h,updateMutex:i,styleContainer:j,chartType:k,domMode:l,withDragInterpretation:m}=b;this.chartService=a,this.syncManager=e,this.domManager=new gW(this.eventsHub,this.chartService,f,j,l),this.widgets=new iz(this.domManager,{withDragInterpretation:m});let n=this.domManager.addChild("canvas","scene-canvas",c?.canvas.element);for(let b of(this.scene=c??new hl({canvasElement:n}),this.scene.setRoot(d),this.cleanup.register(this.scene.on("scene-changed",()=>{this.updateService.update(7)})),this.axisManager=new ho(this.eventsHub,d),this.legendManager=new i$(this.eventsHub),this.annotationManager=new hm(this.eventsHub,a.annotationRoot,g),this.chartTypeOriginator=new gr(a),this.interactionManager=new h0,this.contextMenuRegistry=new h6(this.eventsHub),this.optionsGraphService=new i_,this.updateService=new i1(h),this.proxyInteractionService=new hd(this.eventsHub,this.localeManager,this.domManager),this.fontManager=new hr(this.domManager,this.updateService),this.historyManager=new gu(this.eventsHub),this.animationManager=new h2(this.interactionManager,i),this.dataService=new hq(this.eventsHub,a,this.animationManager),this.tooltipManager=new iv(this.eventsHub,this.localeManager,this.domManager,a.tooltip),this.zoomManager=new iS(this.eventsHub,g),dn.byType("context"))){if(!b.chartTypes.includes(k))continue;let a=b.moduleFactory(this);this.contextModules.push(a),this[b.contextKey]=a}}destroy(){this.animationManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.domManager.destroy(),this.fontManager.destroy(),this.proxyInteractionService.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.widgets.destroy(),this.contextModules.forEach(a=>a.destroy()),this.cleanup.flush()}},i3=class extends ez{constructor(){super(...arguments),this.range="tooltip"}};dl([ey],i3.prototype,"range",2);var i4=class a{constructor(){this.domain=new Set}static is(b){return b instanceof a}extend(a){this.domain.add(a)}getDomain(){return Array.from(this.domain)}},i5=class a{constructor(){this.domain=[1/0,-1/0]}static is(b){return b instanceof a}static extendDomain(a,b=[1/0,-1/0]){for(let c of a)"number"==typeof c&&(b[0]>c&&(b[0]=c),b[1]<c&&(b[1]=c));return b}extend(a){("number"==typeof a||a instanceof Date)&&(this.domain[0]>a&&(this.domain[0]=a),this.domain[1]<a&&(this.domain[1]=a))}getDomain(){return[...this.domain]}},i6=class{constructor(a){let b=a.reduce((a,b)=>Math.max(a,b.length),0),c=1<<32-Math.clz32(b);b===c/2&&(c>>>=1),this.maxLevelSize=c;let d=new Float64Array((2*c-1)*2).fill(NaN);for(let b of a)for(let a=0;a<b.length;a+=1){let e=Number(b[a]),f=c+a-1,g=(2*f|0)+0,h=(2*f|0)+1,i=d[g],j=d[h];(!Number.isFinite(i)||e<i)&&(d[g]=e),(!Number.isFinite(j)||e>j)&&(d[h]=e)}for(let a=c/2|0;a>=1;a=a/2|0){let b=a-1|0,c=b+a|0;for(let e=0;e<a;e+=1){let a=b+e,f=c+2*e,g=f+1,h=d[(2*f|0)+0],i=d[(2*g|0)+0];d[(2*a|0)+0]=!Number.isFinite(i)||h<i?h:i;let j=d[(2*f|0)+1],k=d[(2*g|0)+1];d[(2*a|0)+1]=!Number.isFinite(k)||j>k?j:k}}this.buffer=d}computeRangeInto(a,b,c,d,e,f,g){let h=e+f-1;if(h<b||e>=c)return g;if(e>=b&&h<c){let b=a[(2*d|0)+0],c=a[(2*d|0)+1];Number.isFinite(b)&&(g[0]=Math.min(g[0],b)),Number.isFinite(c)&&(g[1]=Math.max(g[1],c))}else f>1&&(d=2*d|0,f=f/2|0,this.computeRangeInto(a,b,c,d+1|0,e,f,g),this.computeRangeInto(a,b,c,d+2|0,e+f,f,g));return g}rangeBetween(a,b){if(a>b)return[NaN,NaN];let{maxLevelSize:c,buffer:d}=this,e=[1/0,-1/0];return this.computeRangeInto(d,a,b,0,0,c,e),e}get range(){let{buffer:a}=this;return[a[0],a[1]]}},i7=Symbol("key-sort-orders"),i8=Symbol("column-sort-orders"),i9=Symbol("domain-ranges");function ja(a){let b=a?.map(Number);return b?.every(Number.isFinite)?b:[]}function jb(a,b){return b?.get(a.id)??0}function jc(a){return"scopes"in a&&Array.isArray(a.scopes)}function jd(a,b){let c=[];for(let d=0;d<a;d+=1)c[d]=b;return c}function je(a,b){let c=[];for(let d of a){let a=d?.[b];if(null==a)return;c.push(a)}return c}function jf(a){let b,c=[],d=0,e=/((?:(?:^|\.)\s*\w+|\[\s*(?:'(?:[^']|(?<!\\)\\')*'|"(?:[^"]|(?<!\\)\\")*"|-?\d+)\s*\])\s*)/g;for(;b=e.exec(a);){if(b.index!==d)return;d=b.index+b[0].length;let a=b[1].trim();if(a.startsWith("."))c.push(a.slice(1).trim());else if(a.startsWith("[")){let b=a.slice(1,-1).trim();b.startsWith("'")?c.push(b.slice(1,-1).replace(/(?<!\\)\\'/g,"'")):b.startsWith('"')?c.push(b.slice(1,-1).replace(/(?<!\\)\\"/g,'"')):c.push(b)}else c.push(a)}if(d===a.length)return c}var jg=class{constructor(a,b="standalone",c=!1){this.opts=a,this.mode=b,this.suppressFieldDotNotation=c,this.debug=dw.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[],this.markScopeDatumInvalid=function(a,b,c,d){for(let e of a)d.has(e)||d.set(e,jd(b.length,!1)),d.get(e)[c]=!0};let d=!0;for(let b of a.props){if("key"===b.type&&!d)throw Error("AG Charts - internal config error: keys must come before values.");"value"===b.type&&d&&(d=!1)}let e=({matchGroupIds:a=[]})=>{for(let b of a)if(this.values.every(a=>a.groupId!==b))throw Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${b}).`)},f=new Set,g=new Set;for(let b of a.props){let a="key"===b.type?f:g;switch(jc(b)&&b.scopes?.forEach(b=>a.add(b)),b.type){case"key":this.keys.push({...b,index:this.keys.length,missing:new Map});break;case"value":if(null==b.property)throw Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(b)}`);this.values.push({...b,index:this.values.length,missing:new Map});break;case"aggregate":e(b),this.aggregates.push({...b,index:this.aggregates.length});break;case"group-value-processor":e(b),this.groupProcessors.push({...b,index:this.groupProcessors.length});break;case"property-value-processor":this.propertyProcessors.push({...b,index:this.propertyProcessors.length});break;case"reducer":this.reducers.push({...b,index:this.reducers.length});break;case"processor":this.processors.push({...b,index:this.processors.length})}}if(this.opts.groupByKeys||null!=this.opts.groupByFn){let a=new Set(g.values());if(f.forEach(b=>a.delete(b)),a.size>0)throw Error(`AG Charts - scopes missing key for grouping, illegal configuration: ${[...a.values()]}`)}}resolveProcessedDataDefById(a,b){let c=this.scopeCache.get(a.id)?.get(b);if(!c)throw Error(`AG Charts - didn't find property definition for [${b}, ${a.id}]`);return{index:c.index,def:c}}resolveProcessedDataIndexById(a,b){return this.resolveProcessedDataDefById(a,b).index}resolveKeysById(a,b,c){let d=this.resolveProcessedDataIndexById(a,b),e=c.keys[d];if(null==e)throw Error(`AG Charts - didn't find keys for [${b}, ${a.id}]`);return e.get(a.id)}hasColumnById(a,b){return this.scopeCache.get(a.id)?.get(b)!=null}resolveColumnById(a,b,c){let d=this.resolveProcessedDataIndexById(a,b),e=c.columns?.[d];if(null==e)throw Error(`AG Charts - didn't find column for [${b}, ${a.id}]`);return e}*forEachDatum(a,b,c){let d=b.columnScopes.findIndex(b=>b.has(a.id));for(let a of c.datumIndices[d]??[])yield b.columns[d][a]}*forEachGroupDatum(a,b){let c=b.columnScopes.findIndex(b=>b.has(a.id)),d={groupIndex:0,columnIndex:c},e=[];for(let a of b.groups){for(let b of(d.group=a,a.datumIndices[c]??e))d.datumIndex=b,yield d;d.groupIndex++}}getDomain(a,b,c,d){let e=this.getDomainsByType(c??"value",d);return e?.[this.resolveProcessedDataIndexById(a,b)]??[]}getDomainBetweenRange(a,b,[c,d],e){let f=b.map(b=>this.resolveProcessedDataIndexById(a,b)),g=f.join(":"),h=e[i9],i=h.get(g);return null==i&&(i=new i6(f.map(a=>e.columns[a])),h.set(g,i)),i.rangeBetween(c,d)}getSortOrder(a,b,c){let d=c.get(b);return null==d&&(d={sortOrder:function(a){if(a.length<=1)return 1;let b=0,c=a[0];for(let d=1;d<a.length;d++){let e=a[d];if(null==e)continue;if("number"!=typeof e.valueOf())return;let f=Math.sign(e-c);if(0!==f){if(0!==b&&b!==f)return;b=f}c=e}return 0===b?1:b}(a)},c.set(b,d)),d.sortOrder}getKeySortOrder(a,b,c){let d=this.resolveProcessedDataIndexById(a,b),e=c.keys[d]?.get(a.id);return e?this.getSortOrder(e,d,c[i7]):void 0}getColumnSortOrder(a,b,c){let d=this.resolveProcessedDataIndexById(a,b);return this.getSortOrder(c.columns[d],d,c[i8])}getDomainsByType(a,b){switch(a){case"key":return b.domain.keys;case"value":return b.domain.values;case"aggregate":return b.domain.aggValues;case"group-value-processor":return b.domain.groups;default:return null}}processData(a){let{opts:{groupByKeys:b,groupByFn:c},aggregates:d,groupProcessors:e,reducers:f,processors:g,propertyProcessors:h}=this,i=performance.now();if(b&&0===this.keys.length)return;let j=this.extractData(a);b?j=this.groupData(j):c&&(j=this.groupData(j,c(j))),e.length>0&&"grouped"===j.type&&this.postProcessGroups(j),d.length>0&&"ungrouped"===j.type?this.aggregateUngroupedData(j):d.length>0&&"grouped"===j.type&&this.aggregateGroupedData(j),h.length>0&&this.postProcessProperties(j),f.length>0&&this.reduceData(j),g.length>0&&this.postProcessData(j),this.warnDataMissingProperties(a);let k=performance.now();return j.time=k-i,this.debug.check()&&function(a){let b=(a,b)=>{b.length>0&&(aa.log(`DataModel.processData() - ${a}`),aa.table(b))};aa.log("DataModel.processData() - processedData",a),b("Key Domains",a.domain.keys),b("Group Domains",a.domain.groups??[]),b("Value Domains",a.domain.values),b("Aggregate Domains",a.domain.aggValues??[])}(j),this.processScopeCache(),j}warnDataMissingProperties(a){if(0!==a.size)for(let b of cA(this.keys,this.values))for(let[c,d]of b.missing){if(d<(a.get(c)?.length??1/0))continue;let e=null==c?"":` for ${c}`;aa.warnOnce(`the key '${b.property}' was not found in any data element${e}.`)}}processScopeCache(){for(let a of(this.scopeCache.clear(),cA(this.keys,this.values,this.aggregates)))if(a.idsMap)for(let[b,c]of a.idsMap)for(let d of c)if(this.scopeCache.has(b))if(this.scopeCache.get(b)?.has(d))throw Error("duplicate definition ids on the same scope are not allowed.");else this.scopeCache.get(b).set(d,a);else this.scopeCache.set(b,new Map([[d,a]]))}valueGroupIdxLookup({matchGroupIds:a}){let b=[];for(let[c,d]of this.values.entries())(!a||d.groupId&&a.includes(d.groupId))&&b.push(c);return b}valueIdxLookup(a,b){let c=null==a||0===a.length,d="string"==typeof b?b:b.id,e=this.values.reduce((b,e,f)=>((null==e.scopes||c&&!e.scopes.length||e.scopes.some(b=>a?.includes(b)))&&(e.property===d||e.id===d||(b=>{if(b.idsMap){for(let[c,e]of b.idsMap)if(a?.includes(c)&&e.has(d))return!0}return!1})(e))&&b.push(f),b),[]);if(0===e.length)throw Error(`AG Charts - configuration error, unknown property ${JSON.stringify(b)} in scope(s) ${JSON.stringify(a)}`);return e}extractData(a){let{dataDomain:b,processValue:c,allScopesHaveSameDefs:d}=this.initDataDomainProcessor(),{keys:e,values:f}=this,{invalidData:g,invalidKeys:h,invalidKeyCount:i,allKeyMappings:j}=this.extractKeys(e,a,c),{columns:k,columnScopes:l,partialValidDataCount:m,maxDataLength:n}=this.extractValues(g,f,a,h,c),o=a=>{let c=b.get(a),d=c.getDomain();return i5.is(c)&&d[0]>d[1]?[]:d};return{type:"ungrouped",input:{count:n},scopes:new Set(a.keys()),dataSources:a,aggregation:void 0,keys:[...j.values()],columns:k,columnScopes:l,invalidKeys:h,invalidKeyCount:i,invalidData:g,domain:{keys:e.map(o),values:f.map(o)},defs:{allScopesHaveSameDefs:d,keys:e,values:f},partialValidDataCount:m,time:0,[i9]:new Map,[i7]:new Map,[i8]:new Map}}extractKeys(a,b,c){let d,e,f=new Map,g=new Map,h=new Map,i=new Map,j=(a,b)=>{let c=e.get(a);d.set(b,d.get(c)),f.has(c)&&(f.set(b,f.get(c)),g.set(b,g.get(c)))};for(let k of a){let{invalidValue:a,scopes:l}=k;for(let m of(d=new Map,e=new Map,i.set(k,d),l??[])){let i,l,n=b.get(m)??[];if(e.has(n)){j(n,m);continue}let o=[];d.set(m,o),e.set(n,m);let p=0;for(let b=0;b<n.length;b++){if(null==n[b]||"object"!=typeof n[b])continue;let d=c(k,n[b],b,m);if(d.valid){o.push(d.value);continue}o.push(a),i??(i=jd(n.length,!1)),l??(l=jd(n.length,!1)),p+=1,i[b]=!0,l[b]=!0}i&&l&&(f.set(m,i),g.set(m,l),h.set(m,p))}}return{invalidData:g,invalidKeys:f,invalidKeyCount:h,allKeyMappings:i}}extractValues(a,b,c,d,e){let f=0,g=[],h=[],i=0;for(let j of b){let{invalidValue:b}=j;if(new Set(j.scopes.map(a=>c.get(a))).size>1)throw Error(`AG Charts - more than one data source for: ${JSON.stringify(j)}`);let k=new Set(j.scopes),l=cB(j.scopes),m=c.get(l),n=[],o=d.get(l);for(let c=0;c<m.length;c++){if(null==m[c]||"object"!=typeof m[c])continue;let d=m[c],g=null!=o&&o[c],h=e(j,d,c,j.scopes),i=h.value;(g||!h.valid)&&this.markScopeDatumInvalid(j.scopes,m,c,a),g?i=b:h.valid||(f+=1,i=b),n[c]=i}g.push(n),h.push(k),i=Math.max(i,n.length)}return{columns:g,columnScopes:h,partialValidDataCount:f,maxDataLength:i}}groupData(a,b){var c;let{keys:d,columns:e,columnScopes:f,invalidKeys:g,invalidData:h}=a,i=a.scopes,j=[],k=[],l=new Set,m=1!==i.size||null!=b?new Map:void 0;for(let a of i){let n=e.map((a,b)=>b).filter(b=>!l.has(b)&&f[b].has(a));if(0===n.length)continue;for(let a of n)l.add(a);let o=new Set;for(let a of n)for(let b of f[a])o.add(b);let p=d.map(b=>b.get(a)).filter(a=>null!=a),q=e[cB(n)],r=h?.get(a),s=g?.get(a);for(let d=0;d<q.length;d++){if(s?.[d]===!0)continue;let e=p.map(a=>a[d]);if(null==e||0===e.length)throw Error("AG Charts - no keys found for scope: "+a);let f=b?.(e)??e,g=null!=m?f.map(a=>aQ(a)?JSON.stringify(a):a).join("-"):void 0,h=m?.get(g);if(null==h&&(h={keys:f,datumIndices:[],aggregation:[],validScopes:i},m?.set(g,h),j.push(h.keys),k.push(h)),r?.[d]===!0)for(let a of(h.validScopes===i&&(h.validScopes=new Set(i.values())),o))h.validScopes.delete(a);for(let a of n)(c=h.datumIndices)[a]??(c[a]=[]),h.datumIndices[a].push(d)}}return{...a,type:"grouped",domain:{...a.domain,groups:j},groups:k}}aggregateUngroupedData(a){let b=this.aggregates.map(()=>[1/0,-1/0]);a.domain.aggValues=b;let{columns:c,dataSources:d}=a,e=cB(d.keys()),f=a.keys.map(a=>a.get(e)),g=d.get(e);a.aggregation=g?.map((a,d)=>{let e=[];for(let[a,g]of this.aggregates.entries()){let h=this.valueGroupIdxLookup(g),i=g.groupAggregateFunction?.()??[1/0,-1/0],j=h.map(a=>c[a][d]),k=je(f,d),l=null!=k?g.aggregateFunction(j,k):void 0;l&&(i=g.groupAggregateFunction?.(l,i)??i5.extendDomain(l,i));let m=g.finalFunction?.(i)??i;e[a]=m,i5.extendDomain(m,b[a])}return e})}aggregateGroupedData(a){let b=this.aggregates.map(()=>[1/0,-1/0]);a.domain.aggValues=b;let{columns:c}=a;for(let[d,e]of this.aggregates.entries()){let f=this.valueGroupIdxLookup(e);for(let g of a.groups){g.aggregation??(g.aggregation=[]);let a=g.keys,h=e.groupAggregateFunction?.()??[1/0,-1/0],i=Math.max(...f.map(a=>g.datumIndices[a]?.length??0));for(let b=0;b<i;b++){let d=f.map(a=>c[a][g.datumIndices[a]?.[b]]),i=e.aggregateFunction(d,a);i&&(h=e.groupAggregateFunction?.(i,h)??i5.extendDomain(i,h))}let j=e.finalFunction?.(h)??h;g.aggregation[d]=j,i5.extendDomain(j,b[d])}}}postProcessGroups(a){let{groupProcessors:b}=this,{columnScopes:c,columns:d,invalidData:e}=a;for(let f of b){let b=this.valueGroupIdxLookup(f),g=f.adjust()();for(let c of a.groups)g(d,b,c);for(let f of b){let b="category"===this.values[f].valueType,g=d[f],h=cB(c[f]),i=e?.get(h),j=b?new i4:new i5;for(let a=0;a<g.length;a+=1)i?.[a]!==!0&&j.extend(g[a]);a.domain.values[f]=j.getDomain()}}}postProcessProperties(a){for(let{adjust:b,property:c,scopes:d}of this.propertyProcessors)for(let e of this.valueIdxLookup(d,c))b()(a,e)}reduceData(a){a.reduced??(a.reduced={});let{dataSources:b,keys:c}=a;for(let d of this.reducers){let e=d.reducer(),f=d.initialValue;if("grouped"===a.type)for(let b of a.groups)f=e(f,b.keys);else{let a=jc(d)?d.scopes[0]:cB(b.keys()),g=c.map(b=>b.get(a)).filter(a=>null!=a),h=g.map(()=>void 0),i=b.get(a);for(let a=0;a<i.length;a+=1){for(let b=0;b<h.length;b++)h[b]=g[b]?.[a];f=e(f,h)}}a.reduced[d.property]=f}}postProcessData(a){for(let b of(a.reduced??(a.reduced={}),this.processors))a.reduced[b.property]=b.calculate(a,a.reduced[b.property])}initDataDomainProcessor(){let{keys:a,values:b}=this,c=new Set;for(let a of b)if(a.scopes)for(let b of a.scopes)c.add(b);let d=new Map,e=new Map,f=!0,g=()=>{for(let e of cA(a,b))"category"===e.valueType?d.set(e,new i4):(d.set(e,new i5),f&&(f=(e.scopes?.length??0)===c.size))};g();let h=this.buildAccessors(cA(a,b)),i={value:void 0,missing:!1,valid:!1},j=(a,b,c,f)=>{let j,k;if(h.has(a.property)){try{k=h.get(a.property)(b)}catch{}j=null!=k}else k=(j=a.property in b)?b[a.property]:a.missingValue;null!=a.forceValue&&(k=j&&aC(k)?-1*a.forceValue:a.forceValue,j=!0),i.missing=!j;let l="missingValue"in a;if(!j&&!l)if("string"==typeof f){let b=a.missing.get(f)??0;a.missing.set(f,b+1)}else for(let b of f){let c=a.missing.get(b)??0;a.missing.set(b,c+1)}if(d.has(a)||g(),j&&a.validation?.(k,b,c)===!1){if(i.valid=!1,!("invalidValue"in a))return"integrated"!==this.mode&&aa.warnOnce(`invalid value of type [${typeof k}] for [${a.scopes} / ${a.id}] ignored:`,`[${k}]`),i.value=void 0,i;k=a.invalidValue}else i.valid=!0;if(a.processor){let b=e.get(a);null==b&&(b=a.processor(),e.set(a,b)),k=b(k,c)}return d.get(a)?.extend(k),i.value=k,i};return{dataDomain:d,processValue:j,initDataDomain:g,scopes:c,allScopesHaveSameDefs:f}}buildAccessors(a){let b=new Map;if(this.suppressFieldDotNotation)return b;for(let c of a){if(!(c.property.includes(".")||c.property.includes("[")))continue;let a=jf(c.property);if(null==a){aa.warnOnce("Invalid property path [%s]",c.property);continue}let d=function(a){return b=>{let c=b;for(let b of a)c=c[b];return c}}(a);b.set(c.property,d)}return b}},jh=class a{constructor(a,b){this.mode=a,this.suppressFieldDotNotation=b,this.debug=dw.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(a,b,c){if("setup"!==this.status)throw Error("AG Charts - data request after data setup phase.");return new Promise((d,e)=>{this.requested.push({id:a,opts:c,data:b,resolve:d,reject:e})})}execute(a){if("setup"!==this.status)throw Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);let b=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",b);let c=this.mergeRequested(b);this.debug("DataController.execute() - merged",c),this.debug.check()&&(aH().processedData=[]);let d=[];for(let{data:e,ids:f,opts:g,resolves:h,rejects:i}of c){let c,j,k=a?.find(a=>e===a.data&&cw(f,a.ids)&&function(a,b){let{props:c,...d}=a,{props:e,...f}=b;return dK(d,f)&&function(a,b){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c+=1){let{type:d,idsMap:e,scopes:f,data:g,...h}=a[c],{type:i,idsMap:j,scopes:k,data:l,...m}=b[c];if(d!==i||f&&k&&!cw(f,k)||g&&l&&g!==l||!dK(h,m)||!function(a,b){if(null==a||null==b)return a===b;if(a.size!==b.size)return!1;for(let[c,d]of a){let a=b.get(c);if(null==a||!function(a,b){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}(d,a))return!1}return!0}(e,j))return!1}return!0}(c,e)}(g,a.opts));if(null==k)try{c=new jg(g,this.mode,this.suppressFieldDotNotation);let a=new Map(b.map(a=>[a.id,a.data]));j=c.processData(a)}catch(a){i.forEach(b=>b(a));continue}else({dataModel:c,processedData:j}=k);if(d.push({opts:g,data:e,ids:f,dataModel:c,processedData:j}),this.debug.check()&&aH("processedData").push(j),j)for(let a of h)a({dataModel:c,processedData:j});else{let a=Error("AG Charts - no processed data generated");for(let b of i)b(a)}}return d}validateRequests(a){let b=[];for(let[c,d]of a.entries())c>0&&d.data.length!==a[0].data.length&&!1===d.opts.groupByData&&!1===d.opts.groupByKeys?d.reject(Error("all series[].data arrays must be of the same length and have matching keys.")):b.push(d);return b}mergeRequested(b){let c=[];for(let d of b){let b=c.find(a.groupMatch(d));b?b.push(d):c.push([d])}return c.map(a.mergeRequests)}static groupMatch({data:a,opts:b}){function c(a){return a.filter(a=>"key"===a.type).map(a=>a.property).join(";")}let{groupByData:d,groupByKeys:e=!1,groupByFn:f,props:g}=b,h=c(g);return([b])=>(!1===d||b.data===a)&&(b.opts.groupByKeys??!1)===e&&b.opts.groupByFn===f&&c(b.opts.props)===h}static mergeRequests(b){let c={ids:[],rejects:[],resolves:[],data:b[0].data,opts:{...b[0].opts,props:[]}},d=new Map,e=new Map,f=0;for(let g of b){let{id:b,data:h,resolve:i,reject:j,opts:{props:k,...l}}=g;for(let g of(c.ids.push(b),c.rejects.push(j),c.resolves.push(i),c.data??(c.data=h),c.opts??(c.opts={...l,props:[]}),k)){let i,j={...g,scopes:[b],data:h};a.createIdsMap(b,j),a.crossScopeMergableTypes.has(j.type)?i=-1:e.has(h)?i=e.get(h):(i=f++,e.set(h,i));let k=`${j.type}-${i}-${j.groupId}`,l=d.get(k),m=l?.find(b=>a.deepEqual(b,j));if(null==l){c.opts.props.push(j),d.set(k,[j]);continue}if(null==m){c.opts.props.push(j),l.push(j);continue}null!=j.scopes&&(m.scopes??(m.scopes=[]),m.scopes.push(...j.scopes)),("key"===m.type||"value"===m.type)&&j.idsMap?.size&&(m.idsMap??(m.idsMap=new Map),a.mergeIdsMap(j.idsMap,m.idsMap))}}return c}static mergeIdsMap(a,b){for(let[c,d]of a){let a=b.get(c);if(null==a)b.set(c,new Set(d));else for(let b of d)a.add(b)}}static createIdsMap(a,b){null!=b.id&&(b.idsMap??(b.idsMap=new Map),b.idsMap.has(a)?b.idsMap.get(a).add(b.id):b.idsMap.set(a,new Set([b.id])))}static deepEqual(b,c){if(b===c)return!0;if(b&&c&&"object"==typeof b&&"object"==typeof c){let d,e;if(b.constructor!==c.constructor)return!1;if(Array.isArray(b)){if((e=b.length)!==c.length)return!1;for(d=e-1;d>=0;d--)if(!a.deepEqual(b[d],c[d]))return!1;return!0}let f=Object.keys(b);if((e=f.length)!==Object.keys(c).length)return!1;for(d=e-1;d>=0;d--){let e=f[d];if(!a.skipKeys.has(e)&&(!Object.hasOwn(c,e)||!a.deepEqual(b[e],c[e])))return!1}return!0}return!1}};jh.crossScopeMergableTypes=new Set(["key","group-value-processor"]),jh.skipKeys=new Set(["id","idsMap","type","scopes","data"]);var ji=new class{constructor(){this.axesMap=new Map,this.themeTemplates=new Map}register(a,b){this.axesMap.set(a,b.moduleFactory),b.themeTemplate&&this.setThemeTemplate(a,b.themeTemplate)}create(a,b){let c=this.axesMap.get(a);if(c)return c(b);throw Error(`AG Charts - unknown axis type: ${a}`)}has(a){return this.axesMap.has(a)}keys(){return this.axesMap.keys()}setThemeTemplate(a,b){return this.themeTemplates.set(a,b),this}getThemeTemplate(a){return this.themeTemplates.get(a)}},jj=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","topology","standalone"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","topology","standalone"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","topology","standalone"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","topology","standalone"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","topology","standalone"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"root",optionsKey:"ranges",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","topology","standalone"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"]},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"axis-option",optionsKey:"bandHighlight",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"radial-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"sankey"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"},{type:"context",contextKey:"sharedToolbar",chartTypes:["cartesian"]}];function jk(a){return jj.find(b=>"series"===b.type&&b.identifier===a)?.chartTypes}var jl=new class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(a,{optionsKey:b,moduleFactory:c,themeTemplate:d}){this.legendMap.set(a,{optionsKey:b,moduleFactory:c}),this.themeTemplates.set(b,d)}create(a,b){let c=this.legendMap.get(a)?.moduleFactory;if(c)return c(b);throw Error(`AG Charts - unknown legend type: ${a}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((a,[b,c])=>(a[b]=c.optionsKey,a),{})}},jm=class extends Map{get(a){return super.get(a)??"unknown"}isCartesian(a){return"cartesian"===this.get(a)}isPolar(a){return"polar"===this.get(a)}isTopology(a){return"topology"===this.get(a)}isStandalone(a){return"standalone"===this.get(a)}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(a=>this.isCartesian(a))}get polarTypes(){return this.seriesTypes.filter(a=>this.isPolar(a))}get topologyTypes(){return this.seriesTypes.filter(a=>this.isTopology(a))}get standaloneTypes(){return this.seriesTypes.filter(a=>this.isStandalone(a))}},jn=class extends Map{set(a,b){return super.set(a,dM(b,this.get(a)))}},jo=new jm,jp=new jm,jq=new jn,jr=new class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(a,{chartTypes:[b],moduleFactory:c,predictAxis:d,defaultAxes:e,themeTemplate:f,solo:g,stackable:h,groupable:i,stackedByDefault:j,hidden:k}){this.setThemeTemplate(a,f),this.seriesMap.set(a,{moduleFactory:c,predictAxis:d,defaultAxes:e,solo:g,stackable:h,groupable:i,stackedByDefault:j}),jo.set(a,b),k||jp.set(a,b)}create(a,b){let c=this.seriesMap.get(a)?.moduleFactory;if(c)return c(b);throw Error(`AG Charts - unknown series type: ${a}`)}predictAxes(a,b,c){if(!b)return;let d=b?.data??c;if(!d?.length)return;let e=this.seriesMap.get(a)?.predictAxis;if(!e)return;let f=new Map;for(let a of function(a,b,c){let d=[0],e=Math.round((b-0)/4);if(e>0)for(let c=a+e;c<b&&!(d.push(c)>=4);c+=e);return d.push(b),d}(0,d.length-1,5)){let c=d[a];for(let a of Object.values(gn)){let d=e(a,c,b);if(!f.has(a)){f.set(a,d);continue}let g=f.get(a);if(d||g){if(!d||!g)return;for(let a of Object.keys(g))if(g[a]!==d[a])return}}}for(let[a,b]of f)b||f.delete(a);if(0!==f.size){if(1===f.size){let b=this.cloneDefaultAxes(a);if(!b)return;let[c]=f.values();return b.map(a=>"category"===a.type?c:a)}return Array.from(f.values())}}cloneDefaultAxes(a){let b=this.seriesMap.get(a)?.defaultAxes;return null==b?null:fy(b)}setThemeTemplate(a,b){let c=this.themeTemplates.get(a);this.themeTemplates.set(a,dM(b,c))}getThemeTemplate(a){return this.themeTemplates.get(a)}isSolo(a){return this.seriesMap.get(a)?.solo??!1}isGroupable(a){return this.seriesMap.get(a)?.groupable??!1}isStackable(a){return this.seriesMap.get(a)?.stackable??!1}isStackedByDefault(a){return this.seriesMap.get(a)?.stackedByDefault??!1}},js=class a{constructor(a){this.chart=a}subscribe(b=a.DEFAULT_GROUP){let c=this.get(b);return c||(c={members:new Set},a.chartsGroups.set(b,c)),c.members.add(this.chart),this}unsubscribe(b=a.DEFAULT_GROUP){let c=this.get(b);return c?.members.delete(this.chart),delete c?.domains?.x?.sources?.[this.chart.id],delete c?.domains?.y?.sources?.[this.chart.id],this}getChart(){return this.chart}getGroupState(b=a.DEFAULT_GROUP){return this.get(b)}getGroupMembers(b=a.DEFAULT_GROUP){let c=this.get(b);return c?Array.from(c.members):[]}getGroupSiblings(b=a.DEFAULT_GROUP){return this.getGroupMembers(b).filter(a=>a!==this.chart)}getGroupSyncMode(b=a.DEFAULT_GROUP){return this.getGroupMembers(b).some(a=>a.series.length>1)?"multi-series":"single-series"}get(b){return a.chartsGroups.get(b)}};js.chartsGroups=new Map,js.DEFAULT_GROUP=Symbol("sync-group-default");var jt=class extends ez{constructor(){super(...arguments),this.enabled=!1}};dl([ey],jt.prototype,"enabled",2),dl([ey],jt.prototype,"tabIndex",2);var ju={};dk(ju,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>jv,fromToMotion:()=>jw,staticFromToMotion:()=>jx});var jv={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function jw(a,b,c,d,e,f,g){let{fromFn:h,toFn:i,applyFn:j=(a,b)=>a.setProperties(b)}=e,{nodes:k,selections:l}=hY(d),m=(d,e)=>{let k,l=0,m=0;for(let n of e){let o=d[l]===n,p={last:m>=e.length-1,lastLive:l>=d.length-1,prev:e[m-1],prevFromProps:k,prevLive:d[l-1],next:e[m+1],nextLive:d[l+ +!!o]},q=`${a}_${b}_${n.id}`;c.stopByAnimationId(q);let r="unknown";o?f&&g&&(r=function(a,b,c,d){let e=c(a,b);return d.added.has(e)?"added":d.removed.has(e)?"removed":null==a.previousDatum&&null!=a.datum?"added":null!=a.previousDatum&&null==a.datum?"removed":"updated"}(n,n.datum,f,g)):r="removed",n.transitionOut="removed"===r;let{phase:s,start:t,finish:u,delay:v,duration:w,...x}=h(n,n.datum,r,p),{phase:y,start:z,finish:A,delay:B,duration:C,...D}=i(n,n.datum,r,p),E=null==u;c.animate({id:q,groupId:a,phase:s??y??"update",duration:w??C,delay:v??B,from:x,to:D,ease:hP,collapsable:E,onPlay:()=>{j(n,{...t,...z,...x},"start")},onUpdate(a){j(n,a,"update")},onStop:()=>{j(n,{...t,...z,...x,...D,...u,...A},"end")}}),o&&l++,m++,k=x}},n=0;for(let d of l){let e=d.nodes();m(e.filter(a=>!d.isGarbage(a)),e),c.animate({id:`${a}_${b}_selection_${n}`,groupId:a,phase:"end",from:0,to:1,ease:hP,onStop(){d.cleanup()}}),n++}m(k,k)}function jx(a,b,c,d,e,f,g){let{nodes:h,selections:i}=hY(d),{start:j,finish:k,phase:l}=g;c.animate({id:`${a}_${b}`,groupId:a,phase:l??"update",from:e,to:f,ease:hP,onPlay:()=>{if(j){for(let a of h)a.setProperties(j);for(let a of i)for(let b of a.nodes())b.setProperties(j)}},onUpdate(a){for(let b of h)b.setProperties(a);for(let b of i)for(let c of b.nodes())c.setProperties(a)},onStop:()=>{for(let a of h)a.setProperties({...f,...k});for(let a of i){for(let b of a.nodes())b.setProperties({...f,...k});a.cleanup()}}})}var jy={};function jz(a,b){let{nodes:c,selections:d}=hY(a);for(let a of d){for(let c of a.nodes()){let a=b(c,c.datum);c.setProperties(a)}a.cleanup()}for(let a of c){let c=b(a,a.datum);a.setProperties(c)}}dk(jy,{resetMotion:()=>jz});var jA=class a{constructor(a,b,c=!0){this.parentNode=a,this.autoCleanup=c,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=dw.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(d7,b)?()=>new b:b}static select(b,c,d=!0){return new a(b,c,d)}static selectAll(a,b){let c=[],d=a=>{if(b(a)&&c.push(a),a instanceof fh)for(let b of a.children())d(b)};return d(a),c}static selectByClass(b,...c){return a.selectAll(b,a=>c.some(b=>a instanceof b))}static selectByTag(b,c){return a.selectAll(b,a=>a.tag===c)}createNode(a,b,c){let d=this.nodeFactory(a);return d.datum=a,b?.(d),null==c?this._nodes.push(d):this._nodes.splice(c,0,d),this.parentNode.appendChild(d),d}update(a,b,c){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",a),c){let d=new Map,e=new Map;for(let b=0;b<a.length;b++){let f=c(a[b]);if(d.has(f)){let a=(e.get(f)??0)+1;e.set(f,a),f=`${f}:${a}`}d.set(f,b)}for(let[b,c]of this._nodesMap.entries()){let e=d.get(c);null==e?this.garbageBin.add(b):(b.datum=a[e],this.garbageBin.delete(b),d.delete(c))}for(let[c,e]of d.entries()){let d=a[e];this._nodesMap.set(this.createNode(d,b,e),c)}}else{let c=Math.max(a.length,this.data.length);for(let d=0;d<c;d++)d>=a.length?this.garbageBin.add(this._nodes[d]):d>=this._nodes.length?this.createNode(a[d],b):(this._nodes[d].datum=a[d],this.garbageBin.delete(this._nodes[d]))}return this.data=a.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter(a=>!this.garbageBin.has(a)||(this._nodesMap.delete(a),this.garbageBin.delete(a),a.destroy(),!1))),this}clear(){return this.update([]),this}isGarbage(a){return this.garbageBin.has(a)}each(a){for(let b of this._nodes.entries())a(b[1],b[1].datum,b[0]);return this}*[Symbol.iterator](){for(let a=0;a<this._nodes.length;a++){let b=this._nodes[a];yield{node:b,datum:b.datum,index:a}}}select(b){return a.selectAll(this.parentNode,b)}selectByClass(b){return a.selectByClass(this.parentNode,b)}selectByTag(b){return a.selectByTag(this.parentNode,b)}nodes(){return this._nodes}at(a){return this._nodes.at(a)}get length(){return this._nodes.length}},jB=class extends e6{constructor(a={}){super(a),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.fill=void 0,this.strokeWidth=1}set x(a){this.x1=a,this.x2=a}set y(a){this.y1=a,this.y2=a}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new dt(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(a,b){return(this.x1===this.x2||this.y1===this.y2)&&this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(a,b)}distanceSquared(a,b){let{x1:c,y1:d,x2:e,y2:f}=this;return eH(a,b,c,d,e,f,1/0)}render(a){let{ctx:b,devicePixelRatio:c}=a,{x1:d,y1:e,x2:f,y2:g}=this;if(d===f){let{strokeWidth:a}=this,b=Math.round(d*c)/c+Math.trunc(a*c)%2/(2*c);d=b,f=b}else if(e===g){let{strokeWidth:a}=this,b=Math.round(e*c)/c+Math.trunc(a*c)%2/(2*c);e=b,g=b}b.beginPath(),b.moveTo(d,e),b.lineTo(f,g),this.fillStroke(b),this.fillShadow?.markClean(),super.render(a)}toSVG(){if(!this.visible)return;let a=aJ("line");return a.setAttribute("x1",String(this.x1)),a.setAttribute("y1",String(this.y1)),a.setAttribute("x2",String(this.x2)),a.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(a),{elements:[a]}}};jB.className="Line",dl([d$()],jB.prototype,"x1",2),dl([d$()],jB.prototype,"y1",2),dl([d$()],jB.prototype,"x2",2),dl([d$()],jB.prototype,"y2",2);var jC="color: green",jD="color: grey";function jE(){return dG(()=>{})}function jF(a,b){let c=dI(b);if(0===c.length)return;let d=dJ(a);for(let a of c)a in d&&(b[a]=d[a])}var jG=class{transitionRoot(a,b){this.parent?this.parent.transitionRoot(a,b):this.transition(a,b)}},jH=class a extends jG{constructor(a,b,c){super(),this.defaultState=a,this.states=b,this.enterEach=c,this.debug=dw.create(!0,"animation"),this.state=a,this.debug(`%c${this.constructor.name} | init -> ${a}`,jC)}transition(b,c){if(!this.transitionChild(b,c)||this.state===a.child||this.state===a.parent)return;let d=this.state,e=this.states[this.state],f=e[b],g=`%c${this.constructor.name} | ${this.state} -> ${b} ->`;if(Array.isArray(f))f=f.find(a=>{if(!a.guard)return!0;let b=a.guard(c);return b||this.debug(`${g} (guarded)`,a.target,jD),b});else if("object"==typeof f&&!(f instanceof a)&&f.guard&&!f.guard(c))return void this.debug(`${g} (guarded)`,f.target,jD);if(!f)return void this.debug(`${g} ${this.state}`,jD);let h=this.getDestinationState(f),i=h===this.state?void 0:e.onExit;this.debug(`${g} ${h}`,jC),this.state=h,"function"==typeof f?f(c):"object"!=typeof f||f instanceof a||f.action?.(c),i?.(),this.enterEach?.(d,h),h!==d&&h!==a.child&&h!==a.parent&&this.states[h].onEnter?.(d,c)}transitionAsync(a,b){setTimeout(()=>{this.transition(a,b)},0)}is(b){return this.state===a.child&&this.childState?this.childState.is(b):this.state===b}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(b,c){return this.state!==a.child||!this.childState||(jF(this,this.childState),this.childState.transition(b,c),!this.childState.is(a.parent)||(this.debug(`%c${this.constructor.name} | ${this.state} -> ${b} -> ${this.defaultState}`,jC),this.state=this.defaultState,this.states[this.state].onEnter?.(),this.childState.resetHierarchy(),!1))}getDestinationState(b){let c=this.state;return"string"==typeof b?c=b:b instanceof a?(this.childState=b,this.childState.parent=this,c=a.child):"object"==typeof b&&(b.target instanceof a?(this.childState=b.target,this.childState.parent=this,c=a.child):null!=b.target&&(c=b.target)),c}};jH.child="__child",jH.parent="__parent";var jI=class extends jG{constructor(...a){for(let b of(super(),this.stateMachines=a,a))b.parent=this}transition(a,b){for(let c of this.stateMachines)jF(this,c),c.transition(a,b)}transitionAsync(a,b){for(let c of this.stateMachines)jF(this,c),c.transitionAsync(a,b)}},jJ=class{constructor(){this.enabled=!0}};dl([ey],jJ.prototype,"enabled",2),dl([ey],jJ.prototype,"stroke",2),dl([ey],jJ.prototype,"strokeWidth",2),dl([ey],jJ.prototype,"strokeOpacity",2);var jK=class extends ez{constructor(){super(...arguments),this.enabled=!0,this.border=new jJ,this._cachedFormatter=void 0}formatValue(a,b,c,d){let e,{formatter:f,format:g}=this;if(null!=f&&(e??(e=a(f,d))),null!=g){let a=this._cachedFormatter;(null==a||a.type!==b||a.format!==g)&&(a={type:b,format:g,formatter:hK.getFormatter(b,g)},this._cachedFormatter=a),e??(e=a.formatter?.(c))}return null==e||aM(e)?e:String(e)}};function jL(a){let{enabled:b=!1,stroke:c}=a?.border??{},d=a?.fill!=null||b&&null!=c?a?.padding:null;if(null==d)return{bottom:0,left:0,right:0,top:0};{if("number"==typeof d)return{bottom:d,left:d,right:d,top:d};let{bottom:a=0,left:b=0,right:c=0,top:e=0}=d;return{bottom:a,left:b,right:c,top:e}}}dl([ey],jK.prototype,"enabled",2),dl([ey],jK.prototype,"border",2),dl([ey],jK.prototype,"color",2),dl([ey],jK.prototype,"cornerRadius",2),dl([ey],jK.prototype,"fill",2),dl([ey],jK.prototype,"fillOpacity",2),dl([ey],jK.prototype,"fontStyle",2),dl([ey],jK.prototype,"fontWeight",2),dl([ey],jK.prototype,"fontSize",2),dl([ey],jK.prototype,"fontFamily",2),dl([ey],jK.prototype,"formatter",2),dl([ey],jK.prototype,"format",2),dl([ey],jK.prototype,"padding",2),dl([ey],jK.prototype,"itemStyler",2);var jM=class{constructor(){this.moduleMap=new Map}*modules(){for(let a of this.moduleMap.values())yield a.moduleInstance}addModule(a,b){if(this.moduleMap.has(a.optionsKey))throw Error(`AG Charts - module already initialised: ${a.optionsKey}`);this.moduleMap.set(a.optionsKey,{module:a,moduleInstance:b(a)})}removeModule(a){let b=aU(a)?a:a.optionsKey;this.moduleMap.get(b)?.moduleInstance.destroy(),this.moduleMap.delete(b)}getModule(a){return this.moduleMap.get(aU(a)?a:a.optionsKey)?.moduleInstance}isEnabled(a){return this.moduleMap.has(aU(a)?a:a.optionsKey)}mapModules(a){return Array.from(this.moduleMap.values(),(b,c)=>a(b.moduleInstance,c))}destroy(){for(let a of this.moduleMap.keys())this.moduleMap.get(a)?.moduleInstance.destroy();this.moduleMap.clear()}},jN=class extends e6{constructor(a={}){super(a),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.horizontal=!1,this.strokeWidth=1}computeBBox(){return new dt(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(a,b){return!1}render(a){let{ctx:b}=a,{x1:c,y1:d,x2:e,y2:f}=this;c=this.align(c),d=this.align(d),e=this.align(e),f=this.align(f);let{fill:g,horizontal:h}=this,{globalAlpha:i}=b;null!=g&&(this.applyFillAndAlpha(b),b.beginPath(),b.moveTo(c,d),b.lineTo(e,d),b.lineTo(e,f),b.lineTo(c,f),b.closePath(),b.fill(),b.globalAlpha=i);let{stroke:j,strokeWidth:k,startLine:l,endLine:m}=this;if((l||m)&&j&&k){let{lineDash:a,lineDashOffset:g,lineCap:j,lineJoin:n}=this;this.applyStrokeAndAlpha(b),b.lineWidth=k,a&&b.setLineDash([...a]),g&&(b.lineDashOffset=g),j&&(b.lineCap=j),n&&(b.lineJoin=n),b.beginPath(),l&&(b.moveTo(c,d),h?b.lineTo(c,f):b.lineTo(e,d)),m&&(b.moveTo(e,f),h?b.lineTo(e,d):b.lineTo(c,f)),b.stroke(),b.globalAlpha=i}this.fillShadow?.markClean(),super.render(a)}};function jO(a){return aW(a)||aO(a)||null!=a&&Object.hasOwn(a,"valueOf")&&aW(a.valueOf())}function jP(a){return null!=a&&Object.hasOwn(a,"toString")&&aU(a.toString())&&Object.hasOwn(a,"id")?a.id:a}function jQ(a){switch(a.type){case"line":return a.value;case"range":return a.range}}function jR(a,b){let c=jQ(a);if(null==c)return!1;let d=iG.is(b)||iK.is(b),e=a=>null!=a&&(!d||jO(a))&&!isNaN(b.convert(a,{clamp:!0}));if("range"!==a.type)return e(c);{let[a,b]=c;return e(a)&&e(b)}}jN.className="Range",dl([d$()],jN.prototype,"x1",2),dl([d$()],jN.prototype,"y1",2),dl([d$()],jN.prototype,"x2",2),dl([d$()],jN.prototype,"y2",2),dl([d$()],jN.prototype,"startLine",2),dl([d$()],jN.prototype,"endLine",2),dl([d$()],jN.prototype,"horizontal",2);var jS={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:-1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},jT={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:-1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},jU={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},jV={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},jW=class extends ez{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};dl([ey],jW.prototype,"enabled",2),dl([ey],jW.prototype,"text",2),dl([ey],jW.prototype,"fontStyle",2),dl([ey],jW.prototype,"fontWeight",2),dl([ey],jW.prototype,"fontSize",2),dl([ey],jW.prototype,"fontFamily",2),dl([ey],jW.prototype,"padding",2),dl([ey],jW.prototype,"color",2),dl([ey],jW.prototype,"position",2),dl([ey],jW.prototype,"rotation",2),dl([ey],jW.prototype,"parallel",2);var jX=class extends ez{constructor(){super(),this.id=c_(this),this.defaultColorRange=[],this.fill="#c16068",this.label=new jW,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.position="top",this.rangeGroup=new fh({name:this.id}),this.lineGroup=new fh({name:this.id}),this.labelGroup=new fh({name:this.id}),this.crossLineRange=new jN,this.crossLineLabel=new gd,this.data=void 0,this.startLine=!1,this.endLine=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}get defaultLabelPosition(){return"top"}update(a){let{enabled:b,type:c,data:d,scale:e}=this;if(!e||!b||!a||!jR(this,e)||null==d){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=a,this.lineGroup.visible=a,this.labelGroup.visible=a,this.updateNodes();let f="range"===c;f!==this._isRange&&(f?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=f}calculateLayout(a){let b,c,d,e;if(this.data=void 0,!a)return;let{type:f,range:g,value:h,scale:i,clippedRange:j,strokeWidth:k=0}=this;if(!i)return;let l=i.bandwidth??0,m=i.step??0,n=i instanceof iJ?(m-l)/2:0,[o,p]=iB(j);if(o-=l,p+=l,"line"===f){let a=l/2;if(b=i.convert(h)+a,c=NaN,d=i.convert(h,{clamp:!0})+a,e=NaN,d>=p||d<=o)return}else{if(!g)return;let[a,f]=g,[h,j]=iP(a,f);if(b=i.convert(a,{alignment:h}),c=i.convert(f,{alignment:j}),(d=i.convert(a,{clamp:!0,alignment:h}))>(e=i.convert(f,{clamp:!0,alignment:j}))&&([d,e]=[e,d],[b,c]=[c,b]),d>=p||e<=o)return;Number.isFinite(b)&&(d-=n),Number.isFinite(c)&&(c+=l,e+=l+n)}if(d=iA(d,j),e=iA(e,j),b-n>=d&&(b-=n),c+n<=e&&(c+=n),this.startLine=k>0&&b>=d&&b<=d+n,this.endLine=k>0&&c>=e-l-n&&c<=e,this.data=[d,e],!1===this.label.enabled||!this.label.text)return}updateNodes(){let a,{position:b,data:[c,d]=[0,0],gridLength:e}=this,f=Number.isFinite(d)?d-c:0;switch(b){case"top":case"bottom":a=new dt(c,"top"===b?0:-e,f,e);break;case"left":case"right":a=new dt("left"===b?0:-e,c,e,f)}this.updateRangeNode(a);let{label:g}=this;!1!==g.enabled&&g.text&&(this.updateLabel(),this.positionLabel(a))}updateRangeNode(a){let{type:b,position:c,crossLineRange:d,startLine:e,endLine:f,fill:g,fillOpacity:h,stroke:i,strokeWidth:j,strokeOpacity:k,lineDash:l}=this;d.x1=a.x,d.x2=a.x+a.width,d.y1=a.y,d.y2=a.y+a.height,d.horizontal="top"===c||"bottom"===c,d.startLine=e,d.endLine=f,d.fill="range"===b?g:void 0,d.fillOpacity=h??1,d.stroke=i,d.strokeWidth=j??1,d.strokeOpacity=k??1,d.lineDash=l}updateLabel(){let{crossLineLabel:a,label:b}=this;b.text&&(a.fontStyle=b.fontStyle,a.fontWeight=b.fontWeight,a.fontSize=b.fontSize,a.fontFamily=b.fontFamily,a.fill=b.color,a.text=b.text)}get anchor(){let a="left"===this.position||"right"===this.position,b="range"===this.type,{position:c=this.defaultLabelPosition}=this.label;return b?(a?jU:jV)[c]:(a?jS:jT)[c]}positionLabel(a){let{crossLineLabel:b,label:c,anchor:d}=this;b.rotation=ee(c.rotation??0),b.textBaseline="middle",b.textAlign="center";let e=b.getBBox();if(!e)return;let{width:f,height:g}=e,h=c.padding+f/2,i=c.padding+g/2,j=a.x+a.width*(d.rangeH+1)/2-h*d.labelH,k=a.y+a.height*(d.rangeV+1)/2-i*d.labelV;b.x=j,b.y=k,b.rotationCenterX=j,b.rotationCenterY=k}computeLabelSize(){let{label:a}=this;if(!1===a.enabled||!a.text)return;let b=new gd;b.fontFamily=a.fontFamily,b.fontSize=a.fontSize,b.fontStyle=a.fontStyle,b.fontWeight=a.fontWeight,b.text=a.text,b.rotation=ee(a.rotation??0),b.textBaseline="middle",b.textAlign="center";let c=b.getBBox();if(!c)return;let{width:d,height:e}=c;return{width:d,height:e}}calculatePadding(a){let{label:b,anchor:c}=this,d=this.computeLabelSize();if(!d)return;let{width:e,height:f}=d,g=b.padding+e,h=b.padding+f,i="left"===this.position||"right"===this.position;i&&(-1===c.rangeH&&1===c.labelH?a.left=Math.max(a.left??0,g):1===c.rangeH&&-1===c.labelH&&(a.right=Math.max(a.right??0,g))),i||(-1===c.rangeV&&1===c.labelV?a.top=Math.max(a.top??0,h):1===c.rangeV&&-1===c.labelV&&(a.bottom=Math.max(a.bottom??0,h)))}};jX.className="CrossLine",dl([ey],jX.prototype,"enabled",2),dl([ey],jX.prototype,"type",2),dl([ey],jX.prototype,"range",2),dl([ey],jX.prototype,"value",2),dl([ey],jX.prototype,"defaultColorRange",2),dl([ey],jX.prototype,"fill",2),dl([ey],jX.prototype,"fillOpacity",2),dl([ey],jX.prototype,"stroke",2),dl([ey],jX.prototype,"strokeWidth",2),dl([ey],jX.prototype,"strokeOpacity",2),dl([ey],jX.prototype,"lineDash",2),dl([ey],jX.prototype,"label",2);var jY=class{constructor(){this.enabled=!0,this.width=1,this.style=[{fill:void 0,fillOpacity:1,stroke:void 0,strokeWidth:void 0,lineDash:[]}]}};dl([ey],jY.prototype,"enabled",2),dl([ey],jY.prototype,"width",2),dl([ey],jY.prototype,"style",2);var jZ=class extends ez{};dl([ey],jZ.prototype,"placement",2),dl([ey],jZ.prototype,"step",2),dl([ey],jZ.prototype,"values",2),dl([ey],jZ.prototype,"minSpacing",2),dl([ey],jZ.prototype,"maxSpacing",2);var j$=class extends ez{constructor(){super(...arguments),this.enabled=!0,this.border=new jJ,this.wrapping="never",this.truncate=!1,this.spacing=5,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this._formatters={"component:year":void 0,"component:month":void 0,"component:day":void 0,"component:none":void 0,"long:year":void 0,"long:month":void 0,"long:day":void 0,"long:none":void 0}}getSideFlag(){return this.mirrored?1:-1}formatValue(a,b,c,d={dateStyle:"long",truncateDate:void 0}){let e,{formatter:f,format:g}=this,{type:h,value:i,domain:j,boundSeries:k}=b,l="number"===b.type?b.fractionDigits:void 0,m="date"===b.type?b.unit:void 0;if(null!=f&&(e=a(f,{value:i,index:c,domain:j,fractionDigits:l,unit:m,step:"date"===b.type?b.step:void 0,boundSeries:k})),null!=g&&null==e){let{specifier:a,dateStyle:b,truncateDate:c}=d,f=`${b}:${c??"none"}`,j=this._formatters[f],k=hK.mergeSpecifiers(a,g);null!=j&&j.type===h&&j.unit===m&&dK(j.mergedFormat,k)||(j={type:h,mergedFormat:k,unit:m,formatter:hK.getFormatter(h,k,m,b,d)},this._formatters[f]=j),e=j.formatter?.(i,l)}return null==e||aM(e)?e:String(e)}};dl([ey],j$.prototype,"enabled",2),dl([ey],j$.prototype,"border",2),dl([ey],j$.prototype,"cornerRadius",2),dl([ey],j$.prototype,"fill",2),dl([ey],j$.prototype,"fillOpacity",2),dl([ey],j$.prototype,"fontStyle",2),dl([ey],j$.prototype,"fontWeight",2),dl([ey],j$.prototype,"fontSize",2),dl([ey],j$.prototype,"fontFamily",2),dl([ey],j$.prototype,"wrapping",2),dl([ey],j$.prototype,"truncate",2),dl([ey],j$.prototype,"spacing",2),dl([ey],j$.prototype,"minSpacing",2),dl([ey],j$.prototype,"color",2),dl([ey],j$.prototype,"rotation",2),dl([ey],j$.prototype,"avoidCollisions",2),dl([ey],j$.prototype,"mirrored",2),dl([ey],j$.prototype,"padding",2),dl([ey],j$.prototype,"parallel",2),dl([ey],j$.prototype,"itemStyler",2),dl([ey],j$.prototype,"formatter",2),dl([ey],j$.prototype,"format",2);var j_=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};dl([ey],j_.prototype,"enabled",2),dl([ey],j_.prototype,"width",2),dl([ey],j_.prototype,"stroke",2);var j0=class extends ez{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};dl([ey],j0.prototype,"enabled",2),dl([ey],j0.prototype,"width",2),dl([ey],j0.prototype,"size",2),dl([ey],j0.prototype,"stroke",2);var j1=class extends ez{constructor(){super(...arguments),this.caption=new gm,this.enabled=!1,this.spacing=gm.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};dl([ey],j1.prototype,"enabled",2),dl([ey],j1.prototype,"text",2),dl([ey],j1.prototype,"spacing",2),dl([ey],j1.prototype,"fontStyle",2),dl([ey],j1.prototype,"fontWeight",2),dl([ey],j1.prototype,"fontSize",2),dl([ey],j1.prototype,"fontFamily",2),dl([ey],j1.prototype,"color",2),dl([ey],j1.prototype,"wrapping",2),dl([ey],j1.prototype,"formatter",2);var j2=(a=>(a[a.TickAndDomain=0]="TickAndDomain",a[a.TicksOnly=1]="TicksOnly",a[a.Off=2]="Off",a))(j2||{});function j3(a){let[b,c]=iB(a.range),d=Math.floor(b),e=Math.ceil(c);return{min:d,max:e,visible:d!==e}}var j4=2*Math.PI,j5=j4/2;function j6(a){let{min:b,max:c}=a,d=a=>a<b||a>c;return{tick:{fromFn(a,b,c){let{x1:e,x2:f,y1:g,y2:h}=a,i=a.opacity;return("added"===c||d(b.offset))&&({x1:e,x2:f,y1:g,y2:h}=b,i=0),{x1:e,x2:f,y1:g,y2:h,opacity:i,phase:jv[c]}},toFn(a,b,c){let{x1:d,x2:e,y1:f,y2:g}=b,h=1;return"removed"===c&&(h=0),{x1:d,x2:e,y1:f,y2:g,opacity:h}},applyFn(a,b){a.setProperties(b),a.visible=!d(a.y)}},line:{fromFn(a,b){let{x1:c,x2:d,y1:e,y2:f}=a.previousDatum??b;return{x1:c,x2:d,y1:e,y2:f,phase:jv.updated}},toFn(a,b){let{x1:c,x2:d,y1:e,y2:f}=b;return{x1:c,x2:d,y1:e,y2:f}}},label:{fromFn(a,b,c){let e=a.previousDatum??b,{x:f,y:g,rotationCenterX:h,rotationCenterY:i,rotation:j}=e,k=a.opacity;return"removed"===c||d(e.y)?j=b.rotation:("added"===c||d(a.datum.y))&&({x:f,y:g,rotationCenterX:h,rotationCenterY:i,rotation:j}=b,k=0),{x:f,y:g,rotationCenterX:h,rotationCenterY:i,rotation:j,opacity:k,phase:jv[c]}},toFn(a,b,c){let{x:d,y:e,rotationCenterX:f,rotationCenterY:g}=b,h=0,i=1;if("added"===c)h=b.rotation;else if("removed"===c)i=0,h=b.rotation;else{var j,k;j=a.previousDatum?.rotation??b.rotation,h=Math.abs((k=b.rotation)-j)<j5?k:j>k?k+j4:k-j4}return{x:d,y:e,rotationCenterX:f,rotationCenterY:g,rotation:h,opacity:i,finish:{rotation:b.rotation}}}},group:{fromFn(a,b){let{translationX:c,translationY:d}=a;return{translationX:c,translationY:d,phase:jv.updated}},toFn(a,b){let{translationX:c,translationY:d}=b;return{translationX:c,translationY:d}}}}}function j7(){return(a,b)=>({translationX:b.translationX,translationY:b.translationY})}function j8(){return(a,b)=>({x:b.x,y:b.y,rotationCenterX:b.rotationCenterX,rotationCenterY:b.rotationCenterY,rotation:b.rotation})}function j9(){return(a,b)=>{let{x1:c,x2:d,y1:e,y2:f}=b;return{x1:c,x2:d,y1:e,y2:f}}}function ka(){return(a,b)=>{let{x1:c,x2:d,y1:e,y2:f}=b;return{x:c,y:e,width:d-c,height:f-e}}}var kb=(a=>(a[a.TickLines=0]="TickLines",a[a.AxisLine=1]="AxisLine",a[a.TickLabels=2]="TickLabels",a))(kb||{});function kc(a,b){return a.domain===b.domain&&a.rangeExtent===b.rangeExtent&&a.nice===b.nice&&a.gridLength===b.gridLength&&a.visibleRange[0]===b.visibleRange[0]&&a.visibleRange[1]===b.visibleRange[1]&&a.initialPrimaryTickCount?.unzoomed===b.initialPrimaryTickCount?.unzoomed&&a.initialPrimaryTickCount?.zoomed===b.initialPrimaryTickCount?.zoomed}var kd=class a{constructor(b,c){this.moduleCtx=b,this.scale=c,this.id=c_(this),this._crossLines=[],this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new jZ,this.dataDomain={domain:[],clipped:!1},this.title=new j1,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new fh({name:`${this.id}-axis`}),this.tickLineGroup=this.axisGroup.appendChild(new fl({name:`${this.id}-Axis-tick-lines`,zIndex:0})),this.tickLabelGroup=this.axisGroup.appendChild(new fl({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.labelGroup=new fh({name:`${this.id}-Labels`,zIndex:11}),this.gridGroup=new fk({name:`${this.id}-Axis-grid`,zIndex:2}),this.gridFillGroup=this.gridGroup.appendChild(new fh({name:`${this.id}-gridFills`})),this.gridLineGroup=this.gridGroup.appendChild(new fh({name:`${this.id}-gridLines`})),this.crossLineRangeGroup=new fl({name:`${this.id}-CrossLines-Range`,zIndex:6}),this.crossLineLineGroup=new fl({name:`${this.id}-CrossLines-Line`,zIndex:10}),this.crossLineLabelGroup=new fl({name:`${this.id}-CrossLines-Label`,zIndex:15}),this.tickLabelGroupSelection=jA.select(this.tickLabelGroup,gd,!1),this.line=new j_,this.tick=new j0,this.gridLine=new jY,this.label=this.createLabel(),this.defaultTickMinSpacing=a.defaultTickMinSpacing,this.translation={x:0,y:0},this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.axisContext=void 0,this.cleanup=new cQ,this.isHovering=!1,this.range=[0,1],this.visibleRange=[0,1],this.animatable=!0,this.tickLayout=void 0,this.formatterBoundSeries=new cP(()=>{let{direction:a,boundSeries:b}=this;return dW(b.flatMap(b=>b.getFormatterContext(a)))}),this.moduleMap=new jM,this.range=this.scale.range.slice(),this.crossLines.forEach(a=>this.initCrossLine(a)),this.cleanup.register(this.moduleCtx.widgets.containerWidget.addListener("mousemove",a=>this.onMouseMove(a)))}set crossLines(a){let{CrossLineConstructor:b}=this.constructor;this._crossLines.forEach(a=>this.detachCrossLine(a)),this._crossLines=a.map(a=>{let c=new b;return c.set(a),c}),this._crossLines.forEach(a=>{this.attachCrossLine(a),this.initCrossLine(a)})}get crossLines(){return this._crossLines}get type(){return this.constructor.type??""}get primaryLabel(){}get primaryTick(){}isCategoryLike(){return!1}resetAnimation(a){}onMouseMove(a){let b=this.tickLabelGroup.pickNode(a.currentX,a.currentY),{textUntruncated:c}=b?.datum??{};null!=c?(this.moduleCtx.tooltipManager.updateTooltip(this.id,{canvasX:a.currentX,canvasY:a.currentY,showArrow:!1},[{type:"structured",title:c}]),this.isHovering=!0):this.isHovering&&(this.moduleCtx.tooltipManager.removeTooltip(this.id),this.isHovering=!1)}attachCrossLine(a){this.crossLineRangeGroup.appendChild(a.rangeGroup),this.crossLineLineGroup.appendChild(a.lineGroup),this.crossLineLabelGroup.appendChild(a.labelGroup)}detachCrossLine(a){this.crossLineRangeGroup.removeChild(a.rangeGroup),this.crossLineLineGroup.removeChild(a.lineGroup),this.crossLineLabelGroup.removeChild(a.labelGroup)}destroy(){this.moduleMap.destroy(),this.cleanup.flush()}setScaleRange(a){let{range:b,scale:c}=this,d=(b[1]-b[0])/(a[1]-a[0]),e=d*a[0],f=b[0]-e;c.range=[f,f+d]}updateScale(){let{range:[a,b]}=this;this.setScaleRange(this.visibleRange),this.crossLines.forEach(c=>{c.clippedRange=[a,b]})}setCrossLinesVisible(a){this.crossLineRangeGroup.visible=a,this.crossLineLineGroup.visible=a,this.crossLineLabelGroup.visible=a}attachAxis(a){a.gridNode.appendChild(this.gridGroup),a.axisNode.appendChild(this.axisGroup),a.labelNode.appendChild(this.labelGroup),a.crossLineRangeNode.appendChild(this.crossLineRangeGroup),a.crossLineLineNode.appendChild(this.crossLineLineGroup),a.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(a){a.gridNode.removeChild(this.gridGroup),a.axisNode.removeChild(this.axisGroup),a.labelNode.removeChild(this.labelGroup),a.crossLineRangeNode.removeChild(this.crossLineRangeGroup),a.crossLineLineNode.removeChild(this.crossLineLineGroup),a.crossLineLabelNode.removeChild(this.crossLineLabelGroup)}attachLabel(a){this.labelGroup.append(a)}inRange(a,b=0){let[c,d]=iB(this.range);return a>=c-b&&a<=d+b}getRangeOverflow(a){let{range:b,visibleRange:c}=this,d=(b[1]-b[0])/(c[1]-c[0]),[e,f]=iB([b[0]-d*c[0],b[0]-d*c[0]+d]);return a<e?a-e:a>f?a-f:0}onGridLengthChange(a,b){b^a&&this.onGridVisibilityChange(),this.crossLines.forEach(a=>this.initCrossLine(a))}onGridVisibilityChange(){}createLabel(){return new j$}update(){this.formatterBoundSeries.clear(),this.updatePosition(),this.updateSelections(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled,this.updateLabels(),this.updateCrossLines()}getLabelStyles(a,b,c=this.label){let d,e={border:c.border,color:c.color,cornerRadius:c.cornerRadius,fill:c.fill,fillOpacity:c.fillOpacity,fontFamily:c.fontFamily,fontSize:c.fontSize,fontStyle:c.fontStyle,fontWeight:c.fontWeight,padding:c.padding,spacing:c.spacing};c.itemStyler&&(d=this.cachedCallWithContext(c.itemStyler,{...a,...e}));let f=dM(d,b,e);return{border:f.border,color:f.color,cornerRadius:f.cornerRadius,fill:f.fill,fillOpacity:f.fillOpacity,fontFamily:f.fontFamily,fontSize:f.fontSize,fontStyle:f.fontStyle,fontWeight:f.fontWeight,padding:f.padding,spacing:f.spacing}}getTickSize(a=this.tick){return a.enabled?a.size:0}processData(){this.invalidateLayoutCache();let{includeInvisibleDomains:a,boundSeries:b,direction:c}=this,d=(a?b:b.filter(a=>a.isEnabled())).map(a=>a.getDomain(c));this.setDomains(...d)}setDomains(...a){let b,c;a.length>0?{domain:b,animatable:c}=this.scale.normalizeDomains(...a):(b=[],c=!0),this.dataDomain=this.normaliseDataDomain(b),this.reverse&&this.dataDomain.domain.reverse(),this.animatable=c}calculateDomain(a){let b,{dataDomain:{domain:c},range:d,nice:e,scale:f,gridLength:g}=this,h=iC(d),i=[0,1];this.updateScale();let{unzoomedTickLayoutCache:j}=this;if(null!=j&&kc(j,{domain:c,rangeExtent:h,nice:e,gridLength:g,visibleRange:i,initialPrimaryTickCount:a}))b=j.tickLayout;else{let d=f.range;this.setScaleRange([0,1]),b=this.calculateTickLayout(c,2*!e,[0,1],a),f.range=d,this.unzoomedTickLayoutCache={domain:c,rangeExtent:h,nice:e,gridLength:g,visibleRange:i,initialPrimaryTickCount:a,tickLayout:b}}return this.updateScale(),f.domain=b.niceDomain,{unzoomedTickLayout:b,domain:f.domain}}calculateLayout(a,b){let c;this.chartLayout=b;let{visibleRange:d,nice:e}=this,f=0===d[0]&&1===d[1],{unzoomedTickLayout:g,domain:h}=this.calculateDomain(a);if(f)c=g;else{let{range:b,gridLength:f}=this,g=iC(b),{tickLayoutCache:i}=this;null!=i&&kc(i,{domain:h,rangeExtent:g,nice:e,gridLength:f,visibleRange:d,initialPrimaryTickCount:a})?c=i.tickLayout:(c=this.calculateTickLayout(h,e?1:2,d,a),this.tickLayoutCache={domain:h,rangeExtent:g,nice:e,gridLength:f,visibleRange:d,initialPrimaryTickCount:a,tickLayout:c})}let{rawTickCount:i=0,fractionDigits:j,bbox:k}=c,l=g.rawTickCount??0;return this.tickLayout=c.layout,this.layout.label={fractionDigits:j,spacing:this.label.spacing,format:this.label.format},this.layoutCrossLines(),{primaryTickCount:0!==i&&0!==l?{zoomed:i,unzoomed:l}:void 0,bbox:k}}invalidateLayoutCache(){this.unzoomedTickLayoutCache=void 0,this.tickLayoutCache=void 0,this.tickLayout=void 0}updateCrossLines(){let a=this.hasDefinedDomain()||this.hasVisibleSeries();this.crossLines.forEach(b=>{b.update(a)})}updatePosition(){let{crossLineRangeGroup:a,crossLineLineGroup:b,crossLineLabelGroup:c,gridGroup:d,translation:e}=this,f=Math.floor(e.x),g=Math.floor(e.y);d.setProperties({translationX:f,translationY:g}),a.setProperties({translationX:f,translationY:g}),b.setProperties({translationX:f,translationY:g}),c.setProperties({translationX:f,translationY:g})}tickFormatter(a,b,c,d,e,f="long"){let g,h,i,{moduleCtx:j,label:k}=this,{formatManager:l}=j,m=c?this.primaryLabel:void 0,n=this.tickFormatParams(a,b,d,e),o=this.formatterBoundSeries.get();if("number"===n.type)g=n.fractionDigits;else if("date"===n.type){let{unit:a,step:b,epoch:c}=n;h={unit:a,step:b,epoch:c},i=n.truncateDate}let p=this.uncachedCallWithContext.bind(this),q={datum:void 0,seriesId:void 0,legendItemName:void 0,key:void 0,source:"axis-label",property:this.direction,domain:a,boundSeries:o},r=m??k,s=c?k.format:void 0,t={specifier:hK.mergeSpecifiers(m?.format,k.format),truncateDate:i};return(a,b)=>{let c=this.datumFormatParams(a,q,g,h,f);return c.value=a,r.formatValue(p,c,b,{specifier:s,dateStyle:f,truncateDate:i})??l.format(p,c,t)??l.defaultFormat(c,t)}}formatDatum(a,b,c,d,e,f,g,h,i,j){let k;if(null==b)return"";let{moduleCtx:l,direction:m,dataDomain:n}=this;h??(h=n.domain);let{formatManager:o}=l,p=this.formatterBoundSeries.get();switch(c){case"crosshair":case"annotation-label":k=this.layout.label.fractionDigits+1;break;case"series-label":k=2;break;case"tooltip":k=3;break;case"legend-label":k=void 0}let q=this.datumFormatParams(b,{source:c,datum:f,seriesId:d,legendItemName:e,key:g,property:m,domain:h,boundSeries:p},k,void 0,"long"),{type:r,value:s}=q,t=this.createCallWithContext(a),u=i?.formatValue(t,r,s,j??q)??o.format(t,q)??this.label.formatValue(t,q,NaN)??o.defaultFormat(q);return aM(u)?u:String(u)}getBBox(){return this.axisGroup.getBBox()}initCrossLine(a){a.scale=this.scale,a.gridLength=this.gridLength}hasVisibleSeries(){return this.boundSeries.some(a=>a.isEnabled())}clipTickLines(a,b,c,d){this.tickLineGroup.setClipRect(new dt(a,b,c,d))}clipGrid(a,b,c,d){this.gridGroup.setClipRect(new dt(a,b,c,d))}getTitleFormatterParams(a){let{direction:b}=this;return{domain:a,direction:b,boundSeries:this.formatterBoundSeries.get(),defaultValue:this.title?.text}}normaliseDataDomain(a){return{domain:[...a],clipped:!1}}getLayoutState(){return{id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale,...this.layout}}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),{...this.moduleCtx,parent:this.axisContext}}createAxisContext(){let{scale:a}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:iG.is(a)||iK.is(a),getCanvasBounds:()=>ff.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce((a,b)=>(b.getKeyProperties(this.direction).forEach(b=>a.add(b)),a),new Set),seriesIds:()=>this.boundSeries.map(a=>a.id),scaleInvert:b=>a.invert(b,!0),scaleInvertNearest:b=>a.invert(b,!0),formatScaleValue:(a,b,c)=>this.formatDatum(void 0,a,b,void 0,void 0,void 0,void 0,void 0,c),attachLabel:a=>this.attachLabel(a),inRange:(a,b)=>this.inRange(a,b),getRangeOverflow:a=>this.getRangeOverflow(a),pickBand:a=>this.pickBand(a)}}pickBand(a){if(!iJ.is(this.scale))return;let{scale:b,range:c}=this,d=b.invert(this.isVertical()?a.y:a.x,!0),e=b.bandwidth??0,f=((b.step??0)-e)/2,g=b.convert(d);return{id:this.id,value:d,band:[iA(g-f,c),iA(g+e+f,c)],position:g}}isVertical(){return"y"===this.direction}isReversed(){return this.reverse}cachedCallWithContext(a,...b){let{callbackCache:c,chartService:d}=this.moduleCtx;return c.call([this,d],a,...b)}uncachedCallWithContext(a,...b){let{chartService:c}=this.moduleCtx;return fn([this,c],a,...b)}createCallWithContext(a){let{chartService:b}=this.moduleCtx;return(c,...d)=>fn([a,this,b],c,...d)}};kd.defaultTickMinSpacing=50,kd.CrossLineConstructor=jX,dl([ey],kd.prototype,"nice",2),dl([ey],kd.prototype,"reverse",2),dl([ey],kd.prototype,"keys",2),dl([ey],kd.prototype,"interval",2),dl([ey],kd.prototype,"title",2),dl([dG((a,b,c)=>a.onGridLengthChange(b,c))],kd.prototype,"gridLength",2);var ke=kd,kf=class extends j${constructor(){super(...arguments),this.autoRotateAngle=335}};dl([ey],kf.prototype,"autoRotate",2),dl([ey],kf.prototype,"autoRotateAngle",2);var kg=6e4*new Date().getTimezoneOffset(),kh={millisecond:{milliseconds:1,hierarchy:"day",encode:a=>a.getTime(),decode:a=>new Date(a)},second:{milliseconds:1e3,hierarchy:"day",encode:(a,b)=>Math.floor((a.getTime()-(b?0:kg))/1e3),decode:(a,b)=>new Date((b?0:kg)+1e3*a)},minute:{milliseconds:6e4,hierarchy:"day",encode:(a,b)=>Math.floor((a.getTime()-(b?0:kg))/6e4),decode:(a,b)=>new Date((b?0:kg)+6e4*a)},hour:{milliseconds:36e5,hierarchy:"day",encode:(a,b)=>Math.floor((a.getTime()-(b?0:kg))/36e5),decode:(a,b)=>new Date((b?0:kg)+36e5*a)},day:{milliseconds:864e5,hierarchy:"month",encode(a,b){let c=b?0:6e4*a.getTimezoneOffset();return Math.floor((a.getTime()-c)/864e5)},decode(a,b){let c;return b?((c=new Date(0)).setUTCDate(c.getUTCDate()+a),c.setUTCHours(0,0,0,0)):(c=new Date(1970,0,1)).setDate(c.getDate()+a),c}},month:{milliseconds:2592e6,hierarchy:"year",encode:(a,b)=>b?12*a.getUTCFullYear()+a.getUTCMonth():12*a.getFullYear()+a.getMonth(),decode(a,b){if(b){let b=Math.floor(a/12);return new Date(Date.UTC(b,a-12*b,1))}{let b=Math.floor(a/12);return new Date(b,a-12*b,1)}}},year:{milliseconds:31536e6,hierarchy:void 0,encode:(a,b)=>b?a.getUTCFullYear():a.getFullYear(),decode(a,b){let c;return b?((c=new Date).setUTCFullYear(a),c.setUTCMonth(0,1),c.setUTCHours(0,0,0,0)):c=new Date(a,0,1,0,0,0,0),c}}};function ki(a){return"string"==typeof a?{unit:a,step:1,epoch:void 0,utc:!1}:{unit:a.unit,step:a.step??1,epoch:a.epoch,utc:a.utc??!1}}function kj(a,b,c,d){return null==c?0:Math.floor(kh[a].encode(new Date(c),d))%b}function kk(a,b,c,d,e){return Math.floor((kh[b].encode(new Date(a),d)-e)/c)}function kl(a,b,c,d,e){return kh[b].decode(a*c+e,d)}function km(a,b,c,d,e){return kl(kk(new Date(a),b,c,d,e),b,c,d,e)}function kn(a,b,c,d,e){return kl(kk(new Date(Number(a)-1),b,c,d,e)+1,b,c,d,e)}function ko(a,b){let{unit:c,step:d,epoch:e,utc:f}=ki(a),g=kj(c,d,e,f);return km(b,c,d,f,g)}function kp(a,b){let{unit:c,step:d,epoch:e,utc:f}=ki(a),g=kj(c,d,e,f);return kn(b,c,d,f,g)}function kq(a,b){let{unit:c,step:d,epoch:e,utc:f}=ki(a),g=kj(c,d,e,f);return kl(kk(kn(b,c,d,f,g),c,d,f,g)-1,c,d,f,g)}function kr(a,b){let{unit:c,step:d,epoch:e,utc:f}=ki(a),g=kj(c,d,e,f);return kl(kk(km(b,c,d,f,g),c,d,f,g)+1,c,d,f,g)}function ks(a,b,c){if(a.valueOf()>b.valueOf()&&([a,b]=[b,a],null!=c&&(c=[1-c[1],1-c[0]])),null!=c){let d=b.valueOf()-a.valueOf(),e=a.valueOf();a=new Date(e+c[0]*d),b=new Date(e+c[1]*d)}return[new Date(a),new Date(b)]}function kt(a,b,c,{extend:d=!1,visibleRange:e=[0,1],limit:f,defaultAlignment:g="start"}={}){let h,i=ki(a),{unit:j,step:k,utc:l}=i;h=null!=i.epoch?i.epoch:"interval"===g?void 0:b.valueOf()>c.valueOf()?c:b;let m=kj(i.unit,i.step,h,i.utc),[n,o]=ks(b,c,e);n=d?km(n,j,k,l,m):kn(n,j,k,l,m),o=d?kn(o,j,k,l,m):km(o,j,k,l,m);let p=kk(n,j,k,l,m),q=kk(o,j,k,l,m);return null!=f&&q-p>f&&(q=p+f),{range:[p,q],unit:j,step:k,utc:l,offset:m}}function ku(a,b,c,d){let{range:[e,f]}=kt(a,b,c,d);return Math.abs(f-e)}function kv(a,b,c,d){let{range:[e,f],unit:g,step:h,utc:i,offset:j}=kt(a,b,c,d),k=[];for(let a=e;a<=f;a+=1){let b=kl(a,g,h,i,j);k.push(b)}return k}function kw(a,b,c,{extend:d,visibleRange:e,limit:f,defaultAlignment:g}={}){let{range:[h]}=kt(a,b,c,{extend:d,visibleRange:e,limit:f,defaultAlignment:g}),{range:[i]}=kt(a,b,c,{extend:d,limit:f,defaultAlignment:g});return h-i}function kx(a){return"string"==typeof a?a:a.unit}function ky(a){return"string"==typeof a?1:a.step??1}function kz(a){return"string"==typeof a?void 0:a.epoch}function kA(a){return kh[kx(a)].hierarchy}function kB(a){return ky(a)*kh[kx(a)].milliseconds}function kC(a){return a instanceof Date?a.getTime():a}function kD(a){if(a<1e3)return"millisecond";if(a<6e4)return"second";if(a<36e5)return"minute";if(a<828e5)return"hour";if(a<24192e5)return"day";else if(a<31536e6)return"month";else return"year"}function kE(a){if(0===a.length)return"millisecond";if(1===a.length)return kF(a[0]);let b=1/0;for(let c=1;c<a.length;c++)b=Math.min(b,Math.abs(a[c].valueOf()-a[c-1].valueOf()));return kD(b)}function kF(a){if(ko("second",a)<a)return"millisecond";if(ko("minute",a)<a)return"second";if(ko("hour",a)<a)return"minute";if(ko("day",a)<a)return"hour";if(ko("month",a)<a)return"day";else if(ko("year",a)<a)return"month";return"year"}function kG(a){let[b,c]=0===a.length?[0,0]:iB([a[0].valueOf(),a[a.length-1].valueOf()]);return new Date(b).getFullYear()!==new Date(c).getFullYear()?void 0:new Date(b).getMonth()!==new Date(c).getMonth()?"year":new Date(b).getDate()!==new Date(c).getDate()?"month":"day"}function kH(a,b,c){if(null==c||0===c[0]&&1===c[1])return;let d=aA(0,Math.floor(c[0]*a.length),a.length),e=aA(0,Math.ceil(c[1]*a.length),a.length);return[b?a.length-e:d,b?a.length-d:e]}function kI(a,b,c){let d=kH(a,b,c);if(null==d)return{ticks:a,count:a.length,firstTickIndex:0};let[e,f]=d;return{ticks:a.slice(e,f),count:a.length,firstTickIndex:e}}var kJ=class a extends iJ{constructor(){super(...arguments),this.type="category",this.defaultTickCount=0,this.index=new Map,this.indexInitialized=!1,this._domain=[]}static is(b){return b instanceof a}set domain(a){this._domain!==a&&(this.invalid=!0,this._domain=a,this.index.clear(),this.indexInitialized=!1)}get domain(){return this._domain}get bands(){return this._domain}normalizeDomains(...a){let b,c=new Set,d=!0;for(let e of a)c.has(e)||(c.add(e),null==b?b=kK(e):(d&&(d=function(a,b){let c=-1;for(let d of a){let a=b.indexOf(d);if(-1===a)c=1/0;else{if(a<=c)return!1;c=a}}return!0}(e,b)),b=kK([...b,...e])));return b??(b=[]),{domain:b,animatable:d}}toDomain(a){}invert(a,b=!1){this.refresh();let c=b?this.bandwidth/2:0,d=this.invertNearestIndex(Math.max(0,a-c));return b||a===this.ordinalRange(d)?this.domain[d]:void 0}ticks(a,b=this.domain,c){let{bands:d}=this,{tickCount:e}=a;if(0===e){let a=+(d.length>1);return{ticks:d[a]?[d[a]]:[],count:void 0,firstTickIndex:a}}let f=null!=e&&0!==e?d.length/e|0:1;if((f=iE(f))<=1)return kI(b,!1,c);e=d.length/f|0;let g=f*e,h=iE((d.length-g)/2|0),i=aA(0,Math.floor((c?.[0]??0)*d.length),d.length),j=aA(0,Math.ceil((c?.[1]??1)*d.length),d.length),k=Math.floor((i-h)/f)*f+h,l=Math.ceil((j-h)/f)*f+h,m=[];for(let a=k;a<l;a+=f)a>=0&&a<d.length&&m.push(d[a]);let n=m.length>0?this.findIndex(m[0]):void 0;return null!=n&&(n=Math.floor((n-h)/f)),{ticks:m,count:void 0,firstTickIndex:n}}findIndex(a){let{index:b,indexInitialized:c}=this;if(!c){let{domain:a}=this;for(let c=0;c<a.length;c++)b.set(kC(a[c]),c);this.indexInitialized=!0}return b.get(kC(a))}};function kK(a){let b,c=new Set;for(let d of a){let e=kC(d),f=c.size;c.add(e),c.size!==f?b?.push(d):b??(b=a.slice(0,c.size))}return b??a}function kL(a,b){return a.valueOf()-b.valueOf()}function kM(a){let b=a.slice().sort(kL);return null==kN(b)?function(a){let b=NaN,c=[];for(let d of a){let a=d.valueOf();b!==a&&c.push(d),b=a}return c}(b):b}function kN(a){if(0===a.length)return 1;let b=Number(a[a.length-1])>Number(a[0])?1:-1,c=-1/0*b;for(let d of a){let a=d.valueOf();if(Math.sign(a-c)!==b)return;c=a}return b}function kO(a,[b,c],[d,e]){let f=e-d,g=c-b;return[(b+g*a[0]-d)/f,(b+g*a[1]-d)/f]}var kP=(a,b)=>({duration:kB(a)*b,timeInterval:a,step:b}),kQ=[kP({unit:"second"},1),kP({unit:"second"},5),kP({unit:"second"},15),kP({unit:"second"},30),kP({unit:"minute"},1),kP({unit:"minute"},5),kP({unit:"minute"},15),kP({unit:"minute"},30),kP({unit:"hour"},1),kP({unit:"hour"},3),kP({unit:"hour"},6),kP({unit:"hour"},12),kP({unit:"day"},1),kP({unit:"day"},2),kP({unit:"day",step:7},1),kP({unit:"day",step:7},2),kP({unit:"day",step:7},3),kP({unit:"month"},1),kP({unit:"month"},2),kP({unit:"month"},3),kP({unit:"month"},4),kP({unit:"month"},6),kP({unit:"year"},1)],kR=[1,2,5,10];function kS(a,b){return Math.abs(Math.round(a)-a)<b}function kT(a,b,c){return Math.abs(b-a)>=c?Math.abs(b-a)/c+1:1}function kU(a,b,c,d,e,f){if(a===b)return{ticks:[a],count:1,firstTickIndex:0};if(c<2)return{ticks:[a,b],count:2,firstTickIndex:0};let g=kZ(a,b,c,d,e);if(!Number.isFinite(g))return{ticks:[],count:0,firstTickIndex:void 0};let h=a,i=b;kS(h/g,1e-12)||(h=Math.ceil(h/g)*g),kS(i/g,1e-12)||(i=Math.floor(i/g)*g),null!=f&&(f=kO(f,[a,b],[h,i]));let{ticks:j}=k0(h,i,g,f),k=j.at(0);return{ticks:j,count:kT(h,i,g),firstTickIndex:null==k?void 0:Math.round((k-h)/g)}}var kV=Math.floor(4.666666666666667)/10;function kW({timeInterval:a,step:b}){let c=kB(a)*b,d=kA(a);return c<=((d?kB(d):void 0)??1/0)*kV}function kX(a,{weekStart:b}){if("day"===a.unit&&7===a.step)return b}function kY(a,b,c,d,e,{weekStart:f,primaryOnly:g=!1,targetInterval:h}){if(c<=0)return;let i=h??Math.abs(b-a)/Math.max(c,1),j=kQ.findLast(a=>(!g||kW(a))&&i>a.duration),k=kQ.find(a=>(!g||kW(a))&&i<=a.duration);if(null==j)return{unit:"millisecond",step:Math.max(kZ(a,b,c,d,e),1)};if(null==k)return{unit:"year",step:null==h?kZ(a/31536e6,b/31536e6,c,d,e):1};let{timeInterval:l,step:m}=i-j.duration<k.duration-i?j:k;return{unit:l.unit,step:ky(l)*m,epoch:kX(l,{weekStart:f})}}function kZ(a,b,c,d=0,e=1/0){if(a===b)return aA(1,d,e);if(c<1)return NaN;let f=Math.abs(b-a),g=10**Math.floor(Math.log10(f/c)),h=NaN,i=1/0,j=!1;for(let a of kR){let b=Math.ceil(f/(a*g)),k=b>=d&&b<=e;if(j&&!k)continue;let l=Math.abs(b-c);(i>l||j!==k)&&(j||(j=k),i=l,h=a)}return h*g}function k$(a){for(let b=a.length-1;b>=0;b-=1)if("0"!==a[b])return b+1;return 0}function k_(a,b){let c=a$(b??",f");if(null==c)return;(null==c.precision||isNaN(c.precision))&&(!c.type||"eEFgGnprs".includes(c.type)?c.precision=Math.max(...a.map(a=>{if(!Number.isFinite(a))return 0;let[b,d]=a.toExponential((c.type?6:12)-1).split(/[.e]/g);return+("1"!==b&&"-1"!==b)+k$(d)+1})):"f%".includes(c.type)&&(c.precision=Math.max(...a.map(a=>{if(!Number.isFinite(a)||0===a)return 0;let b=Math.floor(Math.log10(Math.abs(a))),d=c.type?6:12;return Math.max(0,k$(a.toExponential(d-1).split(/[.e]/g)[1])-b)}))));let d=a_(c);return a=>d(Number(a))}function k0(a,b,c,d){let e,f;if(!Number.isFinite(c)||c<=0)return{ticks:[],count:0,firstTickIndex:void 0};if(a===b)return{ticks:[a],count:1,firstTickIndex:0};let g=10**aE(c),h=Math.min(a,b),i=Math.max(a,b);if(null!=d&&(0!==d[0]||1!==d[1])){let c=b-a,g=a+c*d[0],h=b-c*(1-d[1]);e=Math.min(g,h),f=Math.max(g,h)}else e=h,f=i;e=Math.floor(e*g)/g,f=Math.ceil(f*g)/g;let j=[];for(let a=0;;a+=1){let b=Math.round((h+c*a)*g)/g;if(b>i)break;b>=e&&b<=f&&j.push(b)}let k=j.at(0);return{ticks:j,count:kT(h,i,c),firstTickIndex:null==k?void 0:Math.round((k-h)/c)}}function k1(a,b){return a>=b&&(aa.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0)}function k2(a,b){let c=Math.abs(b-a),d=10**Math.floor(Math.log10(c)),e=1/0,f=[a,b];for(let g of kR){let h=g*d,i=Math.floor(a/h)*h,j=Math.ceil(b/h)*h,k=1-c/Math.abs(j-i);e>k&&(e=k,f=[i,j])}return f}function k3(a,b,c,d,e,f){if(a<=0)return{minTickCount:0,maxTickCount:0,tickCount:0};f=Math.max(f,a/(e+1)),c??(c=f),d??(d=a),c>d&&(c===f?c=d:d=c);let g=Math.max(1,Math.floor(a/(b*(c=Math.max(c,1))))),h=Math.min(g,Math.ceil(a/(b*d))),i=aA(h,Math.floor(e/b),g);return{minTickCount:h,maxTickCount:g,tickCount:i}}var k4=new Date(1970,0,4),k5=class a extends iG{constructor(){super([],[0,1]),this.type="time"}static is(b){return b instanceof a}toDomain(a){return new Date(a)}convert(a,b){return super.convert(a?.valueOf()??NaN,b)}invert(a){return new Date(super.invert(a))}niceDomain(a,b=this.domain){if(b.length<2)return[];let[c,d]=b,e=this.getPixelRange();for(let b=0;b<4;b++){let[b,f]=function(a,b,c,d){let e,{interval:f}=c,g=Math.min(kC(a),kC(b)),h=Math.max(kC(a),kC(b));if(aS(f)||"string"==typeof f)e=f;else{let a;"number"==typeof f&&k1(a=(h-g)/Math.max(f,1),d)&&(a=void 0),a??(a=c.tickCount??iG.defaultTickCount),e=kY(g,h,a,c.minTickCount,c.maxTickCount,{weekStart:k4})}if(null==e)return[a,b];let i=kv(e,new Date(g),new Date(h),{extend:!0});if(null==i||i.length<2)return[a,b];let j=i[0],k=i[i.length-1];return a<=b?[j,k]:[k,j]}(c,d,a,e);if(kC(c)===kC(b)&&kC(d)===kC(f))break;c=b,d=f}return[c,d]}ticks(a,b=this.domain,c=[0,1],{extend:d=!1}={}){let{nice:e,interval:f,tickCount:g=iG.defaultTickCount,minTickCount:h,maxTickCount:i}=a;if(b.length<2)return;let j=b.map(kC),k=j[0],l=j[j.length-1];if(null!=f)return{ticks:k6({start:k,stop:l,interval:f,availableRange:this.getPixelRange(),visibleRange:c,extend:d})??function({start:a,stop:b,tickCount:c,minTickCount:d,maxTickCount:e,visibleRange:f,extend:g}){let h=kY(a,b,c,d,e,{weekStart:k4});return h?kv(h,new Date(a),new Date(b),{visibleRange:f,extend:g}):[]}({start:k,stop:l,tickCount:g,minTickCount:h,maxTickCount:i,visibleRange:c,extend:d}),count:void 0};if(e&&2===g)return{ticks:b,count:void 0};if(e&&1===g)return{ticks:b.slice(0,1),count:void 0};let m=kY(k,l,g,h,i,{weekStart:k4});if(null!=m)return{ticks:kv(m,new Date(k),new Date(l),{visibleRange:c,extend:d}),count:void 0,firstTickIndex:kw(m,new Date(k),new Date(l),{visibleRange:c,extend:d}),timeInterval:m}}};function k6({start:a,stop:b,interval:c,availableRange:d,visibleRange:e,extend:f}){if(!c)return[];if(aS(c)||"string"==typeof c){let g=kv(c,new Date(a),new Date(b),{visibleRange:e,extend:f});if(k1(g.length,d))return;return g}let g=Math.abs(c);if(k1(Math.abs(b-a)/g,d))return;let h=kQ.findLast(a=>g%a.duration==0);if(h){let{timeInterval:c,step:d,duration:i}=h;return kv({...c,step:d*ky(c)*Math.round(g/i),epoch:kX(c,{weekStart:k4})},new Date(a),new Date(b),{visibleRange:e,extend:f})}let i=new Date(Math.min(a,b)),j=new Date(Math.max(a,b)),k=[];for(;i<=j;)k.push(i),(i=new Date(i)).setMilliseconds(i.getMilliseconds()+g);return k}var k7=class a extends iK{constructor(){super(...arguments),this.type="ordinal-time",this.defaultTickCount=iG.defaultTickCount,this._domain=[],this.isReversed=!1}static is(b){return b instanceof a}set domain(a){a!==this._domain&&(this.invalid=!0,this._domain=a,this._bands=void 0,this.isReversed=k8(a))}get domain(){return this._domain}get bands(){return this._bands??(this._bands=this.isReversed?this.domain.slice().reverse():this.domain),this._bands}normalizeDomains(...a){let b=a.filter(a=>a.length>0);if(0===b.length)return{domain:[],animatable:!1};if(1===b.length){let a=b[0],c=kN(a);return -1===c?a=a.slice().reverse():null==c&&(a=kM(a.slice())),{domain:a,animatable:!0}}return{domain:kM(b.flat()),animatable:!0}}ticks(a,b,c=[0,1],{extend:d=!1,dropInitial:e=!1}={}){let f,g,{interval:h,maxTickCount:i,tickCount:j=i}=a,{bands:k}=this;if(!k.length)return;if(this.refresh(),null==h){let{ticks:a,tickOffset:e,tickEvery:f}=this.getDefaultTicks(b,j,c,d),g=a.length>0?this.findIndex(a[0]):void 0;return{ticks:a,count:void 0,firstTickIndex:g=null!=g?Math.floor((g-e)/f):void 0}}b&&b.length>=2?(f=b[0].valueOf(),g=b[b.length-1].valueOf()):(f=k[0].valueOf(),g=k[k.length-1].valueOf());let[l,m]=this.range,n=k6({start:f,stop:g,interval:h,availableRange:Math.abs(m-l),visibleRange:c,extend:d})??this.getDefaultTicks(b,j,c,d).ticks,o=[],p=-1;for(let a of n){let b=this.findIndex(a,1)??-1,c=b===p;p=b,e&&0===b||-1===b||c||o.push(k[b])}return{ticks:o,count:void 0,firstTickIndex:void 0}}stepTicks(a,b,c=[0,1],d=!0){let e=b?this.bandDomainIndices(b):void 0,f=this.ticksEvery(e,c,a,0,!1),g=f.at(-1),h=d&&a>1?e?.[1]:void 0,i=null!=h&&null!=g?this.findIndex(g):void 0;return null!=i&&null!=h&&h-i<a&&f.pop(),f}bandCount(a=[0,1]){let{domain:b}=this,c=Math.floor(a[0]*b.length);return Math.ceil(a[1]*b.length)-c}getDefaultTicks(a,b,c,d){let{bands:e}=this,f=Math.ceil(e.length/b),g=Math.floor(f/2),h=a?this.bandDomainIndices(a):void 0;return{ticks:this.ticksEvery(h,c,f,g,d),tickOffset:g,tickEvery:f}}bandDomainIndices(a){let b=k8(a);return[this.findIndex(a[b?a.length-1:0],1)??0,this.findIndex(a[b?0:a.length-1],1)??this.bands.length-1]}ticksEvery([a,b]=[0,this.bands.length],c,d,e,f){let g,{bands:h}=this,i=b-a+1,j=a+Math.floor(c[0]*i),k=a+Math.ceil(c[1]*i);if(f&&(j-=d,k+=d),j=Math.max(j,0),k=Math.min(k,h.length),d<=1)g=h.slice(j,k);else{g=[];for(let b=j;b<k;b+=1)(b-a+e)%d==0&&g.push(h[b])}return g}};function k8(a){return a.length>0&&a[0]>a[a.length-1]}var k9=class a extends iK{constructor(){super(...arguments),this.type="unit-time",this.defaultTickCount=12,this._domain=[],this._bands=void 0}static is(b){return b instanceof a}static supportsInterval(a,b){return la(a,b)}set domain(a){a!==this._domain&&(this._domain=a,this._bands=void 0)}get domain(){return this._domain}get interval(){return this._interval}set interval(a){this._interval!==a&&(this._interval=a,this._bands=void 0)}get bands(){return this._bands??(this._bands=this.calculateBands(this._domain,[0,1]).bands),this._bands}normalizeDomains(...a){return iH(...a)}convert(a,b){this.refresh(),a instanceof Date||(a=new Date(a));let{domain:c,interval:d}=this;if(c.length<2)return NaN;if(b?.clamp!==!0&&null!=d){let b=a.valueOf(),[e,f]=lb(c,d),g=Math.min(e.valueOf(),f.valueOf()),h=kr(d,new Date(Math.max(e.valueOf(),f.valueOf()))).valueOf();if(b<g||b>=h)return NaN}return super.convert(a,b)}calculateBands(a,b,c=!1){if(a===this.domain&&0===b[0]&&1===b[1]&&!c&&null!=this._bands)return{bands:this._bands,firstBandIndex:0};if(a.length<2)return{bands:[],firstBandIndex:void 0};let{interval:d}=this;if(null==d)return{bands:[],firstBandIndex:void 0};let e={visibleRange:b,extend:c};if(!la(a,d,e))return{bands:[],firstBandIndex:void 0};let[f,g]=lb(a,d);return ku(d,f,g,e)>5e7?(aa.warnOnce("the configured unit results in too many bands, ignoring. Supply a larger unit."),{bands:[],firstBandIndex:void 0}):{bands:kv(d,f,g,e),firstBandIndex:kw(d,f,g,e)}}ticks({interval:a},b=this.domain,c=[0,1],{extend:d=!1}={}){let e,f,g,h,i,j,k,l,m;if(b.length<2)return;if(b!==this.domain||d)({bands:e,firstBandIndex:f}=this.calculateBands(b,c,d));else{var n;({bands:e}=this.calculateBands(b,[0,1],!1)),f=(g=kH(n=e,!1,c)??[0,n.length])[0]}if(null==a)return{ticks:e,count:void 0,firstTickIndex:f};let o=this.interval?kB(this.interval):1/0,p=Math.min(b[0].valueOf(),b[1].valueOf()),q=Math.max(b[0].valueOf(),b[1].valueOf());if(aS(a)||"string"==typeof a)h=kv(a,b[0],b[1],{extend:!0,visibleRange:c}),i=0,j=h.length-1;else{let a=g?g[0]:0,b=g?g[1]:e.length-1;h=e,i=cN(a,b,a=>e[a].valueOf()<=p)??a,j=cN(a,b,a=>e[a].valueOf()<=q)??b}let r=[];for(let a=i;a<=j;a++){let b=h[a].valueOf(),c=cN(0,e.length-1,a=>e[a].valueOf()<=b),d=null!=c&&c!=k?e[c]:void 0;k=c,null!=d&&b-d.getTime()<=o&&r.push(d)}if(this.interval){let a=lb([new Date(p),new Date(q)],this.interval);l=a[0].valueOf(),m=a[1].valueOf()}else l=p,m=q;let s=cO(0,r.length-1,a=>r[a].valueOf()>=l)??0,t=cN(0,r.length-1,a=>r[a].valueOf()<=m)??r.length-1;return d&&(s=Math.max(s-1,0),t=Math.min(t+1,r.length-1)),{ticks:r.slice(s,t+1),count:r.length,firstTickIndex:f}}};function la(a,b,c){let[d,e]=lb(a,b);return 5e7>=ku(b,d,e,c)}function lb(a,b){return[ko(b,a[0]),ko(b,a[1])]}function lc(){let a=new Map;return b=>{let c=a.get(b);return c?(a.set(b,c+1),`${b}_${c}`):(a.set(b,1),b)}}var ld=[1,2,3,4,6,8,9,10,12];function le(a,b=0){let c=[];for(let d of a){let{x:a,y:e,width:f,height:g}=d;if(c.some(c=>cK(c,a,e,f+b,g+b)))return!0;c.push(d)}return!1}function lf(a,b){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c+=1)if(a[c]?.valueOf()!==b[c]?.valueOf())return!1;return!0}function lg(a){if(a.length<2)return 1/0;let b=0,c=a[0].translation;for(let d=1;d<a.length;d++){let e=a[d].translation;b=Math.max(b,Math.abs(e-c)),c=e}return b}function lh(a,{niceDomain:b,rawTicks:c,rawFirstTickIndex:d=0,generatePrimaryTicks:e,primaryTicksIndices:f,alignment:g,fractionDigits:h,timeInterval:i}){let{scale:j,label:k,tickFormatter:l,inRange:m,isVertical:n,sizeLimit:o=1/0}=a,p=k5.is(j)||iK.is(j),q=db(k),r=lc(),s=[];return li(j,b,()=>{let a=iJ.is(j)?j.bandwidth??1/0:1/0,t=(j.bandwidth??0)/2,u=function(a,b,c,d,e,f,g){let h=b?"component":"long",i=b&&f?kA(f):void 0,j=b?g(c,d,!0,e,i,h):null,k=a?g(c,d,!1,e,f,h):null;return(a,b,c)=>(a?j:k)?.(b,c)??String(b)}(k.enabled,e,b,c,h,i,l),v={font:k,maxWidth:n?o:a,maxHeight:n?a:o,overflow:k.truncate?"ellipsis":"hide",textWrap:k.wrapping};for(let a=0;a<c.length;a++){let b,e=c[a],h=j.convert(e,{alignment:g})+t;if(m&&!m(h))continue;let i=f?.has(a)??!1,l=u(i,e,a),n=null;k.avoidCollisions&&(n=aM(l)?dh(l,v):de(l,v)||null);let o=n??l,w=aM(o),x=o!==l&&(!w||c8(o.at(-1)));if(p){let a=e?.valueOf();Number.isFinite(a)&&(b=r(`v:${a}`))}b??(b=r(`l:${w?bh(o.flat()):o}`)),s.push({tick:e,tickId:b,tickLabel:o,isPrimary:i,index:a+d,textUntruncated:x?bh(l):void 0,textMetrics:w?dc(o,k):q.measureLines(o),translation:Math.floor(h)})}}),s}function li(a,b,c){let d=a.domain;try{a.domain=b,c()}finally{a.domain=d}}function lj(a,b,c,d,e,f,g,h){let i,j,k;if(!k5.is(a)&&!iK.is(a))return;let l=kA(f);if(null==l)return;g&&(b=[1-b[1],1-b[0]]);let m=Math.min(a.domain[0].valueOf(),a.domain[a.domain.length-1].valueOf()),n=Math.max(a.domain[0].valueOf(),a.domain[a.domain.length-1].valueOf()),[o,p]=ks(new Date(m),new Date(n),b);(o=ko(l,o)).valueOf()>=m&&(o=kq(l,o)),(p=kp(l,p)).valueOf()<=n&&(p=kr(l,p));let q=kv(l,o,p),r=kB(f),s=k7.is(a),t={...e,interval:f},u=[],v=0;if(k7.is(a)){let e=kx(f);j=null!=h&&kB(h)>=kB(e)?2:3,k=1;let g=a.bandCount(b)/(c/d*18);v=ld.findLast(a=>g>=a)??1}else k9.is(a)&&(null==a.interval||kB(a.interval)>=r)?j=1:(j=0,k=2);for(let b=0;b<q.length-1;b++){let c,d=q[b],e=q[b+1],f=0===b,g=b===q.length-2,h=e.valueOf()-d.valueOf(),k=[Math.max((m-d.valueOf())/h,0),Math.min((n-d.valueOf())/h,1)];switch(j){case 0:c=function(a,b,c,d){if(null==a)return b;if("number"!=typeof a){let e=b[0];return kv("string"==typeof a?{unit:a,epoch:e}:{...a,epoch:e},b[0],b[1],{visibleRange:c,extend:d})}let e=[],f=b[0].valueOf(),g=b[1].valueOf();for(let b=f;b<=g;b+=a)e.push(new Date(b));return e}(t.interval,[d,e],k,!0);break;case 1:case 3:{let b=a.ticks(t,[d,e],k,{extend:!0,dropInitial:!0});c=b?.ticks??[];break}case 2:c=a.stepTicks(v,[d,e],void 0,!g)}if(!function(a,b){let c=0;for(;c<a.length&&b(a[c]);)c+=1;let d=c;0!==d&&a.splice(0,d)}(c,a=>a.valueOf()<d.valueOf()),g||function(a,b){let c=a.length-1;for(;c>=0&&b(a[c]);)c-=1;let d=a.length-1-c;0!==d&&a.splice(a.length-d,d)}(c,a=>{switch(j){case 0:case 3:return a.valueOf()+r>e.valueOf();case 1:case 2:return a.valueOf()>=e.valueOf()}}),0===c.length)continue;let l=kL(c[0],d);(0===j?0!==l:!(l<=r))||s&&f||(i??(i=new Set),i.add(u.length)),u.push(...c)}return i?.size===1&&i.has(0)&&(i=void 0),{ticks:u,primaryTicksIndices:i,alignment:k}}function lk(a,b,c,d,e){let f=ln(a.format,d);if(null==f)return{width:0,height:0};let g=bb(f),h=d?kA(d):void 0,i=ln(b?.format,h),j=i?bb(i):g,k=new Date(c[0]),l=new Date(c[c.length-1]),m=h?kv(h,new Date(c[0]),new Date(c[c.length-1]),{extend:!0}):void 0,n=0,o=0;if(null!=g){let b,c,f=jL(a),h=f.left+f.right,i=f.top+f.bottom;for(let a of(null!=m&&m.length>1?(b=m[0],c=m[1]):(b=k,c=l),kv(d,b,c,{limit:50}))){let b=g(a),{width:c,height:d}=e.measureLines(b);n=Math.max(n,c+h),o=Math.max(o,d+i)}}if(null!=j&&null!=m){let a=jL(b),c=a.left+a.right,d=a.top+a.bottom;for(let a of m){let b=j(a),{width:f,height:g}=e.measureLines(b);n=Math.max(n,f+c),o=Math.max(o,g+d)}}return{width:Math.ceil(n),height:Math.ceil(o)}}function ll(a,b,c,d){return a&&!b?c*d==-1?"top":"bottom":"middle"}function lm(a,b,c,d,e){let f=b>0&&b<=Math.PI,g=c>0&&c<=Math.PI;if(a){if(!b&&!c)return"center";else if(d*(f||g?-1:1)==-1)return"end"}else if(d*e==-1)return"end";return"start"}function ln(a,b){if(null!=a){if("string"==typeof a)return a;else if(aS(a)&&null!=b)return a[kx(b)]}}function lo(a,b,c=0){let d=ej(a),e=!d&&c>=0&&c<=Math.PI?-1:1,f=!d&&c-Math.PI/2>=0&&c-Math.PI/2<=Math.PI?-1:1,g=0;return b?g=Math.PI/2*e:-1===f&&(g=Math.PI),{configuredRotation:d,defaultRotation:g,parallelFlipFlag:e,regularFlipFlag:f}}var lp=new Date(1970,0,4);function lq(a){var b;let{label:c,domain:d,axisRotation:e,labelOffset:f,sideFlag:g}=a,{defaultRotation:h,configuredRotation:i,parallelFlipFlag:j,regularFlipFlag:k}=lo(c.rotation,c.parallel,e),l=i+h,m=(b,d=0)=>{let e=c.minSpacing??10*(0===i&&0===d),g=l+d,h=jL(c);return le(function(a,b,c){let{niceDomain:d,ticks:e,timeInterval:f}=b;if(null==f)return[];let g=lg(e),{label:h,labelOffset:i,primaryLabel:j,domain:k}=a,{width:l,height:m}=lk(h,j,d??k,f,db(h)),n=[];for(let a of[0,g]){let{x:b,y:d}=ct(i,a,c);n.push({x:b,y:d,width:l,height:m})}return n}(a,b,g),e)||le(function(a,b,c,d){let e=[],f=d.left+d.right,g=d.top+d.bottom;for(let{tickLabel:d,textMetrics:h,translation:i}of a){if(!d)continue;let{x:a,y:j}=ct(b,i,c),k=h.width+f,l=h.height+g;e.push({x:a,y:j,width:k,height:l})}return e}(b.ticks,f,g,h),e)},{maxTickCount:n}=lr(a),o=(b=a,b.interval?.values?2:+(null!=b.primaryTickCount)),p=c.enabled&&c.avoidCollisions,q=Number.isFinite(n)?n:10,r=p&&c.autoRotate&&null==c.rotation,s=0,t=0,u=!0,v={tickDomain:[],niceDomain:d,ticks:[],rawTicks:[],rawTickCount:void 0,timeInterval:void 0,fractionDigits:0};for(;u&&s<=q;)({tickData:v,index:s}=function(a,b,c,d){let{step:e,values:f}=a.interval,{maxTickCount:g,minTickCount:h,tickCount:i}=lr(a),j=a=>Math.max(i-a,h),k=null==e&&null==f&&j(d)>h,l=c.rawTicks,m=i-h,n={minTickCount:h,maxTickCount:g,tickCount:j(d)},o=ls(a,b,n);if(k&&lf(o.rawTicks,l)){let c=d,e=m;for(;c<=e;){n.tickCount=j(d=(c+e)/2|0);let f=ls(a,b,n);lf(f.rawTicks,l)?c=d+1:(o=f,e=d-1)}}let{tickDomain:p,niceDomain:q,rawTicks:r,rawTickCount:s,rawFirstTickIndex:t,generatePrimaryTicks:u,primaryTicksIndices:v,alignment:w,fractionDigits:x,timeInterval:y}=o;return{tickData:{tickDomain:p,niceDomain:q,rawTicks:r,rawTickCount:s,fractionDigits:x,timeInterval:y,ticks:lh(a,{niceDomain:q,rawTicks:r,rawFirstTickIndex:t,generatePrimaryTicks:u,primaryTicksIndices:v,alignment:w,fractionDigits:x,timeInterval:y})},index:d+1}}(a,o,v,s)),t=r&&m(v,0)?ej(c.autoRotateAngle):0,u=p&&m(v,t);let w=lm(c.parallel,i,t,g,k);return{tickData:v,textAlign:w,textBaseline:ll(c.parallel,i,g,j),rotation:i+t}}function lr({scale:a,domain:b,range:c,visibleRange:d,label:e,defaultTickMinSpacing:f,interval:{minSpacing:g,maxSpacing:h}}){let{defaultTickCount:i}=a,j=iC(c),k=iC(d);if(kJ.is(a)){let a=b.length;return{tickCount:Math.min(Math.ceil(j/(k*e.fontSize)),a),minTickCount:0,maxTickCount:a}}return k3(j,k,g,h,i,f)}function ls(a,b,c){let d,e,f,g,h,i,j,{domain:k,reverse:l,visibleRange:m,scale:n,interval:o,primaryLabel:p,niceMode:q,primaryTickCount:r,minimumTimeGranularity:s}=a,t={nice:0===q,interval:o.step,...c},u={...t};u.nice||(u.nice=1===q),1===b&&null!=r&&iG.is(n)&&(d=function(a,b,c,d,e){let[f,g]=iB(b.map(Number)),h=Math.floor(c.unzoomed);if(h<=1){let[b,c]=function(a,b){let c=a,d=b,e=0;do{[c,d]=k2(c,d);let{ticks:a}=kU(c,d,5);if(a.length%2==1)return[c,d];c-=1,d+=1}while(e++<10)return[a,b]}(f,g),{ticks:h}=kU(b,c,5*Math.pow(2,-Math.ceil(Math.log2(e[1]-e[0]))),void 0,void 0,e),i=[a.toDomain(b),a.toDomain(c)];return d&&i.reverse(),{domain:i,ticks:h}}if(f===g){let a=Math.min(Math.pow(10,Math.floor(Math.log10(f))),1),b=h-1;f-=a*Math.floor(b/2),g=f+a*b}let i=f,j=g,k=function(a,b,c){var d=(b-a)/(c-1);let e=Math.pow(10,Math.floor(Math.log10(d))),f=d/e;return f>0&&f<=1?e:f>1&&f<=2?2*e:f>2&&f<=5?5*e:f>5&&f<=10?10*e:d}(i=function(a,b,c){let d=Math.pow(10,Math.floor(Math.log10(Math.abs(b-(a=Math.floor(a)))/(c-1))));return Math.floor(a/d)*d}(i,j,h),j,h);j=i+(h-1)*k;let l=Math.floor(i/k)*k,m=Math.floor(j/k)*k;l<=f&&m>=g&&(i=l,j=m);let n=[a.toDomain(i),a.toDomain(j)];return d&&n.reverse(),{domain:n,ticks:function(a,b,c){let d=Math.pow(10,aE(b)),e=[];for(let f=0;f<c;f++){let c=a+b*f;e.push(Math.round(c*d)/d)}return e}(i,k*((c.unzoomed-1)/(c.zoomed-1)),Math.floor(c.zoomed))}}(n,k,r,l,m));let v=0===q?d?.domain??n.niceDomain(t,k):k,w=v,x=p?.enabled===!0&&null==u.interval;li(n,v,()=>{switch(b){case 2:if(w=o.values,f=(e=o.values).length,k7.is(n)?j=1:k9.is(n)&&(j=2),iG.is(n)){let[a,b]=iB(v.map(Number));e=e.filter(c=>Number(c)>=a&&Number(c)<=b).sort((a,b)=>Number(a)-Number(b))}break;case 1:if(d)e=d.ticks,f=d.ticks.length;else{let a=n.ticks(u,v,m);e=a?.ticks,f=a?.count}break;default:{let a,{tickCount:b,minTickCount:d,maxTickCount:k}=c;v.length>0&&null==u.interval&&(k9.is(n)||x&&(k5.is(n)||k7.is(n)))&&(h=kY(Math.min(v[0].valueOf(),v[v.length-1].valueOf()),Math.max(v[0].valueOf(),v[v.length-1].valueOf()),b,d,k,{weekStart:null==p?lp:void 0,primaryOnly:!0})),k7.is(n)?a=s:k9.is(n)&&(a=n.interval),null!=a&&null!=h&&kB(a)>=kB(h)&&(h=a);let o=h?lj(n,m,b,k,u,h,l,s):void 0;if(o)({ticks:e,primaryTicksIndices:i,alignment:j}=o);else{let a=k9.is(n)&&null==u.interval&&null!=h?{...u,interval:h}:u,b=n.ticks(a,v,m);if(e=b?.ticks,f=b?.count,g=b?.firstTickIndex,k5.is(n)||iK.is(n)){let a="number"==typeof u.interval?kD(u.interval):u.interval;h??(h=a??b?.timeInterval)}}}}}),e??(e=[]);let y=0;for(let a of e){if("number"!=typeof a)continue;let b=aE(a);b>y&&(y=b)}return x||(i=void 0),{tickDomain:w,niceDomain:v,rawTicks:e,rawTickCount:f,rawFirstTickIndex:g,generatePrimaryTicks:x,primaryTicksIndices:i,alignment:j,fractionDigits:y,timeInterval:h}}var lt=class a extends ke{constructor(a,b){let c;super(a,b),this.maxThicknessRatio=.3,this.minimumTimeGranularity=void 0,this.headingLabelGroup=this.axisGroup.appendChild(new fk({name:`${this.id}-Axis-heading`})),this.lineNodeGroup=this.axisGroup.appendChild(new fk({name:`${this.id}-Axis-line`})),this.lineNode=this.lineNodeGroup.appendChild(new jB({zIndex:1})),this.tickLineGroupSelection=jA.select(this.tickLineGroup,jB,!1),this.gridLineGroupSelection=jA.select(this.gridLineGroup,jB,!1),this.gridFillGroupSelection=jA.select(this.gridFillGroup,f9,!1),this.tempText=new gd({debugDirty:!1}),this.tempCaption=new gm,this.animationManager=a.animationManager,this.animationState=new jH("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:a=>this.animateReadyUpdate(a),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.headingLabelGroup.appendChild(this.title.caption.node),this.cleanup.register(a.eventsHub.on("layout:complete",a=>{let b=[a.chart.width,a.chart.height];null==c||cw(b,c)||this.animationState.transition("resize"),c=b}),this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}static is(b){return b instanceof a}get horizontal(){return"top"===this.position||"bottom"===this.position}onGridVisibilityChange(){this.gridLineGroupSelection.clear(),this.gridFillGroupSelection.clear()}resetAnimation(a){"initial"===a&&this.animationState.transition("reset")}get direction(){return"top"===this.position||"bottom"===this.position?"x":"y"}createAxisContext(){return{...super.createAxisContext(),position:this.position}}createLabel(){return new kf}updateDirection(){switch(this.position){case"top":this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateLayout(a,b){return this.updateDirection(),super.calculateLayout(a,b)}layoutCrossLines(){let a=this.hasDefinedDomain()||this.hasVisibleSeries();this.crossLines.forEach(b=>{b.calculateLayout?.(a)})}calculateTickLayout(a,b,c,d){let e=this.label.getSideFlag(),f=e*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding);if(2===b&&!1===this.label.enabled&&!1===this.tick.enabled&&!1===this.gridLine.enabled){let{bbox:b,spacing:c}=this.tickBBox(a,[],[]);return{ticks:[],rawTickCount:0,tickDomain:a,niceDomain:a,fractionDigits:0,timeInterval:void 0,bbox:b,layout:{ticks:[],tickLines:[],gridLines:[],gridFills:[],labels:[],spacing:c}}}let{label:g,primaryLabel:h,scale:i,range:j,interval:k,reverse:l,defaultTickMinSpacing:m,minimumTimeGranularity:n}=this,o=lq({label:g,scale:i,interval:k,primaryLabel:h,domain:a,range:j,reverse:l,niceMode:b,visibleRange:c,defaultTickMinSpacing:m,minimumTimeGranularity:n,sideFlag:e,labelOffset:f,primaryTickCount:d,axisRotation:this.horizontal?-.5*Math.PI:0,isVertical:"y"===this.direction,sizeLimit:this.chartLayout?.sizeLimit,inRange:a=>this.inRange(a,.001),tickFormatter:(...a)=>this.tickFormatter(...a)}),{tickData:p}=o;if(this.label.avoidCollisions&&this.horizontal&&p.ticks.length>2&&(iG.is(this.scale)||iK.is(this.scale))){let a=this.chartLayout?.padding.right??0,b=p.ticks.at(-1);b?.tickLabel!=null&&b.translation+b.textMetrics.width/2>j[1]+a&&(b.tickLabel=void 0,0===c[0]&&1===c[1]&&(p.ticks[0].tickLabel=void 0))}let{ticks:q,tickDomain:r,rawTicks:s,rawTickCount:t,fractionDigits:u,timeInterval:v,niceDomain:w}=p,x=q.map(a=>this.getTickLabelProps(a,o)),{position:y,gridPadding:z,gridLength:A}=this,B="bottom"===y||"right"===y?-1:1,C=B*z,D=B*(A+z),E=this.calculateGridLines(q,C,D),F=this.calculateGridFills(q,C,D),G=this.calculateTickLines(q,B),{bbox:H,spacing:I}=this.tickBBox(r,q,x);return{ticks:s,rawTickCount:t,tickDomain:r,niceDomain:w,fractionDigits:u,timeInterval:v,bbox:H,layout:{ticks:q,gridLines:E,gridFills:F,tickLines:G,labels:x,spacing:I}}}calculateGridLines(a,b,c){return a.map((d,e)=>this.calculateGridLine(d,e,b,c,a))}calculateGridLine({index:a,tickId:b,translation:c},d,e,f,g){let{gridLine:h,horizontal:i}=this,[j,k,l,m]=i?[c,e,c,f]:[e,c,f,c],{style:n}=h,{stroke:o,strokeWidth:p=0,lineDash:q}=n[a%n.length]??{};return{tickId:b,offset:c,x1:j,y1:k,x2:l,y2:m,stroke:o,strokeWidth:p,lineDash:q}}calculateGridFills(a,b,c){let{horizontal:d,range:e,type:f}=this,g=[];if(0==a.length)return g;let h=0,i=!d&&"unit-time"===f;if(i&&a[0].translation<e[0]||!i&&a[0].translation>e[0]){let d={tickId:`before:${a[0].tickId}`,translation:e[0]};g.push(this.calculateGridFill(d,-1,a[0].index,b,c,a)),h=1}return g.push(...a.map((d,e)=>this.calculateGridFill(d,e,d.index+h,b,c,a))),g}calculateGridFill({tickId:a,translation:b},c,d,e,f,g){let{gridLine:h,horizontal:i,range:j}=this,k=g[c+1],l=k?k.translation:j[1],[m,n,o,p]=i?[b,Math.max(e,f),l,Math.min(e,f)]:[Math.min(e,f),Math.min(b,l),Math.max(e,f),Math.max(b,l)],{fill:q,fillOpacity:r}=h.style[d%h.style.length]??{};return{tickId:a,x1:m,y1:n,x2:o,y2:p,fill:q,fillOpacity:r}}calculateTickLines(a,b){return a.map(c=>this.calculateTickLine(c,c.index,b,a))}calculateTickLine({isPrimary:a,tickId:b,translation:c},d,e,f){let{horizontal:g,tick:h,primaryTick:i}=this,j=a&&i?.enabled?i:h,k=-e*this.getTickSize(j),[l,m,n,o]=g?[c,0,c,k]:[0,c,k,c],{stroke:p,width:q}=j;return{tickId:b,offset:c,x1:l,y1:m,x2:n,y2:o,stroke:p,strokeWidth:q,lineDash:void 0}}update(){this.updateDirection();let a=Array.from(this.tickLabelGroupSelection.nodes(),a=>a.datum.tickId);super.update(),this.tickLineGroup.visible=this.tick.enabled||(this.primaryTick?.enabled??!1),this.tickLabelGroup.visible=this.label.enabled||(this.primaryTick?.enabled??!1);let{tickLayout:b}=this;if(this.updateTitle(this.scale.domain,b?.spacing??0),this.animatable||this.moduleCtx.animationManager.skipCurrentBatch(),b){let{ticks:c}=b;if(this.animationManager.isSkipped())this.resetSelectionNodes();else{let b=function(a,b){let c=Math.max(a.length,b.length),d=new Set,e=new Set;for(let f=0;f<c;f++){let c=a[f],g=b[f];c!==g&&(e.has(g)?e.delete(g):g&&d.add(g),d.has(c)?d.delete(c):c&&e.add(c))}return{changed:d.size>0||e.size>0,added:d,removed:e}}(a,c.map(a=>a.tickId));this.animationState.transition("update",b)}}let{enabled:c,stroke:d,width:e}=this.line;this.lineNode.setProperties({stroke:d,strokeWidth:c?e:0}),this.updateTickLines(),this.updateGridLines(),this.updateGridFills()}getAxisTransform(){return{translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){super.updatePosition();let a=this.getAxisTransform();this.tickLineGroup.datum=a,this.tickLabelGroup.datum=a,this.lineNodeGroup.datum=a,this.headingLabelGroup.datum=a}getAxisLineCoordinates(){let{horizontal:a}=this,[b,c]=iB(this.range);return a?{x1:b,x2:c,y1:0,y2:0}:{x1:0,x2:0,y1:b,y2:c}}getTickLineBBox(a){let{translation:b}=a,{position:c,primaryTick:d}=this,e=this.getTickSize();switch(d?.enabled&&(e=Math.max(e,this.getTickSize(d))),c){case"top":return new dt(b,-e,b,e);case"bottom":return new dt(b,0,b,e);case"left":return new dt(-e,b,e,b);case"right":return new dt(0,b,e,b)}}lineNodeBBox(){let{position:a,seriesAreaPadding:b}=this,{y1:c,y2:d}=this.getAxisLineCoordinates(),e=d-c;switch(a){case"top":return new dt(c,-b,e,b);case"bottom":return new dt(c,0,e,b);case"left":return new dt(-b,c,b,e);case"right":return new dt(0,c,b,e)}}titleBBox(a,b){let{tempCaption:c}=this;return c.node.setProperties(this.titleProps(c,a,b)),c.node.getBBox()}tickBBox(a,b,c){let{tick:d,primaryTick:e,label:f,primaryLabel:g,title:h,position:i,horizontal:j,seriesAreaPadding:k}=this,l=[];if(l.push(this.lineNodeBBox()),d.enabled||e?.enabled)for(let a of b)l.push(this.getTickLineBBox(a));let{tempText:m}=this;if(f.enabled)for(let a of c){if(!a.visible)continue;m.setProperties(a);let b=m.getBBox();b&&l.push(b)}if(g?.enabled&&"bottom"===i&&(l.push(new dt(0,c4(f.fontSize)+2,1,this.getTickSize(d)+f.spacing+k)),null!=g.format)){let{format:a}=g,b=(aS(a)?Object.values(a):[a]).reduce((a,b)=>Math.max(a,function(a){let b=1;for(let c=0;c<a.length;c++)10===a.charCodeAt(c)&&b++;return b}(b)),0);l.push(new dt(0,this.getTickSize(e??d)+g.spacing+k,1,b*c4(g.fontSize)+2))}let n=0;if(h.enabled){let b=dt.merge(l);n=j?b.height:b.width,l.push(this.titleBBox(a,n))}return{bbox:dt.merge(l),spacing:n}}titleProps(a,b,c){let d,e,f,g,{title:h}=this;if(!h.enabled)return a.enabled=!1,{visible:!1,text:"",textBaseline:"bottom",x:0,y:0,rotationCenterX:0,rotationCenterY:0,rotation:0};a.enabled=!0,a.color=h.color,a.fontFamily=h.fontFamily,a.fontSize=h.fontSize,a.fontStyle=h.fontStyle,a.fontWeight=h.fontWeight,a.wrapping=h.wrapping;let i=(h.spacing??0)+c,{range:j}=this,k=(j[0]+j[1])/2;switch(this.position){case"top":d=k,e=-i,f=0,g="bottom";break;case"bottom":d=k,e=i,f=0,g="top";break;case"left":d=-i,e=k,f=-.5*Math.PI,g="bottom";break;case"right":d=i,e=k,f=.5*Math.PI,g="bottom"}let{formatter:l=a=>a.defaultValue}=h,m=this.cachedCallWithContext(l,this.getTitleFormatterParams(b));return a.text=m,{visible:!0,text:m,textBaseline:g,x:d,y:e,rotationCenterX:d,rotationCenterY:e,rotation:f}}getTickLabelProps(a,b){let{horizontal:c,primaryLabel:d,primaryTick:e,seriesAreaPadding:f,scale:g}=this,{tickId:h,tickLabel:i="",translation:j,isPrimary:k,textUntruncated:l}=a,m=k&&d?.enabled?d:this.label,n=k&&e?.enabled?e:this.tick,{rotation:o,textBaseline:p,textAlign:q}=b,{range:r}=g,s=this.label.getSideFlag(),t=jL(m)[this.position],u=s*(this.getTickSize(n)+m.spacing+f)-t,v=""!==i,w=c?j:u,x=c?-u:j;return{...this.getLabelStyles({value:a.tick,formattedValue:i},void 0,m),tickId:h,rotation:o,text:i,textAlign:q,textBaseline:p,textUntruncated:l,visible:v,x:w,y:x,rotationCenterX:w,rotationCenterY:x,range:r}}updateSelections(){if(!this.tickLayout)return;let a=this.getAxisLineCoordinates(),{tickLines:b,gridLines:c,gridFills:d,labels:e}=this.tickLayout,f=a=>a.tickId;this.lineNode.datum=a,this.gridLineGroupSelection.update(this.gridLine.enabled?c:[],void 0,f),this.gridFillGroupSelection.update(this.gridLine.enabled?d:[],void 0,f),this.tickLineGroupSelection.update(b,void 0,f),this.tickLabelGroupSelection.update(e,void 0,f)}updateGridLines(){this.gridLineGroupSelection.each((a,b)=>{a.stroke=b.stroke,a.strokeWidth=b.strokeWidth,a.lineDash=b.lineDash})}updateGridFills(){this.gridFillGroupSelection.each((a,b)=>{a.fill=b.fill,a.fillOpacity=b.fillOpacity??1})}updateTickLines(){this.tickLineGroupSelection.each((a,b)=>{a.stroke=b.stroke,a.strokeWidth=b.strokeWidth,a.lineDash=b.lineDash})}updateTitle(a,b){let{caption:c}=this.title,d=this.titleProps(c,a,b);c.node.visible=d.visible,c.node.text=d.text,c.node.textBaseline=d.textBaseline,c.node.datum=d}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each((a,b)=>{a.fill=b.color,a.text=b.text,a.textBaseline=b.textBaseline,a.textAlign=b.textAlign??"center",a.pointerEvents=+(null==b.textUntruncated),a.setFont(b),a.setBoxing(b)})}animateReadyUpdate(a){let{animationManager:b}=this.moduleCtx,c=j6(j3(this));jw(this.id,"axis-group",b,[this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],c.group),jw(this.id,"line",b,[this.lineNode],c.line),jw(this.id,"line-paths",b,[this.gridLineGroupSelection,this.tickLineGroupSelection],c.tick,(a,b)=>b.tickId,a),jw(this.id,"tick-labels",b,[this.tickLabelGroupSelection],c.label,(a,b)=>b.tickId,a),jw(this.id,"title",b,[this.title.caption.node],c.label,(a,b)=>b.tickId,a)}resetSelectionNodes(){jz([this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],j7()),jz([this.gridLineGroupSelection,this.tickLineGroupSelection],j9()),jz([this.gridFillGroupSelection],ka()),jz([this.tickLabelGroupSelection],j8()),jz([this.title.caption.node],j8()),jz([this.lineNode],j9())}};dl([ey],lt.prototype,"thickness",2),dl([ey],lt.prototype,"maxThicknessRatio",2),dl([ey],lt.prototype,"position",2);var lu=lt,lv=["top","right","bottom","left"],lw=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];function lx(a){let{series:b}=a;return b?.[0]?.type??"line"}function ly(a){let b=lx(a);return jo.isCartesian(b)||"cartesian"===jk(b)?.find(a=>"cartesian"===a)}function lz(a){let b=lx(a);return jo.isTopology(b)||"topology"===jk(b)?.find(a=>"topology"===a)}function lA(a){let b=lx(a);return jo.isStandalone(b)||"standalone"===jk(b)?.find(a=>"standalone"===a)}var lB=class extends jM{applyOptions(a){for(let b of this.moduleMap.values())b.module.optionsKey in a&&eB(b.moduleInstance)&&b.moduleInstance.set(a[b.module.optionsKey])}*legends(){for(let{module:a,moduleInstance:b}of this.moduleMap.values())"legend"===a.type&&(yield{legendType:a.identifier,legend:b})}},lC="ag-charts-overlay",lD="ag-charts-dark-overlay",lE=class extends ez{constructor(a,b){super(),this.className=a,this.defaultMessageId=b,this.enabled=!0}getText(a){return aM(this.text)?this.text.map(a=>a.text).join(""):a.t(this.text??this.defaultMessageId)}getElement(a,b,c,d){if(this.content?.remove(),this.focusBox=d,this.renderer){let b=fn(a,this.renderer,{});if(b instanceof HTMLElement)this.content=b;else{let a=aI("div");a.innerHTML=b;let{firstElementChild:c}=a;c instanceof HTMLElement&&1===a.childElementCount?this.content=c:this.content=a}}else{let a=aI("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",fontFamily:"var(--ag-charts-font-family)",fontSize:"var(--ag-charts-font-size)",fontWeight:"var(--ag-charts-font-weight)"});if(aM(this.text)){let b=aI("div");for(let a of this.text){let c=aI("span",{color:a.color,fontSize:`${a.fontSize}px`,fontFamily:a.fontFamily??"inherit",fontWeight:String(a.fontWeight),fontStyle:a.fontStyle});c.innerText=a.text,b.appendChild(c)}a.appendChild(b)}else a.innerText=this.getText(c);this.content=a,b?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(b){a.style.opacity=String(b)},onStop(){a.style.opacity="1"}})}return this.content}removeElement(a=()=>this.content?.remove(),b){if(this.content){if(b){let{content:c}=this;b.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(a){c.style.opacity=String(a)},onStop(){a?.()}})}else a?.();this.content=void 0,this.focusBox=void 0}}};dl([ey],lE.prototype,"enabled",2),dl([ey],lE.prototype,"text",2),dl([ey],lE.prototype,"renderer",2);var lF=class extends ez{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new lE("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new lE("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new lE("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new lE("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(a){for(let b of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(void 0!==b.focusBox)return{text:b.getText(a),rect:b.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}};dl([ey],lF.prototype,"darkTheme",2),dl([ey],lF.prototype,"loading",2),dl([ey],lF.prototype,"noData",2),dl([ey],lF.prototype,"noVisibleSeries",2),dl([ey],lF.prototype,"unsupportedBrowser",2);var lG=(a=>(a[a.BACKGROUND=0]="BACKGROUND",a[a.ANY_CONTENT=1]="ANY_CONTENT",a))(lG||{}),lH=(a=>(a[a.FOREGROUND=0]="FOREGROUND",a[a.HIGHLIGHT=1]="HIGHLIGHT",a[a.LABEL=2]="LABEL",a))(lH||{});function lI(a,b,c,d){if(e1(a))return{type:"gradient",gradient:a.gradient??b.gradient,colorStops:a.colorStops??b.colorStops,bounds:a.bounds??b.bounds,rotation:a.rotation??b.rotation,reverse:a.reverse??b.reverse,colorSpace:a.colorSpace??b.colorSpace};if(e2(a)){let b=a.pattern??c.pattern,d=a.strokeWidth;return"backward-slanted-lines"===b||"forward-slanted-lines"===b||"horizontal-lines"===b||"vertical-lines"===b?d??(d=c.strokeWidth):d??(d=0),{type:"pattern",pattern:b,width:a.width??a.height??c.width,height:a.height??a.width??c.height,path:a.path,padding:a.padding??c.padding,fill:a.fill??c.fill,fillOpacity:a.fillOpacity??c.fillOpacity,backgroundFill:a.backgroundFill??c.backgroundFill,backgroundFillOpacity:a.backgroundFillOpacity??c.backgroundFillOpacity,stroke:a.stroke??c.stroke,strokeOpacity:a.strokeOpacity??c.strokeOpacity,strokeWidth:d,rotation:a.rotation??c.rotation,scale:a.scale??c.scale}}return e3(a)?{type:"image",url:a.url,width:a.width,height:a.height,backgroundFill:a.backgroundFill??d.backgroundFill,backgroundFillOpacity:a.backgroundFillOpacity??d.backgroundFillOpacity,rotation:a.rotation??d.rotation,repeat:a.repeat??d.repeat,fit:a.fit??d.fit}:a}function lJ(a,b,c,d){return e1(a?.fill)||e2(a?.fill)||e3(a?.fill)?{...a,fill:lI(a.fill,b,c,d)}:a}function lK(a,b,c,d){null!=c&&e1(b)&&null!=b.bounds&&"item"!==b.bounds?a.fillBBox=c[b.bounds]:a.fillBBox=void 0,a.fillParams=d}function lL(a,b,c,d){let e=b?.opacity??1;a.fill=b?.fill,lK(a,a.fill,c,d),a.fillOpacity=(b?.fillOpacity??1)*e,a.stroke=b?.stroke,a.strokeOpacity=(b?.strokeOpacity??1)*e,a.strokeWidth=b?.strokeWidth??0,a.lineDash=b?.lineDash,a.lineDashOffset=b?.lineDashOffset??0}var lM=(a=>(a[a.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",a[a.NEAREST_NODE=1]="NEAREST_NODE",a[a.AXIS_ALIGNED=2]="AXIS_ALIGNED",a))(lM||{}),lN=class{constructor(a,b,c,d){this.type=a,this.event=b,this.defaultPrevented=!1,this.datum=c.datum,this.seriesId=d.id}preventDefault(){this.defaultPrevented=!0}},lO=class{constructor(a,b){this.series=a,this.seriesGrouping=b,this.type="groupingChanged"}};function lP(a){switch(a){case"x":return"x";case"y":return"y";case"angle":return"angle";case"radius":return"radius"}}function lQ(a){switch(a){case"x":return"x";case"y":return"y";case"angle":return"angle";case"radius":return"radius"}}var lR=class extends fE{constructor(a){super(),this.cleanup=new cQ,this.usesPlacedLabels=!1,this.hasChangesOnHighlight=!1,this.seriesGrouping=void 0,this.NodeEvent=lN,this.internalId=c_(this),this.contentGroup=new fk({name:`${this.internalId}-content`,zIndex:1}),this.highlightGroup=new fk({name:`${this.internalId}-highlight`,zIndex:1}),this.annotationGroup=new fk({name:`${this.internalId}-annotation`}),this.labelGroup=new fk({name:`${this.internalId}-series-labels`}),this.axes={},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new jM,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this.declarationOrder=-1,this._broughtToFront=!1,this.events=new ay,this._pickNodeCache=new az(5),this.fireEventWrapper=a=>super.fireEvent(a);let{moduleCtx:b,pickModes:c,propertyKeys:d={},propertyNames:e={},canHaveAxes:f=!1,usesPlacedLabels:g=!1}=a;this.ctx=b,this.propertyKeys=d,this.propertyNames=e,this.canHaveAxes=f,this.usesPlacedLabels=g,this.pickModes=c,this.cleanup.register(this.ctx?.eventsHub.on("highlight:change",a=>this.onChangeHighlight(a)))}get pickModeAxis(){return"main"}get id(){return this.properties?.id??this.internalId}get type(){return this.constructor.type??""}get focusable(){return!0}get data(){return this._data??this._chartData}set visible(a){this.properties.visible=a,this.ctx.legendManager.toggleItem(a,this.id),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){return this.ctx.legendManager.getSeriesEnabled(this.id)??this.properties.visible}get hasData(){return null!=this.data&&this.data.length>0}get tooltipEnabled(){return this.properties.tooltip?.enabled}onDataChange(){this.nodeDataRefresh=!0,this._pickNodeCache.clear()}setOptionsData(a){this._data=a,this.onDataChange()}setChartData(a){this._chartData=a,this.data===a&&this.onDataChange()}onSeriesGroupingChange(a,b){let{internalId:c,type:d,visible:e}=this;a&&this.ctx.seriesStateManager.deregisterSeries(this),b&&this.ctx.seriesStateManager.registerSeries({internalId:c,type:d,visible:e,seriesGrouping:b}),this.fireEvent(new lO(this,b))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(a,b,c){a.appendChild(this.contentGroup),b.appendChild(this.highlightGroup),b.appendChild(this.labelGroup),c?.appendChild(this.annotationGroup)}detachSeries(a,b,c){a?.removeChild(this.contentGroup),b.removeChild(this.highlightGroup),b.removeChild(this.labelGroup),c?.removeChild(this.annotationGroup)}setSeriesIndex(a,b=!1){let c=this.bringToFront();return(!!b||a!==this.declarationOrder||c!==this._broughtToFront)&&(this.declarationOrder=a,this._broughtToFront=c,this.setZIndex(c?Number.MAX_VALUE:a),this.fireEvent(new lO(this,this.seriesGrouping)),!0)}setZIndex(a){this.contentGroup.zIndex=[1,a,0],this.highlightGroup.zIndex=[1,a,1],this.labelGroup.zIndex=[1,a,2],this.annotationGroup.zIndex=a}renderToOffscreenCanvas(){return!1}addEventListener(a,b){return super.addEventListener(a,b)}removeEventListener(a,b){return super.removeEventListener(a,b)}hasEventListener(a){return super.hasEventListener(a)}addChartEventListeners(){}updatedDomains(){}destroy(){this.cleanup.flush(),this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getPropertyValues(a,b){let c=lP(a),d=null!=c?lQ(this.resolveKeyDirection(c)):a,e=b?.[d],f=[];if(!e)return f;let g=(...a)=>{for(let b of a)Array.isArray(b)?g(...b):"object"==typeof b?g(...Object.values(b)):f.push(b)};return g(...e.map(a=>this.properties[a])),f}getKeys(a){return this.getPropertyValues(lQ(a),this.propertyKeys)}getKeyProperties(a){return this.propertyKeys[this.resolveKeyDirection(a)]??[]}getNames(a){return this.getPropertyValues(lQ(a),this.propertyNames)}getFormatterContext(a){let{id:b}=this,c=this.getPropertyValues(a,this.propertyKeys),d=this.getPropertyValues(a,this.propertyNames),e=[];for(let a=0;a<c.length;a++)e.push({seriesId:b,key:c[a],name:d[a]});return e}resolveKeyDirection(a){return a}getDomain(a){let b=this.getSeriesDomain(a),c=this.moduleMap.mapModules(b=>b.getDomain(a)).flat();return 0!==c.length?b.concat(c):b}getRange(a,b){return this.getSeriesRange(a,b)}getZoomRangeFittingItems(a,b,c){}getVisibleItems(a,b,c){return 1/0}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){if(!this.properties.highlight)return 1;let{opacity:a=1}=this.getHighlightStyle();return a}getHighlightState(a,b,c,d){if(b)return 1;if(a?.series==null)return 0;if(this.isSeriesHighlighted(a,d)){let b=this.isItemHighlighted(a,c);return null==b||b?2:4}return 3}getHighlightStateString(a,b,c,d){return ia(this.getHighlightState(a,b,c,d))}onChangeHighlight(a){let b=a.previousHighlight,c=a.currentHighlight,d=this.getHighlightState(c),e=this.getHighlightState(b);if(this.setSeriesIndex(this.declarationOrder),d===e){this.hasChangesOnHighlight=!1;return}let{highlightedSeries:f,unhighlightedItem:g,unhighlightedSeries:h}=this.properties.highlight,i=this.hasItemStylers();this.hasChangesOnHighlight=i||!aT(f)||!aT(g)||!aT(h)}bringToFront(){return this.properties.highlight.bringToFront&&this.isSeriesHighlighted(this.ctx.highlightManager.getActiveHighlight())}isSeriesHighlighted(a,b){return a?.series===this}isItemHighlighted(a,b){if(a?.datumIndex!=null&&null!=b)return a.datumIndex===b}getHighlightStyle(a,b,c,d){let e=this.ctx.highlightManager?.getActiveHighlight();return c??(c=this.getHighlightState(e,a,b,d)),this.properties.highlight.getStyle(c)}getModuleTooltipParams(){return this.moduleMap.mapModules(a=>a.getTooltipParams()).reduce((a,b)=>Object.assign(a,b),{})}pickNodes(a,b,c=!1){let{pickModes:d,pickModeAxis:e,visible:f,contentGroup:g}=this;if(!f||!g.visible||"highlight"===b&&!this.properties.highlight.enabled||"highlight-tooltip"===b&&!this.properties.highlight.enabled)return;let h=1/0;if("tooltip"===b||"highlight-tooltip"===b){let{tooltip:a}=this.properties;h="number"==typeof a.range?a.range:1/0,c||(c="exact"===a.range)}else if("event"===b||"context-menu"===b){let{nodeClickRange:a}=this.properties;h="number"==typeof a?a:1/0,c||(c="exact"===a)}let i=d.filter(a=>!c||0===a),{x:j,y:k}=a,l=JSON.stringify({x:j,y:k,maxDistance:h,selectedPickModes:i});if(this._pickNodeCache.has(l))return this._pickNodeCache.get(l);for(let b of i){let c;switch(b){case 0:{let b=this.pickNodesExactShape(a);c=0===b.length?void 0:{datums:b,distance:0};break}case 1:{let b=this.pickNodeClosestDatum(a),d=b?.distance===0?this.pickNodesExactShape(a):void 0;c=null!=d&&0!==d.length?{datums:d,distance:0}:b?{datums:[b.datum],distance:b.distance}:void 0;break}case 2:{let b=null!=e?this.pickNodeMainAxisFirst(a,"main-category"===e):void 0;c=null!=b?{datums:[b.datum],distance:b.distance}:void 0}}if(c&&c.distance<=h)return this._pickNodeCache.set(l,{pickMode:b,datums:c.datums,distance:c.distance})}return this._pickNodeCache.set(l,void 0)}pickNodesExactShape(a){let b=[];for(let c of this.contentGroup.pickNodes(a.x,a.y)){let a=c.closestDatum();null!=a&&!0!==a.missing&&b.push(a)}return b}pickNodeClosestDatum(a){throw Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(a,b){let c=dr(a.x,a.y,b),d=c.nearest?.closestDatum();if(null!=d&&!0!==d.missing)return{datum:d,distance:Math.sqrt(c.distanceSquared)}}pickNodeMainAxisFirst(a,b){throw Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(a){}fireEvent(a){fn([this.properties,this.ctx.chartService],this.fireEventWrapper,a)}fireNodeClickEvent(a,b){let c=new this.NodeEvent("seriesNodeClick",a,b,this);return this.fireEvent(c),!c.defaultPrevented}fireNodeDoubleClickEvent(a,b){let c=new this.NodeEvent("seriesNodeDoubleClick",a,b,this);return this.fireEvent(c),!c.defaultPrevented}createNodeContextMenuActionEvent(a,b){return new this.NodeEvent("nodeContextMenuAction",a,b,this)}onLegendInitialState(a,b){let{visible:c=!0,itemId:d,legendItemName:e}=b??{};this.toggleSeriesItem(c,a,d,e)}onLegendItemClick(a){let{enabled:b,itemId:c,series:d,legendType:e}=a,f="legendItemName"in this.properties?this.properties.legendItemName:void 0,g="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,h=void 0!=f&&f===a.legendItemName;(d.id===this.id||h||void 0!=g)&&this.toggleSeriesItem(b,e,c,f,a)}onLegendItemDoubleClick(a){let{enabled:b,itemId:c,series:d,numVisibleItems:e,legendType:f}=a,g="legendItemName"in this.properties?this.properties.legendItemName:void 0,h="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,i=void 0!=g&&g===a.legendItemName;d.id===this.id||i||void 0!=h?this.toggleSeriesItem(!0,f,c,g,a):b&&1===e?this.toggleSeriesItem(!0,f,void 0,g):this.toggleSeriesItem(!1,f,void 0,g)}toggleSeriesItem(a,b,c,d,e){let f=this.id;(a||"category"!==b)&&(this.visible=a),this.nodeDataRefresh=!0,this._pickNodeCache.clear();let g={type:"seriesVisibilityChange",seriesId:f,itemId:c,legendItemName:e?.legendItemName??d,visible:a};this.fireEvent(g),this.ctx.legendManager.toggleItem(a,f,c,d)}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return{...this.ctx,series:this}}getAxisValueText(a,b,c,d,e,f){let{id:g,properties:h}=this;return a.formatDatum(h,c,b,g,f,d,e)}getLabelText(a,b,c,d,e,f,g){if(null==a)return"";let{axes:h,canHaveAxes:i,ctx:j,id:k,properties:l}=this,m="series-label",n="legendItemName"in l?l.legendItemName:void 0,o={seriesId:this.id,...g},p=i?lP(d):void 0,q=null!=p?h[this.resolveKeyDirection(p)]:void 0;if(null!=q)return q.formatDatum(l,a,m,k,n,b,c,e,f,o);let{formatManager:r}=j,s=this.callWithContext.bind(this),t=b=>bh(f.formatValue(s,b.type,b.value,o)??r.format(s,b)??String(a)),u=this.getFormatterContext(d);switch(d){case"y":case"color":case"size":return t({type:"number",value:a,datum:b,seriesId:k,legendItemName:n,key:c,source:m,property:d,domain:e,boundSeries:u,fractionDigits:void 0});case"x":case"radius":case"angle":case"label":case"secondaryLabel":case"calloutLabel":case"sectorLabel":case"legendItem":return t({type:"category",value:a,datum:b,seriesId:k,legendItemName:n,key:c,source:m,property:d,domain:e,boundSeries:u})}}getMarkerStyle(a,{datumIndex:b,datum:c,point:d},e,f,g={size:d?.size??a.size??0},h){let{itemStyler:i}=a,{highlightState:j,isHighlight:k=!1,checkForHighlight:l=!0,resolveItemStylerMarkerPath:m=!0,resolveStylerMarkerPath:n}=f??{};if(n){let a="marker"===n?["series",`${this.declarationOrder}`,"marker"]:["series",`${this.declarationOrder}`],b=this.ctx.optionsGraphService.resolvePartial(a,g,{permissivePath:!0});b&&(g={...b,size:b.size??g.size})}let o=dM(l?this.getHighlightStyle(k,b,j):void 0,g,a.getStyle(),h);if(i&&e){let a=this.ctx.highlightManager?.getActiveHighlight(),d=this.getHighlightStateString(a,k,b),f=this.cachedCallWithContext(i,{seriesId:this.id,...o,...e,highlighted:k,highlightState:d,datum:c}),g=m?["series",`${this.declarationOrder}`,"marker"]:["series",`${this.declarationOrder}`];o=dM(this.ctx.optionsGraphService.resolvePartial(g,f),o)}return o}applyMarkerStyle(a,b,c,d,{applyTranslation:e=!0,selected:f=!0}={}){let{shape:g,size:h=0}=a,i=this.visible&&h>0&&c&&!isNaN(c.x)&&!isNaN(c.y);if(lL(b,a,d),e?b.setProperties({visible:i,shape:g,size:h,x:c?.x,y:c?.y,scalingCenterX:c?.x,scalingCenterY:c?.y}):b.setProperties({visible:i,shape:g,size:h}),f||(b.fillOpacity*=.25,b.strokeOpacity*=.125),"function"==typeof g&&!b.dirtyPath){b.path.clear(!0),b.updatePath(),b.checkPathDirty();let d=b.getBBox();if(null!=c&&d.isFinite()){let b=d.computeCenter(),[e,f]=["x","y"].map(d=>(a.strokeWidth??0)+Math.abs(b[d]-c[d]));c.focusSize=Math.max(d.width+e,d.height+f)}}}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(a){let{width:b,height:c}=a??{width:NaN,height:NaN},d=a?{seriesRectWidth:b,seriesRectHeight:c}:void 0,e=null!=fw(this.nodeDataDependencies,d);return e&&(this._nodeDataDependencies=d,this.markNodeDataDirty()),e}pickFocus(a){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(a,b){let{datumCallbackCache:c}=this,d=c.get(a);if(null!=d)return d;try{let d=b();return c.set(a,d),d}catch(a){aa.error(String(a))}}cachedCallWithContext(a,...b){return this.ctx.callbackCache.call([this.properties,this.ctx.chartService],a,...b)}callWithContext(a,...b){return fn([this.properties,this.ctx.chartService],a,...b)}formatTooltipWithContext(a,b,c){return a.formatTooltip([this.properties,this.ctx.chartService],b,c)}minTimeInterval(){}};dl([fJ({changeValue:function(a,b){this.onSeriesGroupingChange(b,a)}})],lR.prototype,"seriesGrouping",2);var lS=class{constructor(a){this.swapChain=a,this.hasBeenActivated=!1,this.div=aI("div"),this.svg=aJ("svg"),this.outerPath=aJ("path"),this.innerPath=aJ("path"),this.svg.append(this.outerPath),this.svg.append(this.innerPath),this.outerPath.classList.add("ag-charts-focus-svg-outer-path"),this.innerPath.classList.add("ag-charts-focus-svg-inner-path"),this.element=aI("div","ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",a=>this.onSwap(a))}clear(){}update(a,b,c){if(null!=b)if(a instanceof f6){let c=a.svgPathData((c,d)=>{let{x:e,y:f}=ff.toCanvasPoint(a,c,d);return{x:e-=b.x??0,y:f-=b.y??0}});this.outerPath.setAttribute("d",c),this.innerPath.setAttribute("d",c),this.show(this.svg)}else{let d;if(c){let c=Math.max(a.x-b.x,0),e=Math.max(a.y-b.y,0);d=new dt(c,e,Math.min(a.x+a.width-b.x,b.width)-c,Math.min(a.y+a.height-b.y,b.height)-e)}else d=new dt(a.x-b.x,a.y-b.y,a.width,a.height);fp(this.div,d),this.show(this.div)}}onSwap(a){a!==this.element.parentElement&&(this.element.remove(),a.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(a){this.hasBeenActivated=!0,this.element.innerHTML="",this.element.append(a)}overrideFocusVisible(a){this.focusVisible=a;let b=this.element.parentElement;b?.style.setProperty("opacity",{true:"1",false:"0",undefined:""}[`${a}`])}isFocusVisible(a=!1){if(!a&&!this.hasBeenActivated)return!1;let b=this.element.parentElement;return null!=b&&"1"===aH().getComputedStyle(b).opacity}},lT=class{constructor(a,b,c,d){this.label1=a,this.label2=b,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=a=>(cJ(a.target,"pointer-events",void 0),!this.skipDispatch&&this.dispatch("blur",a)),this.onFocus=a=>(cJ(a.target,"pointer-events","auto"),!this.skipDispatch&&this.dispatch("focus",a)),cG(this.label1,"id",c0()),cG(this.label2,"id",c0()),cJ(this.label1,"display","none"),cJ(this.label2,"display","none"),this.label1.textContent=d,this.label2.textContent=d,this.activeAnnouncer=this.createAnnouncer(c),this.inactiveAnnouncer=this.createAnnouncer(c),cG(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap(d)}createAnnouncer(a){let b=aI("div");return b.role=a,b.className="ag-charts-swapchain",b.addEventListener("blur",this.onBlur),b.addEventListener("focus",this.onFocus),b}destroy(){for(let a of[this.activeAnnouncer,this.inactiveAnnouncer])a.removeEventListener("blur",this.onBlur),a.removeEventListener("focus",this.onFocus),a.remove()}focus(a){this.focusOptions=a,this.activeAnnouncer.focus(a),this.focusOptions=void 0}update(a){this.skipDispatch=!0,this.swap(a),this.hasFocus&&this.activeAnnouncer.focus(this.focusOptions),this.skipDispatch=!1}addListener(a,b){this.listeners[a].push(b),"swap"===a&&b(this.activeAnnouncer)}dispatch(a,b){"focus"===a?this.hasFocus=!0:"blur"===a&&(this.hasFocus=!1),this.listeners[a].forEach(a=>a(b))}swap(a){let b=this.activeAnnouncer.tabIndex;this.label2.textContent=a,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],cH(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),cH(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:b}),this.dispatch("swap",this.activeAnnouncer)}},lU={arrowdown:{bindings:[{code:"ArrowDown"}]},arrowleft:{bindings:[{code:"ArrowLeft"}]},arrowright:{bindings:[{code:"ArrowRight"}]},arrowup:{bindings:[{code:"ArrowUp"}]},delete:{bindings:[{key:"Backspace"},{key:"Delete"}],activatesFocusIndicator:!1},redo:{bindings:[{key:"y",ctrlOrMeta:!0},{key:"z",ctrlOrMeta:!0,shift:!0}],activatesFocusIndicator:!1},undo:{bindings:[{key:"z",ctrlOrMeta:!0}],activatesFocusIndicator:!1},submit:{bindings:[{key:"Enter"},{code:"Enter"},{code:"Space"}]},zoomin:{bindings:[{key:"+"},{code:"ZoomIn"},{code:"Add"}],activatesFocusIndicator:!1},zoomout:{bindings:[{key:"-"},{code:"ZoomOut"},{code:"Substract"}],activatesFocusIndicator:!1}};function lV(a,b,c,d){let{top:e,right:f,bottom:g,left:h,width:i,height:j}=d;return null!=h?null!=i?f=c.width-h+i:null!=f&&(i=c.width-h-f):null!=f&&null!=i&&(h=c.width-f-i),null!=e?null!=j?g=c.height-e-j:null!=g&&(j=c.height-g-e):null!=g&&null!=j&&(e=c.height-g-j),null==i?null==j?(j=b,i=a):i=Math.ceil(a*j/b):j??(j=Math.ceil(b*i/a)),null==h&&(h=null==f?Math.floor((c.width-i)/2):c.width-f-i),null==e&&(e=null==g?Math.floor((c.height-j)/2):c.height-j-g),{x:h,y:e,width:i,height:j}}var lW=class{constructor(){this.events=new ay,this.x1=NaN,this.y1=NaN,this.x=NaN,this.y=NaN,this.vx=0,this.vy=0,this.t0=NaN,this.animationFrameHandle=void 0}reset(){this.x=NaN,this.y=NaN,null!=this.animationFrameHandle&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(a,b){if(Number.isNaN(this.x)||Number.isNaN(this.y)){this.x=a,this.y=b,this.vx=0,this.vy=0,this.emitUpdate(),null!=this.animationFrameHandle&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0);return}this.x1=a,this.y1=b,this.t0=Date.now(),this.animationFrameHandle??(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;let{x1:a,y1:b,t0:c}=this,d=Date.now();this.t0=d;let e=0|Math.ceil((d-c)/1),{x:f,y:g,vx:h,vy:i}=this;for(let c=0;c<e;c+=1){let c=-(200*(f-a)+12*h)/.1,d=-(200*(g-b)+12*i)/.1;h+=.001*c,i+=.001*d,f+=.001*h,g+=.001*i}.5>Math.hypot(f-a,g-b)?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=f,this.y=g,this.vx=h,this.vy=i,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.events.emit("update",{x:this.x,y:this.y})}},lX=null;function lY(a){return""===a?"":(lX??(lX=aI("div")),lX.textContent=String(a),lX.innerHTML.replace(/\n/g,"<br>"))}function lZ(a,b){let{path:c,size:d}=a,{x:e,y:f}=a;c.clear();let g=!1;for(let[a,h]of b){let b=e+(a-.5)*d,i=f+(h-.5)*d;g?c.lineTo(b,i):c.moveTo(b,i),g=!0}c.closePath()}var l$={circle({path:a,x:b,y:c,size:d}){a.arc(b,c,d/2,0,2*Math.PI),a.closePath()},cross(a){lZ(a,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},diamond(a){lZ(a,[[.5,0],[1,.5],[.5,1],[0,.5]])},heart({path:a,x:b,y:c,size:d}){let e=d/4;c+=e/2,a.arc(b-e,c-e,e,ee(130),ee(330)),a.arc(b+e,c-e,e,ee(220),ee(50)),a.lineTo(b,c+e),a.closePath()},pin({path:a,x:b,y:c,size:d}){a.moveTo(b+-.34375*d,c+-.15625*d),a.cubicCurveTo(b+-.34375*d,c+-.348509*d,b+-.192259*d,c+-.5*d,b+0*d,c+-.5*d),a.cubicCurveTo(b+.19225899999999996*d,c+-.5*d,b+.34375*d,c+-.348509*d,b+.34375*d,c+-.15625*d),a.cubicCurveTo(b+.34375*d,c+-.006176000000000015*d,b+.284625*d,c+.10018099999999996*d,b+.21646100000000001*d,c+.19539300000000004*d),a.cubicCurveTo(b+.199009*d,c+.219769*d,b+.18127099999999996*d,c+.243104*d,b+.16378499999999996*d,c+.26610500000000004*d),a.cubicCurveTo(b+.11189300000000002*d,c+.33436699999999997*d,b+.06222799999999995*d,c+.399699*d,b+.028896000000000033*d,c+.48064799999999996*d),a.cubicCurveTo(b+.024074999999999958*d,c+.49235799999999996*d,b+.01266299999999998*d,c+.5*d,b+0*d,c+.5*d),a.cubicCurveTo(b+-.01266299999999998*d,c+.5*d,b+-.024075000000000013*d,c+.49235799999999996*d,b+-.028895999999999977*d,c+.48064799999999996*d),a.cubicCurveTo(b+-.01266299999999998*d,c+.5*d,b+-.024075000000000013*d,c+.49235799999999996*d,b+-.028895999999999977*d,c+.48064799999999996*d),a.cubicCurveTo(b+-.062228000000000006*d,c+.399699*d,b+-.11189300000000002*d,c+.33436699999999997*d,b+-.16378500000000001*d,c+.26610500000000004*d),a.cubicCurveTo(b+-.18127100000000002*d,c+.243104*d,b+-.199009*d,c+.219769*d,b+-.21646100000000001*d,c+.19539300000000004*d),a.cubicCurveTo(b+-.284625*d,c+.10018099999999996*d,b+-.34375*d,c+-.006176000000000015*d,b+-.34375*d,c+-.15625*d),a.closePath()},plus(a){lZ(a,[[1/3,0],[2/3,0],[2/3,1/3],[1,1/3],[1,2/3],[2/3,2/3],[2/3,1],[1/3,1],[1/3,2/3],[0,2/3],[0,1/3],[1/3,1/3]])},square({path:a,x:b,y:c,size:d,pixelRatio:e}){let f=d/2;a.moveTo(eY(e,b-f),eY(e,c-f)),a.lineTo(eY(e,b+f),eY(e,c-f)),a.lineTo(eY(e,b+f),eY(e,c+f)),a.lineTo(eY(e,b-f),eY(e,c+f)),a.closePath()},star({path:a,x:b,y:c,size:d}){let e=d/2,f=e/2,g=Math.PI/2;for(let d=0;d<10;d++){let h=d%2==0?e:f,i=d*Math.PI/5-g,j=b+Math.cos(i)*h,k=c+Math.sin(i)*h;a.lineTo(j,k)}a.closePath()},triangle(a){lZ(a,[[.5,0],[1,.87],[0,.87]])}},l_=class extends f6{constructor(){super(...arguments),this.shape="square",this.x=0,this.y=0,this.size=12}isPointInPath(a,b){return 0>=this.distanceSquared(a,b)}get midPoint(){return{x:this.x,y:this.y}}distanceSquared(a,b){let c=l0.anchor(this.shape);return Math.max(Math.hypot(a-this.x+(c.x-.5)*this.size,b-this.y+(c.y-.5)*this.size)-this.size/2,0)}updatePath(){let{path:a,shape:b,x:c,y:d,size:e}=this,f=this.layerManager?.canvas?.pixelRatio??1,g=l0.anchor(b),h={path:a,x:c-(g.x-.5)*e,y:d-(g.y-.5)*e,size:e,pixelRatio:f};a.clear(),"string"==typeof b?l$[b](h):"function"==typeof b&&b(h)}computeBBox(){let{x:a,y:b,size:c}=this,d=l0.anchor(this.shape);return new dt(a-c*d.x,b-c*d.y,c,c)}executeFill(a,b){if(b)return super.executeFill(a,b)}executeStroke(a,b){if(b)return super.executeStroke(a,b)}};dl([d$({equals:dZ})],l_.prototype,"shape",2),dl([d$()],l_.prototype,"x",2),dl([d$()],l_.prototype,"y",2),dl([d$({convertor:Math.abs})],l_.prototype,"size",2);var l0=class extends fc(fd(fe(l_))){static anchor(a){return"pin"===a?{x:.5,y:1}:"function"==typeof a&&"anchor"in a?a.anchor:{x:.5,y:.5}}constructor(a){super(a),a?.shape!=null&&(this.shape=a.shape)}};function l1(a,b,c=5/3*b){let d=new fh,e=Math.min(a.marker.strokeWidth??1,2),f=Math.min(a.line?.strokeWidth??0,2),g=Math.max(!1===a.marker.enabled?0:b,null==a.line?0:c),h=Math.max(!1===a.marker.enabled?0:b,f);if(null!=a.line){let{stroke:b,strokeOpacity:c,lineDash:e}=a.line,i=new jB;i.x1=0,i.y1=h/2,i.x2=g,i.y2=h/2,i.stroke=b,i.strokeOpacity=c,i.strokeWidth=f,i.lineDash=e,d.append(i)}if(!1!==a.marker.enabled){let{shape:c,fill:f,fillOpacity:i,stroke:j,strokeOpacity:k,lineDash:l,lineDashOffset:m}=a.marker,n=new l0;n.shape=c??"square",n.size=b,n.fill=f,n.fillOpacity=i??1,n.stroke=j,n.strokeOpacity=k??1,n.strokeWidth=e,n.lineDash=l,n.lineDashOffset=m??0;let o=l0.anchor(c),p=g/2+(o.x-.5)*b,q=h/2+(o.y-.5)*b,r=b/(b+e);n.x=p,n.y=q,n.scalingCenterX=p,n.scalingCenterY=q,n.scalingX=r,n.scalingY=r,d.append(n)}return fh.toSVG(d,g,h)}var l2="ag-charts-tooltip",l3="ag-charts-tooltip--dark";function l4(a){let b=[],c=new Map;for(let d of a)if("structured"===d.type){let{heading:a}=d,e=null!=a?c.get(a):void 0,f={type:"structured",heading:a,items:[d]};null==e?(c.set(a,f),b.push(f)):e.items.push(d)}else b.push(d);return b}function l5(a){let b=l4(a),c=[];return b.forEach(a=>{if("raw"===a.type)return"";null!=a.heading&&c.push(bh(a.heading)),a.items.forEach(a=>{null!=a.title&&c.push(bh(a.title)),a.data?.forEach(a=>{c.push(a.label??a.fallbackLabel,a.value)})})}),c.join("; ")}function l6(a,b,c){let d="";if(null==a&&!b)return"";null==a?d+=`<span class="${l2}-label">${lY(b)}</span>`:d+=`<span class="${l2}-label">${lY(a)}</span> <span class="${l2}-value">${lY(b)}</span>`;let e=[`${l2}-row`];return c&&e.push(`${l2}-row--inline`),d=`<div class="${e.join(" ")}">${d}</div>`}function l7(a,b){if(null==a||1===b.length)return;let c=a?.t("tooltipPaginationStatus",{index:b.index+1,count:b.length});return`<div class="${l2}-footer">${c}</div>`}function l8(a,b,c,d){let e,f,g,h=1===b.items.length?b.items[0]:void 0;switch(c){case"compact":e=!0,f=bh(h?.title);break;case"single":e=null!=h&&(null==b.heading||null==h.title)&&h.data?.length===1&&null==h.data[0].label&&null!=h.data[0].value,g=bh(b.heading??h?.title);break;case"shared":e=!1}let i="";if(e&&null!=h?(null!=f&&(i+=l6(void 0,f,!1)),h.data?.forEach(a=>{i+=l6(a.label??g,a.value,!1),i+=" "})):(null!=b.heading&&(i+=`<span class="${l2}-heading">${lY(bh(b.heading))}</span>`,i+=" "),b.items.forEach(a=>{i+=function(a){let b="";if(a.data?.length&&a.data.every(a=>null==a.value||""===a.value))return b;let c=null==a.title&&a.data?.length===1,d=null==a.symbol?void 0:l1(a.symbol,12);return null!=d&&(null!=a.title||a.data?.length)&&(b+=`<span class="${l2}-symbol">${d}</span>`),null!=a.title&&(b+=`<span class="${l2}-title">${lY(bh(a.title))}</span>`,b+=" "),a.data?.forEach(a=>{b+=l6(a.label??a.fallbackLabel,a.value,c),b+=" "}),b}(a)})),0===i.length)return;let j="compact"!==c&&null!=d?l7(a,d):void 0;return j+null&&(i+=j),i=`<div class="${l2}-content">${i.trimEnd()}</div>`}function l9(a,b,c,d){let e=l4(b);if(0!==e.length)if(1===e.length&&"structured"===e[0].type)return l8(a,e[0],c,d);else{let b=e.map(b=>"structured"===b.type?l8(a,b,c):b.rawHtmlString);return null!=d&&b.push(function(a,b){let c=null==b?void 0:l7(a,b);return null==c?"":`<div class="${l2}-content">${c}</div>`}(a,d)??""),b.join("")}}var ma={left:-1,"top-left":-1,"bottom-left":-1,top:0,center:0,bottom:0,right:1,"top-right":1,"bottom-right":1},mb={"top-left":-1,top:-1,"top-right":-1,left:0,center:0,right:0,"bottom-left":1,bottom:1,"bottom-right":1},mc={left:3,"top-left":void 0,"bottom-left":void 0,top:2,center:void 0,bottom:1,right:0,"top-right":void 0,"bottom-right":void 0},md={top:2,bottom:2,left:1,right:1,"top-right":3,"top-left":3,"bottom-right":3,"bottom-left":3,center:0},me={pointer:"top",node:"top",chart:"top-left"},mf=class extends ez{constructor(){super(...arguments),this.xOffset=0,this.yOffset=0}};dl([ey],mf.prototype,"xOffset",2),dl([ey],mf.prototype,"yOffset",2),dl([ey],mf.prototype,"anchorTo",2),dl([ey],mf.prototype,"placement",2);var mg=class extends ez{constructor(){super(),this.enabled=!0,this.mode="single",this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new mf,this.pagination=!1,this.darkTheme=!1,this.bounds="extended",this.cleanup=new cQ,this.springAnimation=new lW,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.sizeMonitor=new gO,this._elementSize=void 0,this._showTimeout=void 0,this.arrowPosition=void 0,this._visible=!1,this.positionParams=void 0,this.localeManager=void 0,this.cleanup.register(this.springAnimation.events.on("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(a,b){return"togglePopover"in aH().HTMLElement.prototype&&(this.element=b.addChild("tooltip-container",l2),this.element.setAttribute("popover","manual"),this.element.className=l2,this.element.style.positionAnchor=b.anchorName,this.sizeMonitor.observe(this.element,a=>{this._elementSize=a,this.updateTooltipPosition()})),this.localeManager=a,()=>{b.removeChild("tooltip-container",l2),this.cleanup.flush(),this.element&&this.sizeMonitor.unobserve(this.element)}}isVisible(){return this._visible}contains(a){return this.element?.contains(a)??!1}updateTooltipPosition(){let a,b,{element:c,_elementSize:d,positionParams:e}=this;if(null==c||null==d||null==e)return;let{canvasRect:f,relativeRect:g,meta:h}=e,{x:i,y:j}=this.springAnimation,k=h.position?.anchorTo??"pointer",l=h.position?.placement??me[k];Array.isArray(l)||(l=[l]);let m=h.position?.xOffset??0,n=h.position?.yOffset??0,o=g.x,p=g.y,q=g.width-d.width-1+o,r=g.height-d.height+p,s=0,t=!1;do{a=l[s],s+=1;let c=this.getTooltipBounds({elementSize:d,placement:a,anchorTo:k,canvasX:i,canvasY:j,yOffset:n,xOffset:m,canvasRect:f});b=lV(d.width,d.height,g,c),t=!1,1&md[a]&&(t||(t=b.x<o||b.x>q)),2&md[a]&&(t||(t=b.y<p||b.y>r))}while(s<l.length&&t)let u=aA(o,b.x,q),v=aA(p,b.y,r);t||(t=u!==b.x||v!==b.y);let w="chart"!==k&&!t&&!m&&!n,x=h.showArrow??this.showArrow??w;this.arrowPosition=x?mc[a]:void 0,this.updateClassModifiers(),c.style.translate=`${u}px ${v}px`}show(a,b,c,d,e,f=!1){let{element:g}=this;if(null!=g&&null!=d&&0!==d.length){let a=l9(this.localeManager,d,this.mode,this.pagination?e:void 0);if(null==a)return void this.toggle(!1);g.innerHTML=a}else if(null==g||""===g.innerHTML)return void this.toggle(!1);let h={x:a.x-b.x,y:a.y-b.y,width:a.width,height:a.height};switch(this.positionParams={canvasRect:b,relativeRect:h,meta:c},c.position?.anchorTo??"pointer"){case"node":this.springAnimation.update(c.nodeCanvasX??c.canvasX,c.nodeCanvasY??c.canvasY);break;case"pointer":this.springAnimation.update(c.canvasX,c.canvasY);break;case"chart":this.springAnimation.reset()}c.enableInteraction?(this.enableInteraction=!0,g.style.pointerEvents="auto",g.removeAttribute("aria-hidden"),g.tabIndex=-1):(this.enableInteraction=!1,g.style.pointerEvents="none",g.setAttribute("aria-hidden","true"),g.removeAttribute("tabindex")),g.style.setProperty("--top",`${b.top}px`),g.style.setProperty("--left",`${b.left}px`),this.updateClassModifiers(),this.toggle(!0,f)}hide(){this.toggle(!1)}maybeEnterInteractiveTooltip({relatedTarget:a},b){let{interactive:c,interactiveLeave:d,enabled:e,element:f}=this;if(null==f)return!1;if(d)return!0;let g=c&&e&&this.isVisible()&&a instanceof Node&&this.contains(a);return g&&(this.interactiveLeave={callback:b,listener:a=>{(null==a.relatedTarget||a.relatedTarget instanceof Node&&!this.contains(a.relatedTarget))&&this.popInteractiveLeaveCallback()}},f.addEventListener("focusout",this.interactiveLeave.listener),f.addEventListener("mouseout",this.interactiveLeave.listener)),g}popInteractiveLeaveCallback(){let{interactiveLeave:a,element:b}=this;this.interactiveLeave=void 0,a&&(b&&(b.removeEventListener("focusout",a.listener),b.removeEventListener("mouseout",a.listener)),a.callback())}toggle(a,b=!1){let{delay:c}=this;a&&c>0&&!b?this._showTimeout??(this._showTimeout=setTimeout(()=>{this._showTimeout=void 0,this.toggleCallback(!0)},c)):(clearTimeout(this._showTimeout),this._showTimeout=void 0,this.toggleCallback(a))}toggleCallback(a){this.element?.isConnected&&this._visible!==a&&(this._visible=a,this.element.togglePopover(a),a?this.updateTooltipPosition():(this.springAnimation.reset(),this.popInteractiveLeaveCallback()))}updateClassModifiers(){if(!this.element?.isConnected)return;let{classList:a}=this.element,b=(b,c)=>a.toggle(`${l2}--${b}`,c);for(let c of(b("no-interaction",!this.enableInteraction),b("arrow-top",1===this.arrowPosition),b("arrow-right",3===this.arrowPosition),b("arrow-bottom",2===this.arrowPosition),b("arrow-left",0===this.arrowPosition),b("compact","compact"===this.mode),a.toggle(l3,this.darkTheme),this.wrapTypes))a.toggle(`${l2}--wrap-${c}`,c===this.wrapping)}getTooltipBounds(a){let{elementSize:b,anchorTo:c,placement:d,canvasX:e,canvasY:f,yOffset:g,xOffset:h,canvasRect:i}=a,{width:j,height:k}=b,l={width:j,height:k};if("node"===c||"pointer"===c){let a=ma[d],b=mb[d];return l.top=f+g+k*(b-1)/2+8*b,l.left=e+h+j*(a-1)/2+8*a,l}switch(d){case"top":l.top=g,l.left=i.width/2-j/2+h;break;case"right":l.top=i.height/2-k/2+g,l.left=i.width-j+h;break;case"left":l.top=i.height/2-k/2+g,l.left=h;break;case"bottom":l.top=i.height-k+g,l.left=i.width/2-j/2+h;break;case"top-left":l.top=g,l.left=h;break;case"top-right":l.top=g,l.left=i.width-j+h;break;case"bottom-right":l.top=i.height-k+g,l.left=i.width-j+h;break;case"bottom-left":l.top=i.height-k+g,l.left=h}return l}};function mh(a,b){return a.series===b.series&&dK(a.datumIndex,b.datumIndex)}dl([ey],mg.prototype,"enabled",2),dl([ey],mg.prototype,"mode",2),dl([ey],mg.prototype,"showArrow",2),dl([ey],mg.prototype,"delay",2),dl([ey],mg.prototype,"range",2),dl([ey],mg.prototype,"wrapping",2),dl([ey],mg.prototype,"position",2),dl([ey],mg.prototype,"pagination",2),dl([ey],mg.prototype,"darkTheme",2),dl([ey],mg.prototype,"bounds",2);var mi=class{constructor(){this.candidates=[]}get current(){return this.active}reset(){this.candidates.length=0,this.active=void 0}update(a,b){this.candidates=a;let c=null!=b?a.findIndex(a=>mh(a,b)):-1;return -1===c&&(c=0),this.active=a[c],{current:this.active,index:c,length:a.length}}next(){let{candidates:a,active:b}=this,c=null==b?-1:a.findIndex(a=>mh(a,b));if(-1===c)return;let d=c+1;return d>=a.length&&(d=0),this.active=a[d],{current:this.active,index:d,length:this.candidates.length}}},mj=class extends gx{constructor(a){super(),this.chart=a,this.id=c_(this),this.series=[],this.announceMode="when-changed",this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="pointer",this.previousInputDevice="keyboard",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.cachedTooltipContent=void 0,this.hoverScheduler=fL((a,b)=>aH().requestAnimationFrame(a),()=>{if(this.tooltip.lastHover||this.highlight.pendingHoverEvent){if(5>=this.chart.getUpdateType())return void this.hoverScheduler.schedule();this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)}}),this.tooltipCandidates=new mi;let b=a.ctx.localeManager.t("ariaInitSeriesArea"),c=a.ctx.domManager.addChild("series-area","series-area-aria-label1"),d=a.ctx.domManager.addChild("series-area","series-area-aria-label2");this.swapChain=new lT(c,d,"img",b),this.swapChain.addListener("blur",a=>this.onBlur(a)),this.swapChain.addListener("focus",()=>this.onFocus()),"normal"===a.ctx.domManager.mode&&(this.focusIndicator=new lS(this.swapChain),this.focusIndicator.overrideFocusVisible("integrated"!==a.mode&&void 0));let{seriesDragInterpreter:e,seriesWidget:f,containerWidget:g}=a.ctx.widgets;f.setTabIndex(-1),this.cleanup.register(()=>a.ctx.domManager.removeChild("series-area","series-area-aria-label1"),()=>a.ctx.domManager.removeChild("series-area","series-area-aria-label2"),f.addListener("focus",()=>this.swapChain.focus({preventScroll:!0})),f.addListener("mousemove",a=>this.onHover(a,f)),f.addListener("wheel",a=>this.onWheel(a)),f.addListener("mouseleave",a=>this.onLeave(a)),f.addListener("keydown",a=>this.onKeyDown(a)),f.addListener("contextmenu",(a,b)=>this.onContextMenu(a,b)),g.addListener("contextmenu",(a,b)=>this.onContextMenu(a,b)),g.addListener("click",(a,b)=>this.onClick(a,b)),g.addListener("dblclick",(a,b)=>this.onClick(a,b)),a.ctx.animationManager.addListener("animation-start",()=>this.clearAll()),a.ctx.eventsHub.on("dom:resize",()=>this.clearAll()),a.ctx.eventsHub.on("highlight:change",a=>this.changeHighlightDatum(a)),a.ctx.eventsHub.on("layout:complete",a=>this.layoutComplete(a)),a.ctx.updateService.addListener("pre-scene-render",()=>this.preSceneRender()),a.ctx.updateService.addListener("update-complete",()=>this.updateComplete()),a.ctx.eventsHub.on("zoom:change",()=>this.clearAll()),a.ctx.eventsHub.on("zoom:pan-start",()=>this.clearAll())),e&&this.cleanup.register(e.events.on("drag-move",a=>this.onDragMove(a,f)),e.events.on("click",a=>this.onClick(a,f)),e.events.on("dblclick",a=>this.onClick(a,f)))}get bbox(){return(this.seriesRect??dt.zero).clone()}isState(a){return this.chart.ctx.interactionManager.isState(a)}isIgnoredTouch(a){return!("touch"!==a.device||"click"===a.type||"hover"===this.chart.ctx.chartService.touch.dragAction||"drag"===this.chart.ctx.chartService.touch.dragAction&&this.isState(9))}dataChanged(){var a;this.cachedTooltipContent=void 0,this.highlight.appliedHoverEvent&&((a=this.highlight).stashedHoverEvent??(a.stashedHoverEvent=this.highlight.appliedHoverEvent),this.clearHighlight()),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.focusIndicator?.clear()}preSceneRender(){null!=this.highlight.stashedHoverEvent&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),null!=this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}updateComplete(){this.isState(34)&&this.focusIndicator?.isFocusVisible()&&("always"!==this.announceMode&&(this.announceMode="never"),this.handleFocus(0,0))}update(a,b){this.chart.ctx.updateService.update(a,b)}seriesChanged(a){this.focus.sortedSeries=[...a].sort((a,b)=>{let c=a.properties.focusPriority??1/0,d=b.properties.focusPriority??1/0;return(c===d&&([c,d]=[a.declarationOrder,b.declarationOrder]),c<d)?-1:+(c>d)}),this.series=a}layoutComplete(a){this.seriesRect=a.series.rect,this.hoverRect=a.series.rect,this.chart.ctx.widgets.seriesWidget.setBounds(a.series.rect),"normal"===this.chart.ctx.domManager.mode&&this.chart.ctx.widgets.chartWidget.setBounds(a.chart)}onContextMenu(a,b){let c,d,{sourceEvent:e}=a;if(e.currentTarget!=b.getElement())return;if(e.target==this.chart.ctx.widgets.containerWidget.getElement()){if(this.isState(36)){let{currentX:b,currentY:c}=a;this.chart.ctx.contextMenuRegistry.dispatchContext("always",{widgetEvent:a,canvasX:b,canvasY:c},void 0)}return}if(this.focusIndicator?.isFocusVisible())(c=this.chart.ctx.highlightManager.getActiveHighlight())&&this.seriesRect&&c.midPoint&&(d=ff.toCanvasPoint(c.series.contentGroup,c.midPoint.x,c.midPoint.y));else if(this.isState(36)){let b=this.pickNodes({x:a.currentX,y:a.currentY},"context-menu");b&&(this.chart.ctx.highlightManager.updateHighlight(this.id),c=b.matches[0].datum)}let f=c?.series;this.clearAll();let g=a.currentX+b.cssLeft(),h=a.currentY+b.cssTop(),{datumIndex:i}=c??{};f&&c&&null!=i?this.chart.ctx.contextMenuRegistry.dispatchContext("series-node",{widgetEvent:a,canvasX:g,canvasY:h},{pickedSeries:f,pickedNode:{...c,datumIndex:i}},d):this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",{widgetEvent:a,canvasX:g,canvasY:h},void 0,d)}onLeave(a){if(!this.isState(41))return;let b=a.sourceEvent.relatedTarget;b?.className!=="ag-charts-text-input__textarea"&&(this.maybeEnterInteractiveTooltip(a.sourceEvent)||(this.chart.ctx.domManager.updateCursor(this.id),"keyboard"!==this.hoverDevice&&this.clearAll()))}onWheel(a){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.previousInputDevice="pointer")}onDragMove(a,b){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(a,b))}onHover(a,b){this.isState(41)&&this.onHoverLikeEvent(a,b)}onHoverLikeEvent(a,b){if(!this.isIgnoredTouch(a)&&("touch"===a.device&&"hover"===this.chart.ctx.chartService.touch.dragAction&&a.sourceEvent.preventDefault(),b===this.chart.ctx.widgets.seriesWidget&&(("touch"===a.device||"drag-move"!==a.type)&&(this.tooltip.lastHover=a),this.hoverDevice="pointer",this.previousInputDevice="pointer",this.highlight.pendingHoverEvent=a,this.hoverScheduler.schedule(),this.isState(32)))){let{currentX:b,currentY:c}=a,d=this.pickNodes({x:b,y:c},"event")?.matches,e=d?.[0];e?.series.hasEventListener("seriesNodeClick")||e?.series.hasEventListener("seriesNodeDoubleClick")||null!=d&&d.length>1&&this.chart.tooltip.pagination?this.chart.ctx.domManager.updateCursor(this.id,"pointer"):this.chart.ctx.domManager.updateCursor(this.id)}}onClick(a,b){if("keyboard"===a.device||(b===this.chart.ctx.widgets.seriesWidget&&this.chart.ctx.animationManager.isActive()&&this.chart.ctx.animationManager.skipCurrentBatch(),"touch"===a.device&&b===this.chart.ctx.widgets.seriesWidget&&this.swapChain.focus({preventScroll:!0}),!this.isState(41)))return;if(b===this.chart.ctx.widgets.seriesWidget){if(!b.getElement().contains(a.sourceEvent.target))return}else if(a.sourceEvent.target!=b.getElement())return;if(this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(a,b),!this.isState(32))return;if(b==this.chart.ctx.widgets.seriesWidget&&this.checkSeriesNodeClick(a)){this.update(5),a.sourceEvent.preventDefault();return}let c={type:"click"===a.type?"click":"doubleClick",event:a.sourceEvent};this.chart.fireEvent(c)}onFocus(){this.isState(34)&&(this.hoverDevice=this.focusIndicator?.isFocusVisible(!0)?"keyboard":"pointer",this.handleFocus(0,0))}onBlur(a){this.isState(34)&&(this.hoverDevice="pointer",this.maybeEnterInteractiveTooltip(a)||this.clearAll(),this.focusIndicator?.overrideFocusVisible(void 0))}onKeyDown(a){if(!this.isState(43))return;let b=function(a){for(let[b,{activatesFocusIndicator:c=!0,bindings:d}]of cC(lU))if(function(a,b){for(let c of b)if("code"in c){if(c.code===a.code)return!0}else if(c.key===a.key&&(void 0===c.shift||c.shift===a.shiftKey)&&(void 0===c.ctrlOrMeta||c.ctrlOrMeta===a.ctrlKey||c.ctrlOrMeta===a.metaKey))return!0;return!1}(a,d))return{name:b,activatesFocusIndicator:c}}(a.sourceEvent);switch(b?.activatesFocusIndicator===!1&&this.focusIndicator?.overrideFocusVisible("keyboard"===this.previousInputDevice),b?.name){case"redo":return this.chart.ctx.eventsHub.emit("series:redo",null);case"undo":return this.chart.ctx.eventsHub.emit("series:undo",null);case"zoomin":return this.chart.ctx.eventsHub.emit("series:keynav-zoom",{delta:1,widgetEvent:a});case"zoomout":return this.chart.ctx.eventsHub.emit("series:keynav-zoom",{delta:-1,widgetEvent:a});case"arrowup":return this.onArrow(-1,0,a);case"arrowdown":return this.onArrow(1,0,a);case"arrowleft":return this.onArrow(0,-1,a);case"arrowright":return this.onArrow(0,1,a);case"submit":return this.onSubmit(a)}}onArrow(a,b,c){this.isState(34)&&(this.hoverDevice="keyboard",this.previousInputDevice="keyboard",this.focusIndicator?.overrideFocusVisible(!0),this.focus.seriesIndex+=a,this.focus.datumIndex+=b,this.handleFocus(a,b),c.sourceEvent.preventDefault(),this.chart.ctx.eventsHub.emit("series:focus-change",null))}onSubmit(a){if(!this.isState(34))return;let{series:b,datum:c}=this.focus,d=a.sourceEvent;null!=b&&null!=c?b.fireNodeClickEvent(d,c):this.chart.fireEvent({type:"click",event:d}),d.preventDefault()}checkSeriesNodeClick(a){var b;let c=this.pickNodes({x:a.currentX,y:a.currentY},"event");if(null==c||0===c.matches.length)return;let d=this.chart.tooltip.pagination?this.tooltipCandidates.update(c.matches,this.tooltipCandidates.current)?.current:void 0,{series:e,datum:f}=d??c.matches[0],g=null==d?c.distance:0;if("click"===a.type){let c=e.fireNodeClickEvent(a.sourceEvent,f)&&this.chart.tooltip.pagination?this.tooltipCandidates.next():void 0;if(null!=c){a.sourceEvent.preventDefault();let{currentX:d,currentY:e}=a,f=d+(this.hoverRect?.x??0),g=e+(this.hoverRect?.y??0);(b=this.highlight).pendingHoverEvent??(b.pendingHoverEvent=this.highlight.appliedHoverEvent),this.handleHoverHighlight(!1),this.showTooltip(c.current,f,g,{index:c.index,length:c.length})}return!0}return"dblclick"===a.type&&(a.preventZoomDblClick=0===g,e.fireNodeDoubleClickEvent(a.sourceEvent,f),!0)}handleFocus(a,b){let c=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);null==c?0===this.handleSeriesFocus(a,b)?this.announceMode="when-changed":this.announceMode="always":(this.focusIndicator?.update(c.rect,this.seriesRect,!1),this.swapChain.update(c.text),this.announceMode="always")}handleSeriesFocus(a,b){if("standalone"===this.chart.chartType)return this.handleSoloSeriesFocus(a,b);let{focus:c}=this,d=c.sortedSeries.filter(a=>a.visible&&a.focusable);if(0===d.length)return 1;let e=c.datumIndex-b,f=c.seriesIndex-a;c.seriesIndex=aA(0,c.seriesIndex,d.length-1),c.series=d[c.seriesIndex];let g=this.focus.datumIndex,h=this.focus.seriesIndex;return this.updatePickedFocus(g,b,e,h,a,f)}handleSoloSeriesFocus(a,b){this.focus.series=this.focus.sortedSeries[0];let c=this.focus.datumIndex,d=this.focus.seriesIndex,e=this.focus.datumIndex-b,f=this.focus.seriesIndex-a;return this.updatePickedFocus(c,b,e,d,a,f)}updatePickedFocus(a,b,c,d,e,f){let{focus:g,hoverRect:h,seriesRect:i}=this;if(null==g.series||null==h)return 1;let j=g?.series?.pickFocus({datumIndex:a,datumIndexDelta:b,otherIndex:d,otherIndexDelta:e,seriesRect:i});if(!j)return 2;let{datum:k}=j;if(g.datum=k,g.datumIndex=j.datumIndex,null!=j.otherIndex&&(g.seriesIndex=j.otherIndex),this.focusIndicator?.isFocusVisible()){this.chart.ctx.animationManager.reset();let a=function({bounds:a}){return a instanceof dt?a:null!=a?ff.toCanvas(a):dt.NaN}(j),{x:b,y:c}=a.computeCenter();if(!h.containsPoint(b,c)&&this.chart.ctx.zoomManager.panToBBox(this.id,h,a))return 3;let{x1:d,x2:e,y1:f,y2:g}=iL.from(a),i=h.containsPoint(d,f),k=h.containsPoint(e,f),l=h.containsPoint(d,g),m=h.containsPoint(e,g);if(!(i||k||l||m)){let b=iL.from(h);j.movedBounds=a.clone(),d<b.x1&&e<b.x1?(j.movedBounds.x=b.x1-2,j.movedBounds.width=4):d>b.x2&&e>b.x2&&(j.movedBounds.x=b.x2-2,j.movedBounds.width=4),f<b.y1&&g<b.y1?(j.movedBounds.y=b.y1-2,j.movedBounds.height=4):f>b.y2&&g>b.y2&&(j.movedBounds.y=b.y2-2,j.movedBounds.height=4)}}this.focusIndicator?.update(j.movedBounds??j.bounds,this.seriesRect,j.clipFocusBox);let l=this.getTooltipContent(g.series,k.datumIndex,k,"aria-label"),m=function(a,b,c){let{x:d,y:e}=function(a,b,c){let d=ir(a,c.datum,c.movedBounds);if(null!=d)return{x:d.canvasX,y:d.canvasY};let e=c.bounds;if(null!=e){if(e instanceof dt){let{x:a,y:c}=e.computeCenter();return{x:b.x+a,y:b.y+c}}return ff.toCanvas(e).computeCenter()}}(a,b,c)??{};if(void 0!==d&&void 0!==e)return{type:"keyboard",canvasX:d,canvasY:e}}(g.series,h,j);if(null!=m&&"keyboard"===this.hoverDevice){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;let a=iv.makeTooltipMeta(m,g.series,k,j.movedBounds);this.chart.ctx.highlightManager.updateHighlight(this.id,k),this.isTooltipEnabled(g.series)&&this.chart.ctx.tooltipManager.updateTooltip(this.id,a,l)}return this.maybeAnnouncePickedFocus(b,c,e,f,j,l),0}maybeAnnouncePickedFocus(a,b,c,d,e,f){let{focus:g}=this;"always"===("when-changed"===this.announceMode?0===a&&0===c||b!==e.datumIndex||d!==(e.otherIndex??g.seriesIndex)?"always":"never":this.announceMode)&&this.swapChain.update(this.getDatumAriaText(e.datum,f))}getDatumAriaText(a,b){let c=null==b?"":l5(b);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:a.series.getDatumAriaText?.(a,c)??c})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.focusIndicator?.clear()}handleHoverHighlight(a){this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;let b=this.highlight.appliedHoverEvent;if(!b||!this.isState(41))return;let{currentX:c,currentY:d}=b,e=b.currentX+(this.hoverRect?.x??0),f=b.currentY+(this.hoverRect?.y??0);if(a?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(e,f))return void this.clearHighlight();let{range:g}=this.chart.highlight,h=this.pickNodes({x:c,y:d},"tooltip"===g?"highlight-tooltip":"highlight");if(!h||0===h.matches.length)return void this.chart.ctx.highlightManager.updateHighlight(this.id);let{current:i}=this.tooltipCandidates,j=null==i?void 0:h.matches.find(a=>mh(a,i)),k=j?.datum??h.matches[0].datum;this.chart.ctx.highlightManager.updateHighlight(this.id,k),this.hoverDevice="pointer"}handleHoverTooltip(a,b){let{current:c}=this.tooltipCandidates;if(this.tooltipCandidates.reset(),!this.isState(41))return;let{currentX:d,currentY:e}=a,f=d+(this.hoverRect?.x??0),g=e+(this.hoverRect?.y??0),h=a.sourceEvent.target;if(b?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(f,g)){"pointer"==this.hoverDevice&&this.clearTooltip();return}if(h&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(h,"canvas-overlay",l2))return;let i=this.pickNodes({x:a.currentX,y:a.currentY},"tooltip");if(!i||0===i.matches.length){"pointer"==this.hoverDevice&&this.clearTooltip();return}if(this.hoverDevice="pointer",0===i.distance){let{current:a,index:b,length:d}=this.tooltipCandidates.update(i.matches,this.chart.tooltip.pagination?c:void 0);this.showTooltip(a,f,g,{index:b,length:d})}else this.showTooltip(i.matches[0],f,g)}showTooltip({series:a,datum:b,datumIndex:c},d,e,f){let g=this.getTooltipContent(a,c,b,"tooltip");if(null!=g){let c=iv.makeTooltipMeta({type:"pointermove",canvasX:d,canvasY:e},a,b,void 0);this.chart.ctx.tooltipManager.updateTooltip(this.id,c,g,f)}else this.chart.ctx.tooltipManager.removeTooltip(this.id)}maybeEnterInteractiveTooltip(a){return this.chart.tooltip.maybeEnterInteractiveTooltip(a,()=>{this.tooltip.lastHover=void 0,this.chart.ctx.tooltipManager.removeTooltip(this.id),this.chart.ctx.highlightManager.updateHighlight(this.id)})}changeHighlightDatum(a){let b=a.previousHighlight?.series,c=a.currentHighlight?.series;b?.properties.cursor&&a.previousHighlight?.datum&&this.chart.ctx.domManager.updateCursor(b.id),c?.properties.cursor&&"default"!==c.properties.cursor&&a.currentHighlight?.datum&&this.chart.ctx.domManager.updateCursor(c.id,c.properties.cursor),null==c||null==b?this.update(5,{clearCallbackCache:!0}):this.update(5,{seriesToUpdate:new Set([b,c].filter(Boolean)),clearCallbackCache:!0})}pickNodes(a,b,c){let d;for(let e of[...this.series].reverse()){if(!e.visible||!e.contentGroup.visible)continue;let f=e.pickNodes(a,b,c);if(null==f||0===f.datums.length)continue;let{datums:g,distance:h}=f;if(0!==f.datums.length){if(0===h)for(let a of(d?.distance!==0&&(d={matches:[],distance:0}),g)){let{datumIndex:b}=a;d.matches.push({series:e,datum:a,datumIndex:b})}else if(null==d||d.distance>h){let[a]=g,{datumIndex:b}=a;d={matches:[{series:e,datum:a,datumIndex:b}],distance:h}}}}return d}isTooltipEnabled(a){return a.tooltipEnabled??this.chart.tooltip.enabled}getTooltipContent(a,b,c,d){let e;if("aria-label"===d||this.isTooltipEnabled(a)){let{cachedTooltipContent:f}=this;if(null!=f&&f.series===a&&f.datumIndex===b)e=f.content;else{let f=this.chart.getTooltipContent(a,b,c,d);this.cachedTooltipContent={series:a,datumIndex:b,content:f},e=f}}else this.cachedTooltipContent=void 0;return e}},mk=class{constructor(a){this.seriesRoot=a,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(a){this.expectedSeriesCount=a}getGroupIndex(a){let{internalId:b,seriesGrouping:c}=a;return c?.groupIndex??b}getGroupType(a,b){return b?"top":a.type}requestGroup(a){let{internalId:b,contentGroup:c}=a,d=a.bringToFront(),e=this.getGroupType(a,d),f=this.getGroupIndex(a),g=this.series.get(b);if(null!=g)throw Error(`AG Charts - series already has an allocated layer: ${JSON.stringify(g)}`);0===this.series.size&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal");let h=this.groups.get(e);null==h&&(h=new Map,this.groups.set(e,h));let i=this.lookupIdx(f),j=h.get(i);return null==j&&(j={type:e,id:i,seriesIds:[],group:this.seriesRoot.appendChild(new fh({name:`${a.contentGroup.name??e}-managed-layer`,zIndex:a.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},h.set(i,j)),this.series.set(b,{layerState:j,seriesConfig:a,bringToFront:d}),j.seriesIds.push(b),j.group.appendChild(c),j.group}changeGroup(a){let{internalId:b,contentGroup:c}=a,d=a.bringToFront(),e=this.getGroupType(a,d),f=this.series.get(b),g=f?this.getGroupType(f.seriesConfig,f.bringToFront):void 0,h=this.getGroupIndex(a),i=this.lookupIdx(h),j=this.groups.get(e)?.get(i);if(g!==e||j?.seriesIds.includes(b)!==!0)return this.series.has(b)&&this._releaseGroup({internalId:b,contentGroup:c,type:g}),this.requestGroup(a)}releaseGroup(a){let{internalId:b,contentGroup:c}=a,d=this.getGroupType(a,a.bringToFront());this._releaseGroup({internalId:b,contentGroup:c,type:d})}_releaseGroup(a){let{internalId:b,contentGroup:c,type:d}=a;if(!this.series.has(b))throw Error(`AG Charts - series doesn't have an allocated layer: ${b}`);let e=this.series.get(b)?.layerState;e&&(e.seriesIds=e.seriesIds.filter(a=>a!==b),e.group.removeChild(c)),e?.seriesIds.length===0?(this.seriesRoot.removeChild(e.group),this.groups.get(e.type)?.delete(e.id),this.groups.get(d)?.delete(b)):null!=e&&e.seriesIds.length>0&&(e.group.zIndex=this.getLowestSeriesZIndex(e.seriesIds)),this.series.delete(b)}updateLayerCompositing(){this.groups.forEach(a=>{a.forEach(a=>{let b,{group:c,seriesIds:d}=a;if(0===d.length)b=!1;else if(d.length>1)b=!0;else{let a=this.series.get(d[0]);b=a?.seriesConfig.renderToOffscreenCanvas()===!0}c.renderToOffscreenCanvas=b,c.zIndex=this.getLowestSeriesZIndex(d)})})}lookupIdx(a){return"normal"===this.mode?a:"string"!=typeof a||Number.isFinite(a=Number(a.split("-").at(-1)))?Math.floor(30*aA(0,a/this.expectedSeriesCount,1)):0}destroy(){this.groups.forEach(a=>{a.forEach(a=>{this.seriesRoot.removeChild(a.group)})}),this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(a){let b;for(let c of a){let a=this.series.get(c),d=a?.seriesConfig.contentGroup.zIndex??1;if(null==b||null==d){b=d;continue}b=0>=d4(b,d)?b:d}return b??1}},ml=class extends ez{constructor(){super(...arguments),this.dragAction="drag"}};dl([ey],ml.prototype,"dragAction",2);var mm=class{constructor(a,b,c,d,e,f){this.chart=a,this.eventsHub=b,this.dataService=c,this.updateService=d,this.zoomManager=e,this.animationManager=f,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.cleanup=new cQ,this.cleanup.register(this.eventsHub.on("data:source-change",()=>this.onDataSourceChange()),this.eventsHub.on("data:load",()=>this.onDataLoad()),this.eventsHub.on("data:error",()=>this.onDataError()),this.updateService.addListener("update-complete",a=>this.onUpdateComplete(a)),this.eventsHub.on("zoom:change",()=>this.onZoomChange()))}destroy(){this.cleanup.flush()}onDataLoad(){this.animationManager.skip(),this.updateService.update(1)}onDataError(){this.updateService.update(4)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(a){(a.apiUpdate||this.dirtyZoom||this.dirtyDataSource)&&this.updateWindow(a)}onZoomChange(){this.dirtyZoom=!0}updateWindow(a){let b;if(!this.dataService.isLazy())return;let c=this.getValidAxis(),d=!0;if(c){let e=this.zoomManager.getAxisZoom(c.id);(0!==e.min||1!==e.max)&&(b=this.getAxisWindow(c,e)),d=this.shouldRefresh(a,c,e)}this.dirtyZoom=!1,this.dirtyDataSource=!1,d&&this.dataService.load({windowStart:b?.min,windowEnd:b?.max})}getValidAxis(){return this.chart.axes.find(a=>"time"===a.type)}shouldRefresh(a,b,c){if(a.apiUpdate||this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;let d=this.lastAxisZooms.get(b.id);return(!d||c.min!==d.min||c.max!==d.max)&&(this.lastAxisZooms.set(b.id,c),!0)}getAxisWindow(a,b){let{domain:c}=a.scale;if(!b||0===c.length||isNaN(Number(c[0])))return;let d=Number(c[1])-Number(c[0]);return{min:new Date(Number(c[0])+d*b.min),max:new Date(Number(c[0])+d*b.max)}}},mn=/^((?!chrome|android).)*safari/i,mo=/Version\/(\d+(\.\d+)?)/,mp=/Chrome/,mq=/Chrome\/(\d+)/,mr=/Edg/,ms=/OPR/,mt=new Set(["map-shape-background","map-line-background"]),mu=class{constructor(a,b,c,d,e,f,g){this.chartLike=a,this.overlays=b,this.eventsHub=c,this.dataService=d,this.localeManager=e,this.animationManager=f,this.domManager=g,this.cleanup=new cQ,this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(lC),this.cleanup.register(this.eventsHub.on("layout:complete",a=>this.onLayoutComplete(a)))}destroy(){this.cleanup.flush(),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:a}}){let b=this.dataService.isLoading(),c=this.chartLike.series.some(a=>a.hasData),d=this.chartLike.series.some(a=>a.visible&&!mt.has(a.type));this.overlays.darkTheme?this.overlayElem.classList.add(lD):this.overlayElem.classList.remove(lD),this.overlayElem.style.left=`${a.x}px`,this.overlayElem.style.top=`${a.y}px`,this.overlayElem.style.width=`${a.width}px`,this.overlayElem.style.height=`${a.height}px`;let e=!b&&!c,f=c&&!d,g=this.overlays.unsupportedBrowser.enabled&&function(){let{userAgent:a}=aH("navigator");if(mn.test(a)){let b=mo.exec(a);if(null==b)return!1;let c=parseFloat(b[1]),d=Math.floor(c)>16;return d||aa.warnOnce(`Unsupported Safari version: ${c}; ${a}`),!d}if(mp.test(a)&&!mr.test(a)&&!ms.test(a)){let b=mq.exec(a);if(null==b)return!1;let c=parseInt(b[1],10),d=c>126;return d||aa.warnOnce(`Unsupported Chrome version: ${c}; ${a}`),!d}return!1}();b?this.showOverlay(this.overlays.loading,a):this.hideOverlay(this.overlays.loading),e?this.showOverlay(this.overlays.noData,a):this.hideOverlay(this.overlays.noData),f?this.showOverlay(this.overlays.noVisibleSeries,a):this.hideOverlay(this.overlays.noVisibleSeries),g?this.showOverlay(this.overlays.unsupportedBrowser,a):this.hideOverlay(this.overlays.unsupportedBrowser),cG(this.overlayElem,"aria-hidden",!(b||e||f||g))}showOverlay(a,b){if(!a.enabled)return;let c=a.getElement(this.chartLike,this.animationManager,this.localeManager,b);this.overlayElem.appendChild(c)}hideOverlay(a){a.removeElement(()=>{this.overlayElem.innerText=" "},this.animationManager)}},mv=dw.create(!0,"opts"),mw=class a extends fE{constructor(a,b){var c;super(),this.id=c_(this),this.seriesRoot=new fk({name:`${this.id}-series-root`,zIndex:7}),this.annotationRoot=new fk({name:`${this.id}-annotation-root`,zIndex:11}),this.titleGroup=new fh({name:"titles",zIndex:15}),this.debug=dw.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this._autoSizeNotify=new cy,this.chartCaptions=new gp,this.padding=new fF(20),this.keyboard=new jt,this.touch=new ml,this.mode="standalone",this.styleNonce=void 0,this.formatter=void 0,this.suppressFieldDotNotation=!1,this.loadGoogleFonts=!1,this.destroyed=!1,this.cleanup=new cQ,this.chartAnimationPhase="initial",this.modulesManager=new lB,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this.syncStatus="init",this.fireEventWrapper=a=>super.fireEvent(a),this.apiUpdate=!1,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new cy,this.performUpdateType=8,this.runningUpdateType=8,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new fD,this.clearCallbackCacheOnUpdate=!1,this.updateRequestors={},this.performUpdateTrigger=fL((a,b=0)=>{0===b?queueMicrotask(a):setTimeout(a,b)},({count:a})=>{this.destroyed||this.updateMutex.acquire(async()=>{try{await this.performUpdate(a)}catch(a){aa.error("update error",a,a.stack)}}).catch(a=>aa.errorOnce(a))}),this._performUpdateSplits={},this.axes=[],this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=a=>{this.fireEvent(a)},this.onSeriesNodeDoubleClick=a=>{this.fireEvent(a)},this.onSeriesVisibilityChange=a=>{this.fireEvent(a)},this.seriesGroupingChanged=a=>{if(!(a instanceof lO))return;let{series:b,seriesGrouping:c}=a;if(b.contentGroup.isRoot())return;let d=this.seriesLayerManager.changeGroup({internalId:b.internalId,type:b.type,contentGroup:b.contentGroup,bringToFront:()=>b.bringToFront(),renderToOffscreenCanvas:()=>b.renderToOffscreenCanvas(),seriesGrouping:c});null!=d&&b.attachSeries(d,this.seriesRoot,this.annotationRoot)},this.chartOptions=a;let d=b?.scene,e=b?.container??a.processedOptions.container??void 0,f=b?.styleContainer??a.specialOverrides.styleContainer;d&&(this._firstAutoSize=!1,this._lastAutoSize=[d.width,d.height,d.pixelRatio]);let g=new fh({name:"root"});g.visible=!1,g.append(this.seriesRoot),g.append(this.annotationRoot),g.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new mg,this.seriesLayerManager=new mk(this.seriesRoot),this.mode=a.userOptions.mode??this.mode,this.styleNonce=a.processedOptions.styleNonce;let h=this.ctx=new i2(this,{chartType:this.getChartType(),scene:d,root:g,container:e,styleContainer:f,domMode:a.optionMetadata.domMode,withDragInterpretation:a.optionMetadata.withDragInterpretation??!0,syncManager:new js(this),fireEvent:a=>this.fireEvent(a),updateCallback:(a,b)=>this.update(a,b),updateMutex:this.updateMutex});this.cleanup.register(h.eventsHub.on("dom:resize",()=>this.parentResize(h.domManager.containerSize))),this.overlays=new lF,(c=this.overlays.loading).renderer??(c.renderer=()=>(function(a,b){let{animationDuration:c}=hW.add,d=aI("div",`${lC}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${c*b}ms linear 50ms both`}),e=aI("span",{width:"45px",height:"40px",backgroundImage:"linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)",backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),f=aI("p",{marginTop:"1em"});f.innerText=a;let g=aI("div",`${lC}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),h=aI("style");return h.innerText="@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } } @keyframes ag-charts-loading-matrix { 0% { background-position: 0% 0%, 50% 0%, 100% 0%; } 100% { background-position: 0% 100%, 50% 100%, 100% 100%; } }",d.replaceChildren(h,e,f,g),d})(this.overlays.loading.getText(h.localeManager),h.animationManager.defaultDuration)),this.processors=[new mm(this,h.eventsHub,h.dataService,h.updateService,h.zoomManager,h.animationManager),new mu(this,this.overlays,h.eventsHub,h.dataService,h.localeManager,h.animationManager,h.domManager)],this.highlight=new i3,this.container=e;let i=this.getModuleContext();h.domManager.setDataBoolean("animating",!1),this.seriesAreaManager=new mj(this.initSeriesAreaDependencies()),this.cleanup.register(h.layoutManager.registerElement(0,a=>{a.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(a)}),h.eventsHub.on("layout:complete",a=>this.chartCaptions.positionAbsoluteCaptions(a)),h.eventsHub.on("data:load",a=>{this.data=a.data}),this.title.registerInteraction(i,"beforebegin"),this.subtitle.registerInteraction(i,"beforebegin"),this.footnote.registerInteraction(i,"afterend"),f$.addWindowEvent("page-left",()=>this.destroy()),h.animationManager.addListener("animation-frame",()=>{this.update(7)}),h.animationManager.addListener("animation-start",()=>h.domManager.setDataBoolean("animating",!0)),h.animationManager.addListener("animation-stop",()=>h.domManager.setDataBoolean("animating",!1)),h.eventsHub.on("zoom:change",()=>{this.series.forEach(a=>a.animationState?.transition("updateData"));let a="initial"!==this.chartAnimationPhase;this.update(4,{forceNodeDataRefresh:!0,skipAnimations:a})})),this.parentResize(h.domManager.containerSize)}static getInstance(b){return a.chartsInstances.get(b)}get canvasElement(){return this.ctx.scene.canvas.element}download(a,b){this.ctx.scene.download(a,b)}getCanvasDataURL(a){return this.ctx.scene.getDataURL(a)}toSVG(){return this.ctx.scene.toSVG()}get seriesAreaBoundingBox(){return this.seriesAreaManager.bbox}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}getChartOptions(){return this.queuedChartOptions.at(-1)??this.chartOptions}overrideFocusVisible(a){this.seriesAreaManager.focusIndicator?.overrideFocusVisible(a)}fireEvent(a){fn(this,this.fireEventWrapper,a)}initSeriesAreaDependencies(){let{ctx:a,tooltip:b,highlight:c,overlays:d,seriesRoot:e,mode:f}=this,g=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,getTooltipContent:(a,b,c,d)=>this.getTooltipContent(a,b,c,d),chartType:g,ctx:a,tooltip:b,highlight:c,overlays:d,seriesRoot:e,mode:f}}getModuleContext(){return this.ctx}getTooltipContent(a,b,c,d){let e="aria-label"===d||!1!==a.properties.tooltip.enabled?a.getTooltipContent(b,c):void 0,f=null==e?[]:[e];if("shared"!==this.tooltip.mode||1===this.series.length)return f;let g=a.getCategoryValue(b);return null==g?f:this.series.flatMap(b=>{if(b===a)return f;if(!b.isEnabled()||!1===b.properties.tooltip.enabled)return[];let c=b.datumIndexForCategoryValue(g),d=null==c?void 0:b.getTooltipContent(c,void 0);return null==d?[]:[d]})}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(a=>a.enabled&&a.text).map(a=>a.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){for(let a of(this.chartAnimationPhase="initial",this.series))a.resetAnimation(this.chartAnimationPhase);for(let a of this.axes)a.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clearCanvas()}destroy(a){let b;if(this.destroyed)return;let c=a?.keepTransferableResources;return this.performUpdateType=8,this.cleanup.flush(),this.processors.forEach(a=>a.destroy()),this.overlays.destroy(),this.modulesManager.destroy(),c?(this.ctx.scene.strip(),b={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(a=>a.destroy()),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),b}requestFactoryUpdate(a){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(async()=>{if(!this.destroyed)try{await a(this)}finally{!this.destroyed&&this._pendingFactoryUpdatesCount--}}).catch(a=>aa.errorOnce(a)))}clearCallbackCache(){for(let a of(this.ctx.callbackCache.invalidateCache(),this.series))a.resetDatumCallbackCache()}update(a=0,b){if(this.destroyed)return;let{forceNodeDataRefresh:c=!1,skipAnimations:d,seriesToUpdate:e=this.series,newAnimationBatch:f,apiUpdate:g=!1,clearCallbackCache:h=!1}=b??{};for(let a of(this.apiUpdate=g,this.ctx.widgets.seriesWidget.setDragTouchEnabled("none"!==this.touch.dragAction),c&&this.series.forEach(a=>a.markNodeDataDirty()),e))this.seriesToUpdate.add(a);if(d&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),f&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),(0===a||h)&&(this.clearCallbackCacheOnUpdate=!0),this.debug.check()){let b=Error().stack??"<unknown>";b=b.replace(/\([^)]*/g,""),this.updateRequestors[b]=a}a<this.performUpdateType&&(this.performUpdateType=a,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(b?.backOffMs))}async performUpdate(a){let{performUpdateType:b,extraDebugStats:c,_performUpdateSplits:d,ctx:e}=this,f=[...this.seriesToUpdate];this.clearCallbackCacheOnUpdate&&(this.clearCallbackCacheOnUpdate=!1,this.clearCallbackCache()),this.performUpdateType=8,this.seriesToUpdate.clear(),this.runningUpdateType=b,0===this.updateShortcutCount&&b<7&&(e.animationManager.startBatch(this._performUpdateSkipAnimations),e.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.ctx.scene.updateDebugFlags(),this.debug("Chart.performUpdate() - start",hp[b]);let g=performance.now();d.start??(d.start=g);let h=a=>{d[a]??(d[a]=0),d[a]+=performance.now()-g,g=performance.now()};switch(b){case 0:if(this.checkUpdateShortcut(0))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:if(this.checkUpdateShortcut(1))break;await this.updateData(),h("⬇️");case 2:if(this.checkUpdateShortcut(2))break;await this.processData(),this.seriesAreaManager.dataChanged(),h("🏭");case 3:if(this.checkUpdateShortcut(3))break;await this.processDomains(),h("⛰️");case 4:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(4))break;await this.processLayout(),h("⌖");case 5:if(this.checkUpdateShortcut(5))break;await this.updateSeries(f),h("🤔"),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing();case 6:if(this.checkUpdateShortcut(6))break;e.updateService.dispatchPreSceneRender(),h("↖");case 7:if(this.checkUpdateShortcut(7))break;for(let a of(e.animationManager.endBatch(),c.updateShortcutCount=this.updateShortcutCount,e.scene.render({debugSplitTimes:d,extraDebugStats:c,seriesRect:this.seriesRect}),this.extraDebugStats={},Object.keys(d)))delete d[a];this.ctx.domManager.incrementDataCounter("sceneRenders"),this.ctx.domManager.postRenderUpdate();case 8:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,e.animationManager.endBatch()}this.destroyed||(e.updateService.dispatchUpdateComplete(this.apiUpdate),this.apiUpdate=!1,this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=8,this.syncStatus="ready"),this._performUpdateNotify.notify();let i=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((i-d.start)*100)/100,count:a,performUpdateType:hp[b]})}updateThemeClassName(){let a="ag-charts-theme-",b=[`${a}default`,`${a}default-dark`],c=b[0],d=!1,{theme:e}=this.chartOptions.processedOptions;for(;"string"!=typeof e&&null!=e;)e=e.baseTheme;"string"==typeof e&&(c=e.replace("ag-",a),d=e.includes("-dark")),b.includes(c)||(c=d?b[1]:b[0]),this.ctx.domManager.setThemeClass(c)}updateDOM(){this.updateThemeClassName();let{enabled:a,tabIndex:b}=this.keyboard;this.ctx.domManager.setTabGuardIndex(a?b??0:-1),this.ctx.domManager.setThemeParameters(this.chartOptions.themeParameters)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(a){return!!this.destroyed||(this.updateShortcutCount>3?(aa.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=a&&(this.updateShortcutCount++,!0))}async checkFirstAutoSize(){null!=this.width&&null!=this.height||!this._lastAutoSize&&(await this._autoSizeNotify.await(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update."))}onAxisChange(a,b){(null!=b||0!==a.length)&&this.ctx.axisManager.updateAxes(b??[],a)}onSeriesChange(a,b){let c=b?.filter(b=>!a.includes(b))??[];for(let d of(this.destroySeries(c),this.seriesLayerManager?.setSeriesCount(a.length),a)){if(b?.includes(d))continue;let a=this.seriesLayerManager.requestGroup(d);d.attachSeries(a,this.seriesRoot,this.annotationRoot);let c=this;d.chart={get mode(){return c.mode},get isMiniChart(){return!1},get seriesRect(){return c.seriesRect}},d.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(d),d.addChartEventListeners()}this.seriesAreaManager?.seriesChanged(a)}destroySeries(a){a?.forEach(a=>{a.removeEventListener("seriesNodeClick",this.onSeriesNodeClick),a.removeEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),a.removeEventListener("groupingChanged",this.seriesGroupingChanged),a.destroy(),this.seriesLayerManager.releaseGroup(a),a.detachSeries(void 0,this.seriesRoot,this.annotationRoot),a.chart=void 0})}addSeriesListeners(a){this.hasEventListener("seriesNodeClick")&&a.addEventListener("seriesNodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&a.addEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&a.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),a.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(let a of this.axes)a.boundSeries=this.series.filter(b=>b.axes[a.direction]===a)}assignAxesToSeries(){let a=cv(this.axes,a=>a.direction);for(let b of this.series)for(let c of b.directions){let d=a[c];if(!d)return void aa.warnOnce(`no available axis for direction [${c}]; check series and axes configuration.`);let e=b.getKeys(c),f=d.find(a=>!a.keys.length||e.some(b=>a.keys.includes(b)));if(!f)return void aa.warnOnce(`no matching axis for direction [${c}] and keys [${e}]; check series and axes configuration.`);b.axes[c]=f}}parentResize(a){if(null==a||null!=this.width&&null!=this.height)return;let{width:b,height:c}=a,{pixelRatio:d}=a;if(b=Math.floor(b),c=Math.floor(c),0===b&&0===c)return;let[e=0,f=0,g=1]=this._lastAutoSize??[];(e!==b||f!==c||g!==d)&&(this._lastAutoSize=[b,c,d],this.resize("SizeMonitor",{}))}resize(a,b){let{scene:c,animationManager:d}=this.ctx,{inWidth:e,inHeight:f,inMinWidth:g,inMinHeight:h,inOverrideDevicePixelRatio:i}=b;this.ctx.domManager.setSizeOptions(g??this.minWidth,h??this.minHeight,e??this.width,f??this.height);let j=e??this.width??this._lastAutoSize?.[0],k=f??this.height??this._lastAutoSize?.[1],l=i??this.overrideDevicePixelRatio??this._lastAutoSize?.[2];if(this.debug(`Chart.resize() from ${a}`,{width:j,height:k,pixelRatio:l,stack:Error().stack}),null!=j&&null!=k&&aW(j)&&aW(k)&&c.resize(j,k,l)){d.reset();let a=!0;(null==this.width||null==this.height)&&this._firstAutoSize&&(a=!1,this._firstAutoSize=!1),this.update(4,{forceNodeDataRefresh:!0,skipAnimations:a}),this._autoSizeNotify.notify()}}async updateData(){this.series.forEach(a=>a.setChartData(this.data));let a=this.modulesManager.mapModules(a=>a.updateData?.(this.data));await Promise.all(a)}async processData(){this.series.some(a=>a.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());let a=new jh(this.mode,this.suppressFieldDotNotation),b=this.series.map(b=>b.processData(a)),c=this.modulesManager.mapModules(b=>b.processData?.(a));this._cachedData=a.execute(this._cachedData),await Promise.all([...b,...c]),this.updateLegends()}async processDomains(){for(let a of this.axes)a.processData();for(let a of this.series)a.updatedDomains()}updateLegends(a){for(let{legend:b,legendType:c}of this.modulesManager.legends())"category"===c?this.setCategoryLegendData(a):this.setLegendData(c,b)}setCategoryLegendData(a){var b;let{ctx:{legendManager:c,stateManager:d}}=this;a&&this.series.forEach(b=>{let c=a.find(a=>a.seriesId===b.id);b.onLegendInitialState("category",c)});let e=this.series.flatMap(a=>{let b=a.getLegendData("category");return c.updateData(a.id,b),b});if(a)return void d.setStateAndRestore(c,a);if("integrated"!==this.mode){let a={},c=new Map(this.series.map(a=>[a.id,a.type]));for(let{seriesId:d,symbol:{marker:f},label:g}of e.filter(a=>!a.hideInLegend)){if(null==f.fill)continue;let e=c.get(d),h=a[e]??(a[e]={});h[b=g.text]??(h[b]=f.fill),h[g.text]!==f.fill&&aa.warnOnce(`legend item '${g.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}c.update()}setLegendData(a,b){b.data=this.series.filter(a=>a.properties.showInLegend).flatMap(b=>b.getLegendData(a))}async processLayout(){let a=this.animationRect,{width:b,height:c}=this.ctx.scene,d=this.ctx.layoutManager.createContext(b,c);await this.performLayout(d),a&&!this.animationRect?.equals(a)&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(a){let{seriesRect:b}=this;await Promise.all(a.map(a=>a.update({seriesRect:b}))),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter(a=>a.visible&&a.usesPlacedLabels),this.padding,this.seriesRect)}async waitForUpdate(a,b){let c=aH("agChartsDebugTimeout");null==c?(a??(a=1e5),b??(b=!1)):(a=c,b??(b=!0));let d=performance.now();for(;(this._pendingFactoryUpdatesCount>0||8!==this.performUpdateType||8!==this.runningUpdateType||this.ctx.scene.waitingForUpdate())&&!this.destroyed;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),(8!==this.performUpdateType||8!==this.runningUpdateType)&&await this._performUpdateNotify.await(),performance.now()-d>a){let c=`Chart.waitForUpdate() timeout of ${a} reached - first chart update taking too long.`;if(b)throw Error(c);aa.warnOnce(c)}fs()&&await cz(),this.ctx.scene.waitingForUpdate()&&await cz(50)}}filterMiniChartSeries(a){return a?.filter(a=>!1!==a.showInMiniChart)}applyOptions(a){let b=this.firstApply?a.processedOptions:a.diffOptions(this.chartOptions);if(null==b||0===Object.keys(b).length){mv("Chart.applyOptions() - no delta, forcing re-layout",b),this.update(4,{apiUpdate:!0,newAnimationBatch:!0});return}let c=this.firstApply?{}:this.chartOptions.processedOptions,d=a.processedOptions;mv("Chart.applyOptions() - applying delta",b);let e=this.applyModules(d);b.listeners&&this.registerListeners(this,b.listeners),fB(this,b,{skip:["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer","formatter"]});let f=!1,g="no-op";null!=b.series&&(g=this.applySeries(this,b.series,c?.series),f=!0),"replaced"===g&&this.resetAnimations(),this.applyAxes(this,d,c,g,[])&&(f=!0),b.data&&(this.data=b.data),b.legend?.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,b.legend.listeners),b.locale?.localeText&&(this.modulesManager.getModule("locale").localeText=b.locale?.localeText),this.chartOptions=a;let h=this.modulesManager.getModule("navigator"),i=this.modulesManager.getModule("zoom");h?.enabled||i?.enabled||this.ctx.zoomManager.updateZoom("chart");let j=h?.miniChart,k=d.navigator?.miniChart?.series??d.series;j?.enabled===!0&&null!=k?this.applyMiniChartOptions(j,k,d,c):j?.enabled===!1&&(j.series=[],j.axes=[]),this.ctx.annotationManager.setAnnotationStyles(a.annotationThemes),f||(f=this.shouldForceNodeDataRefresh(b,g));let l=f||e?0:4;if(this.maybeResetAnimations(g),this.shouldClearLegendData(d,c,g)&&this.ctx.legendManager.clearData(),this.applyInitialState(d),this.ctx.formatManager.setFormatter(d.formatter),mv("Chart.applyOptions() - update type",hp[l],{seriesStatus:g,forceNodeDataRefresh:f}),void 0!==a.optionsProcessingTime){this._performUpdateSplits["⚙️"]=a.optionsProcessingTime;let b=performance.now()-a.optionsProcessingTime;this._performUpdateSplits.start=b}this.update(l,{apiUpdate:!0,forceNodeDataRefresh:f,newAnimationBatch:!0,clearCallbackCache:!0}),this.firstApply=!1}applyInitialState(a){let{annotationManager:b,chartTypeOriginator:c,historyManager:d,stateManager:e,zoomManager:f}=this.ctx,{initialState:g}=a;if("annotations"in a&&a.annotations?.enabled&&g?.annotations!=null){let a=g.annotations.map(a=>{let c=b.getAnnotationTypeStyles(a.type);return dM(a,c)});e.setState(b,a)}g?.chartType!=null&&e.setState(c,g.chartType),(a.navigator?.enabled||a.zoom?.enabled)&&g?.zoom!=null&&e.setState(f,g.zoom),g?.legend!=null&&this.updateLegends(g.legend),null!=g&&d.clear()}maybeResetAnimations(a){if("standalone"===this.mode)switch(a){case"series-grouping-change":case"replaced":this.resetAnimations()}}shouldForceNodeDataRefresh(a,b){let c=!!a.data||"data-change"===b||"replaced"===b,d=Object.values(jl.getKeys()).some(b=>null!=a[b]),e=null!=a.title&&null!=a.subtitle||null!=a.formatter;return c||d||e}shouldClearLegendData(a,b,c){let d="replaced"===c||"series-grouping-change"===c||"updated"===c&&(a.series?.length!==b.series?.length||!a.series?.every((a,c)=>a.type===b.series?.[c].type)),e=null!=b.legend&&null==a.legend;return d||e}applyMiniChartOptions(a,b,c,d){let e=d?.navigator?.miniChart?.series??d?.series,f=this.applySeries(a,this.filterMiniChartSeries(b),this.filterMiniChartSeries(e));for(let b of(this.applyAxes(a,c,d,f,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]),a.series))b.properties.id=void 0;let g=a.axes,h=g.find(a=>"x"===a.direction);for(let a of g)a.nice=!1,a.gridLine.enabled=!1,a.label.enabled=a===h,a.tick.enabled=!1,a.interactionEnabled=!1;if(null!=h){let a=c.navigator?.miniChart,b=a?.label,d=a?.label?.interval;if(h.line.enabled=!1,h.label.set(dQ(b,["interval","autoRotate","autoRotateAngle","itemStyler","minSpacing","rotation"])),"grouped-category"===h.type){h.label.enabled=!1,h.label.rotation=0;let{depthOptions:a}=h;if(0===a.length)a.set([{label:{enabled:!0}}]);else for(let b=1;b<a.length;b++)a[b].label.enabled=!1}else("time"===h.type||"unit-time"===h.type||"ordinal-time"===h.type)&&(h.parentLevel.enabled=!1);h.interval.step=d?.step,h.interval.values=d?.values,h.interval.minSpacing=d?.minSpacing,h.interval.maxSpacing=d?.maxSpacing}}applyModules(a){let{type:b}=this.constructor,c=!1;for(let d of dn.byType("root","legend")){let e=null!=a[d.optionsKey]&&d.chartTypes.includes(b);e!==this.modulesManager.isEnabled(d)&&(e?(this.modulesManager.addModule(d,a=>a.moduleFactory(this.getModuleContext())),"legend"===d.type&&this.modulesManager.getModule(d)?.attachLegend(this.ctx.scene),this[d.optionsKey]=this.modulesManager.getModule(d)):(this.modulesManager.removeModule(d),delete this[d.optionsKey]),c=!0)}return c}initSeriesDeclarationOrder(a){for(let b=0;b<a.length;b++)a[b].setSeriesIndex(b)}applySeries(a,b,c){if(!b)return"no-change";let d=function(a,b,c){let d=(a,b,c)=>{let d=[a];for(let a of lw)a in b&&null!=b[a]&&d.push(`${a}=${b[a]}`);return c?.seriesGrouping&&d.push(`seriesGrouping.groupId=${c?.seriesGrouping.groupId}`),d.join(";")},e=new Map,f=0;for(let b of a){let a=d(b.type,b.properties,c?.[f]);e.has(a)||e.set(a,[]),e.get(a)?.push([b,f++])}let g=new Map;for(let a of(f=0,b)){let b=d(a.type,a,a);g.has(b)||g.set(b,[]),g.get(b)?.push([a,f++])}if(![...e.keys()].some(a=>g.has(a)))return{status:"no-overlap",oldKeys:e.keys(),newKeys:g.keys()};let h=[];for(let[a,b]of g.entries())for(let[d,f]of b){let b=e.get(a);if(null==b||b.length<1){h.push({opts:d,targetIdx:f,idx:f,status:"add"}),e.delete(a);continue}let[g,i]=b.shift(),j=fw(c?.[i]??{},d??{}),{groupIndex:k,stackIndex:l}=j?.seriesGrouping??{};null!=k||null!=l?h.push({opts:d,series:g,diff:j,targetIdx:f,idx:i,status:"series-grouping"}):j?h.push({opts:d,series:g,diff:j,targetIdx:f,idx:i,status:"update"}):h.push({opts:d,series:g,targetIdx:f,idx:i,status:"no-op"}),0===b.length&&e.delete(a)}for(let a of e.values())for(let[b,c]of a)h.push({series:b,idx:c,targetIdx:-1,status:"remove"});return{status:"overlap",changes:h}}(a.series,b,c);if("no-overlap"===d.status){mv(`Chart.applySeries() - creating new series instances, status: ${d.status}`,d);let c=b.map(a=>this.createSeries(a));return this.initSeriesDeclarationOrder(c),a.series=c,"replaced"}mv("Chart.applySeries() - matchResult",d);let e=[],f=!1,g=!1,h=!1;for(let a of d.changes.toSorted((a,b)=>a.targetIdx-b.targetIdx))switch(g||(g="series-grouping"===a.status),f||(f=a.diff?.data!=null),h||(h="no-op"!==a.status),a.status){case"add":{let b=this.createSeries(a.opts);e.push(b),mv("Chart.applySeries() - created new series",b);break}case"remove":mv(`Chart.applySeries() - removing series at previous idx ${a.idx}`,a.series);break;case"no-op":e.push(a.series),mv(`Chart.applySeries() - no change to series at previous idx ${a.idx}`,a.series);break;default:{let{series:b,diff:c,idx:d}=a;mv(`Chart.applySeries() - applying series diff previous idx ${d}`,c,b),this.applySeriesValues(b,c),b.markNodeDataDirty(),e.push(b)}}return(this.initSeriesDeclarationOrder(e),mv("Chart.applySeries() - final series instances",e),a.series=e,g)?"series-grouping-change":f?"data-change":h?"updated":"no-op"}applyAxes(a,b,c,d,e=[]){if(!("axes"in b)||!b.axes)return!1;e=["axes[].type",...e];let f=b.axes;return"replaced"!==d&&a.axes.length===f.length&&a.axes.every((a,b)=>a.type===f[b].type)&&ly(c)?a.axes.forEach((a,b)=>{let d=fw(c.axes?.[b]??{},f[b]);mv(`Chart.applyAxes() - applying axis diff idx ${b}`,d),fB(a,d,{path:`axes[${b}]`,skip:e})}):(mv(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${d}`),a.axes=this.createAxis(f,e)),!0}createSeries(a){let b=jr.create(a.type,this.getModuleContext());return this.applySeriesOptionModules(b,a),this.applySeriesValues(b,a),b}applySeriesOptionModules(a,b){let c=a.createModuleContext(),d=a.getModuleMap();for(let e of dn.byType("series-option"))e.optionsKey in b&&e.seriesTypes.includes(a.type)&&d.addModule(e,a=>a.moduleFactory(c))}applySeriesValues(a,b){let c=a.getModuleMap(),{type:d,data:e,listeners:f,seriesGrouping:g,showInMiniChart:h,...i}=b;for(let a of jj)if("series-option"===a.type&&a.optionsKey in i){let b=c.getModule(a.optionsKey);if(b){let c=i[a.optionsKey];delete i[a.optionsKey],b.properties.set(c)}}null!=i.visible&&(a.visible=i.visible),a.properties.set(i),"data"in b&&a.setOptionsData(e),f&&this.registerListeners(a,f),"seriesGrouping"in b&&(null==g?a.seriesGrouping=void 0:a.seriesGrouping={...a.seriesGrouping,...g})}createAxis(a,b){let c=[],d=this.getModuleContext();for(let e=0;e<a.length;e++){let f=a[e],g=ji.create(f.type,d);this.applyAxisModules(g,f),fB(g,f,{path:`axes[${e}]`,skip:b}),c.push(g)}return!function(a){let b=[],c=[],d=[...lv];for(let d of a)if(d instanceof lu){var e;"string"==typeof(e=d.position)&&lv.includes(e)?c.push(d.position):b.push(d)}for(let a of b){let b;do b=d.pop();while(b&&c.includes(b))if(null==b)break;a.position=b}}(c),c}applyAxisModules(a,b){let c=a.createModuleContext(),d=a.getModuleMap();for(let e of dn.byType("axis-option")){let f=null!=b[e.optionsKey];f!==d.isEnabled(e)&&(f?(d.addModule(e,a=>a.moduleFactory(c)),a[e.optionsKey]=d.getModule(e)):(d.removeModule(e),delete a[e.optionsKey]))}}registerListeners(a,b){for(let[c,d]of(a.clearEventListeners(),cC(b)))a.addEventListener(c,d)}};mw.chartsInstances=new WeakMap,dl([fJ({newValue(a){this.destroyed||(this.ctx.domManager.setContainer(a),mw.chartsInstances.set(a,this))},oldValue(a){mw.chartsInstances.delete(a)}})],mw.prototype,"container",2),dl([fJ({newValue(a){this.resize("width option",{inWidth:a})}})],mw.prototype,"width",2),dl([fJ({newValue(a){this.resize("height option",{inHeight:a})}})],mw.prototype,"height",2),dl([fJ({newValue(a){this.resize("minWidth option",{inMinWidth:a})}})],mw.prototype,"minWidth",2),dl([fJ({newValue(a){this.resize("minHeight option",{inMinHeight:a})}})],mw.prototype,"minHeight",2),dl([fJ({newValue(a){this.resize("overrideDevicePixelRatio option",{inOverrideDevicePixelRatio:a})}})],mw.prototype,"overrideDevicePixelRatio",2),dl([ey],mw.prototype,"padding",2),dl([ey],mw.prototype,"keyboard",2),dl([ey],mw.prototype,"touch",2),dl([ey],mw.prototype,"mode",2),dl([ey],mw.prototype,"styleNonce",2),dl([fG("chartCaptions.title")],mw.prototype,"title",2),dl([fG("chartCaptions.subtitle")],mw.prototype,"subtitle",2),dl([fG("chartCaptions.footnote")],mw.prototype,"footnote",2),dl([ey],mw.prototype,"formatter",2),dl([ey],mw.prototype,"suppressFieldDotNotation",2),dl([ey],mw.prototype,"loadGoogleFonts",2),dl([fJ({changeValue(a,b){this.onAxisChange(a,b)}})],mw.prototype,"axes",2),dl([fJ({changeValue(a,b){this.onSeriesChange(a,b)}})],mw.prototype,"series",2);var mx=mw;function my(a,b){let c=[],d=a?.series?.[0]?.type,e="linear-gauge"===d||"radial-gauge"===d,f=d?jo.get(d):"unknown";for(let b of jj)if("unknown"===f||b.chartTypes.includes(f)){if("root"===b.type||"legend"===b.type){let d=a[b.optionsKey];if(null==d)continue;b.optionsInnerKey?d[b.optionsInnerKey]&&(c.push(`${b.optionsKey}.${b.optionsInnerKey}`),delete d[b.optionsInnerKey]):(c.push(b.optionsKey),delete a[b.optionsKey])}else if("axis"===b.type){if(!("axes"in a)||!aM(a.axes)||!a.axes?.some(a=>a.type===b.identifier))continue;c.push(`axis[type=${b.identifier}]`),a.axes=a.axes.filter(a=>a.type!==b.identifier)}else if("axis-option"===b.type){if(!("axes"in a)||!aM(a.axes)||!a.axes?.some(a=>a[b.optionsKey]))continue;c.push(`axis.${b.optionsKey}`),a.axes.forEach(a=>{a[b.optionsKey]&&delete a[b.optionsKey]})}else if("series"===b.type){if(b.community||!aM(a.series)||!a.series?.some(a=>a.type===b.identifier))continue;c.push(`series[type=${b.identifier}]`),a.series=a.series.filter(a=>a.type!==b.identifier)}else if("series-option"===b.type){if(!aM(a.series)||!a.series?.some(a=>a[b.optionsKey]))continue;c.push(`series.${b.optionsKey}`),a.series.forEach(a=>{a[b.optionsKey]&&delete a[b.optionsKey]})}}if(c.length&&!b){e&&(c=["AgCharts.createGauge"]);let b="ag-charts-enterprise",d="https://www.ag-grid.com/charts/javascript/installation/";"integrated"===a.mode&&(b="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",d="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),aa.warnOnce([`unable to use these enterprise features as '${b}' has not been loaded:`,"",...c,"",`See: ${d}`].join("\n"))}}function mz(a){return a?.up||a?.down||a?.neutral?"user-full":a?.fills||a?.strokes?"user-indexed":"inbuilt"}var mA={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},mB={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},mC={};dk(mC,{DEFAULT_ANNOTATION_HANDLE_FILL:()=>m$,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>m1,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>m2,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>m3,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>m4,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>m_,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>m0,DEFAULT_CAPTION_ALIGNMENT:()=>mH,DEFAULT_CAPTION_LAYOUT_STYLE:()=>mG,DEFAULT_FIBONACCI_STROKES:()=>mX,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>mZ,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>mW,DEFAULT_GRIDLINE_ENABLED:()=>m9,DEFAULT_POLAR_SERIES_STROKE:()=>mU,DEFAULT_SEPARATION_LINES_COLOUR:()=>mE,DEFAULT_SHADOW_COLOUR:()=>mF,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>mV,DEFAULT_TEXTBOX_COLOR:()=>m7,DEFAULT_TEXTBOX_FILL:()=>m5,DEFAULT_TEXTBOX_STROKE:()=>m6,DEFAULT_TEXT_ANNOTATION_COLOR:()=>mY,DEFAULT_TOOLBAR_POSITION:()=>m8,IS_DARK_THEME:()=>mD,PALETTE_ALT_DOWN_FILL:()=>mR,PALETTE_ALT_DOWN_STROKE:()=>mP,PALETTE_ALT_NEUTRAL_FILL:()=>mS,PALETTE_ALT_NEUTRAL_STROKE:()=>mT,PALETTE_ALT_UP_FILL:()=>mQ,PALETTE_ALT_UP_STROKE:()=>mO,PALETTE_DOWN_FILL:()=>mL,PALETTE_DOWN_STROKE:()=>mJ,PALETTE_NEUTRAL_FILL:()=>mN,PALETTE_NEUTRAL_STROKE:()=>mM,PALETTE_UP_FILL:()=>mK,PALETTE_UP_STROKE:()=>mI});var mD=Symbol("is-dark-theme"),mE=Symbol("default-separation-lines-colour"),mF=Symbol("default-shadow-colour"),mG=Symbol("default-caption-layout-style"),mH=Symbol("default-caption-alignment"),mI=Symbol("palette-up-stroke"),mJ=Symbol("palette-down-stroke"),mK=Symbol("palette-up-fill"),mL=Symbol("palette-down-fill"),mM=Symbol("palette-neutral-stroke"),mN=Symbol("palette-neutral-fill"),mO=Symbol("palette-alt-up-stroke"),mP=Symbol("palette-alt-down-stroke"),mQ=Symbol("palette-alt-up-fill"),mR=Symbol("palette-alt-down-fill"),mS=Symbol("palette-gray-fill"),mT=Symbol("palette-gray-stroke"),mU=Symbol("default-polar-series-stroke"),mV=Symbol("default-sparkline-crosshair-stroke"),mW=Symbol("default-financial-charts-annotation-stroke"),mX=Symbol("default-hierarchy-strokes"),mY=Symbol("default-text-annotation-color"),mZ=Symbol("default-financial-charts-annotation-background-fill"),m$=Symbol("default-annotation-handle-fill"),m_=Symbol("default-annotation-statistics-fill"),m0=Symbol("default-annotation-statistics-stroke"),m1=Symbol("default-annotation-statistics-color"),m2=Symbol("default-annotation-statistics-divider-stroke"),m3=Symbol("default-annotation-statistics-fill"),m4=Symbol("default-annotation-statistics-stroke"),m5=Symbol("default-textbox-fill"),m6=Symbol("default-textbox-stroke"),m7=Symbol("default-textbox-color"),m8=Symbol("default-toolbar-position"),m9=Symbol("default-gridline-enabled"),na=[{type:"number",position:{$if:[{$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},"bottom","left"]}},{type:"category",position:{$if:[{$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},"left","bottom"]}}],nb={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},{$palette:"fillFallback"},{$palette:"fill"}]},nc={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},{$palette:"fillsFallback"},{$palette:"fills"}]},nd={$if:[{$isGradient:{$palette:"fill"}},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/stroke",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},ne={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},[{$palette:"fillFallback"},{$palette:"fillFallback"}],{$palette:"range2"}]},nf={type:"gradient",gradient:"linear",bounds:"item",colorStops:[{color:"black"}],rotation:0,reverse:!1,colorSpace:"rgb"},ng={type:"gradient",gradient:"linear",bounds:"item",colorStops:{$shallow:{$map:[{color:{$value:"$1"}},{$palette:"gradient"}]}},rotation:0,reverse:!1,colorSpace:"rgb"},nh={...ng,colorStops:{$shallow:[{color:{$mix:[{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"black",.15]}},{color:{$mix:[{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"white",.15]}}]}},ni={...ng,colorStops:{$map:[{color:{$value:"$1"}},{$path:["/0",void 0,{$palette:"gradients"}]}]}},nj=a=>({...ng,colorStops:{$shallow:{$if:[{$or:[{$isGradient:{$palette:`${a}.fill`}},{$isPattern:{$palette:`${a}.fill`}},{$isImage:{$palette:`${a}.fill`}}]},{$path:["/colorStops",void 0,{$palette:`${a}.fill`}]},[{color:{$mix:[{$palette:`${a}.fill`},"black",.15]}},{color:{$mix:[{$palette:`${a}.fill`},"white",.15]}}]]}}}),nk={type:"gradient",gradient:"radial",bounds:"item",colorStops:{$shallow:{$map:[{color:{$value:"$1"}},{$palette:"gradient"}]}},rotation:0,reverse:!1,colorSpace:"rgb"},nl={...nk,reverse:!0},nm={...nk,bounds:"series"},nn={...nk,bounds:"series",reverse:!0},no={type:"gradient",gradient:"conic",bounds:"series",colorStops:{$map:[{color:{$value:"$1"}},{$palette:"gradient"}]},rotation:0,reverse:!1,colorSpace:"rgb"},np={type:"pattern",pattern:"forward-slanted-lines",width:{$isUserOption:["./height",{$path:"./height"},10]},height:{$isUserOption:["./width",{$path:"./width"},10]},padding:2,fill:{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/fill",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},fillOpacity:1,stroke:nd,strokeOpacity:1,strokeWidth:{$switch:[{$path:"./pattern"},0,[["backward-slanted-lines","forward-slanted-lines","horizontal-lines","vertical-lines"],4]]},backgroundFill:"none",backgroundFillOpacity:1,rotation:0,scale:1},nq={...np,stroke:{$if:[{$isGradient:{$palette:"fill"}},{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/stroke",{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$path:["/0",void 0,{$palette:"fills"}]}]},{$path:["/0",void 0,{$palette:"fills"}]}]}]},fill:{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/fill",{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$path:["/0",void 0,{$palette:"fills"}]}]},{$path:["/0",void 0,{$palette:"fills"}]}]}]}},nr={type:"pattern",pattern:"forward-slanted-lines",width:8,height:8,padding:1,fill:"black",fillOpacity:1,backgroundFill:"white",backgroundFillOpacity:1,stroke:"black",strokeOpacity:1,strokeWidth:1,rotation:0,scale:1},ns={...np,fill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]}},nt={type:"image",backgroundFill:{$palette:"fillFallback"},backgroundFillOpacity:1,repeat:"no-repeat",fit:"contain",rotation:0},nu={type:"image",backgroundFill:"black",backgroundFillOpacity:1,rotation:0,repeat:"no-repeat",fit:"contain",width:8,height:8};function nv(a){return dP(a,a=>{let b=en.fromString(a);return[en.darken(b,.15).toString(),a,en.lighten(b,.15).toString()]})}var nw={stroke:{$path:["../../highlightStyle/item/stroke","rgba(0, 0, 0, 0.4)"]},strokeWidth:{$path:["../../highlightStyle/item/strokeWidth",2]},strokeOpacity:{$path:["../../highlightStyle/item/strokeOpacity",void 0]},opacity:{$path:["../../highlightStyle/item/opacity",1]}},nx={...nw,fill:{$path:["../../highlightStyle/item/fill","rgba(255,255,255, 0.33)"]},fillOpacity:{$path:["../../highlightStyle/item/fillOpacity",void 0]}},ny={padding:8,cornerRadius:4,fill:{$if:[{$and:[{$eq:[{$path:"./fill/type"},"image"]},{$isUserOption:["./fill/backgroundFill",!1,!0]}]},{backgroundFill:"transparent"},void 0]},border:{enabled:{$isUserOption:["../border",!0,!1]},strokeWidth:1,stroke:{$foregroundOpacity:.08}}};function nz(a=!0){return{enabled:!0,highlightedItem:a?nx:nw,unhighlightedItem:{strokeWidth:{$path:["../../highlightStyle/series/strokeWidth",void 0]}},highlightedSeries:{strokeWidth:{$path:["../../highlightStyle/series/strokeWidth",void 0]}},unhighlightedSeries:{opacity:{$path:["../../highlightStyle/series/dimOpacity",void 0]}}}}function nA(a=!0){return{enabled:!0,highlightedItem:a?nx:nw,unhighlightedItem:{strokeWidth:{$path:["../../highlightStyle/series/strokeWidth",void 0]},opacity:{$path:["../../highlightStyle/series/dimOpacity",void 0]}}}}var nB={border:{enabled:!1,stroke:{$foregroundBackgroundMix:.25},strokeOpacity:1,strokeWidth:1},cornerRadius:4,fillOpacity:1,padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},5,{$isUserOption:["./fill",5,0]}]}},nC={enabled:!1,key:"x",segments:{$apply:[{fill:{$applySwitch:[{$path:"type"},{$path:"../../../fill"},["gradient",ng],["image",nt],["pattern",np]]},stroke:{$path:"../../../stroke"},fillOpacity:{$path:"../../../fillOpacity"},strokeWidth:{$isUserOption:["./stroke",{$isUserOption:["../../../strokeWidth",{$path:"../../../strokeWidth"},{$if:[{$greaterThan:[{$path:"../../../strokeWidth"},0]},{$path:"../../../strokeWidth"},2]}]},{$path:"../../../strokeWidth"}]},strokeOpacity:{$path:"../../../strokeOpacity"},lineDash:{$path:"../../../lineDash"},lineDashOffset:{$path:"../../../lineDashOffset"}}]}},nD="white",nE={get cartesian(){return{seriesTypes:jo.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:jo.polarTypes,commonOptions:[]}},get topology(){return{seriesTypes:jo.topologyTypes,commonOptions:[]}},get standalone(){return{seriesTypes:jo.standaloneTypes,commonOptions:[]}}},nF={"radial-gauge":!0,"linear-gauge":!0},nG=class a{static getDefaultColors(){return{fills:mA,fillsFallback:Object.values(mA),strokes:mB,sequentialColors:nv(mA),divergingColors:[mA.ORANGE,mA.YELLOW,mA.GREEN],hierarchyColors:["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"],secondSequentialColors:en.interpolate([en.fromHexString(mA.BLUE),en.fromHexString("#cbdef5")],8).map(a=>a.toString()),secondDivergingColors:[mA.GREEN,mA.YELLOW,mA.RED],secondHierarchyColors:["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"],up:{fill:mA.GREEN,stroke:mB.GREEN},down:{fill:mA.RED,stroke:mB.RED},neutral:{fill:mA.GRAY,stroke:mB.GRAY},altUp:{fill:mA.BLUE,stroke:mB.BLUE},altDown:{fill:mA.ORANGE,stroke:mB.ORANGE},altNeutral:{fill:mA.GRAY,stroke:mB.GRAY}}}static getDefaultPublicParameters(){return{accentColor:"#2196f3",axisColor:{$foregroundBackgroundMix:.325},backgroundColor:nD,borderColor:{$foregroundOpacity:.15},borderRadius:4,chartBackgroundColor:{$ref:"backgroundColor"},chartPadding:20,focusShadow:"0 0 0 3px var(--ag-charts-accent-color)",foregroundColor:"#181d1f",fontFamily:"Verdana, sans-serif",fontSize:gg,fontWeight:400,gridLineColor:{$foregroundBackgroundMix:.1},popupShadow:"0 0 16px rgba(0, 0, 0, 0.15)",subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"chartBackgroundColor"},.38]},textColor:{$ref:"foregroundColor"},chromeBackgroundColor:{$foregroundBackgroundMix:.02},chromeFontFamily:{$ref:"fontFamily"},chromeFontSize:{$ref:"fontSize"},chromeFontWeight:{$ref:"fontWeight"},chromeTextColor:{$ref:"foregroundColor"},chromeSubtleTextColor:{$mix:[{$ref:"chromeTextColor"},{$ref:"backgroundColor"},.38]},buttonBackgroundColor:{$ref:"backgroundColor"},buttonBorder:!0,buttonFontWeight:400,buttonTextColor:{$ref:"textColor"},inputBackgroundColor:{$ref:"backgroundColor"},inputBorder:!0,inputTextColor:{$ref:"textColor"},menuBackgroundColor:{$ref:"chromeBackgroundColor"},menuBorder:!0,menuTextColor:{$ref:"chromeTextColor"},panelBackgroundColor:{$ref:"chromeBackgroundColor"},panelSubtleTextColor:{$ref:"chromeSubtleTextColor"},tooltipBackgroundColor:{$ref:"chromeBackgroundColor"},tooltipBorder:!0,tooltipTextColor:{$ref:"chromeTextColor"},tooltipSubtleTextColor:{$ref:"chromeSubtleTextColor"},crosshairLabelBackgroundColor:{$ref:"foregroundColor"},crosshairLabelTextColor:{$ref:"chartBackgroundColor"}}}static getAxisDefaults(a,{title:b,time:c}){return dM(a,b&&{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:gh.MEDIUM},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},c&&{parentLevel:{enabled:!1,label:{enabled:{$path:"../../label/enabled"},border:{enabled:{$or:[{$isUserOption:["../border",!0,!1]},{$path:"../../../label/border/enabled"}]},strokeWidth:{$path:"../../../label/border/strokeWidth"},stroke:{$path:"../../../label/border/stroke"}},fill:{$path:"../../label/fill"},fontSize:{$path:"../../label/fontSize"},fontFamily:{$path:"../../label/fontFamily"},fontWeight:"bold",spacing:{$path:"../../label/spacing"},color:{$path:"../../label/color"},cornerRadius:{$path:"../../label/cornerRadius"},padding:{$path:"../../label/padding"},avoidCollisions:{$path:"../../label/avoidCollisions"}},tick:{enabled:{$path:"../../tick/enabled"},width:{$path:"../../tick/width"},size:{$path:"../../tick/size"},stroke:{$path:"../../tick/stroke"}}}},{label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:11,color:{$ref:"textColor"},avoidCollisions:!0,cornerRadius:4,border:{enabled:{$isUserOption:["../border",!0,!1]},strokeWidth:1,stroke:{$foregroundOpacity:.08}},padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},{left:12,right:12,top:8,bottom:8},void 0]}},line:{enabled:!0,width:1,stroke:{$ref:"axisColor"}},tick:{enabled:!1,size:6,width:1,stroke:{$ref:"axisColor"}},gridLine:{enabled:!0,width:1,style:{$apply:[{fillOpacity:1,stroke:{$ref:"gridLineColor"},strokeWidth:{$path:"../../width"},lineDash:[]},[{fillOpacity:1,stroke:{$ref:"gridLineColor"},strokeWidth:{$path:"../../width"},lineDash:[]}]]}},crossLines:{$apply:[{enabled:!0,fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},fillOpacity:.08,strokeWidth:1,label:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},padding:5,color:{$ref:"textColor"}}},void 0,{$pathString:["/common/axes/$axisType/crossLines",{axisType:{$path:["/axes/$index/type"]}}]},{$pathString:["/$seriesType/axes/$axisType/crossLines",{seriesType:{$path:["/series/0/type","line"]},axisType:{$path:["/axes/$index/type"]}}]}]}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:{$ref:"chartBackgroundColor"}},padding:{top:{$ref:"chartPadding"},right:{$ref:"chartPadding"},bottom:{$ref:"chartPadding"},left:{$ref:"chartPadding"}},seriesArea:{border:{enabled:!1,stroke:{$ref:"foregroundColor"},strokeOpacity:1,strokeWidth:1},cornerRadius:4,padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},5,0]}},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",spacing:{$if:[{$path:"../subtitle/enabled"},10,20]},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:gh.LARGEST},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},wrapping:"hyphenate",layoutStyle:mG,textAlign:mH},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:gh.MEDIUM},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:mG,textAlign:mH},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:{$rem:gh.MEDIUM},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:mG,textAlign:mH},legend:{...nB,enabled:{$and:[{$greaterThan:[{$size:{$path:"/series"}},1]},{$or:[{$isChartType:"cartesian"},{$isChartType:"standalone"},{$and:[{$isChartType:"polar"},{$not:{$isSeriesType:"pie"}},{$not:{$isSeriesType:"donut"}}]}]}]},position:"bottom",orientation:{$if:[{$or:[{$eq:[{$path:"./position"},"left"]},{$eq:[{$path:"./position"},"left-top"]},{$eq:[{$path:"./position"},"left-bottom"]},{$eq:[{$path:"./position"},"right"]},{$eq:[{$path:"./position"},"right-top"]},{$eq:[{$path:"./position"},"right-bottom"]},{$eq:[{$path:"./position/placement"},"left"]},{$eq:[{$path:"./position/placement"},"left-top"]},{$eq:[{$path:"./position/placement"},"left-bottom"]},{$eq:[{$path:"./position/placement"},"right"]},{$eq:[{$path:"./position/placement"},"right-top"]},{$eq:[{$path:"./position/placement"},"right-bottom"]}]},"vertical","horizontal"]},spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:{$ref:"textColor"},fontSize:{$rem:gh.SMALL},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:{$ref:"foregroundColor"}},inactiveStyle:{fill:{$ref:"subtleTextColor"}},highlightStyle:{fill:{$ref:"foregroundColor"}},label:{color:{$ref:"textColor"}}},fill:{$if:[{$path:["./position/floating",!1]},{$ref:"chartBackgroundColor"},"transparent"]}},tooltip:{enabled:!0,darkTheme:mD,delay:0,pagination:!1,mode:{$if:[{$and:[{$isChartType:"cartesian"},{$not:{$hasSeriesType:"bubble"}},{$not:{$hasSeriesType:"scatter"}},{$greaterThan:[{$size:{$path:"/series"}},1]},{$lessThan:[{$size:{$path:"/series"}},4]}]},"shared","single"]}},overlays:{darkTheme:mD},listeners:{},series:{tooltip:{range:{$path:["/tooltip/range","exact"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","pointer"]},placement:{$path:["/tooltip/position/placement",void 0]},xOffset:{$path:["/tooltip/position/xOffset",0]},yOffset:{$path:["/tooltip/position/yOffset",0]}}}}}}constructor(a={}){let{overrides:b,palette:c,params:d}=fy(a),e=this.createChartConfigPerChartType(this.getDefaults()),f={};b&&this.processOverrides(f,b);let{fills:g,strokes:h,sequentialColors:i,...j}=this.getDefaultColors();this.palette=dW(dM(c,{fills:Object.values(g),strokes:Object.values(h),sequentialColors:Object.values(i),...j})),this.paletteType=mz(c),this.params=dM(d,this.getPublicParameters()),this.config=dW(fy(e)),this.overrides=dW(b),this.presets=dW(f)}processOverrides(a,b){jo.seriesTypes.forEach(c=>{let d=b[c];!0===nF[c]&&(a[c]=d,delete b[c])})}createChartConfigPerChartType(a){for(let[b,{seriesTypes:c}]of cC(nE)){let d=jq.get(b);for(let b of c)a[b]??(a[b]=d)}return a}getDefaults(){let b=(b,c)=>{let d={},e={axes:{},...jl.getThemeTemplates(),...this.getChartDefaults(),...jq.get(b)};for(let b of c){d[b]=dM(jr.getThemeTemplate(b),d[b]??e);let{axes:c}=d[b];for(let b of ji.keys())c[b]=dM(c[b],ji.getThemeTemplate(b),a.axisDefault[b]);("map-shape-background"===b||"map-line-background"===b)&&delete d[b].series.tooltip}return d};return dM(b("cartesian",jo.cartesianTypes),b("polar",jo.polarTypes),b("topology",jo.topologyTypes),b("standalone",jo.standaloneTypes))}static applyTemplateTheme(a,b,c){if(aM(a))for(let b=0;b<a.length;b++){let d=a[b];"symbol"==typeof d&&c?.has(d)&&(a[b]=c.get(d))}else for(let b of Object.keys(a)){let d=a[b];"symbol"==typeof d&&c?.has(d)&&(a[b]=c.get(d))}}templateTheme(b,c=!0){let d=c?fy(b):b,e=this.getTemplateParameters();return fA(d,a.applyTemplateTheme,void 0,void 0,e),d}getDefaultColors(){return a.getDefaultColors()}getPublicParameters(){return a.getDefaultPublicParameters()}getTemplateParameters(){let a=new Map;a.set(mD,!1),a.set(mE,"#d9d9d9"),a.set(mF,"#00000080"),a.set(mV,"#aaa"),a.set(mG,"block"),a.set(mH,"center"),a.set(mX,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),a.set(mU,nD),a.set(mW,mA.BLUE),a.set(mZ,mA.BLUE),a.set(mY,mA.BLUE),a.set(m$,nD),a.set(m_,"#fafafa"),a.set(m0,"#ddd"),a.set(m1,"#000"),a.set(m2,"#181d1f"),a.set(m3,"#e35c5c"),a.set(m4,"#e35c5c"),a.set(m5,"#fafafa"),a.set(m6,"#ddd"),a.set(m7,"#000"),a.set(m8,"top"),a.set(m9,!1);let b=this.getDefaultColors();return a.set(mI,this.palette.up?.stroke??b.up.stroke),a.set(mK,this.palette.up?.fill??b.up.fill),a.set(mJ,this.palette.down?.stroke??b.down.stroke),a.set(mL,this.palette.down?.fill??b.down.fill),a.set(mM,this.palette.neutral?.stroke??b.neutral.stroke),a.set(mN,this.palette.neutral?.fill??b.neutral.fill),a.set(mO,this.palette.altUp?.stroke??b.up.stroke),a.set(mQ,this.palette.altUp?.fill??b.up.fill),a.set(mP,this.palette.altDown?.stroke??b.down.stroke),a.set(mR,this.palette.altDown?.fill??b.down.fill),a.set(mS,this.palette.altNeutral?.fill??b.altNeutral.fill),a.set(mT,this.palette.altNeutral?.stroke??b.altNeutral.stroke),a}};nG.axisDefault={number:nG.getAxisDefaults({keys:[],line:{enabled:!1},crosshair:{enabled:!0}},{title:!0,time:!1}),log:nG.getAxisDefaults({keys:[],base:10,line:{enabled:!1},crosshair:{enabled:!0}},{title:!0,time:!1}),category:nG.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!0,wrapping:"on-space"},gridLine:{enabled:m9},crosshair:{enabled:!1}},{title:!0,time:!1}),"grouped-category":nG.getAxisDefaults({keys:[],tick:{enabled:!0,stroke:mE},label:{spacing:10,rotation:270,wrapping:"on-space"},maxThicknessRatio:.5,paddingInner:.4,groupPaddingInner:.2,crosshair:{enabled:!1}},{title:!0,time:!1}),time:nG.getAxisDefaults({keys:[],gridLine:{enabled:m9},crosshair:{enabled:!0}},{title:!0,time:!0}),"unit-time":nG.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!1},gridLine:{enabled:m9},crosshair:{enabled:!0},parentLevel:{enabled:!0}},{title:!0,time:!0}),"ordinal-time":nG.getAxisDefaults({keys:[],groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:m9},crosshair:{enabled:!0}},{title:!0,time:!0}),"angle-category":nG.getAxisDefaults({label:{spacing:5},gridLine:{enabled:m9},shape:{$findFirstSiblingNotOperation:void 0}},{title:!1,time:!1}),"angle-number":nG.getAxisDefaults({label:{spacing:5},gridLine:{enabled:m9}},{title:!1,time:!1}),"radius-category":nG.getAxisDefaults({positionAngle:0,line:{enabled:!1},label:{minSpacing:5}},{title:!0,time:!1}),"radius-number":nG.getAxisDefaults({positionAngle:0,line:{enabled:!1},shape:{$findFirstSiblingNotOperation:void 0},label:{minSpacing:5}},{title:!0,time:!1})};var nH=nG,nI="#192232",nJ={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},nK={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},nL=class extends nH{getDefaultColors(){return{fills:nJ,fillsFallback:Object.values(nJ),strokes:nK,sequentialColors:nv(nJ),divergingColors:[nJ.ORANGE,nJ.YELLOW,nJ.GREEN],hierarchyColors:["#192834","#253746","#324859","#3f596c","#4d6a80"],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[nJ.GREEN,nJ.YELLOW,nJ.RED],secondHierarchyColors:["#192834","#3b5164","#496275","#577287","#668399"],up:{fill:nJ.GREEN,stroke:nK.GREEN},down:{fill:nJ.RED,stroke:nK.RED},neutral:{fill:nJ.GRAY,stroke:nK.GRAY},altUp:{fill:nJ.BLUE,stroke:nK.BLUE},altDown:{fill:nJ.ORANGE,stroke:nK.ORANGE},altNeutral:{fill:nJ.GRAY,stroke:nK.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),axisColor:{$foregroundBackgroundMix:.737},backgroundColor:nI,borderColor:{$foregroundBackgroundMix:.216},chromeBackgroundColor:{$foregroundBackgroundMix:.07},foregroundColor:"#fff",gridLineColor:{$foregroundBackgroundMix:.257},popupShadow:"0 0 16px rgba(0, 0, 0, 0.33)",subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"chartBackgroundColor"},.57]},crosshairLabelBackgroundColor:{$foregroundBackgroundMix:.65}}}getTemplateParameters(){let a=super.getTemplateParameters();return a.set(mD,!0),a.set(mU,nI),a.set(mE,"#7f8389"),a.set(mW,nJ.BLUE),a.set(mY,"#fff"),a.set(mZ,nJ.BLUE),a.set(m$,nI),a.set(m_,"#28313e"),a.set(m0,"#4b525d"),a.set(m1,"#fff"),a.set(m2,"#fff"),a.set(m5,"#28313e"),a.set(m6,"#4b525d"),a.set(m7,"#fff"),a}constructor(a){super(a)}},nM={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},nN={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},nO=class extends nL{getDefaultColors(){return{...super.getDefaultColors(),fills:{...nM},fillsFallback:Object.values({...nM}),strokes:{...nN},sequentialColors:nv(nM),divergingColors:[nM.GREEN,nM.BLUE,nM.RED],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],up:{fill:nM.GREEN,stroke:nN.GREEN},down:{fill:nM.RED,stroke:nN.RED},neutral:{fill:nM.BLUE,stroke:nN.BLUE},altUp:{fill:nM.GREEN,stroke:nN.GREEN},altDown:{fill:nM.RED,stroke:nN.RED},altNeutral:{fill:nM.GRAY,stroke:nN.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),chartPadding:0,gridLineColor:{$foregroundBackgroundMix:.12}}}getTemplateParameters(){let a=super.getTemplateParameters();return a.set(mW,nM.BLUE),a.set(mZ,nM.BLUE),a.set(mG,"overlay"),a.set(mH,"left"),a.set(m8,"bottom"),a.set(m9,!0),a}},nP={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},nQ={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},nR=class extends nH{getDefaultColors(){return{...super.getDefaultColors(),fills:{...nP},fillsFallback:Object.values({...nP}),strokes:{...nQ},sequentialColors:nv(nP),divergingColors:[nP.GREEN,nP.BLUE,nP.RED],up:{fill:nP.GREEN,stroke:nQ.GREEN},down:{fill:nP.RED,stroke:nQ.RED},neutral:{fill:nP.BLUE,stroke:nQ.BLUE},altUp:{fill:nP.GREEN,stroke:nQ.GREEN},altDown:{fill:nP.RED,stroke:nQ.RED},altNeutral:{fill:nP.GRAY,stroke:nQ.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),chartPadding:0,gridLineColor:{$foregroundBackgroundMix:.06}}}getTemplateParameters(){let a=super.getTemplateParameters();return a.set(mW,nP.BLUE),a.set(mZ,nP.BLUE),a.set(mG,"overlay"),a.set(mH,"left"),a.set(m8,"bottom"),a.set(m9,!0),a}},nS={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},nT={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},nU=class extends nL{getDefaultColors(){return{...super.getDefaultColors(),fills:nS,fillsFallback:Object.values(nS),strokes:nT,sequentialColors:nv(nS),divergingColors:[nS.ORANGE,nS.YELLOW,nS.GREEN],secondSequentialColors:["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"],secondDivergingColors:[nS.GREEN,nS.YELLOW,nS.RED],up:{fill:nS.GREEN,stroke:nT.GREEN},down:{fill:nS.RED,stroke:nT.RED},neutral:{fill:nS.GRAY,stroke:nT.GRAY},altUp:{fill:nS.BLUE,stroke:nT.BLUE},altDown:{fill:nS.RED,stroke:nT.RED},altNeutral:{fill:nS.GRAY,stroke:nT.GRAY}}}getTemplateParameters(){let a=super.getTemplateParameters();return a.set(mW,nS.BLUE),a.set(mZ,nS.BLUE),a}},nV={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},nW={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},nX=class extends nH{getDefaultColors(){return{...super.getDefaultColors(),fills:nV,fillsFallback:Object.values(nV),strokes:nW,sequentialColors:nv(nV),divergingColors:[nV.ORANGE,nV.YELLOW,nV.GREEN],secondSequentialColors:["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"],secondDivergingColors:[nV.GREEN,nV.YELLOW,nV.RED],up:{fill:nV.GREEN,stroke:nW.GREEN},down:{fill:nV.RED,stroke:nW.RED},neutral:{fill:nV.GRAY,stroke:nW.GRAY},altUp:{fill:nV.BLUE,stroke:nW.BLUE},altDown:{fill:nV.RED,stroke:nW.RED},altNeutral:{fill:nV.GRAY,stroke:nW.GRAY}}}getTemplateParameters(){let a=super.getTemplateParameters();return a.set(mW,nV.BLUE),a.set(mZ,nV.BLUE),a}},nY={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},nZ={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},n$=class extends nL{getDefaultColors(){return{fills:nY,fillsFallback:Object.values(nY),strokes:nZ,sequentialColors:nv(nY),divergingColors:[nY.BLUE,nY.RED],hierarchyColors:[],secondSequentialColors:[nY.BLUE,nY.PURPLE,nY.MAGENTA,nY.PINK,nY.RED,nY.ORANGE,nY.YELLOW,nY.GREEN],secondDivergingColors:[nY.BLUE,nY.RED],secondHierarchyColors:[],up:{fill:nY.GREEN,stroke:nZ.GREEN},down:{fill:nY.RED,stroke:nZ.RED},neutral:{fill:nY.GRAY,stroke:nZ.GRAY},altUp:{fill:nY.BLUE,stroke:nZ.BLUE},altDown:{fill:nY.RED,stroke:nZ.RED},altNeutral:{fill:nY.GRAY,stroke:nZ.GRAY}}}getTemplateParameters(){let a=super.getTemplateParameters();return a.set(mW,nY.BLUE),a.set(mZ,nY.BLUE),a}},n_={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},n0={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},n1=class extends nH{getDefaultColors(){return{...super.getDefaultColors(),fills:n_,fillsFallback:Object.values(n_),strokes:n0,sequentialColors:nv(n_),divergingColors:[n_.BLUE,n_.RED],hierarchyColors:[],secondSequentialColors:[n_.BLUE,n_.PURPLE,n_.MAGENTA,n_.PINK,n_.RED,n_.ORANGE,n_.YELLOW,n_.GREEN],secondDivergingColors:[n_.BLUE,n_.RED],secondHierarchyColors:[],up:{fill:n_.GREEN,stroke:n0.GREEN},down:{fill:n_.RED,stroke:n0.RED},neutral:{fill:n_.GRAY,stroke:n0.GRAY},altUp:{fill:n_.BLUE,stroke:n0.BLUE},altDown:{fill:n_.RED,stroke:n0.RED},altNeutral:{fill:n_.GRAY,stroke:n0.GRAY}}}getTemplateParameters(){let a=super.getTemplateParameters();return a.set(mW,n_.BLUE),a.set(mZ,n_.BLUE),a}},n2={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},n3={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},n4=class extends nL{getDefaultColors(){return{...super.getDefaultColors(),fills:{...n2,RED:n2.ORANGE},fillsFallback:Object.values({...n2,RED:n2.ORANGE}),strokes:{...n3,RED:n3.ORANGE},sequentialColors:nv({...n2,RED:n2.ORANGE}),divergingColors:[n2.ORANGE,n2.YELLOW,n2.GREEN],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[n2.GREEN,n2.YELLOW,n2.ORANGE],up:{fill:n2.GREEN,stroke:n3.GREEN},down:{fill:n2.ORANGE,stroke:n3.ORANGE},neutral:{fill:n2.GRAY,stroke:n3.GRAY},altUp:{fill:n2.BLUE,stroke:n3.BLUE},altDown:{fill:n2.ORANGE,stroke:n3.ORANGE},altNeutral:{fill:n2.GRAY,stroke:n3.GRAY}}}getTemplateParameters(){let a=super.getTemplateParameters();return a.set(mW,n2.BLUE),a.set(mZ,n2.BLUE),a}},n5={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},n6={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},n7=class extends nH{getDefaultColors(){return{...super.getDefaultColors(),fills:{...n5,RED:n5.ORANGE},fillsFallback:Object.values({...n5,RED:n5.ORANGE}),strokes:{...n6,RED:n6.ORANGE},sequentialColors:nv({...n5,RED:n5.ORANGE}),divergingColors:[n5.ORANGE,n5.YELLOW,n5.GREEN],secondSequentialColors:["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"],secondDivergingColors:[n5.GREEN,n5.YELLOW,n5.ORANGE],secondHierarchyColors:[],up:{fill:n5.GREEN,stroke:n6.GREEN},down:{fill:n5.ORANGE,stroke:n6.ORANGE},neutral:{fill:n6.GRAY,stroke:n6.GRAY},altUp:{fill:n5.BLUE,stroke:n6.BLUE},altDown:{fill:n5.ORANGE,stroke:n6.ORANGE},altNeutral:{fill:n5.GRAY,stroke:n6.GRAY}}}getTemplateParameters(){let a=super.getTemplateParameters();return a.set(mW,n5.BLUE),a.set(mZ,n5.BLUE),a}},n8=["top","top-right","top-left","bottom","bottom-right","bottom-left","right","right-top","right-bottom","left","left-top","left-bottom"],n9={floating:bC,placement:bT(...n8),xOffset:bH,yOffset:bH},oa=bt((a,b)=>{let c;if("string"==typeof a)n8.includes(a)?c=!0:(c={valid:!1,invalid:[],cleared:null}).invalid.push(new bq(bo.Invalid,`a legend placement string: ["${n8.join('", "')}"]`,a,b.path));else{let{cleared:b,invalid:d}=bs(a,n9);c={valid:0===d.length,cleared:b,invalid:d}}return c},"a legend position object or placement string"),ob=bz(bT("circle","cross","diamond","heart","plus","pin","square","star","triangle"),bD),oc=bT("never","always","hyphenate","on-space"),od=bT("top","right","bottom","left","top-right","bottom-right","bottom-left","top-left","center"),oe=bz(bO,bT("exact","nearest")),of=bz(bJ,bW({text:bu(bJ),...co},"text segments array")),og=bT("pointer","start","middle","end"),oh={enabled:bC,text:of,textAlign:bT("left","center","right"),wrapping:bT("never","always","hyphenate","on-space"),spacing:bO,maxWidth:bO,maxHeight:bO,...co};oh.padding=bv(bO);var oi={enabled:bC,text:of,renderer:bX(bz(bJ,bK))},oj=["defaults","download","zoom-to-cursor","pan-to-cursor","reset-zoom","toggle-series-visibility","toggle-other-series","separator"],ok={type:bT("action","separator"),showOn:bT("always","series-area","series-node","legend-item"),label:bu(bJ),enabled:bC,action:bD,items:(a,b)=>om(a,b)};ok.iconUrl=bv(bJ);var ol=bw(ok),om=bV(bt((a,b)=>{let c;return"string"==typeof a?oj.includes(a)?c=!0:(c={valid:!1,invalid:[],cleared:null}).invalid.push(new bq(bo.Invalid,`a context menu item string alias: ["${oj.join('", "')}"]`,a,b.path)):c=ol(a,b),c},`a context menu item object or string alias: [${oj.join(", ")}]`),"a menu items array",!1),on={label:bJ,ariaLabel:bJ,tooltip:bJ,icon:bT("align-center","align-left","align-right","arrow-drawing","arrow-down-drawing","arrow-up-drawing","callout-annotation","candlestick-series","close","comment-annotation","date-range-drawing","date-price-range-drawing","delete","disjoint-channel-drawing","drag-handle","fill-color","line-style-solid","line-style-dashed","line-style-dotted","high-low-series","hlc-series","hollow-candlestick-series","horizontal-line-drawing","line-color","line-series","line-with-markers-series","locked","measurer-drawing","note-annotation","ohlc-series","pan-end","pan-left","pan-right","pan-start","parallel-channel-drawing","position-bottom","position-center","position-top","price-label-annotation","price-range-drawing","reset","settings","step-line-series","text-annotation","trend-line-drawing","fibonacci-retracement-drawing","fibonacci-retracement-trend-based-drawing","unlocked","vertical-line-drawing","zoom-in","zoom-out")},oo=bz(bJ,bX(bJ)),op=bw({x:oo,y:oo,angle:oo,radius:oo,size:oo,color:oo,label:oo,secondaryLabel:oo,sectorLabel:oo,calloutLabel:oo,legendItem:oo}),oq=bt(function(a){if(!aU(a))return!1;let b=aZ.exec(a);return aY.test(b?b[2]:a)},"a valid number format string"),or={width:bO,height:bO,minWidth:bO,minHeight:bO,suppressFieldDotNotation:bC,title:oh,subtitle:oh,footnote:oh,padding:{top:bO,right:bO,bottom:bO,left:bO},seriesArea:{border:cr,clip:bC,cornerRadius:bH,padding:cq},legend:{enabled:bC,position:oa,orientation:bT("horizontal","vertical"),maxWidth:bO,maxHeight:bO,spacing:bO,border:cr,cornerRadius:bH,padding:cq,fill:ca,fillOpacity:bQ,preventHidingAll:bC,reverseOrder:bC,toggleSeries:bC,item:{marker:{size:bO,shape:ob,padding:bO,strokeWidth:bO},line:{length:bO,strokeWidth:bO},label:{maxLength:bO,formatter:bD,...co},maxWidth:bO,paddingX:bO,paddingY:bO,showSeriesStroke:bC},pagination:{marker:{size:bO,shape:ob,padding:bO},activeStyle:{...cb,...b5},inactiveStyle:{...cb,...b5},highlightStyle:{...cb,...b5},label:co},listeners:{legendItemClick:bD,legendItemDoubleClick:bD}},gradientLegend:{enabled:bC,position:oa,spacing:bO,reverseOrder:bC,border:cr,cornerRadius:bH,padding:cq,fill:ca,fillOpacity:bQ,gradient:{preferredLength:bO,thickness:bO},scale:{label:{...co,minSpacing:bO,format:oq,formatter:bD},padding:bO,interval:{step:bH,values:bB,minSpacing:by(bO,bR("maxSpacing")),maxSpacing:by(bO,bS("minSpacing"))}}},listeners:{seriesNodeClick:bD,seriesNodeDoubleClick:bD,seriesVisibilityChange:bD,click:bD,doubleClick:bD,annotations:bD,zoom:bD},loadGoogleFonts:bC,highlight:{range:bT("tooltip","node")},overlays:{loading:oi,noData:oi,noVisibleSeries:oi,unsupportedBrowser:oi},tooltip:{enabled:bC,showArrow:bC,pagination:bC,delay:bO,range:oe,wrapping:oc,mode:bT("single","shared","compact"),position:{anchorTo:bT("pointer","node","chart"),placement:bz(od,bV(od)),xOffset:bH,yOffset:bH}},animation:{enabled:bC,duration:bO},contextMenu:{enabled:bC,items:om},context:()=>!0,dataSource:{getData:bD},keyboard:{enabled:bC,tabIndex:bH},touch:{dragAction:bT("none","drag","hover")},ranges:{enabled:bC,buttons:bW({...on,value:bz(bH,by(bV(bz(bH,bF)),bL(2,2)),bD)},"range button options array")},locale:{localeText:bI,getLocaleText:bX(bJ)},background:{visible:bC,fill:bE,image:{url:bu(bJ),top:bH,right:bH,bottom:bH,left:bH,width:bO,height:bO,opacity:bQ}},styleNonce:bJ,sync:{enabled:bC,groupId:bJ,axes:bT("x","y","xy"),nodeInteraction:bC,zoom:bC},zoom:{enabled:bC,enableAxisDragging:bC,enableAxisScrolling:bC,enableDoubleClickToReset:bC,enablePanning:bC,enableScrolling:bC,enableSelecting:bC,enableTwoFingerZoom:bC,keepAspectRatio:bC,anchorPointX:og,anchorPointY:og,axisDraggingMode:bT("pan","zoom"),axes:bT("x","y","xy"),deceleration:bz(bT("off","short","long"),bQ),minVisibleItems:bO,panKey:bT("alt","ctrl","meta","shift"),scrollingStep:bQ,autoScaling:{enabled:bC,padding:bQ},buttons:{enabled:bC,buttons:bW({...on,value:bT("reset","zoom-in","zoom-out","pan-left","pan-right","pan-start","pan-end"),section:bJ},"zoom button options array"),visible:bT("always","zoomed","hover")}},formatter:bz(bX(bJ),op)};or.dataSource.requestThrottle=bv(bO),or.dataSource.updateThrottle=bv(bO),or.dataSource.updateDuringInteraction=bv(bC),or.zoom.enableIndependentAxes=bv(bC),or.statusBar=bv(bG),or.foreground=bv({visible:bC,text:bJ,image:{url:bJ,top:bH,right:bH,bottom:bH,left:bH,width:bO,height:bO,opacity:bQ},...cb}),or.overrideDevicePixelRatio=bv(bH),or.sync.domainMode=bv(bT("direction","position","key"));var os={cursor:bJ,context:()=>!0,showInLegend:bC,nodeClickRange:oe,listeners:{seriesNodeClick:bD,seriesNodeDoubleClick:bD},highlightStyle:{item:{...cb,...b5},series:{enabled:bC,dimOpacity:bQ,strokeWidth:bO}},highlight:cg(cf)},ot={...os,id:bJ,visible:bC,context:()=>!0,data:bB};ot.seriesGrouping=bv(bG);var ou={shape:ob,size:bO,...cb,...b5,...cc},ov={enabled:bC,itemStyler:bY({...cb,...b5,...cc,shape:ob,size:bO}),...ou},ow={enabled:bC,formatter:bD,format:oq,itemStyler:bY({enabled:bC,...cs,...co}),...cs,...co},ox={...ow,lineHeight:bO,minimumFontSize:bO,wrapping:oc,overflowStrategy:bT("ellipsis","hide")},oy={visible:bC,cap:{visible:bC,length:bO,lengthRatio:bQ,...b5,...cc},...b5,...cc},oz={...oy,xLowerKey:bJ,xUpperKey:bJ,yLowerKey:bJ,yUpperKey:bJ,xLowerName:bJ,xUpperName:bJ,yLowerName:bJ,yUpperName:bJ,itemStyler:bY({visible:bC,...b5,...cc,cap:{visible:bC,length:bO,lengthRatio:bQ,...b5,...cc}})},oA={enabled:bC,showArrow:bC,range:oe,renderer:bX(bz(bJ,bw({heading:bJ,title:bJ,data:bW({label:bu(bJ),value:bu(bJ)})},"tooltip renderer result object"))),position:{anchorTo:bT("node","pointer","chart"),placement:bz(od,bV(od)),xOffset:bH,yOffset:bH},interaction:{enabled:bC}},oB={enabled:bC,xOffset:bH,yOffset:bH,blur:bO,color:bE},oC=bx({linear:{},smooth:{tension:bQ},step:{position:bT("start","middle","end")}},"interpolation line options"),oD={fills:by(bL(2),bV(bw({color:bE,stop:bH},"")),b1),fillMode:bT("continuous","discrete")},oE={value:bu(bH),text:bJ,shape:bz(bT("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),bD),placement:bT("before","after","middle"),spacing:bO,size:bO,rotation:bH,...cb,...b5,...cc},oF={value:bu(bH),text:bJ,shape:bz(bT("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),bD),placement:bT("inside","outside","middle"),spacing:bO,size:bO,rotation:bH,label:{...ow,spacing:bO},...cb,...b5,...cc},oG={direction:bT("horizontal","vertical"),cornerMode:bT("container","item"),cornerRadius:bO,thickness:bO,segmentation:{enabled:bC,spacing:bO,interval:{values:bV(bH),step:bH,count:bH}},bar:{enabled:bC,thickness:bO,thicknessRatio:bQ,...oD,...cb,...b5,...cc},label:{...ox,text:bJ,spacing:bO,avoidCollisions:bC,placement:bT("inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end")},tooltip:oA,...dQ(os,["listeners"])},oH={...oG,...dQ(ot,["listeners"]),type:bu(bU("linear-gauge")),value:bu(bH),scale:{min:by(bH,bR("max")),max:by(bH,bS("min")),label:{enabled:bC,formatter:bD,rotation:bH,spacing:bO,minSpacing:bO,placement:bT("before","after"),avoidCollisions:bC,format:oq,...co},interval:{values:bV(bH),step:bH},...oD,...cb,...b5,...cc},targets:bW(oE,"target options array")};oH.margin=bv(bH),oH.defaultColorRange=bv(bV(bE)),oH.defaultTarget=bv({...oE,value:bH,label:{...ow,spacing:bH}}),oH.defaultScale=bv(oH.scale),oH.scale.defaultFill=bv(bE);var oI={outerRadius:bO,innerRadius:bO,outerRadiusRatio:bQ,innerRadiusRatio:bQ,startAngle:bH,endAngle:bH,spacing:bO,cornerMode:bT("container","item"),cornerRadius:bO,scale:{min:by(bH,bR("max")),max:by(bH,bS("min")),label:{enabled:bC,formatter:bD,rotation:bH,spacing:bO,minSpacing:bO,avoidCollisions:bC,format:oq,...co},interval:{values:bV(bH),step:bH},...oD,...cb,...b5,...cc},segmentation:{enabled:bC,spacing:bO,interval:{values:bV(bH),step:bH,count:bH}},bar:{enabled:bC,...oD,...cb,...b5,...cc},needle:{enabled:bC,spacing:bO,radiusRatio:bQ,...cb,...b5,...cc},label:{text:bJ,spacing:bO,...ox},secondaryLabel:{text:bJ,...ox},tooltip:oA,...os},oJ={...oI,...ot,type:bu(bU("radial-gauge")),value:bu(bH),targets:bW(oF,"target options array")};oJ.defaultColorRange=bv(bV(bE)),oJ.defaultTarget=bv({...oF,value:bH,label:{...ow,spacing:bH}}),oJ.scale.defaultFill=bv(bE);var oK=bT("millisecond","second","minute","hour","day","month","year"),oL={unit:bu(oK),step:bP,epoch:bF,utc:bC};oL.every=bD;var oM=bw(oL,"a time interval object"),oN={enabled:bC,text:bJ,padding:bH,...co},oO=bt({enabled:bC,type:bu(bT("line","range")),range:by(bt((a,{options:b})=>"range"===b.type,"crossLine type to be 'range'"),bV(bG),bL(2,2)),value:by(bt((a,{options:b})=>"line"===b.type,"crossLine type to be 'line'"),bG),label:oN,fill:bE,fillOpacity:bQ,...b5,...cc},"cross-line options"),oP={...oO,label:{...oN,position:bT("top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"),rotation:bH}},oQ={enabled:bC,rotation:bH,avoidCollisions:bC,minSpacing:bO,spacing:bO,formatter:bD,itemStyler:bY({...co,...cs,spacing:bH}),...co,...cs},oR={autoRotate:bC,autoRotateAngle:bH,wrapping:bT("never","always","hyphenate","on-space"),truncate:bC,...oQ},oS={format:oq,...oR},oT={format:bz(bJ,bI),...oR},oU={enabled:bC,width:bO,size:bO,stroke:bE},oV={enabled:bC,label:oT,tick:oU},oW={values:bV(bG),minSpacing:bO},oX={reverse:bC,gridLine:{enabled:bC,width:bO,style:bW({fill:bE,fillOpacity:bO,stroke:bz(bE,b_),strokeWidth:bO,lineDash:bV(bO)},"a grid-line style object array")},interval:oW,label:oQ,line:{enabled:bC,width:bO,stroke:bE},tick:oU,context:()=>!0};oX.layoutConstraints=bv({stacked:bu(bC),align:bu(bT("start","end")),unit:bu(bT("percent","px")),width:bu(bO)});var oY={...oX,keys:bV(bJ),crossLines:bW(oP,"a cross-line options array"),position:bT("top","right","bottom","left"),thickness:bO,maxThicknessRatio:bQ,title:{enabled:bC,text:of,spacing:bO,formatter:bD,...co}};oY.title._enabledFromTheme=bv(bC);var oZ={enabled:bC,...cb,...b5,...cc};function o$(a,b){let c,d={enabled:bC,xOffset:bH,yOffset:bH,formatter:bX(bJ),renderer:bX(bz(bJ,bw({text:bJ,color:bE,backgroundColor:bE,opacity:bQ},"crosshair label renderer result object")))};return a&&(c={...d,format:b?bz(bJ,bw({millisecond:bJ,second:bJ,hour:bJ,day:bJ,month:bJ,year:bJ})):bJ}),{enabled:bC,snap:bC,label:c??d,...b5,...cc}}function o_(a,b){return{min:by(a,bR("max")),max:by(a,bS("min")),nice:bC,interval:{step:b?bz(bP,oK,oM):bP,values:bV(a),minSpacing:by(bO,bR("maxSpacing")),maxSpacing:by(bO,bS("minSpacing"))}}}var o0={step:bz(bP,oK,oM),values:bV(bz(bH,bF)),minSpacing:by(bO,bR("maxSpacing")),maxSpacing:by(bO,bS("minSpacing")),placement:bT("on","between")},o1=class a extends lu{constructor(a,b=new kJ,c=!0){super(a,b),this.groupPaddingInner=.1,this.includeInvisibleDomains=c,this.nice=!1}static is(b){return b instanceof a}isCategoryLike(){return!0}hasDefinedDomain(){return!1}normaliseDataDomain(a){return{domain:a,clipped:!1}}updateScale(){super.updateScale();let{paddingInner:a,paddingOuter:b}=this;if(!aW(a)||!aW(b)){let c=this.reduceBandScalePadding();a??(a=c.inner),b??(b=c.outer)}this.scale.paddingInner=a??0,this.scale.paddingOuter=b??0}calculateGridLines(a,b,c){let d=super.calculateGridLines(a,b,c);return"between"===this.interval.placement&&a.length>0&&d.push(super.calculateGridLine({index:a.at(-1).index+1,tickId:`after:${a.at(-1).tickId}`,translation:this.range[1]},a.length,b,c,a)),d}calculateGridLine({index:a,tickId:b,translation:c},d,e,f,g){let{gridLine:h,horizontal:i,interval:j,scale:k}=this;if("between"!==j.placement)return super.calculateGridLine({index:a,tickId:b,translation:c},d,e,f,g);let l=c<k.step?Math.floor(k.step/2):k.step/2,m=c-l,[n,o,p,q]=i?[m,Math.max(e,f),m,Math.min(e,f)]:[Math.min(e,f),m,Math.max(e,f),m],{style:r}=h,{stroke:s,strokeWidth:t=0,lineDash:u}=r[a%r.length]??{};return{tickId:b,offset:m,x1:n,y1:o,x2:p,y2:q,stroke:s,strokeWidth:t,lineDash:u}}calculateGridFills(a,b,c){let{horizontal:d,range:e,scale:f}=this;if("between"!==this.interval.placement)return super.calculateGridFills(a,b,c);let g=[];if(0==a.length)return g;let h=a[0],i=h.translation>e[0]+f.step/2,j=a[a.length-1],k=d&&j.translation<e[1]-f.step/2;if(i){let d={tickId:`before:${h.tickId}`,translation:h.translation-f.step};g.push(this.calculateGridFill(d,-1,h.index-1,b,c,a))}if(g.push(...a.map((d,e)=>this.calculateGridFill(d,e,d.index,b,c,a))),k){let d={tickId:`after:${j.tickId}`,translation:j.translation+f.step};g.push(this.calculateGridFill(d,a.length,j.index+1,b,c,a))}return g}calculateGridFill({tickId:a,translation:b},c,d,e,f,g){let{gridLine:h,horizontal:i,interval:j,scale:k}=this;if("between"!==j.placement)return super.calculateGridFill({tickId:a,translation:b},c,d,e,f,g);let l=b-k.step/2,m=b+k.step/2,[n,o,p,q]=i?[l,Math.max(e,f),m,Math.min(e,f)]:[Math.min(e,f),l,Math.max(e,f),m],{fill:r,fillOpacity:s}=h.style[d%h.style.length]??{};return{tickId:a,x1:n,y1:o,x2:p,y2:q,fill:r,fillOpacity:s}}calculateTickLines(a,b){let c=super.calculateTickLines(a,b);return"between"===this.interval.placement&&a.length>0&&c.push(super.calculateTickLine({isPrimary:!1,tickId:`after:${a.at(-1)?.tickId}`,translation:this.range[1]},a.length,b,a)),c}calculateTickLine({isPrimary:a,tickId:b,translation:c},d,e,f){let{horizontal:g,interval:h,primaryTick:i,scale:j,tick:k}=this;if("between"!==h.placement)return super.calculateTickLine({isPrimary:a,tickId:b,translation:c},d,e,f);let l=a&&i?.enabled?i:k,m=-e*this.getTickSize(l),n=c<j.step?Math.floor(j.step/2):j.step/2,o=c-n,[p,q,r,s]=g?[o,0,o,m]:[0,o,m,o],{stroke:t,width:u}=l;return{tickId:b,offset:o,x1:p,y1:q,x2:r,y2:s,stroke:t,strokeWidth:u,lineDash:void 0}}reduceBandScalePadding(){return this.boundSeries.reduce((a,b)=>{let c=b.getBandScalePadding?.();return c&&(a.inner>c.inner&&(a.inner=c.inner),a.outer<c.outer&&(a.outer=c.outer)),a},{inner:1/0,outer:-1/0})}tickFormatParams(a,b,c,d){return{type:"category"}}datumFormatParams(a,b,c,d,e){let{datum:f,seriesId:g,legendItemName:h,key:i,source:j,property:k,domain:l,boundSeries:m}=b;return Array.isArray(a)&&a.some(a=>"string"!=typeof a)?a=a.map(String):Array.isArray(a)||"string"==typeof a||"number"==typeof a||a instanceof Date||(a=String(a)),{type:"category",value:a,datum:f,seriesId:g,legendItemName:h,key:i,source:j,property:k,domain:l,boundSeries:m}}};o1.className="CategoryAxis",o1.type="category",dl([ey],o1.prototype,"groupPaddingInner",2),dl([ey],o1.prototype,"paddingInner",2),dl([ey],o1.prototype,"paddingOuter",2);var o2=o1,o3=class a extends kJ{static is(b){return b instanceof a}normalizeDomains(...a){let{domain:b}=super.normalizeDomains(...a);return{domain:b,animatable:!1}}findIndex(a){return super.findIndex(a)??this.getMatchIndex(a)}getMatchIndex(a){let b=JSON.stringify(a),c=this._domain.find(a=>JSON.stringify(a)===b);if(null!=c)return super.findIndex(c)}};function o4(a){if(0===a.length)return null;let b=1/0,c=-1/0;for(let d of a){let a=d instanceof Date?d.getTime():d;"number"==typeof a&&(a<b&&(b=a),a>c&&(c=a))}let d=[b,c];return d.every(isFinite)?d:null}function o5(a,b,c){let d=!1,e=o4(a);if(null==e)return{extent:null!=b&&null!=c&&b<=c?[b,c]:[],clipped:!1};let[f,g]=e;return(null!=b&&(d||(d=b>f),f=b),null!=c&&(d||(d=c<g),g=c),f>g)?{extent:[],clipped:!1}:{extent:[f,g],clipped:d}}function o6(a,b=[0,0]){for(let c of a)"number"==typeof c&&(c<0&&(b[0]+=c),c>0&&(b[1]+=c));return b}function o7(a,b){return{id:a,matchGroupIds:[b],type:"aggregate",aggregateFunction:a=>o6(a)}}function o8(a,b){let c=b?.visible??!0;return{id:a,type:"aggregate",matchGroupIds:b?.matchGroupId?[b?.matchGroupId]:void 0,aggregateFunction:a=>o6(a),groupAggregateFunction:(a,b=[0,0])=>(c&&(b[0]+=a?.[0]??0,b[1]+=a?.[1]??0),b)}}function o9(a,b){let c=b?.visible??!0;return{id:a,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(a,b=[0,0])=>(c&&(b[0]+=a?.[0]??0,b[1]+=a?.[1]??0),b)}}function pa(a,b){let c=b?.visible??!0;return{id:a,matchGroupIds:b?.matchGroupId?[b?.matchGroupId]:void 0,type:"aggregate",aggregateFunction:a=>o6(a),groupAggregateFunction:(a,b=[0,0,-1])=>(c&&(b[0]+=a?.[0]??0,b[2]++,b[1]+=a?.[1]??0),b),finalFunction:(a=[0,0,0])=>{let b=a[0]+a[1];return b>=0?[0,b/a[2]]:[b/a[2],0]}}}function pb(a,b,c){let d={id:a,matchGroupIds:c?[c]:void 0,type:"aggregate",aggregateFunction:(a,c=[])=>{let d=c[1]-c[0];return b.aggregateFunction(a).map(a=>a/d)}};return b.groupAggregateFunction&&(d.groupAggregateFunction=b.groupAggregateFunction),d}function pc(a){return()=>{let b=0;return c=>aW(c)?b+=a?Math.max(0,c):c:c}}function pd(){return()=>{let a=0;return b=>{if(!aW(b))return b;let c=a;return a+=b,c}}}function pe(a){return a.input.count<=1e3}function pf(a){return null!=a&&jO(a)}function pg(a){return null!=a}function ph(a){switch(a){case"number":case"log":case"time":case"unit-time":case"ordinal-time":case"color":return pf;default:return pg}}function pi(a){switch(a){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function pj(a,b,c={}){return{property:a,type:"key",valueType:pi(b),validation:ph(b),...c}}function pk(a,b,c={}){return{property:a,type:"value",valueType:pi(b),validation:ph(b),...c}}function pl(a,b={}){return{property:a,type:"value",valueType:"range",missingValue:1,processor:()=>()=>1,...b}}var pm=function(a){return a};function pn(...a){let b=a.filter(a=>null!=a);return 0===b.length?()=>pm:1===b.length?b[0]:()=>{let a=b.map(a=>a());return(b,c)=>a.reduce((a,b)=>b(a,c),b)}}function po(a,b={}){let{min:c=-1/0,max:d=1/0,processor:e,...f}=b;return{type:"value",property:a,valueType:"range",validation:pf,processor:pn(e,()=>a=>aW(a)?aA(c,a,d):a),...f}}function pp(a,b,c={}){let{onlyPositive:d,processor:e,...f}=c;return{...pk(a,b,f),processor:pn(e,pc(d))}}function pq(a,b,c={}){return{...pk(a,b,c),processor:pd()}}function pr(a,b,c,d,e){return[pk(a,e,d),pD(d.groupId,b,c,d.separateNegative),...null!=d.rangeId?[{id:d.rangeId,matchGroupIds:[d.groupId],type:"aggregate",aggregateFunction:a=>i5.extendDomain(a)}]:[]]}var ps={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let a=NaN;return(b=1/0,c)=>{let d="number"==typeof c[0]?c[0]:Number(c[0]),e=Math.abs(d-a);return(a=d,!isNaN(e)&&e>0&&e<b)?e:b}}},pt={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let a=NaN;return(b=-1/0,c)=>{let d="number"==typeof c[0]?c[0]:Number(c[0]),e=Math.abs(d-a);return(a=d,!isNaN(e)&&e>0&&e>b)?e:b}}},pu={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:a}})=>a?.slice().sort((a,b)=>{for(let c=0;c<a.length;c++){let d=a[c]-b[c];if(0!==d)return d}return 0})};function pv({normaliseTo:a}){let b=(b,c)=>{if(0===c)return 0;let d=(b??0)*a/c;return d>=0?Math.min(a,d):Math.max(-a,d)};return()=>()=>(a,c,d)=>{let e=function(a,b,c){let d=[0,0];for(let e of b){let b=a[e],f=c.datumIndices[e];if(null!=f)for(let a of f){let c=b[a];if(null==c)continue;let e="number"==typeof c?c:Math.max(...c.map(a=>a??0)),f=e<0?0:1;0===f?d[f]=Math.min(d[f],e):d[f]=Math.max(d[f],e)}}return Math.max(Math.abs(d[0]),d[1])}(a,c,d);for(let f of c){let c=d.datumIndices[f];if(null!=c)for(let d of c){let c=a[f],g=c[d];if(null==g){c[d]=void 0;continue}c[d]=b(g,e)}}}}function pw(a,b){return{type:"group-value-processor",matchGroupIds:a,adjust:hw({normaliseTo:b},pv)}}function px({normaliseTo:a,zeroDomain:b,rangeMin:c,rangeMax:d}){let e=a[1]-a[0],f=(c,d,f)=>{let g=a[0]+(c-d)/f*e;return 0===f?b:g>=a[1]?a[1]:g<a[0]?a[0]:g};return()=>(b,e)=>{let[g,h]=b.domain.values[e];null!=c&&(g=c),null!=d&&(h=d);let i=h-g;b.domain.values[e]=[a[0],a[1]];let j=b.columns[e];for(let a=0;a<j.length;a+=1)j[a]=f(j[a],g,i)}}function py(a,b,c,d,e){return{type:"property-value-processor",property:a,adjust:hw({normaliseTo:b,rangeMin:d,rangeMax:e,zeroDomain:c},px)}}function pz(a,b,c,d){let e=3;if("category"===b.valueType)return c.length<a&&(e&=-2),e;let f=d[0]?.valueOf();for(let a=1;0!==e&&a<d.length;a++){let b=d[a]?.valueOf();(!Number.isFinite(b)||f>b)&&(e&=-3),Number.isFinite(b)&&f===b&&(e&=-2),f=b}return e}function pA(a){return{type:"processor",property:"animationValidation",calculate(b){if(!pe(b))return;let{keys:c,values:d}=b.defs,{input:e,domain:{keys:f,values:g},keys:h,columns:i,invalidKeyCount:j}=b,k=3;if(0!==e.count){for(let a=0;0!==k&&a<c.length;a++)for(let b of c[a].scopes){let d=h[a].get(b),e=j?.get(b)??0;k&=pz(d.length-e,c[a],f[a],d)}for(let b=0;0!==k&&b<d.length;b++){let c=d[b];a?.includes(c.id)&&(k&=pz(0,c,g[b],i[b]))}}return{uniqueKeys:(1&k)!=0,orderedKeys:(2&k)!=0}}}}function pB({mode:a,separateNegative:b}){return()=>()=>(c,d,e)=>{let f=[0,0];for(let g of d){let d=e.datumIndices[g];if(null==d)continue;let h=f[0],i=f[1],j=c[g],k=!1;for(let c of d){let d=j[c];if(!aW(d))continue;let e=b&&aC(d),g=e?h:i;"normal"===a?j[c]=g+d:j[c]=g,k||(f[+!e]=g+d,k=!0)}}}}function pC({mode:a,sum:b}){return()=>{let c=[],d=!0;return()=>(e,f,g)=>{let h=0;for(let i of f){let f=e[i],j=g.datumIndices[i];if(null!=j)for(let e of j){let g=f[e],j=d&&"current"===b?0:c[i];c[i]=g;let k="current"===b?g:j;if(!aW(g)||!aW(j)){f[e]=h;continue}"normal"===a&&(h+=k),f[e]=h,"trailing"===a&&(h+=k)}}d=!1}}}function pD(a,b,c,d=!1){return{type:"group-value-processor",matchGroupIds:[a],adjust:b.startsWith("window")?hw({mode:b.endsWith("-trailing")?"trailing":"normal",sum:c},pC):hw({mode:b,separateNegative:d},pB)}}function pE(a){return a.id??a.property}function pF(a,b,c,d,e){for(let{previousIndex:f,nextIndex:g}of c){let c=a[f],h=b[g];if(c[d]!==h[e])return!1}return!0}function pG(a,b,c=!0){return{type:"processor",property:"diff",calculate(d,e){if(!pe(d))return;let f=new Map,g=new Map,h=new Map,i=new Map,j=b.keys.map(b=>b.get(a)),k=d.keys.map(b=>b.get(a)),l=b.columns,m=d.columns,n=function(a,b,c){let d=new Map,e=b.defs.values;for(let b=0;b<e.length;b+=1){let c=e[b];if(c.scopes?.includes(a)===!1)continue;let f=pE(c);if(d.has(f))return;d.set(f,b)}let f=[],g=c.defs.values;for(let b=0;b<g.length;b+=1){let c=g[b];if(c.scopes?.includes(a)===!1)continue;let e=pE(c),h=d.get(e);if(null==h)return;d.delete(e),f.push({previousIndex:h,nextIndex:b})}if(0===d.size)return f}(a,b,d);if(null==n)return e;let o=Math.max(b.input.count,d.input.count);for(let a=0;a<o;a++){let e=a<b.input.count,o=a<d.input.count,p=e?je(j,a):void 0,q=null!=p?pH(...p):"",r=o?je(k,a):void 0,s=null!=r?pH(...r):"";if(o&&e&&q===s){pF(l,m,n,a,a)||h.set(s,a);continue}let t=i.get(s);null!=t?((c||!pF(l,m,n,t,a))&&(h.set(s,a),f.set(s,a)),i.delete(s)):o&&g.set(s,a);let u=g.get(q);null!=u?((c||!pF(l,m,n,u,a))&&(h.set(q,a),f.set(q,a)),g.delete(q)):e&&(h.delete(q),i.set(q,a))}let p={changed:g.size>0||h.size>0||i.size>0,added:new Set(g.keys()),updated:new Set(h.keys()),removed:new Set(i.keys()),moved:new Set(f.keys())};return{...e,[a]:p}}}}function pH(...a){if(1===a.length){let b=jP(a[0]);if("boolean"==typeof b||"number"==typeof b||"string"==typeof b)return b}return a.map(a=>jP(a)).join("___")}var pI=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(a,b){a>this.right&&(this.right=a),a<this.left&&(this.left=a),b>this.bottom&&(this.bottom=b),b<this.top&&(this.top=b)}},pJ=class a{constructor(a="",b,c){this.label=a,this.parent=b,this.refId=c,this.position=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screen=0,this.depth=b?b.depth+1:0}insertTick(b,c){let d,e=this;for(let f=0;f<b.length;f++){let g=b[f],h=f!==b.length-1,{children:i}=e,j=i.find(a=>a.label===g);if(j&&h)e=j,d=j;else{let b=new a(g,e,c);b.index=i.length,i.push(b),h&&(e=b),d=b}}return d}getLeftSibling(){return this.index>0?this.parent?.children[this.index-1]:void 0}getLeftmostSibling(){return this.index>0?this.parent?.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){return this.parent?.children.filter((a,b)=>b!==this.index)??[]}},pK=class{constructor(){this.dimensions=new pI,this.nodes=[],this.depth=0}insertNode(a){this.depth<a.depth&&(this.depth=a.depth),this.dimensions.update(a.position,a.depth),this.nodes.push(a)}scaling(a,b){let c=1;if(a>0){let{left:b,right:d}=this.dimensions;d!==b&&(c=a/(d-b))}return b&&(c*=-1),c}},pL=class extends ez{constructor(){super(...arguments),this.enabled=!0,this.border=new jJ}};dl([ey],pL.prototype,"enabled",2),dl([ey],pL.prototype,"avoidCollisions",2),dl([ey],pL.prototype,"border",2),dl([ey],pL.prototype,"color",2),dl([ey],pL.prototype,"cornerRadius",2),dl([ey],pL.prototype,"spacing",2),dl([ey],pL.prototype,"rotation",2),dl([ey],pL.prototype,"wrapping",2),dl([ey],pL.prototype,"truncate",2),dl([ey],pL.prototype,"fill",2),dl([ey],pL.prototype,"fontStyle",2),dl([ey],pL.prototype,"fontWeight",2),dl([ey],pL.prototype,"fontSize",2),dl([ey],pL.prototype,"fontFamily",2),dl([ey],pL.prototype,"padding",2);var pM=class extends ez{constructor(){super(...arguments),this.enabled=!0}};dl([ey],pM.prototype,"enabled",2),dl([ey],pM.prototype,"width",2),dl([ey],pM.prototype,"stroke",2);var pN=class extends ez{constructor(){super(...arguments),this.label=new pL,this.tick=new pM}};dl([ey],pN.prototype,"label",2),dl([ey],pN.prototype,"tick",2);var pO=class extends o2{constructor(a){super(a,new o3),this.tickScale=new o3,this.computedLayout=void 0,this.tickTreeLayout=void 0,this.tickNodes=void 0,this.depthOptions=new eA(pN),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;let{nodes:a}=this.tickTreeLayout,{range:b,step:c,inset:d,bandwidth:e}=this.scale,f=Math.abs(b[1]-b[0])-c,g=this.tickTreeLayout.scaling(f,b[0]>b[1]),h=d+e/2,i=0;for(let b of a){let a=b.position*g;i>a&&(i=a),b.screen=a+h}for(let b of a)b.screen-=i}getDepthOptionsMap(a){let b=[],{depthOptions:c,label:d}=this,e=this.horizontal?0:-90;for(let f=0;f<a;f++)b.push(c[f]?.label.enabled??d.enabled?{enabled:!0,spacing:c[f]?.label.spacing??d.spacing,wrapping:c[f]?.label.wrapping??d.wrapping,truncate:c[f]?.label.truncate??d.truncate,rotation:c[f]?.label.rotation??(f?e:d.rotation),avoidCollisions:c[f]?.label.avoidCollisions??d.avoidCollisions}:{enabled:!1,spacing:0,rotation:0,avoidCollisions:!1});return b}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each((a,b)=>{a.fill=b.color,a.text=b.text,a.textBaseline=b.textBaseline,a.textAlign=b.textAlign??"center",a.setFont(b),a.setBoxing(b)})}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){this.updateDirection(),this.updateScale();let{step:a}=this.scale,{title:b,label:c,range:d,depthOptions:e,horizontal:f,line:g}=this;if(this.lineNode.datum=f?{x1:d[0],x2:d[1],y1:0,y2:0}:{x1:0,x2:0,y1:d[0],y2:d[1]},this.lineNode.setProperties({stroke:g.stroke,strokeWidth:g.enabled?g.width:0}),this.resizeTickTree(),!this.tickTreeLayout?.depth)return{bbox:dt.zero,spacing:0,depthLabelMaxSize:{},tickLabelLayout:[]};let{depth:h,nodes:i}=this.tickTreeLayout,j=f?-c.getSideFlag():c.getSideFlag(),k=[],l=new Map,m=new gd,n=this.getDepthOptionsMap(h),o=j*n[0].spacing,p=this.tickFormatter(this.scale.domain,this.scale.domain,!1),q=(b,g)=>{let i=h-b.depth;if(!n[i]?.enabled||!function(a,b,c=1e-10){return a>=b[0]-c&&a<=b[1]+c}(b.screen,d))return!1;let j=(b.leafCount||1)*a;if(j<5)return!1;let k=p(b.label,g-1),l=this.getLabelStyles({value:b.index,formattedValue:k,depth:i},e[i]?.label);if(c.avoidCollisions){let a=n[i].rotation,b=this.thickness;if(null!=a){let c=function(a,b,c=1/0){let d=a%180*(Math.PI/180),e=Math.abs(Math.sin(d)),f=Math.abs(Math.cos(d));if(0===e)return{width:b,height:c};if(0===f)return{width:c,height:b};if(!isFinite(c)){let a=f/e,c=b/(f+a*e);return{width:c,height:a*c}}let g=f*f-e*e;if(0===g){let a=Math.min(b,c)/Math.SQRT2;return{width:a,height:a}}return{width:Math.abs((b*f-c*e)/g),height:Math.abs((c*f-b*e)/g)}}(a,j,b);j=c.width,b=c.height}let c={font:l,textWrap:n[i].wrapping,overflow:n[i].truncate?"ellipsis":"hide",maxWidth:j,maxHeight:b};k=aM(k)?dh(k,c):de(k,c)||k}return m.x=f?b.screen:o,m.y=f?o:b.screen,m.rotation=0,m.fill=l.color,m.text=k,m.textAlign="center",m.textBaseline=c.parallel?"top":"bottom",m.setFont(l),m.setBoxing(l),!0},r={};i.forEach((b,c)=>{let d=h-b.depth;if(r[d]??(r[d]=0),!b.children.length&&a<5||!q(b,c)||!m.getBBox())return;l.set(c,m.getBBox()),m.rotation=ej(n[d]?.rotation);let{width:e,height:g}=m.getBBox(),i=f?g:e;r[d]<i&&(r[d]=i)});let s=lc();i.forEach((b,d)=>{if(0===d)return;let e=q(b,d),g=!b.children.length,i=h-b.depth;if(g&&a<5||!e)return;let o=ej(n[i].rotation),p=l.get(d);if(!p)return;let{width:t,height:u}=p,v=(a=>{if(0===a)return 0;let b=r[0];for(let c=1;c<=a;c++)b+=n[c].spacing,c!==a&&(b+=r[c]);return b})(i);if(m.textAlign="center",m.textBaseline="middle",m.rotation=o,f?(m.y+=(v+ei(t/2,u/2,o))*j,m.rotationCenterX=b.screen,m.rotationCenterY=m.y):(m.x+=v*j+ei((n[i].spacing*j+t)/2,c.mirrored?t:0,o)-t/2,m.rotationCenterX=m.x,m.rotationCenterY=b.screen),n[i].avoidCollisions){let{width:c,height:e}=m.getBBox();if((f?c:e)>(g?a:b.leafCount*a))return void l.delete(d)}let w=m.getPlainText(),x=m.getBoxingProperties();k.push({text:w,visible:!0,tickId:s(w),range:this.scale.range,border:x.border,color:m.fill,cornerRadius:x.cornerRadius,fill:x.fill,fontFamily:m.fontFamily,fontSize:m.fontSize,fontStyle:m.fontStyle,fontWeight:m.fontWeight,padding:x.padding,rotation:m.rotation,rotationCenterX:m.rotationCenterX,rotationCenterY:m.rotationCenterY,textAlign:m.textAlign,textBaseline:m.textBaseline,x:m.x,y:m.y}),l.set(d,ff.toCanvas(m))});let t=r[0];for(let a=0;a<h;a++)t+=n[a].spacing,0!==a&&(t+=r[a]);let u=[this.lineNodeBBox(),dt.merge(l.values()),new dt(0,0,t*j,0)],v=0;if(b.enabled){let a=dt.merge(u);v=f?a.height:a.width,u.push(this.titleBBox(this.scale.domain,v))}let w=dt.merge(u);return this.layoutCrossLines(),{bbox:w,spacing:v,depthLabelMaxSize:r,tickLabelLayout:k}}update(){let a;if(!this.computedLayout)return;this.moduleCtx.animationManager.skipCurrentBatch();let{tickScale:b,tick:c,gridLine:d,gridLength:e,visibleRange:f,tickTreeLayout:g}=this;if(!g)return;let{depthLabelMaxSize:h,spacing:i}=this.computedLayout,{depth:j}=g,k=this.getDepthOptionsMap(j),{position:l,horizontal:m,gridPadding:n}=this,o="bottom"===l||"right"===l?-1:1,p=o*e-n,q=(a=b.step>5?b.ticks({nice:!1,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},void 0,f).ticks:[]).map((a,c)=>({index:b.findIndex(a),tickId:pH(c,...a),translation:Math.round(b.convert(a))}));this.gridLineGroupSelection.update(d.enabled&&e?this.calculateGridLines(q,n,p):[]),this.gridFillGroupSelection.update(d.enabled&&e?this.calculateGridFills(q,n,p):[]),this.tickLineGroupSelection.update(c.enabled?a.map((a,b)=>{let{tickId:d,translation:e}=q[b],f=this.tickNodes?.get(a),g=null!=f?Math.min(function(a){let b=0,c=a;for(;c?.index===0;)b+=1,c=c.parent;return b}(f),j-1):j-1,i=this.depthOptions[g]?.tick,l=h[0];for(let a=0;a<=g;a++)l+=k[a].spacing,0!==a&&(l+=h[a]);let n=i?.stroke??c.stroke,p=i?.enabled!==!1?i?.width??c.width:0,r=-o*l,[s,t,u,v]=m?[e,e,0,r]:[0,r,e,e];return{tickId:d,offset:e,x1:s,y1:u,x2:t,y2:v,stroke:n,strokeWidth:p,lineDash:void 0}}):[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateGridFills(),this.updateTickLines(),this.updateTitle(this.scale.domain,i),this.updateCrossLines(),this.resetSelectionNodes()}calculateLayout(){let{depthLabelMaxSize:a,tickLabelLayout:b,spacing:c,bbox:d}=this.computeLayout();return this.computedLayout={depthLabelMaxSize:a,tickLabelLayout:b,spacing:c},{bbox:d,niceDomain:this.scale.domain}}onGridVisibilityChange(){super.onGridVisibilityChange(),this.tickLabelGroupSelection.clear()}updateScale(){super.updateScale(),this.tickScale.range=this.scale.range,this.scale.paddingOuter=this.scale.paddingInner/2}processData(){let{direction:a}=this,b=this.boundSeries.filter(a=>a.visible).flatMap(b=>b.getDomain(a));this.dataDomain={domain:o4(b)??this.filterDuplicateArrays(b),clipped:!1},this.isReversed()&&this.dataDomain.domain.reverse();let{layout:c,tickNodes:d}=function(a){let b=new pK,{root:c,tickNodes:d}=function(a){let b=a.reduce((a,b)=>a<b.length?b.length:a,0),c=new pJ,d=new Map;for(let e=0;e<a.length;e++){let f=a[e];for(;f.length<b;)f.push("");let g=c.insertTick(f,e);null!=g&&d.set(f,g)}return{root:c,tickNodes:d}}(a);return!function a(b){let{children:c}=b;if(c.length){let[d]=c;for(let b of c)a(b),d=function(a,b){let c=a.getLeftSibling();if(c){let g=a,h=a,i=c,j=h.getLeftmostSibling(),k=h.mod,l=g.mod,m=i.mod,n=j.mod;for(;i.nextRight()&&h.nextLeft();){i=i.nextRight(),h=h.nextLeft(),j=j.nextLeft(),(g=g.nextRight()).ancestor=a;let c=i.prelim+m-(h.prelim+k)+1;if(c>0){var d,e,f=(d=i,e=b,a.getSiblings().indexOf(d.ancestor)>=0?d.ancestor:e);let g=c/(a.index-f.index);a.change-=g,a.shift+=c,f.change+=g,a.prelim+=c,a.mod+=c,k+=c,l+=c}m+=i.mod,k+=h.mod,n+=j.mod,l+=g.mod}i.nextRight()&&!g.nextRight()?g.mod+=m-l:(h.nextLeft()&&!j.nextLeft()&&(j.mod+=k-n),b=a)}return b}(b,d);!function({children:a}){let b=0,c=0;for(let d=a.length-1;d>=0;d--){let e=a[d];e.prelim+=b,e.mod+=b,c+=e.change,b+=e.shift+c}}(b);let e=(c[0].prelim+c.at(-1).prelim)/2,f=b.getLeftSibling();f?(b.prelim=f.prelim+1,b.mod=b.prelim-e):b.prelim=e}else{let a=b.getLeftSibling();b.prelim=a?a.prelim+1:0}}(c),!function a(b,c,d){for(let e of(b.position=b.prelim+c,d.insertNode(b),b.children))a(e,c+b.mod,d)}(c,-c.prelim,b),!function a(b){let{children:c}=b,d=0;for(let b of c)a(b),b.children.length?d+=b.leafCount:d++;b.leafCount=d,c.length?(b.subtreeLeft=c[0].subtreeLeft,b.subtreeRight=c[c.length-1].subtreeRight,b.position=(b.subtreeLeft+b.subtreeRight)/2):(b.subtreeLeft=b.position,b.subtreeRight=b.position)}(c),{layout:b,tickNodes:d}}(this.dataDomain.domain.map(pP));this.tickTreeLayout=c,this.tickNodes=d;let e=[];for(let a of this.tickTreeLayout.nodes)a.leafCount||null==a.refId||e.push(this.dataDomain.domain[a.refId]);let f=function(a,b){let c=new Map;return b.forEach((a,b)=>{c.set(a,b)}),a.sort((a,b)=>(c.get(a)??1/0)-(c.get(b)??1/0))}(this.dataDomain.domain,e);this.scale.domain=f;let g=f.map(pP);g.push([""]),this.tickScale.domain=g}filterDuplicateArrays(a){let b=new Set;return a.filter(a=>{let c=aM(a)?JSON.stringify(a):a;return!b.has(c)&&(b.add(c),!0)})}};function pP(a){return cu(aQ(a)&&"value"in a?a.value:a)}pO.className="GroupedCategoryAxis",pO.type="grouped-category",dl([ey],pO.prototype,"depthOptions",2);var pQ={2:(a,b)=>Math.log2(b),[Math.E]:(a,b)=>Math.log(b),10:(a,b)=>Math.log10(b)},pR=(a,b)=>Math.log(b)/Math.log(a);function pS(a,b,c){let d=Math.min(...b),e=pQ[a]??pR;return d>=0?e(a,c):-e(a,-c)}var pT={[Math.E]:(a,b)=>Math.exp(b),10:(a,b)=>b>=0?10**b:1/10**-b},pU=(a,b)=>a**b;function pV(a,b,c){let d=Math.min(...b),e=pT[a]??pU;return d>=0?e(a,c):-e(a,-c)}var pW=class a extends iG{constructor(a=[1,10],b=[0,1]){super(a,b),this.type="log",this.defaultClamp=!0,this.base=10,this.log=a=>pS(this.base,this.domain,a),this.pow=a=>pV(this.base,this.domain,a)}static is(b){return b instanceof a}transform(a){let[b,c]=iB(this.domain);return b>=0!=c>=0?NaN:b>=0?Math.log(a):-Math.log(-a)}transformInvert(a){let[b,c]=iB(this.domain);return b>=0!=c>=0?NaN:b>=0?Math.exp(a):-Math.exp(-a)}toDomain(a){return a}niceDomain(a,b=this.domain){if(b.length<2)return[];let{base:c}=this,[d,e]=b,f=d>e?Math.ceil:Math.floor,g=d>e?Math.floor:Math.ceil;return[pV(c,b,f(pS(c,b,d))),pV(c,b,g(pS(c,b,e)))]}ticks({interval:a,tickCount:b=iG.defaultTickCount},c=this.domain,d){if(!c||c.length<2||b<1)return;let e=this.base,[f,g]=c,h=Math.min(f,g),i=Math.max(f,g),j=this.log(h),k=this.log(i);if(a){let b=Math.min(Math.abs(a),Math.abs(k-j)),{ticks:c,count:e,firstTickIndex:f}=k0(j,k,b,d),g=c.map(this.pow).filter(a=>a>=h&&a<=i);if(!k1(g.length,this.getPixelRange()))return{ticks:g,count:e,firstTickIndex:f}}if(e%1!=0||k-j>=b){let a=Math.min(k-j,b),{ticks:c,count:e,firstTickIndex:f}=kU(j,k,a,void 0,void 0,d);return{ticks:c.map(this.pow),count:e,firstTickIndex:f}}let l=[],m=h>0;j=Math.floor(j)-1,k=Math.round(k)+1;let n=iC(this.range)/b,o=1/0;for(let a=j;a<=k;a++){let b=this.convert(this.pow(a+1));for(let c=1;c<e;c++){let d=m?c:e-c+1,f=this.pow(a)*d,g=this.convert(f),j=Math.abs(o-g),k=Math.abs(g-b),p=j>=n&&k>=n;f>=h&&f<=i&&(1===c||p||0===l.length)&&(l.push(f),o=g)}}return kI(l,m,d)}},pX=class a extends iG{constructor(){super([0,1],[0,1]),this.type="number"}static is(b){return b instanceof a}static getTickStep(a,b,c){let{interval:d,tickCount:e=iG.defaultTickCount,minTickCount:f,maxTickCount:g}=c;return d??kZ(a,b,e,f,g)}toDomain(a){return a}ticks({interval:a,tickCount:b=iG.defaultTickCount,minTickCount:c,maxTickCount:d},e=this.domain,f){if(!e||e.length<2||b<1||!e.every(isFinite))return{ticks:[],count:0,firstTickIndex:0};let[g,h]=e;if(a){let b=Math.abs(a);if(!k1((h-g)/b,this.getPixelRange()))return k0(g,h,b,f)}return kU(g,h,b,c,d,f)}niceDomain(b,c=this.domain){if(c.length<2)return[];let{tickCount:d=iG.defaultTickCount}=b,[e,f]=c;if(1===d)[e,f]=k2(e,f);else if(d>1){let d=e>f?Math.ceil:Math.floor,g=e>f?Math.floor:Math.ceil;for(let h=0;h<4;h++){let h=e,i=f,j=a.getTickStep(e,f,b),[k,l]=c;if(e=d(k/j)*j,f=g(l/j)*j,e===h&&f===i)break}}return[e,f]}},pY=class extends lu{constructor(a,b=new pX){super(a,b)}hasDefinedDomain(){let{min:a,max:b}=this;return null!=a&&null!=b&&a<b}normaliseDataDomain(a){let{min:b,max:c}=this,{extent:d,clipped:e}=o5(a,b,c);return{domain:d,clipped:e}}tickFormatParams(a,b,c){return{type:"number",fractionDigits:c}}datumFormatParams(a,b,c){let{datum:d,seriesId:e,legendItemName:f,key:g,source:h,property:i,domain:j,boundSeries:k}=b;return{type:"number",value:a,datum:d,seriesId:e,legendItemName:f,key:g,source:h,property:i,domain:j,boundSeries:k,fractionDigits:c}}};pY.className="NumberAxis",pY.type="number",dl([ey],pY.prototype,"min",2),dl([ey],pY.prototype,"max",2);var pZ=class extends pY{normaliseDataDomain(a){let{min:b,max:c}=this,{extent:d,clipped:e}=o5(a,b,c);return d[0]<0&&d[1]>0||a[0]<0&&a[1]>0?(aa.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:e}):0===d[0]||0===d[1]||0===a[0]||0===a[1]?(aa.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:e}):{domain:d,clipped:e}}set base(a){this.scale.base=a}get base(){return this.scale.base}constructor(a){super(a,new pW)}};pZ.className="LogAxis",pZ.type="log";var p$=class extends ez{constructor(){super(...arguments),this.enabled=!1,this.label=new j$,this.tick=new j0}};dl([ey],p$.prototype,"enabled",2),dl([ey],p$.prototype,"label",2),dl([ey],p$.prototype,"tick",2);var p_=class extends lu{constructor(a){super(a,new k5),this.parentLevel=new p$,this.min=void 0,this.max=void 0}get _unit(){}set _unit(a){aa.warnOnce("To use 'unit', use an axis with type 'unit-time' instead of 'time'.")}hasDefinedDomain(){let{min:a,max:b}=this;return null!=a&&null!=b&&a<b}isCategoryLike(){return!1}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}normaliseDataDomain(a){return p2(a,this.min,this.max)}processData(){super.processData();let{boundSeries:a,direction:b,min:c,max:d}=this;this.minimumTimeGranularity=p0(a,b,c,d)}tickFormatParams(a,b,c,d){d??(d=kE(b));let e=kG(a),f=kx(d);return{type:"date",unit:f,step:ky(d),epoch:kz(d),truncateDate:e}}datumFormatParams(a,b,c,d,e){if("number"==typeof a&&(a=new Date(a)),null==d){let{minimumTimeGranularity:b}=this,c=kF(a);d=null!=b&&kB(b)<kB(c)?b:c}let{datum:f,seriesId:g,legendItemName:h,key:i,source:j,property:k,domain:l,boundSeries:m}=b,n=kx(d),o=ky(d),p=kz(d);return{type:"date",value:a,datum:f,seriesId:g,legendItemName:h,key:i,source:j,property:k,domain:l,boundSeries:m,unit:n,step:o,epoch:p,style:e}}};function p0(a,b,c,d){let e=a.reduce((a,b)=>Math.min(b.minTimeInterval()??1/0,a),1/0);return Number.isFinite(e)?kD(e):p1(a,b,c,d)?.unit}function p1(a,b,c,d){let e,f=1/0,g=-1/0,h=0,i=[];for(let c of a){if(!c.visible)continue;let{domain:a}=p2(c.getDomain(b),void 0,void 0);if(0===a.length)continue;let d=a[0].valueOf(),j=a[a.length-1].valueOf();i.push(d,j),f=Math.min(f??1/0,d,j),g=Math.max(g??-1/0,d,j);let k=Math.abs(j-d);if(0===k)continue;let l=c.dataCount();h=Math.max(h,l),l<=1||(e=Math.min(e??1/0,k/(l-1)))}if(f=Math.min(f,c?.valueOf()??1/0,d?.valueOf()??1/0),g=Math.max(g,c?.valueOf()??-1/0,d?.valueOf()??-1/0),!Number.isFinite(f)||!Number.isFinite(g))return;e??(e=Math.abs(g-f));let j=kD(e=Math.min(e,function(a){a.sort((a,b)=>a-b);let b=1/0;for(let c=1;c<a.length;c++){let d=a[c-1],e=a[c];e-d>0&&(b=Math.min(b,Math.abs(e-d)))}return b}(i))),k=e/kB(j),l=1===(k=Math.max(k=h<=2?Math.floor(k):Math.round(k),1))?void 0:ko(j,f);return{unit:j,step:k,epoch:l}}function p2(a,b,c){let d=!1;"number"==typeof b&&(b=new Date(b)),"number"==typeof c&&(c=new Date(c));let e=o4(a)?.map(a=>new Date(a));if(null==e)return{domain:null!=b&&null!=c&&b.valueOf()<=c.valueOf()?[b,c]:[],clipped:!1};let[f,g]=e;return(b instanceof Date&&(d||(d=b>f),f=b),c instanceof Date&&(d||(d=c<g),g=c),f>g)?{domain:[],clipped:!1}:{domain:[f,g],clipped:d}}p_.className="TimeAxis",p_.type="time",dl([ey],p_.prototype,"parentLevel",2),dl([ey],p_.prototype,"min",2),dl([ey],p_.prototype,"max",2),dl([ey,fI("_unit")],p_.prototype,"unit",2);var p3=class extends o2{calculateGridLine({index:a,tickId:b,translation:c},d,e,f,g){let{gridLine:h,horizontal:i,interval:j,range:k}=this;if("between"!==j.placement)return super.calculateGridLine({index:a,tickId:b,translation:c},d,e,f,g);let l=g[d-1],m=l?c-(c-l.translation)/2:k[0],[n,o,p,q]=i?[m,Math.max(e,f),m,Math.min(e,f)]:[Math.min(e,f),m,Math.max(e,f),m],{style:r}=h,{stroke:s,strokeWidth:t=0,lineDash:u}=r[a%r.length]??{};return{tickId:b,offset:m,x1:n,y1:o,x2:p,y2:q,stroke:s,strokeWidth:t,lineDash:u}}calculateGridFills(a,b,c){return"between"!==this.interval.placement?super.calculateGridFills(a,b,c):a.map((d,e)=>this.calculateGridFill(d,e,d.index,b,c,a))}calculateGridFill({tickId:a,translation:b},c,d,e,f,g){let{gridLine:h,horizontal:i,interval:j,range:k}=this;if("between"!==j.placement)return super.calculateGridFill({tickId:a,translation:b},c,d,e,f,g);let l=g[c-1],m=g[c+1],n=l?b-(b-l.translation)/2:k[0],o=m?b+(m.translation-b)/2:k[1],[p,q,r,s]=i?[n,Math.max(e,f),o,Math.min(e,f)]:[Math.min(e,f),n,Math.max(e,f),o],{fill:t,fillOpacity:u}=h.style[d%h.style.length]??{};return{tickId:a,x1:p,y1:q,x2:r,y2:s,fill:t,fillOpacity:u}}calculateTickLine({isPrimary:a,tickId:b,translation:c},d,e,f){let{horizontal:g,interval:h,primaryTick:i,range:j,tick:k}=this;if("between"!==h.placement)return super.calculateTickLine({isPrimary:a,tickId:b,translation:c},d,e,f);let l=a&&i?.enabled?i:k,m=-e*this.getTickSize(l),n=f[d-1],o=n?c-(c-n.translation)/2:j[0],[p,q,r,s]=g?[o,0,o,m]:[0,o,m,o],{stroke:t,width:u}=l;return{tickId:b,offset:o,x1:p,y1:q,x2:r,y2:s,stroke:t,strokeWidth:u,lineDash:void 0}}},p4=class extends p3{constructor(a){super(a,new k9,!1),this.parentLevel=new p$,this.min=void 0,this.max=void 0,this.unit=void 0,this.defaultUnit=void 0}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}hasDefinedDomain(){let{min:a,max:b}=this;return null!=a&&null!=b&&a<b}isCategoryLike(){return!0}processData(){let a;super.processData();let{domain:b}=this.dataDomain;if(2===b.length&&b[0].valueOf()===b[1].valueOf())a=kF(b[0]);else{let{boundSeries:b,direction:c,min:d,max:e}=this;a=p1(b,c,d,e)}dK(this.defaultUnit,a)||(this.defaultUnit=a)}updateScale(){super.updateScale(),this.scale.interval=this.unit??this.defaultUnit}normaliseDataDomain(a){return p2(a,this.min,this.max)}tickFormatParams(a,b,c,d){d??(d=kE(b));let e=kG(a),f=kx(d);return{type:"date",unit:f,step:ky(d),epoch:kz(d),truncateDate:e}}datumFormatParams(a,b,c,d,e){let f=this.unit??this.defaultUnit??"millisecond";d??(d=f);let{datum:g,seriesId:h,legendItemName:i,key:j,source:k,property:l,domain:m,boundSeries:n}=b,o=kx(d),p=ky(d),q=kz(d);return{type:"date",value:ko(f,a),datum:g,seriesId:h,legendItemName:i,key:j,source:k,property:l,domain:m,boundSeries:n,unit:o,step:p,epoch:q,style:e}}};p4.className="UnitTimeAxis",p4.type="unit-time",dl([ey],p4.prototype,"parentLevel",2),dl([ey],p4.prototype,"min",2),dl([ey],p4.prototype,"max",2),dl([ey],p4.prototype,"unit",2);var p5={...oY,...o_(bH),type:bu(bU("number")),label:oS,crosshair:o$(!0)},p6={...oY,...o_(bH),type:bu(bU("log")),base:by(bP,bt(a=>1!==a,"not equal to 1")),label:oS,crosshair:o$(!0)},p7={...oY,...o_(bz(bH,bF),!0),type:bu(bU("time")),label:oT,parentLevel:oV,crosshair:o$(!0,!0)},p8={...oY,type:bu(bU("category")),label:oR,paddingInner:bQ,paddingOuter:bQ,groupPaddingInner:bQ,crosshair:o$(),bandHighlight:oZ,interval:{...oW,placement:bT("on","between")}},p9={...oY,type:bu(bU("grouped-category")),label:oR,crosshair:o$(),bandHighlight:oZ,paddingInner:bQ,groupPaddingInner:bQ,depthOptions:bW({label:{enabled:bC,avoidCollisions:bC,wrapping:bT("never","always","hyphenate","on-space"),truncate:bC,rotation:bH,spacing:bH,...co,...cs},tick:{enabled:bC,stroke:bE,width:bO}},"depth options objects array")},qa={...oY,type:bu(bU("unit-time")),unit:bz(oM,oK),label:oT,parentLevel:oV,paddingInner:bQ,paddingOuter:bQ,groupPaddingInner:bQ,crosshair:o$(!0,!0),bandHighlight:oZ,min:by(bz(bH,bF),bR("max")),max:by(bz(bH,bF),bS("min")),interval:o0},qb={...oY,type:bu(bU("ordinal-time")),paddingInner:bQ,paddingOuter:bQ,groupPaddingInner:bQ,label:oT,parentLevel:oV,interval:o0,crosshair:o$(!0,!0),bandHighlight:oZ},qc={...oX,...o_(bH),type:bu(bU("angle-number")),crossLines:bW(oO),startAngle:bH,endAngle:bH,label:{...oQ,orientation:bT("fixed","parallel","perpendicular"),format:oq}},qd={...oX,type:bu(bU("angle-category")),shape:bT("polygon","circle"),crossLines:bW(oO),startAngle:bH,endAngle:bH,paddingInner:bQ,groupPaddingInner:bQ,label:{...oQ,orientation:bT("fixed","parallel","perpendicular")}};qd.innerRadiusRatio=bQ;var qe={...oX,...o_(bH),type:bu(bU("radius-number")),shape:bT("polygon","circle"),positionAngle:bH,innerRadiusRatio:bQ,crossLines:bW({...oO,label:{...oN,positionAngle:bH}},"cross-line options"),title:{enabled:bC,text:of,spacing:bO,formatter:bD,...co},label:{...oQ,format:oq}},qf={...oX,type:bu(bU("radius-category")),positionAngle:bH,innerRadiusRatio:bQ,paddingInner:bQ,paddingOuter:bQ,groupPaddingInner:bQ,label:oQ,crossLines:bW({...oO,label:{...oN,positionAngle:bH}},"cross-line options"),title:{enabled:bC,text:of,spacing:bO,formatter:bD,...co}},qg=ch(cf,cf),qh={showInMiniChart:bC,connectMissingData:bC,interpolation:oC,label:ow,styler:bY({...b5,...cb,...cc,marker:ou}),marker:ov,tooltip:oA,shadow:oB,...os,...cb,...b5,...cc,highlight:qg,segmentation:ck},qi={...qh,...ot,highlight:qg,type:bu(bU("area")),xKey:bu(bJ),yKey:bu(bJ),xName:bJ,yName:bJ,stacked:bC,stackGroup:bJ,normalizedTo:bH},qj=ch(cd,cd),qk=bY({...cb,...b5,...cc,cornerRadius:bO}),ql={direction:bT("horizontal","vertical"),showInMiniChart:bC,cornerRadius:bO,styler:qk,itemStyler:qk,crisp:bC,label:{...ow,placement:bT("inside-center","inside-start","inside-end","outside-start","outside-end"),spacing:bO},errorBar:oy,shadow:oB,tooltip:oA,...os,highlight:qj,...cb,...b5,...cc,segmentation:ck};ql.sparklineMode=bv(bC);var qm={...ql,...ot,highlight:qj,type:bu(bU("bar")),xKey:bu(bJ),yKey:bu(bJ),xName:bJ,yName:bJ,direction:bT("horizontal","vertical"),grouped:bC,stacked:bC,stackGroup:bJ,normalizedTo:bH,legendItemName:bJ,errorBar:oz};qm.pickOutsideVisibleMinorAxis=bv(bC),qm.focusPriority=bv(bH);var qn={title:bJ,domain:bV(bH),maxSize:bO,showInMiniChart:bC,label:{placement:bT("top","right","bottom","left"),...ow},tooltip:oA,styler:bY({...ov,maxSize:bO}),maxRenderedItems:bH,...os,...dQ(ov,["enabled"]),highlight:ch(cf,cf)},qo={...qn,...ot,type:bu(bU("bubble")),xKey:bu(bJ),yKey:bu(bJ),sizeKey:bu(bJ),labelKey:bJ,xName:bJ,yName:bJ,sizeName:bJ,labelName:bJ,highlight:ch(cf,cf)},qp={showInMiniChart:bC,cornerRadius:bO,label:ow,tooltip:oA,shadow:oB,...os,...cb,...b5,...cc,highlight:ch(cf,cf)},qq={...ot,...qp,type:bu(bU("histogram")),xKey:bu(bJ),yKey:bJ,xName:bJ,yName:bJ,areaPlot:bC,aggregation:bT("count","sum","mean"),bins:bV(bV(bH)),binCount:bO},qr=ch(cf,ce),qs={title:bJ,showInMiniChart:bC,connectMissingData:bC,interpolation:oC,label:ow,styler:bY({...b5,...cc,marker:ou}),marker:ov,tooltip:oA,errorBar:oy,...os,...b5,...cc,highlight:qr,segmentation:cl};qs.sparklineMode=bv(bC);var qt={...qs,...ot,highlight:qr,type:bu(bU("line")),xKey:bu(bJ),yKey:bu(bJ),xName:bJ,yName:bJ,stacked:bC,stackGroup:bJ,normalizedTo:bH,legendItemName:bJ,errorBar:oz};qt.pickOutsideVisibleMinorAxis=bv(bC),qt.focusPriority=bv(bH);var qu={title:bJ,showInMiniChart:bC,label:{placement:bT("top","right","bottom","left"),...ow},tooltip:oA,errorBar:oy,styler:bY(ov),maxRenderedItems:bH,...os,...dQ(ov,["enabled"]),highlight:ch(cf,cf)},qv={...qu,...ot,type:bu(bU("scatter")),xKey:bu(bJ),yKey:bu(bJ),labelKey:bJ,xName:bJ,yName:bJ,labelName:bJ,errorBar:oz,highlight:ch(cf,cf)},qw=ch(cf,cf),qx={...os,radiusMin:bO,radiusMax:bO,rotation:bH,outerRadiusOffset:bH,outerRadiusRatio:bQ,hideZeroValueSectorsInLegend:bC,sectorSpacing:bO,cornerRadius:bO,itemStyler:bY({...cb,...b5,...cc,cornerRadius:bO}),title:{enabled:bC,text:bJ,showInLegend:bC,spacing:bO,...co},calloutLabel:{enabled:bC,offset:bH,minAngle:bO,avoidCollisions:bC,formatter:bD,format:bJ,itemStyler:bY({enabled:bC,...cs,...co}),...cs,...co},sectorLabel:{enabled:bC,positionOffset:bH,positionRatio:bQ,formatter:bD,format:bJ,itemStyler:bY({enabled:bC,...cs,...co}),...cs,...co},calloutLine:{colors:bV(bE),length:bO,strokeWidth:bO,itemStyler:bY({color:bE,length:bO,strokeWidth:bO})},fills:bV(ca),strokes:bV(bE),tooltip:oA,shadow:oB,highlight:qw,...cc,...dQ(cb,["fill"]),...dQ(b5,["stroke"])},qy={...qx,...ot,type:bu(bU("pie")),angleKey:bu(bJ),radiusKey:bJ,calloutLabelKey:bJ,sectorLabelKey:bJ,legendItemKey:bJ,angleName:bJ,radiusName:bJ,calloutLabelName:bJ,sectorLabelName:bJ,highlight:qw};qy.defaultColorRange=bv(bV(bV(bE))),qy.defaultPatternFills=bv(bV(bE)),qy.title._enabledFromTheme=bv(bC),qy.calloutLabel._enabledFromTheme=bv(bC),qy.sectorLabel._enabledFromTheme=bv(bC);var qz={...qx,innerRadiusOffset:bH,innerRadiusRatio:bQ,innerCircle:{fill:bJ,fillOpacity:bQ},innerLabels:{spacing:bO,...co,...cs}},qA={...qz,...qy,type:bu(bU("donut")),innerLabels:bW({text:bu(bJ),spacing:bO,...co,...cs},"inner label options array")},qB={lineStyle:bT("solid","dashed","dotted"),...cc},qC={...cb,...b5,...cc},qD={visible:bC,locked:bC,readOnly:bC,handle:qC,...co},qE={position:bT("top","center","bottom"),alignment:bT("left","center","right"),...co},qF={position:bT("top","inside","bottom"),alignment:bT("left","center","right"),...co},qG={enabled:bC,cornerRadius:bO,formatter:bD,...co,...cb,...b5,...cc},qH={visible:bC,...qB,...b5},qI={divider:b5,...cb,...b5,...co},qJ={handle:qC,statistics:qI,...qB,...cb,...b5},qK={visible:bC,locked:bC,readOnly:bC,extendStart:bC,extendEnd:bC,handle:qC,text:qE,...qB,...b5},qL={visible:bC,locked:bC,readOnly:bC,axisLabel:qG,handle:qC,text:qE,...qB,...b5},qM={visible:bC,locked:bC,readOnly:bC,extendStart:bC,extendEnd:bC,handle:qC,text:qF,background:cb,...qB,...b5},qN={...qM},qO={...qM,middle:qH},qP={label:co,showFill:bC,isMultiColor:bC,strokes:bV(bE),rangeStroke:bE,bands:bT(4,6,10),...qK},qQ={...cb,...b5,...qD},qR={...cb,...b5,...qD},qS={...cb,...b5,...qD,background:{...cb,...b5}},qT={visible:bC,locked:bC,readOnly:bC,handle:qC,...cb},qU={visible:bC,locked:bC,readOnly:bC,extendStart:bC,extendEnd:bC,handle:qC,text:qE,background:cb,statistics:qI,...qB,...b5},qV={visible:bC,up:qJ,down:qJ},qW={enabled:bC,axesButtons:{enabled:bC,axes:bT("x","y","xy")},toolbar:{enabled:bC,padding:bO,buttons:bW({...on,value:bT("line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","line","horizontal-line","vertical-line","parallel-channel","disjoint-channel","fibonacci-retracement","fibonacci-retracement-trend-based","text","comment","callout","note","clear")},"annotation toolbar buttons array")},optionsToolbar:{enabled:bC,buttons:bV(bz(bw({...on,value:bu(bT("line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings"))}),bw({...on,value:bu(bT("lock")),checkedOverrides:on})))}};qW.data=bv(bB),qW.xKey=bv(bJ),qW.volumeKey=bv(bJ),qW.snap=bv(bC);var qX={...cb,...b5,...cc,cornerRadius:bO,whisker:{...b5,...cc},cap:{lengthRatio:bQ}},qY={...qX,opacity:bQ},qZ={direction:bT("horizontal","vertical"),showInMiniChart:bC,itemStyler:bY({...cb,...b5,...cc,cornerRadius:bO,whisker:{...b5,...cc},cap:{lengthRatio:bQ}}),tooltip:oA,...os,...qX,highlight:ch(qY,qY),segmentation:ck},q$={cornerRadius:bO,wick:{...b5,...cc},...cb,...b5,...cc},q_={...q$,opacity:bQ},q0={item:{up:q$,down:q$},itemStyler:bY({...cb,...b5,...cc,cornerRadius:bO,wick:{...b5,...cc}}),showInMiniChart:bC,tooltip:oA,...os,highlight:ch(q_,q_)},q1={fills:bV(ca),strokes:bV(bE),label:{spacing:bO,maxWidth:bO,...ow},link:{tension:bQ,itemStyler:bY({...cb,...b5,...cc,tension:bQ}),...cb,...b5,...cc},node:{width:bO,spacing:bO,itemStyler:bY({...cb,...b5,...cc}),...cb,...b5,...cc},tooltip:oA,...os},q2={direction:bT("horizontal","vertical"),fills:bV(ca),strokes:bV(bE),label:{spacing:bO,placement:bT("before","middle","after"),...ow},stageLabel:{placement:bT("before","after"),format:oq,...oQ},tooltip:oA,...dQ(os,["showInLegend"]),...dQ(cb,["fill"]),...dQ(b5,["stroke"]),...cc,highlight:cg(ce)},q3={direction:bT("horizontal","vertical"),fills:bV(ca),strokes:bV(bE),itemStyler:bY({...cb,...b5,...cc}),spacingRatio:bQ,crisp:bC,dropOff:{enabled:bC,...cb,...b5,...cc},stageLabel:{placement:bT("before","after"),format:oq,...oQ},label:ow,tooltip:oA,shadow:oB,...dQ(os,["showInLegend"]),...dQ(cb,["fill"]),...dQ(b5,["stroke"]),...cc},q4={title:bJ,textAlign:bT("left","center","right"),verticalAlign:bT("top","middle","bottom"),itemPadding:bO,itemStyler:bY({...cb,...b5}),showInMiniChart:bC,label:ox,tooltip:oA,...os,...b5},q5={showInMiniChart:bC,itemStyler:bY({...b5,...cc}),item:{up:{...b5,...cc},down:{...b5,...cc}},tooltip:oA,...os,highlight:ch(ce,ce)},q6={maxStrokeWidth:bO,itemStyler:bY({...b5,...cc}),sizeDomain:bV(bO),label:ow,tooltip:oA,...os,...b5,...cc,highlightStyle:{...os.highlightStyle,...b5},highlight:ch(ce,ce)},q7={...b5,...cc},q8={colorRange:bV(bE),maxSize:bO,sizeDomain:bV(bO),label:{placement:bT("top","bottom","left","right"),...ow},tooltip:oA,...os,...dQ(ov,["enabled"]),highlightStyle:{...os.highlightStyle,...cb,...b5},highlight:ch(cf,cf)},q9={colorRange:bV(bE),padding:bO,itemStyler:bY({...cb,...b5,...cc}),label:ox,tooltip:oA,...os,...cb,...b5,...cc,highlightStyle:{...os.highlightStyle,...cb,...b5},highlight:ch(cf,cf)},ra={...os,...cb,...b5,...cc},rb={cornerRadius:bO,itemStyler:bY({...cb,...b5,...cc,cornerRadius:bO}),label:ow,tooltip:oA,...os,...cb,...b5,...cc,highlight:ch(cd,cd)},rc={direction:bT("horizontal","vertical"),aspectRatio:bO,spacing:bO,reverse:bC,itemStyler:bY({...cb,...b5,...cc}),fills:bV(ca),strokes:bV(bE),label:ow,stageLabel:{spacing:bO,placement:bT("before","after"),...ow},tooltip:oA,shadow:oB,...os,...dQ(cb,["fill"]),...dQ(b5,["stroke"]),...cc},rd={connectMissingData:bC,marker:ov,label:ow,tooltip:oA,...os,...cb,...b5,...cc,highlight:ch(cf,cf)},re={connectMissingData:bC,marker:ov,label:ow,tooltip:oA,...os,...b5,...cc,highlight:ch(cf,ce)},rf={cornerRadius:bO,itemStyler:bY({...cb,...b5,...cc,cornerRadius:bO}),label:ow,tooltip:oA,...os,...cb,...b5,...cc,highlight:ch(cd,cd)},rg={cornerRadius:bO,columnWidthRatio:bQ,maxColumnWidthRatio:bQ,itemStyler:bY({...cb,...b5,...cc,cornerRadius:bO}),label:ow,tooltip:oA,...os,...cb,...b5,...cc,highlight:ch(cd,cd)},rh={showInMiniChart:bC,connectMissingData:bC,interpolation:oC,label:{...ow,placement:bT("inside","outside"),spacing:bO},marker:ov,tooltip:oA,shadow:oB,...os,...cb,...b5,...cc,highlight:ch(cf,cf),segmentation:ck},ri={direction:bT("horizontal","vertical"),grouped:bC,showInMiniChart:bC,cornerRadius:bO,itemStyler:bY({...cb,...b5,...cc,cornerRadius:bO}),label:{...ow,placement:bT("inside","outside"),spacing:bO},tooltip:oA,shadow:oB,...os,...cb,...b5,...cc,highlight:ch(cd,cd),segmentation:ck},rj={fills:bV(ca),strokes:bV(bE),label:{...ow,spacing:bO},link:{itemStyler:bY({...cb,...b5,...cc}),...cb,...b5,...cc},node:{width:bO,spacing:bO,alignment:bT("left","center","right","justify"),itemStyler:bY({...cb,...b5,...cc}),...cb,...b5,...cc},tooltip:oA,...os},rk={fills:bV(ca),strokes:bV(bE),colorRange:bV(bE),sectorSpacing:bO,cornerRadius:bO,padding:bO,itemStyler:bY({...cb,...b5}),label:{spacing:bO,...ox},secondaryLabel:ox,tooltip:oA,...dQ(os,["highlight","showInLegend"]),...dQ(cb,["fill"]),...dQ(b5,["stroke"]),highlightStyle:{label:{color:bE},secondaryLabel:{color:bE},...cb,...b5}},rl={fills:bV(ca),strokes:bV(bE),colorRange:bV(bE),itemStyler:bY({...cb,...b5}),group:{gap:bO,padding:bO,cornerRadius:bO,textAlign:bT("left","center","right"),interactive:bC,label:{...ow,spacing:bO},...cb,...b5},tile:{gap:bO,padding:bO,cornerRadius:bO,textAlign:bT("left","center","right"),verticalAlign:bT("top","middle","bottom"),label:{...ow,spacing:bO,lineHeight:bO,minimumFontSize:bO,wrapping:bT("never","always","hyphenate","on-space"),overflowStrategy:bT("ellipsis","hide")},secondaryLabel:{...ow,lineHeight:bO,minimumFontSize:bO,wrapping:bT("never","always","hyphenate","on-space"),overflowStrategy:bT("ellipsis","hide")},...cb,...b5},tooltip:oA,...dQ(os,["highlight","showInLegend"]),highlightStyle:{group:{label:{color:bE},...cb,...b5},tile:{label:{color:bE},secondaryLabel:{color:bE},...cb,...b5}}},rm={name:bJ,cornerRadius:bO,itemStyler:bY({...cb,...b5,...cc,cornerRadius:bO}),label:{...ow,placement:bT("inside-start","inside-center","inside-end","outside-start","outside-end"),spacing:bO},tooltip:oA,shadow:oB,...cb,...b5,...cc},rn={direction:bT("horizontal","vertical"),showInMiniChart:bC,item:{positive:rm,negative:rm,total:rm},line:{enabled:bC,...b5,...cc},tooltip:oA,...os},ro=bw({__type:bu(bU("date")),value:bz(bJ,bH)},"a serializable date object"),rp={width:bO,height:bO,grip:bC,fill:bE,stroke:bE,strokeWidth:bO,cornerRadius:bO},rq={enabled:bC,height:bO,spacing:bO,cornerRadius:bH,mask:{fill:bE,fillOpacity:bQ,stroke:bE,strokeWidth:bO},minHandle:rp,maxHandle:rp,miniChart:{enabled:bC,padding:{top:bO,bottom:bO},label:{enabled:bC,avoidCollisions:bC,spacing:bO,format:oq,formatter:bD,interval:{minSpacing:bO,maxSpacing:bO,values:bB,step:bH},...co},series:bG}},rr={number:{...dQ(p5,["type","crossLines"]),top:dQ(p5,["type","crossLines","position"]),right:dQ(p5,["type","crossLines","position"]),bottom:dQ(p5,["type","crossLines","position"]),left:dQ(p5,["type","crossLines","position"]),crossLines:dQ(oP,["type"])},log:{...dQ(p6,["type","crossLines"]),top:dQ(p6,["type","crossLines","position"]),right:dQ(p6,["type","crossLines","position"]),bottom:dQ(p6,["type","crossLines","position"]),left:dQ(p6,["type","crossLines","position"]),crossLines:dQ(oP,["type"])},category:{...dQ(p8,["type","crossLines"]),top:dQ(p8,["type","crossLines","position"]),right:dQ(p8,["type","crossLines","position"]),bottom:dQ(p8,["type","crossLines","position"]),left:dQ(p8,["type","crossLines","position"]),crossLines:dQ(oP,["type"])},time:{...dQ(p7,["type","crossLines"]),top:dQ(p7,["type","crossLines","position"]),right:dQ(p7,["type","crossLines","position"]),bottom:dQ(p7,["type","crossLines","position"]),left:dQ(p7,["type","crossLines","position"]),crossLines:dQ(oP,["type"])},"unit-time":{...dQ(qa,["type","crossLines"]),top:dQ(qa,["type","crossLines","position"]),right:dQ(qa,["type","crossLines","position"]),bottom:dQ(qa,["type","crossLines","position"]),left:dQ(qa,["type","crossLines","position"]),crossLines:dQ(oP,["type"])},"grouped-category":{...dQ(p9,["type"]),top:dQ(p9,["type","position"]),right:dQ(p9,["type","position"]),bottom:dQ(p9,["type","position"]),left:dQ(p9,["type","position"]),crossLines:dQ(oP,["type"])},"ordinal-time":{...dQ(qb,["type","crossLines"]),top:dQ(qb,["type","crossLines","position"]),right:dQ(qb,["type","crossLines","position"]),bottom:dQ(qb,["type","crossLines","position"]),left:dQ(qb,["type","crossLines","position"]),crossLines:dQ(oP,["type"])}},rs={"angle-category":{...dQ(qd,["type","crossLines"]),crossLines:dQ(oO,["type"])},"angle-number":{...dQ(qc,["type","crossLines"]),crossLines:dQ(oO,["type"])},"radius-category":{...dQ(qf,["type","crossLines"]),crossLines:{...dQ(oO,["type"]),label:{...oN,positionAngle:bH}}},"radius-number":{...dQ(qe,["type","crossLines"]),crossLines:{...dQ(oO,["type"]),label:{...oN,positionAngle:bH}}}},rt={visible:bC};function ru(a,b){let c={};for(let d of Reflect.ownKeys(a))c[d]=b(a[d],d,a);return c}var rv=ru({common:{...or,navigator:rq,axes:{...rr,...rs},annotations:{...qW,line:qK,"horizontal-line":qL,"vertical-line":qL,"disjoint-channel":qN,"parallel-channel":qO,"fibonacci-retracement":qP,"fibonacci-retracement-trend-based":qP,callout:qQ,comment:qR,note:qS,text:qD,arrow:qK,"arrow-up":qT,"arrow-down":qT,"date-range":qU,"price-range":qU,"date-price-range":qU,"quick-date-price-range":qV},chartToolbar:{enabled:bC},initialState:{legend:bW({visible:bC,seriesId:bJ,itemId:bJ,legendItemName:bJ},"legend state array"),zoom:{rangeX:{start:bz(bH,ro),end:bz(bH,ro)},rangeY:{start:bz(bH,ro),end:bz(bH,ro)},ratioX:{start:bQ,end:bQ},ratioY:{start:bQ,end:bQ},autoScaledAxes:bV(bU("y"))}}},line:{...or,axes:rr,series:qs,navigator:rq,...rt},scatter:{...or,axes:rr,series:qu,navigator:rq,...rt},bubble:{...or,axes:rr,series:qn,navigator:rq,...rt},area:{...or,axes:rr,series:qh,navigator:rq,...rt},bar:{...or,axes:rr,series:ql,navigator:rq,...rt},"box-plot":{...or,axes:rr,series:qZ,navigator:rq,...rt},candlestick:{...or,axes:rr,series:q0,navigator:rq,...rt},"cone-funnel":{...or,axes:rr,series:q2,navigator:rq,...rt},funnel:{...or,axes:rr,series:q3,navigator:rq,...rt},ohlc:{...or,axes:rr,series:q5,navigator:rq,...rt},histogram:{...or,axes:dQ(rr,["category","grouped-category","unit-time","ordinal-time"]),series:qp,navigator:rq,...rt},heatmap:{...or,axes:rr,series:q4,navigator:rq,...rt},waterfall:{...or,axes:rr,series:rn,navigator:rq,...rt},"range-bar":{...or,axes:rr,series:ri,navigator:rq,...rt},"range-area":{...or,axes:rr,series:rh,navigator:rq,...rt},donut:{...or,series:qz,navigator:rq,...rt},pie:{...or,series:qx,navigator:rq,...rt},"radar-line":{...or,axes:rs,series:re,navigator:rq,...rt},"radar-area":{...or,axes:rs,series:rd,navigator:rq,...rt},"radial-bar":{...or,axes:rs,series:rf,navigator:rq,...rt},"radial-column":{...or,axes:rs,series:rg,navigator:rq,...rt},nightingale:{...or,axes:rs,series:rb,navigator:rq,...rt},sunburst:{...or,series:rk,navigator:rq,...rt},treemap:{...or,series:rl,navigator:rq,...rt},"map-shape":{...or,series:q9,navigator:rq,...rt},"map-line":{...or,series:q6,navigator:rq,...rt},"map-marker":{...or,series:q8,navigator:rq,...rt},"map-shape-background":{...or,series:ra,navigator:rq,...rt},"map-line-background":{...or,series:q7,navigator:rq,...rt},sankey:{...or,series:rj,navigator:rq,...rt},chord:{...or,series:q1,navigator:rq,...rt},pyramid:{...or,series:rc,navigator:rq,...rt},"radial-gauge":{...or,...oI,targets:dQ(oF,["value"]),tooltip:{...oI.tooltip,...or.tooltip}},"linear-gauge":{...or,...oG,targets:dQ(oE,["value"]),tooltip:{...oG.tooltip,...or.tooltip}}},function a(b,c){if(aX(c))return b;if(aP(b))return bz(b,b_,aX);if(aQ(b))return bz(bw(bm in b?ru(b,b=>aQ(b)?ru(b,a):b):ru(b,a)),b_,aX);throw Error(`Invalid theme override value: ${String(b)}`)}),rw={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},rx={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},ry=class extends nL{getDefaultColors(){return{fills:rw,fillsFallback:Object.values(rw),strokes:rx,sequentialColors:nv(rw),divergingColors:[rw.ORANGE,rw.YELLOW,rw.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"],secondDivergingColors:[rw.GREEN,rw.YELLOW,rw.RED],secondHierarchyColors:[],up:{fill:rw.GREEN,stroke:rx.GREEN},down:{fill:rw.RED,stroke:rx.RED},neutral:{fill:rw.GRAY,stroke:rx.GRAY},altUp:{fill:rw.BLUE,stroke:rx.BLUE},altDown:{fill:rw.ORANGE,stroke:rx.ORANGE},altNeutral:{fill:rw.GRAY,stroke:rx.GRAY}}}getTemplateParameters(){let a=super.getTemplateParameters();return a.set(mW,rw.BLUE),a.set(mZ,rw.BLUE),a}},rz={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},rA={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},rB=class extends nH{getDefaultColors(){return{...super.getDefaultColors(),fills:rz,fillsFallback:Object.values(rz),strokes:rA,sequentialColors:nv(rz),divergingColors:[rz.ORANGE,rz.YELLOW,rz.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"],secondDivergingColors:[rz.GREEN,rz.YELLOW,rz.RED],secondHierarchyColors:[],up:{fill:rz.GREEN,stroke:rA.GREEN},down:{fill:rz.RED,stroke:rA.RED},neutral:{fill:rz.GRAY,stroke:rA.GRAY},altUp:{fill:rz.BLUE,stroke:rA.BLUE},altDown:{fill:rz.ORANGE,stroke:rA.ORANGE},altNeutral:{fill:rz.GRAY,stroke:rA.GRAY}}}getTemplateParameters(){let a=super.getTemplateParameters();return a.set(mW,rz.BLUE),a.set(mZ,rz.BLUE),a}},rC=hz(()=>new nH),rD=dw.create(!0,"perf"),rE=(a,b,c)=>{rD("[CACHE] ChartTheme",a,b.name,c)},rF={"ag-default-dark":hz(()=>new nL),"ag-sheets-dark":hz(()=>new n4,rE),"ag-polychroma-dark":hz(()=>new n$,rE),"ag-vivid-dark":hz(()=>new ry,rE),"ag-material-dark":hz(()=>new nU,rE),"ag-financial-dark":hz(()=>new nO,rE),"ag-default":rC,"ag-sheets":hz(()=>new n7,rE),"ag-polychroma":hz(()=>new n1,rE),"ag-vivid":hz(()=>new rB,rE),"ag-material":hz(()=>new nX,rE),"ag-financial":hz(()=>new nR,rE)},rG=hz(function(a){if(a instanceof nH)return a;if(!function(a){let{invalid:b}=bs({theme:a},{theme:bz(rI,bI)});for(let a of b)aa.warnOnce(String(a));return 0===b.length}(a))return rC();if(null==a||"string"==typeof a){let b=rF[a??"ag-default"];if(b)return b();throw Error(`Cannot find theme \`${a}\`.`)}let{cleared:b,invalid:c}=bs(function(a){let b,c;if(!aQ(a)||!aQ(a.baseTheme))return a;let d=a,e=[];for(;"object"==typeof d;)b??(b=d.palette),c??(c=d.params),d.overrides&&e.push(d.overrides),d=d.baseTheme;return{baseTheme:d,overrides:dM(...e),params:c,palette:b}}(a),rH,"theme");for(let a of c)aa.warnOnce(String(a));let d=b?.baseTheme?rG(b.baseTheme):rC();return b?new d.constructor(b):d},rE),rH={baseTheme:bz(bJ,bI),overrides:rv,params:{accentColor:bE,axisColor:bE,backgroundColor:bE,borderColor:bE,borderRadius:bH,chartBackgroundColor:bE,chartPadding:bH,focusShadow:bJ,foregroundColor:bE,fontFamily:cn,fontSize:bH,fontWeight:bz(bJ,bH),gridLineColor:bE,popupShadow:bJ,subtleTextColor:bE,textColor:bE,chromeBackgroundColor:bE,chromeFontFamily:cn,chromeFontSize:bH,chromeFontWeight:bz(bJ,bH),chromeSubtleTextColor:bE,chromeTextColor:bE,buttonBackgroundColor:bE,buttonBorder:bC,buttonFontWeight:bH,buttonTextColor:bE,inputBackgroundColor:bE,inputBorder:bC,inputTextColor:bE,menuBackgroundColor:bE,menuBorder:bC,menuTextColor:bE,panelBackgroundColor:bE,panelSubtleTextColor:bE,tooltipBackgroundColor:bE,tooltipBorder:bC,tooltipTextColor:bE,tooltipSubtleTextColor:bE,crosshairLabelBackgroundColor:bE,crosshairLabelTextColor:bE},palette:{fills:bV(ca),strokes:bV(bE),up:{fill:bz(bE,b4),stroke:bE},down:{fill:bz(bE,b4),stroke:bE},neutral:{fill:bz(bE,b4),stroke:bE}}},rI=bT("ag-default","ag-default-dark","ag-sheets","ag-sheets-dark","ag-polychroma","ag-polychroma-dark","ag-vivid","ag-vivid-dark","ag-material","ag-material-dark","ag-financial","ag-financial-dark"),rJ={isEnterprise:!1},rK="path",rL="pathArray",rM="default",rN="override",rO="user",rP="userPartial",rQ="operation",rR="operationValue",rS="dependency",rT="autoEnable",rU="autoEnableValue",rV="prune",rW="childrenSource";function rX(a){return aV(a)&&a>=0&&a<=1}function rY(a,b){let c=a;for(let a of b){if(!("string"==typeof a&&null!=c&&("object"==typeof c||Array.isArray(c))&&a in c))return!1;c=c[a]}return!0}function rZ(a,b){let c=a;for(let a of b){if(!("string"==typeof a&&null!=c&&("object"==typeof c||Array.isArray(c))&&a in c))return;c=c[a]}return c}function r$(a,b,c){let d=b.length;if(0===d)return;let e=a,f=d-1,g=b[f];for(let a=0;a<f;a++){let c=b[a],d=b[a+1],f=e[c];null!=f&&aR(f)||(f=isNaN(Number(d))?{}:[],e[c]=f),e=f}e[g]=c}var r_=/^\d+$/;function r0(a){for(let b=a.length-1;b>=0;b--){let c=a[b];if(r_.test(c))return b}return -1}function r1(a){let b=r0(a);return Number(a[b])}function r2(a,b,c){let d=b.split("/"),e=[...a];b.startsWith("/")&&(e=[],d.shift());let f=!1;for(let b of d){if(".."===b)e.pop(),f||e.pop();else if("."===b)e.pop();else if("$index"===b){let b=r1(a);if(isNaN(b))return r3;e.push(`${b}`)}else if("$prevIndex"===b){let b=r1(a);if(isNaN(b)||0>=Number(b))return r3;e.push(`${Number(b)-1}`)}else if(b.startsWith("$")){let a=c?.[b.slice(1)];if(null==a)return r3;e.push(a)}else 0!==b.length&&e.push(b);f=".."===b}return e}var r3=Symbol("unresolvable-path"),r4=Symbol("resolved-to-branch");function r5(a,b){if(null==a||"object"!=typeof a||Array.isArray(a)||(b??(b=Object.keys(a)),0===b.length))return;let c=b[0];if(sb.has(c))return{operation:c,values:Array.isArray(a[c])?a[c]:[a[c]]}}function r6(a,b,c){let d=a.findVertexAtPath(["series","0","type"]);d&&a.addEdge(b,d,rS)}function r7(a,b,c){let d=a.resolveVertexValue(b,c);if(!aU(d))throw Error(`\`$isUserOption\` json operation failed on [${String(d)}], expecting a string.`);let e=r2(a.getPathArray(b),d);return e!==r3&&a.hasUserOption(e)}var r8=new Set(["fill","fillFallback","stroke","gradient","range2"]);function r9(a,b,c){let[d]=c,e=a.getVertexValue(d);if(aU(e)){let c=r2(a.getPathArray(b),e);if(c===r3)return;let d=a.findVertexAtPath(c);d&&a.addEdge(b,d,rS)}}var sa={$cacheMax:function(a,b,c){let[d]=c,e=a.getPathArray(b),f=a.getCachedValue(e,"$cacheMax"),g=a.resolveVertexValue(b,d);if("number"!=typeof g)return f;if("number"!=typeof f)return a.setCachedValue(e,"$cacheMax",g),g;let h=Math.max(f,g);return a.setCachedValue(e,"$cacheMax",h),h},$hasSeriesType:{dependencies:r6,resolve:function(a,b,c){let[d]=c,e=a.resolveVertexValue(b,d),f=a.getResolvedPath(["series"]);if(!Array.isArray(f))return!1;for(let a of f)if(a.type===e)return!0;return!1}},$isChartType:{dependencies:r6,resolve:function(a,b,c){let[d]=c,e=a.resolveVertexValue(b,d),f=a.getResolvedPath(["series","0","type"]);if("string"!=typeof f)return!1;switch(e){case"cartesian":return jo.isCartesian(f);case"polar":return jo.isPolar(f);case"standalone":return jo.isStandalone(f)}return!1}},$isSeriesType:{dependencies:r6,resolve:function(a,b,c){let[d]=c,e=a.resolveVertexValue(b,d);return a.getResolvedPath(["series","0","type"])===e}},$foregroundBackgroundMix:function(a,b,c){let[d]=c,e=a.resolveVertexValue(b,d),f=a.getParamValue("foregroundColor"),g=a.getParamValue("backgroundColor");if("string"==typeof f&&"string"==typeof g&&rX(e))return en.mix(en.fromString(f),en.fromString(g),1-e).toString();dw.inDevelopmentMode(()=>aa.warnOnce(`\`$foregroundBackgroundMix\` json operation failed on [${String(e)}}}] at [${a.getPathArray(b).join(".")}], expecting a number between 0 and 1.`))},$foregroundOpacity:function(a,b,c){let[d]=c,e=a.resolveVertexValue(b,d),f=a.getParamValue("foregroundColor");if("string"==typeof f&&rX(e)){let a=en.fromString(f);return new en(a.r,a.g,a.b,e).toString()}dw.inDevelopmentMode(()=>aa.warnOnce(`\`$foregroundOpacity\` json operation failed on [${String(e)}}}] at [${a.getPathArray(b).join(".")}], expecting a number between 0 and 1.`))},$interpolate:function(a,b,c){let[d,e]=c,f=a.resolveVertexValue(b,d),g=a.resolveVertexValue(b,e);if(aM(f)&&aV(g))return en.interpolate(f.map(a=>en.fromString(a)),g).map(a=>a.toString())},$isGradient:function(a,b,c){let[d]=c;return e1(a.resolveVertexValue(b,d))},$isImage:function(a,b,c){let[d]=c;return e3(a.resolveVertexValue(b,d))},$isPattern:function(a,b,c){let[d]=c;return e2(a.resolveVertexValue(b,d))},$mix:function(a,b,c){let[d,e,f]=c,g=a.resolveVertexValue(b,d),h=a.resolveVertexValue(b,e),i=a.resolveVertexValue(b,f),j=a.getPathArray(b),k=`\`$mix\` json operation failed on [${String(g)}, ${String(h)}, ${String(i)}] at [${j.join(".")}], expecting`,l=`${k} two colors and a number between 0 and 1.`;if("string"!=typeof h||!rX(i))return void dw.inDevelopmentMode(()=>aa.warnOnce(l));if("string"==typeof g)try{return en.mix(en.fromString(g),en.fromString(h),i).toString()}catch{dw.inDevelopmentMode(()=>aa.warnOnce(l));return}if(!e1(g))return void dw.inDevelopmentMode(()=>aa.warnOnce(l));let m=g.colorStops;try{m=m?.map(a=>{let b;return"string"==typeof a.color&&(b=en.mix(en.fromString(a.color),en.fromString(h),i).toString()),{...a,color:b}})}catch{dw.inDevelopmentMode(()=>aa.warnOnce(`${k} a gradient, a color and a number between 0 and 1.`));return}return{...g,colorStops:m}},$rem:function(a,b,c){let[d]=c,e=a.getVertexValue(d),f=a.getParamValue("fontSize");if("number"==typeof f&&"number"==typeof e)return Math.round(e*f);dw.inDevelopmentMode(()=>aa.warnOnce(`\`$rem\` json operation failed on [${String(e)}] at [${a.getPathArray(b).join(".")}], expecting a number.`))},$isUserOption:function(a,b,c){let[d,e,f]=c,g=a.neighboursWithEdgeValue(d,rK);if(g)for(let c of g){let d=a.findNeighbour(c,rM);if(d&&r7(a,b,d))return a.resolveVertexValue(b,e)}else if(r7(a,b,d))return a.resolveVertexValue(b,e);return a.resolveVertexValue(b,f)},$isThemeOverride:function(a,b,c){let[d,e,f]=c,g=a.resolveVertexValue(b,d);if(!aU(g))throw Error(`\`$isThemeOverride\` json operation failed on [${String(g)}], expecting a string.`);let h=r2(a.getPathArray(b),g);if(h!==r3)return a.hasThemeOverride(h)?a.resolveVertexValue(b,e):a.resolveVertexValue(b,f)},$palette:function(a,b,c){let[d]=c,e=a.resolveVertexValue(b,d);if(!aU(e))return;if(r8.has(e)){let c=r1(a.getPathArray(b));if(isNaN(c))return;switch(e){case"fill":return cx(a.palette.fills,1,c)[0];case"fillFallback":return cx(a.palette.fillsFallback,1,c)[0];case"stroke":return cx(a.palette.strokes,1,c)[0];case"gradient":return cx(a.palette.sequentialColors,1,c)[0];case"range2":return cx(a.palette.fills,2,c)}return}if("gradients"===e)return a.palette.sequentialColors;if("type"===e)return a.paletteType;let f=rZ(a.palette,e.split("."));return Array.isArray(f)?[...f]:"object"==typeof f?{...f}:f},$mapPalette:function(a,b,c){let[d]=c,e=a.resolveVertexValue(b,d);if(!aU(e))return;if(r8.has(e)){let c=r1(a.getPathArray(b)),d=0,f=["series","0","type"];for(let b=0;b<c;b++){f[1]=`${b}`;let c=a.getResolvedPath(f);("map-shape-background"===c||"map-line-background"===c)&&d++}if(isNaN(c-=d))return;switch(e){case"fill":return cx(a.palette.fills,1,c)[0];case"fillFallback":return cx(a.palette.fillsFallback,1,c)[0];case"stroke":return cx(a.palette.strokes,1,c)[0];case"gradient":return cx(a.palette.sequentialColors,1,c)[0];case"range2":return cx(a.palette.fills,2,c)}return}if("gradients"===e)return a.palette.sequentialColors;if("type"===e)return a.paletteType;let f=rZ(a.palette,e.split("."));return Array.isArray(f)?[...f]:"object"==typeof f?{...f}:f},$path:{dependencies:r9,resolve:function(a,b,c){let d=c.length>1,e=c.length>2,[f,g,h]=c,i=a.resolveVertexValue(b,f),j=e?a.resolveVertexValue(b,h):null;if(!aU(i))throw Error(`\`$path\` json operation failed on [${String(i)}], expecting a string.`);let k=r2(a.getPathArray(b),i);if(k===r3)return;let l=j?rZ(j,k):a.getResolvedPath(k);return null!=l?l:d?a.resolveVertexValue(b,g):void 0}},$pathString:{dependencies:r9,resolve:function(a,b,c){let d,[e,f]=c,g=a.resolveVertexValue(b,e);if(!aU(g))throw Error(`\`$path\` json operation failed on [${String(g)}], expecting a string.`);f&&(d=a.graftAndResolveOrphan(b,f));let h=a.getPathArray(b),i=r2(h,g,d);if(i===r3)throw Error(`Unresolvable path [${g}] at [${h.join(".")}]`);return i}},$ref:function(a,b,c){let[d]=c,e=a.getVertexValue(d);return a.getParamValue(e)},$and:function(a,b,c){for(let d of c)if(!a.resolveVertexValue(b,d))return!1;return!0},$eq:function(a,b,c){let d,e=!0;for(let f of c){let c=a.resolveVertexValue(b,f);if(e)d=c,e=!1;else if(c!==d)return!1}return!0},$greaterThan:function(a,b,c){let[d,e]=c;return a.resolveVertexValue(b,d)>a.resolveVertexValue(b,e)},$if:function(a,b,c){let[d,e,f]=c,g=a.resolveVertexValue(b,d)?e:f,h=a.neighboursWithEdgeValue(g,rK);if(h)for(let c of h)a.addEdge(b,c,rK);return a.resolveVertexValue(b,g)},$lessThan:function(a,b,c){let[d,e]=c;return a.resolveVertexValue(b,d)<a.resolveVertexValue(b,e)},$not:function(a,b,c){let[d]=c;if(d)return!a.resolveVertexValue(b,d)},$or:function(a,b,c){for(let d of c)if(a.resolveVertexValue(b,d))return!0;return!1},$switch:function(a,b,c){let[d,e,...f]=c,g=a.resolveVertexValue(b,d);for(let b of f){let c=a.getVertexValue(b);if(!Array.isArray(c))continue;let[d,e]=c;if(g===d||Array.isArray(d)&&d.includes(g))return e}return a.resolveVertexValue(b,e)},$isEven:function(a,b,c){let[d]=c,e=a.resolveVertexValue(b,d);return!isNaN(Number(e))&&Number(e)%2==0},$mul:function(a,b,c){let d;for(let e of c){let c=a.resolveVertexValue(b,e);null==d?d=Number(c):d*=Number(c)}return d},$round:function(a,b,c){let[d]=c;if(d)return Math.round(Number(a.resolveVertexValue(b,d)))},$apply:function(a,b,c){let[d,e,f,g]=c,h=a.getVertexValue(d);if(!aS(h))return;let i=e?a.getVertexValue(e):void 0,j=a.neighboursWithEdgeValue(b,rK),k=j&&j.length>0;if(!k&&null==i)return r4;let l=f?a.resolveVertexValue(b,f):void 0,m=g?a.resolveVertexValue(b,g):void 0;if(!k&&null!=i)if(r5(i)){let c=a.resolveVertexValue(b,e);aS(c)&&a.graftObject(b,c,[l,m])}else a.graftObject(b,i,[l,m]);if(!k)return r4;for(let b of j){let c=a.neighboursWithEdgeValue(b,rK);if(c&&0!==c.length)a.graftObject(b,h,[l,m]);else{let c=a.addVertex({});a.addEdge(b,c,rM)}}return r4},$applyCycle:function(a,b,c){let[d,e,f]=c,g=a.resolveVertexValue(b,d);if("number"!=typeof g)return;let h=a.getPathArray(b),i=a.dangerouslyGetUserOption(h),j=a.hasThemeOverride(h),k=null==i?void 0:rO,l=i??a.resolveVertexValue(b,e);if(!Array.isArray(l))return;let m=f?a.getVertexValue(f):void 0;for(let c=0;c<g;c++){let d=l[c%l.length];null!=d&&((i||!j)&&a.graftValue(b,`${c}`,d,void 0,k),m&&a.graftValue(b,`${c}`,m,d,k))}return r4},$applySwitch:function(a,b,c){let[d,e,...f]=c,g=a.resolveVertexValue(b,d);for(let c of f){let d=a.getVertexValue(c);if(!Array.isArray(d))continue;let[e,f]=d;if(g===e||Array.isArray(e)&&e.includes(g))return a.graftObject(b,f,[],rM),r4}return a.resolveVertexValue(b,e)},$applyTheme:function(a,b,c){let[d,e,f]=c,g=a.getVertexValue(d);if("string"==typeof g&&(g=[g]),!Array.isArray(g))return;let h=a.neighboursWithEdgeValue(b,rK),i=f?a.getVertexValue(f):[],j=Array.isArray(i)?new Set(i):new Set;if(!h)return r4;for(let b of h){let c=a.graftAndResolveOrphan(b,e);for(let d of g){let e=r2([],d,c);e!==r3&&a.graftConfig(b,e,j)}}return r4},$findFirstSiblingNotOperation:function(a,b,c){let[d]=c,e=a.getPathArray(b),f=r0(e);if(f<0)return a.resolveVertexValue(b,d);let g=e.slice(0,f),h=a.findVertexAtPath(g);if(!h)return a.resolveVertexValue(b,d);let i=a.neighboursWithEdgeValue(h,rK);if(i)for(let b=0;b<i.length;b++){if(`${b}`===e[f])continue;let c=g.concat([`${b}`,...e.slice(f+1)]),d=a.findVertexAtPath(c);if(!d)continue;let h=a.findNeighbourValue(d,rO);if(null!=h)return h;let i=a.findNeighbourValue(d,rN);if(null!=i)return i}return a.resolveVertexValue(b,d)},$map:function(a,b,c){let[d,e]=c,f=a.getVertexValue(d),g=a.resolveVertexValue(b,e);if(!Array.isArray(g))return;let h=a.neighboursWithEdgeValue(b,rK);if(h&&h.length>0)return;let i=0;for(let c of g)a.graftValue(b,`${i}`,f,c),i++;return r4},$merge:function(a,b,c){for(let d of c){let c=a.resolveVertexValue(b,d);aS(c)&&a.graftObject(b,c)}return r4},$omit:function(a,b,c){let[d,e]=c,f=a.getVertexValue(d);if(!Array.isArray(f)){let c=function(a,b,c){let d=r5(a.getVertexValue(c));switch(d?.operation){case"$path":{let[c]=d.values,e=r2(a.getPathArray(b),c);if(e===r3)return;return a.findVertexAtPath(e)}case"$value":return b}}(a,b,e);if(!c)return;f=a.resolveVertexValue(c,d)}let g=a.resolveVertexValue(b,e);if(Array.isArray(f)&&aS(g))return dQ(g,f)},$size:function(a,b,c){let[d]=c,e=a.resolveVertexValue(b,d);return aR(e)?"length"in e?e.length:Object.keys(e).length:0},$shallow:function(a,b,c){let d=a.getPathArray(b),e=a.hasUserOption(d);if(!e&&1===c.length)return a.resolveVertexValue(b,c[0]);let f=[];for(let b of c)f.push(a.getVertexValue(b));return e?a.prune(b,[rN,rM]):a.graftObject(b,f),r4},$shallowSimple:function(a,b,c){let d=[];for(let b of c)d.push(a.getVertexValue(b));return d},$value:function(a,b,c){let[d]=c,e=a.getVertexValue(d),f=a.getPathArray(b);return"$index"===e?r1(f):"$1"===e?a.resolveValue$1(f):void 0}},sb=new Set(Object.keys(sa));function sc(a){return sb.has(a)}var sd=dw.create("opts","options-graph"),se=hz(function(a,b){return sd.group("OptionsGraph.constructor()",()=>new sg(a.config,b,a.params,a.palette,a.overrides,a.getTemplateParameters()))}),sf=class a extends cX{constructor(b={},c={},d,e={},f,g=new Map){super(rK,rQ,new Set([rP,rO])),this.config=b,this.userOptions=c,this.palette=e,this.overrides=f,this.internalParams=g,this.edgePriority=[...a.EDGE_PRIORITY],this.graftEdge=a.GRAFT_EDGE,this.resolvedParams={},this.resolvedAnnotations={},this.value$1=new Map,this.cachedPathVertices=new Map,this.hasUnsafeClearKeys=!1,this.rollbackVertices=[],this.rollbackEdgesFrom=[],this.rollbackEdgesTo=[],this.rollbackEdgesValue=[],this.isRollingBack=!1,this.EMPTY_PATH_ARRAY_VERTEX=this.addVertex([]),this.root=this.addVertex("root"),this.params=this.addVertex("params"),this.annotations=this.addVertex("annotations"),this.paletteType=aQ(c?.theme)?mz(c.theme?.palette):"inbuilt";let h=c.series?.[0]?.type??"line";c.axes??(c.axes=jr.predictAxes(h,c.series?.[0],c.data)??jr.cloneDefaultAxes(h)??[]),sd("build user"),this.buildGraphFromObject(this.root,rO,dQ(c,["theme"])),sd("build defaults"),this.buildGraphFromObject(this.root,rM,dQ(b[h],a.COMPLEX_KEYS));let i=f?dQ(f[h],a.COMPLEX_KEYS):{};Object.keys(i).length>0&&(sd("build series overrides"),this.buildGraphFromObject(this.root,rN,i));let j=f?dQ(f.common,a.COMPLEX_KEYS):{};Object.keys(j).length>0&&(sd("build common overrides"),this.buildGraphFromObject(this.root,rN,jo.isCartesian(h)?j:dQ(j,["zoom","navigator"]))),d&&(sd("build params"),this.buildGraphFromObject(this.params,rM,d));let k=this.findNeighbourWithValue(this.root,"axes",rK),l=this.findNeighbourWithValue(this.root,"series",rK);k&&(sd("build axes"),this.buildGraphFromObject(k,rM,{$applyTheme:[["/$seriesType/axes/$axisType/$position","/$seriesType/axes/$axisType"],{seriesType:{$path:["/series/0/type","line"]},axisType:{$path:["./type","category"]},position:{$path:["./position"]}},["top","right","bottom","left"]]})),l&&(sd("build series"),this.buildGraphFromObject(l,rM,{$applyTheme:["/$seriesType/series",{seriesType:{$path:["./type","line"]}}]}));let m=dQ(b[h]?.annotations??{},a.ANNOTATIONS_OPTIONS_KEYS);Object.keys(m).length>0&&(sd("build annotations type config"),this.buildGraphFromObject(this.annotations,rM,m));let n=dQ(f?.common?.annotations??{},a.ANNOTATIONS_OPTIONS_KEYS);Object.keys(n).length>0&&(sd("build annotations type overrides"),this.buildGraphFromObject(this.annotations,rN,n));let o=dR(b[h]?.annotations??{},a.ANNOTATIONS_OPTIONS_KEYS);Object.keys(o).length>0&&(sd("build annotations config"),this.buildGraphFromObject(this.root,rM,{annotations:o}));let p=dR(f?.common?.annotations??{},a.ANNOTATIONS_OPTIONS_KEYS);Object.keys(p).length>0&&(sd("build annotations overrides"),this.buildGraphFromObject(this.root,rN,{annotations:p})),this.buildDependencyGraph()}clear(){sd.group("OptionsGraph.clear()",()=>{super.clear(),this.cachedPathVertices.clear(),this.root=void 0,this.params=void 0,this.annotations=void 0,sd("cleared")})}clearSafe(){this.hasUnsafeClearKeys||this.clear()}resolve(){return sd.group("OptionsGraph.resolve()",()=>(this.resolved={},this.resolvedParams={},this.resolvedAnnotations={},sd("resolve params"),this.resolveVertex(this.params,this.resolvedParams),sd("resolve annotations"),this.resolveVertex(this.annotations,this.resolvedAnnotations),sd("resolve root"),this.resolveVertex(this.root),sd("resolved root",this.resolved),sd("vertex count",this.getVertexCount()),sd("edge count",this.getEdgeCount()),this.resolved))}resolveParams(){return this.resolvedParams}resolveAnnotationThemes(){return this.resolvedAnnotations}addVertex(a){let b=super.addVertex(a);return this.isRollingBack&&this.rollbackVertices.push(b),b}addEdge(a,b,c){let d=(this.neighboursWithEdgeValue(a,c)?.indexOf(b)??-1)!==-1;this.isRollingBack&&!d&&(this.rollbackEdgesFrom.push(a),this.rollbackEdgesTo.push(b),this.rollbackEdgesValue.push(c)),super.addEdge(a,b,c)}resolvePartial(b,c,d){if(!c||!this.root)return;let{permissivePath:e,proxyPaths:f}=d??{},g=Object.keys(c);if(sd.check()&&console.groupCollapsed(`OptionsGraph.resolvePartial() - ${b.join(".")} [${g}]`),0===g.length)return{};let h=this.findVertexAtPath(b);if(!h)if(e)return;else throw Error(`Could not find vertex in OptionsGraph at path [${b.join(".")}].`);let i=this.findNeighbour(h,rL);if(this.userPartialOptions={},r$(this.userPartialOptions,b,c),f)for(let a of Object.keys(f)){let d=f[a],e=rZ(c,[a]);null!=e&&(r$(c,d,e),r$(this.userPartialOptions,[...b,...d],e),delete c[a],delete this.userPartialOptions[a])}for(let d of(this.graftEdge=rP,this.edgePriority=[rP,...a.EDGE_PRIORITY],this.snapshot(),this.buildGraphFromObject(h,rP,c,i),g)){let a=f?.[d]?this.findVertexAtPath([...b,...f[d]]):this.findNeighbourWithValue(h,d,rK);a&&this.refreshPendingProcessingEdges(a)}this.buildDependencyGraph();let j={};if(this.resolveVertex(h,j),this.rollback(),this.graftEdge=a.GRAFT_EDGE,this.edgePriority=a.EDGE_PRIORITY,this.userPartialOptions=void 0,f)for(let a of Object.keys(f)){let c=rZ(j,[...b,...f[a]]);r$(j,[...b,a],c)}let k=rZ(j,b),l=d?.pick??!0?dR(rZ(j,b),g):k;return sd("vertex count",this.getVertexCount()),sd("edge count",this.getEdgeCount()),sd("resolved partial",l),sd.check()&&console.groupEnd(),l}findVertexAtPath(a){let b=a.join(".");if(this.cachedPathVertices.has(b))return this.cachedPathVertices.get(b);let c=this.findVertexAlongEdge(this.root,a,rK);if(c)return this.cachedPathVertices.set(b,c),c}hasUserOption(a){if(rY(this.userOptions,a))return!0;let b=this.findVertexAtPath(a);if(b){if(null!=this.findNeighbour(b,rO)||null!=this.findNeighbour(b,rP))return!0;let a=this.findNeighbourValue(b,rW);return a===rO||a===rP}return!1}dangerouslyGetUserOption(a){if(this.userPartialOptions){let b=rZ(this.userPartialOptions,a);if(null!=b)return b}return rZ(this.userOptions,a)}hasThemeOverride(a){if(null==this.overrides)return!1;if("axes"===a[0]&&a.length>1){let b=this.getResolvedPath(["axes",a[1],"type"]);if(rY(this.overrides,["common","axes",b,...a.slice(2)]))return!0;let c=this.getResolvedPath(["series","0","type"]);return rY(this.overrides,[c,"axes",b,...a.slice(2)])}if("series"===a[0]&&a.length>1){let b=this.getResolvedPath(["series",a[1],"type"]);return rY(this.overrides,[b,"series",...a.slice(2)])}return rY(this.overrides,a)}getParamValue(a){if(null!=this.resolvedParams[a])return this.resolvedParams[a];let b=this.findVertexAlongEdge(this.params,[a],rK);if(!b)return;let c=this.findNeighbour(b,rM);if(!c)return;let d=this.resolveVertexValue(b,c);return this.resolvedParams[a]=d,d}getPathArray(a){return this.findNeighbourValue(a,rL)??[]}getResolvedPath(a){return rZ(this.resolved,a)}getCachedValue(b,c){let d=[...b,c].join(".");return a.valueCache.get(d)}setCachedValue(b,c,d){let e=[...b,c].join(".");a.valueCache.set(e,d)}prune(a,b){this.addEdge(a,this.addVertex(b),rV)}resolveVertexValue(a,b){this.resolveVertexDependencies(b);let c=this.findNeighbourValue(b,rQ);if(c&&sc(c)){let d=this.neighboursWithEdgeValue(b,rR),e=sa[c],f="function"==typeof e?e:e.resolve,g=f?.(this,a,d??[]);return g===r4?void 0:g}let d=this.getVertexValue(b);if(Array.isArray(d)){let c={};this.resolveVertexChildren(b,c),d=rZ(c,this.getPathArray(a))}return this.resolveValueOrSymbol(d)}resolveValue$1(a){for(let b=a.length;b>=0;b--){let c=a.slice(0,b).join("."),d=this.value$1.get(c);if(void 0!=d)return d}}graftConfig(a,b,c){let d=rZ(this.config,b),e=this.findNeighbour(a,rL);if(aQ(d)&&this.buildGraphFromObject(a,rM,d,e,void 0,c),this.overrides){let d=rZ(this.overrides,b);aQ(d)&&this.buildGraphFromObject(a,rN,d,e,void 0,c);let f=rZ(this.overrides,["common",...b.slice(1)]);aQ(f)&&this.buildGraphFromObject(a,rN,f,e,void 0,c)}this.buildDependencyGraph()}graftObject(a,b,c,d=this.graftEdge){let e=this.findNeighbour(a,rL);if(this.buildGraphFromObject(a,d,b,e),this.overrides&&c)for(let b of c){if(null==b)continue;let c=rZ(this.overrides,b);c&&this.buildGraphFromObject(a,rN,c,e)}this.buildDependencyGraph()}graftValue(a,b,c,d,e=this.graftEdge){let f=[...this.getPathArray(a),b];this.value$1.set(f.join("."),d);let g=this.findVertexAtPath(f)??this.addVertex(b);this.buildGraphFromValue(a,g,e,f,c),this.buildDependencyGraph()}graftAndResolveOrphan(a,b){let c={},d=this.addVertex(c),e=this.getPathArray(a);return this.graftAndResolveChildren(b,d,e,[]),this.resolveVertex(d,c),rZ(c,e)}buildGraphFromObject(b,c,d,e,f=a.SHALLOW_KEYS,g){let h,i=Object.keys(d),j=r5(d,i);if(j){let a=this.addVertex(d);this.addEdge(b,a,c),this.buildGraphFromOperation(a,c,j,e);return}if(0===i.length){this.addEdge(b,this.addVertex(Array.isArray(d)?[]:{}),c),this.buildGraphAutoEnable(b,c,d,void 0);return}let k=this.getVertexChildrenByKey(b),l=e?this.getVertexValue(e):[];Array.isArray(d)&&this.addEdge(b,this.addVertex(c),rW);let m=[...l],n=l.length;for(let a of i){if(g?.has(a))continue;let e=k?.get(a)??this.addVertex(a);m[n]=a,f?.has(a)?this.buildShallowGraphFromValue(b,e,c,m,d[a]):this.buildGraphFromValue(b,e,c,m,d[a],f),"enabled"===a&&(h=e)}this.buildGraphAutoEnable(b,c,d,h)}buildGraphAutoEnable(a,b,c,d){if(b===rM&&!d||b===rO&&d||b!==rM&&b!==rO&&b!==rP&&b!==rN)return;let e=this.findNeighbour(a,rT);e||(e=this.addVertex(rT),this.addEdge(a,e,rT)),d&&this.addEdge(d,e,rU);let{enabled:f,_enabledFromTheme:g}=c;this.addEdge(e,this.addVertex({enabled:f,_enabledFromTheme:g,keys:Object.keys(c).length}),b)}getVertexChildrenByKey(a){let b=this.neighboursWithEdgeValue(a,rK);if(!b)return;let c=new Map;for(let a of b)c.set(this.getVertexValue(a),a);return c}buildGraphFromValue(a,b,c,d,e,f){this.addEdge(a,b,rK);let g=this.findNeighbour(b,rL);g||(g=this.addVertex([...d]),this.addEdge(b,g,rL));let h=r5(e);if(h){let a=this.addVertex(e);this.addEdge(b,a,c),this.addEdge(a,g,rL),this.buildGraphFromOperation(a,c,h,g)}else if(aR(e))this.buildGraphFromObject(b,c,e,g,f);else{let a=this.findNeighbour(b,c);if(a&&this.getVertexValue(a)===e)return;let d=this.addVertex(e);this.addEdge(b,d,c)}}buildShallowGraphFromValue(a,b,c,d,e){this.addEdge(a,b,rK);let f=this.findNeighbour(b,rL);f||(f=this.addVertex([...d]),this.addEdge(b,f,rL));let g=this.addVertex(e);this.addEdge(b,g,c)}buildGraphFromOperation(a,b,c,d){let e=this.addVertex(c.operation);for(let f of(this.addEdge(a,e,rQ),c.values))this.buildGraphFromOperationValue(a,f,b,d)}buildGraphFromOperationValue(a,b,c,d=this.EMPTY_PATH_ARRAY_VERTEX){let e=this.addVertex(b);this.addEdge(a,d,rL),this.addEdge(a,e,rR);let f=r5(b);f?this.buildGraphFromOperation(e,c,f,d):aR(b)&&this.buildGraphFromObject(e,c,b,d)}buildDependencyGraph(){for(let a=0;a<this.pendingProcessingEdgesFrom.length;a++){let b=this.pendingProcessingEdgesFrom[a],c=this.pendingProcessingEdgesTo[a],d=this.getVertexValue(c);if(!sc(d))continue;let e=this.neighboursWithEdgeValue(b,rR),f=sa[d],g="function"==typeof f?void 0:f.dependencies;g?.(this,b,e??[])}this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[]}refreshPendingProcessingEdges(a){let b=this.findNeighbour(a,rM)??a,c=this.findNeighbour(b,rQ);if(c){this.pendingProcessingEdgesFrom.push(b),this.pendingProcessingEdgesTo.push(c);let a=this.neighboursWithEdgeValue(b,rR);if(a)for(let b of a)this.refreshPendingProcessingEdges(b)}let d=this.neighboursWithEdgeValue(a,rK);if(d)for(let a of d)this.refreshPendingProcessingEdges(a)}resolveVertex(a,b=this.resolved,c){let d=this.getPathArray(a);this.resolveVertexInEdgePriority(a,b,d,c),this.resolveVertexAutoEnable(a,b,d),this.resolveVertexChildren(a,b,c)}resolveVertexInEdgePriority(b,c,d,e){let f=this.neighboursWithEdgeValue(b,rK),[g]=this.edgePriority;for(let h of this.edgePriority){let i=this.findNeighbour(b,h);if(null==i)continue;let j=this.resolveVertexValueInternal(b,i);if((null!=j||h===g)&&(!f||!(f.length>0)||h===g)&&!(Array.isArray(e)&&e.indexOf(h)>=0)){if(this.hasUnsafeClearKeys||(this.hasUnsafeClearKeys=null!=j&&a.UNSAFE_CLEAR_KEYS.has(d[d.length-1])),0===d.length){if(null==j)continue;this.resolved=j}else r$(c,d,j);break}}}resolveVertexValueInternal(a,b){this.resolveVertexDependencies(b);let c=this.findNeighbourValue(b,rQ);if(c&&sc(c)){let d=this.neighboursWithEdgeValue(b,rR),e=sa[c],f="function"==typeof e?e:e.resolve,g=f?.(this,a,d??[]);return g===r4?void 0:g}return this.resolveValueOrSymbol(this.getVertexValue(b))}resolveVertexAutoEnable(a,b,c){let d=this.neighboursWithEdgeValue(a,rU)?.[0];if(!d)return;let e=this.findVertexAtPath(c),f=this.findNeighbourValue(d,rM),g=this.findNeighbourValue(d,rN),h=this.findNeighbourValue(d,rO),i=e&&null!=this.findNeighbour(e,rO)?void 0:this.findNeighbourValue(d,rP);(null==h||null!=h.enabled)&&(null==i||null!=i.enabled)||f?._enabledFromTheme||g?._enabledFromTheme||r$(b,c,!0)}resolveVertexChildren(a,b,c){let d=this.neighboursWithEdgeValue(a,rK);if(d)for(let e of(c??(c=this.findNeighbourValue(a,rV)),d)){let a=this.getVertexValue(e);d.length>1&&sc(a)||"_enabledFromTheme"!==a&&this.resolveVertex(e,b,c)}}resolveVertexDependencies(a){let b=this.neighboursWithEdgeValue(a,rS);if(b)for(let a of b)this.resolveVertex(a)}graftAndResolveChildren(a,b,c,d){let e=this.neighboursWithEdgeValue(a,rK);if(e)for(let a of e){let e=this.getVertexValue(a),f=[...c,e],g=[...d,e],h=this.addVertex(e),i=this.findNeighbourValue(a,rM);this.addEdge(b,h,rK);let j=this.addVertex(f);if(this.addEdge(h,j,rL),aQ(i)){this.buildGraphFromObject(h,rM,i,j);let a=this.findNeighbour(h,rM);this.addEdge(a,this.addVertex(f),rL);let b=this.findNeighbourValue(a,rQ);if(sc(b)){let c=this.neighboursWithEdgeValue(a,rR),d=sa[b],e="function"==typeof d?void 0:d.dependencies;e?.(this,a,c??[])}}this.graftAndResolveChildren(a,h,f,g)}}resolveValueOrSymbol(a){return"symbol"==typeof a&&this.internalParams?.has(a)?this.internalParams.get(a):a}snapshot(){sd("snapshot"),this.isRollingBack=!0}rollback(){sd(`rollback ${this.rollbackEdgesFrom.length} edges and ${this.rollbackVertices.length} vertices`);for(let a=0;a<this.rollbackEdgesFrom.length;a++){let b=this.rollbackEdgesFrom[a],c=this.rollbackEdgesTo[a],d=this.rollbackEdgesValue[a];this.removeEdge(b,c,d)}for(let a of this.rollbackVertices)this.removeVertex(a);this.cachedPathVertices.clear(),this.rollbackVertices=[],this.rollbackEdgesFrom=[],this.rollbackEdgesTo=[],this.rollbackEdgesValue=[],this.isRollingBack=!1}};sf.EDGE_PRIORITY=[rO,rN,rM],sf.GRAFT_EDGE=rM,sf.SHALLOW_KEYS=new Set(["context","data","topology"]),sf.COMPLEX_KEYS=["annotations","axes","series"],sf.ANNOTATIONS_OPTIONS_KEYS=["axesButtons","data","enabled","optionsToolbar","snap","toolbar","xKey","volumeKey"],sf.UNSAFE_CLEAR_KEYS=new Set(["itemStyler","styler"]),sf.valueCache=new Map;var sg=sf,sh=a=>`'${a}'`,si=class a{constructor(b,c,d,e,f,g,h=!1,i){let j,k,l,m,n,o,p;this.themeParameters={},this.optionMetadata=f??{},this.processedOverrides=d??{};let q=null;b instanceof a?(q=b,this.specialOverrides=q.specialOverrides,void 0===g&&(g=fw(q.userOptions,c,a.JSON_DIFF_OPTS)),this.userOptions=fy(dN(g,q.userOptions),{...a.OPTIONS_CLONE_OPTS_SLOW,seen:[]})):(this.userOptions=fy(b??c,{...a.OPTIONS_CLONE_OPTS_SLOW,seen:[]}),this.specialOverrides=this.specialOverridesDefaults({...e})),h&&this.removeLeftoverSymbols(this.userOptions);let r=b instanceof a&&g?.data!==void 0&&g?.data?.length!==b.userOptions.data?.length;if(!h&&void 0!==g&&a.isFastPathDelta(g)&&null!=q&&!r?({activeTheme:j,processedOptions:k,fastDelta:l}=this.fastSetup(g,q),m=q.themeParameters,n=q.annotationThemes):(a.perfDebug("ChartOptions.slowSetup()"),{activeTheme:j,processedOptions:k,themeParameters:m,annotationThemes:n,googleFonts:o,optionsGraph:p}=this.slowSetup(d,g,h)),this.activeTheme=j,this.processedOptions=k,this.fastDelta=l??void 0,this.themeParameters=m,this.annotationThemes=n,this.googleFonts=o,this.optionsGraph=p,void 0!==i&&"number"==typeof i&&!isNaN(i)){let a=performance.now();this.optionsProcessingTime=a-i}dw.inDevelopmentMode(()=>dW(this))}static isFastPathDelta(b){for(let c of Object.keys(b??{}))if(!this.FAST_PATH_OPTIONS.has(c))return a.perfDebug("ChartOptions.isFastPathDelta() - slow path required due to presence of: ",c),!1;return a.perfDebug("ChartOptions.isFastPathDelta() - fast path possible."),!0}fastSetup(b,c){let{activeTheme:d,processedOptions:e}=c,{presetType:f}=this.optionMetadata;if(null!=f&&b?.data!=null){let a=al.getPresetModule(f);if(a?.processData){let{series:c,data:d}=a.processData(b.data);b=dM({series:c,data:d},b)}}this.fastSeriesSetup(b,e);let g=dM(b,e);return a.debug("ChartOptions.fastSetup() - processed options",g),{activeTheme:d,processedOptions:g,fastDelta:b}}fastSeriesSetup(a,b){a?.series&&(a.series?.every((a,c)=>fx(a,b.series?.[c]??{}))?delete a.series:a.series=a.series.map((a,c)=>dN(a,b.series?.[c]??{})))}slowSetup(b,c,d=!1){let e=fy(this.userOptions,a.OPTIONS_CLONE_OPTS_FAST);c&&(e=dM(c,e),d&&this.removeLeftoverSymbols(e));let{presetType:f}=this.optionMetadata;if(null!=f){let b=al.getPresetModule(f);if(b){let{validate:c=bs}=b,d=e,f=e.type,g=null!=f?rG(e.theme).presets[f]:void 0,{cleared:h,invalid:i}=c(d,b.options,"");i.forEach(a=>aa.warn(a)),bZ(i,"")?e={}:(a.debug(">>> AgCharts.createOrUpdate() - applying preset",h),e=b.create(h,g,()=>this.activeTheme))}}this.soloSeriesIntegrity(e),rJ.isEnterprise||my(e);let g=rG(e.theme);if(null!=f&&g.templateTheme(e,!1),this.validateSeriesOptions(e),this.chartDef=al.detectChartDefinition(e),!this.chartDef.placeholder){let{validate:a=bs}=this.chartDef,{cleared:b,invalid:c}=a(e,this.chartDef.options,"");c.forEach(a=>aa.warn(a)),e=b}this.validateAxesOptions(e),this.removeDisabledOptions(e);let h=this.processFonts(g.params);h=this.processFonts(e,h),this.processSeriesOptions(e);let i=se(g,e),j=i.resolve(),k=i.resolveParams(),l=i.resolveAnnotationThemes();i.clearSafe();let m=dM(b,j),n="mode"in m&&"integrated"===m.mode;for(let a of dn.byType("root","legend")){let b=m[a.optionsKey],c=null!=b&&!1===b.enabled,d=!("removable"in a)||!0===a.removable||"standalone-only"===a.removable&&!n;c&&d&&delete m[a.optionsKey]}return rJ.isEnterprise||my(m,!0),this.validateSeriesOptions(m),this.validateAxesOptions(m),this.validatePluginOptions(m),this.processMiniChartSeriesOptions(m),m.loadGoogleFonts||h.clear(),a.debug(()=>["ChartOptions.slowSetup() - processed options",fy(m)]),{activeTheme:g,processedOptions:m,themeParameters:k,annotationThemes:l,googleFonts:h,optionsGraph:i}}validatePluginOptions(a){for(let b of al.listModulesByType(am.Plugin)){let c=b.name;if(c in a&&(!b.chartType||b.chartType===this.chartDef?.name)){let{cleared:d,invalid:e}=bs(a[c],b.options,b.name);e.forEach(a=>aa.warn(a)),a[c]=d}}}validateSeriesOptions(a){let b,c=this.chartDef?.name,d=[],e=a.series?.length??0;for(let f=0;f<e;f++){let e=`series[${f}]`,g=a.series[f],h=al.getSeriesModule(g.type);if(null==h){b??(b=be(Array.from(al.listModulesByType(am.Series)).filter(a=>!c||a.chartType===c).map(a=>a.name),"or",sh)),aa.warn(null==g.type?`Option \`${e}.type\` is required and has not been provided; expecting ${b}, ignoring.`:`Unknown type \`${g.type}\` at \`${e}.type\`; expecting ${b}, ignoring.`);continue}if(c&&h.chartType!==c){aa.warn(`Series type \`${h.name}\` at \`${e}.type\` is not supported by chart type \`${c}\`, ignoring.`);continue}let{validate:i=bs}=h,{cleared:j,invalid:k}=i(g,h.options,e);k.forEach(a=>aa.warn(a)),bZ(k,e)||d.push(j)}a.series=d}validateAxesOptions(a){let b;if(!("axes"in a)||!a.axes)return;let c=this.chartDef?.name,d=[],e=a.axes.length??0;for(let f=0;f<e;f++){let e=`axes[${f}]`,g=a.axes[f],h=al.getAxisModule(g.type);if(null==h){b??(b=be(Array.from(al.listModulesByType(am.Axis)).filter(a=>a.chartType===c).map(a=>a.name),"or",sh)),aa.warn(`Unknown type \`${g.type}\` at  \`${e}.type\`; expecting one of ${b}, ignoring all axes options.`),delete a.axes;break}if(h.chartType!==c){aa.warn(`Axis type \`${h.name}\` at  \`${e}.type\` is not supported by chart type \`${c}\`, ignoring.`);break}let{validate:i=bs}=h,{cleared:j,invalid:k}=i(g,h.options,e);k.forEach(a=>aa.warn(a)),bZ(k,e)||d.push(j)}a.axes=d}diffOptions(b){return this===b?{}:null==b?this.processedOptions:this.fastDelta??fw(b.processedOptions,this.processedOptions,a.JSON_DIFF_OPTS)}optionsType(a){return a.series?.[0]?.type??"line"}processSeriesOptions(a){let b=a.series?.map(a=>{a.type??(a.type="line");let b=al.getSeriesModule(a.type),c=!!b?.options.visible;return dM(this.getSeriesGroupingOptions(a),a,c&&{visible:!0})});a.series=this.setSeriesGroupingOptions(b??[])}processMiniChartSeriesOptions(a){let b=a.navigator?.miniChart?.series;null!=b&&(a.navigator.miniChart.series=this.setSeriesGroupingOptions(b))}getSeriesGroupingOptions(a){let b=jr.isGroupable(a.type),c=jr.isStackable(a.type),d=jr.isStackedByDefault(a.type);a.grouped&&!b&&aa.warnOnce(`unsupported grouping of series type "${a.type}".`),(a.stacked||a.stackGroup)&&!c&&aa.warnOnce(`unsupported stacking of series type "${a.type}".`);let{grouped:e,stacked:f}=a;return f??(f=(d||null!=a.stackGroup)&&!(b&&e)),e??(e=!0),{stacked:c&&f,grouped:b&&e&&!(c&&f)}}setSeriesGroupingOptions(b){let c=this.getSeriesGrouping(b);a.debug("ChartOptions.setSeriesGroupingOptions() - series grouping: ",c);let d={},e=c.reduce((a,b)=>{var c;return"default"===b.groupType||(a[c=b.seriesType]??(a[c]=0),a[b.seriesType]+="stack"===b.groupType?1:b.series.length),a},{});return c.flatMap(a=>{var b;switch(d[b=a.seriesType]??(d[b]=0),a.groupType){case"stack":{let b=d[a.seriesType]++;return a.series.map((c,d)=>Object.assign(c,{seriesGrouping:{groupId:a.groupId,groupIndex:b,groupCount:e[a.seriesType],stackIndex:d,stackCount:a.series.length}}))}case"group":return a.series.map(b=>Object.assign(b,{seriesGrouping:{groupId:a.groupId,groupIndex:d[a.seriesType]++,groupCount:e[a.seriesType],stackIndex:0,stackCount:0}}))}return a.series}).map(({stacked:a,grouped:b,...c})=>c)}getSeriesGroupId(a){return[a.type,a.xKey,a.stacked?a.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(a){let b=new Map;return a.reduce((a,c)=>{let d=c.type;if(c.stacked||c.grouped){let e=this.getSeriesGroupId(c);if(!b.has(e)){let f={groupType:c.stacked?"stack":"group",seriesType:d,series:[],groupId:e};b.set(e,f),a.push(f)}b.get(e).series.push(c)}else a.push({groupType:"default",seriesType:d,series:[c],groupId:"__default__"});return a},[])}soloSeriesIntegrity(a){if(!aM(a.series))return;let b=a.series;if(b&&b.length>1&&b.some(a=>jr.isSolo(a.type))){let c=this.optionsType(a);if(jr.isSolo(c))aa.warn(`series[0] of type '${c}' is incompatible with other series types. Only processing series[0]`),a.series=b.slice(0,1);else{let{solo:c,nonSolo:d}=cv(b,a=>jr.isSolo(a.type)?"solo":"nonSolo"),e=Array.from(new Set(c.map(a=>a.type))).join(", ");aa.warn(`Unable to mix these series types with the lead series type: ${e}`),a.series=d}}}static processFontOptions(a,b,c,d=new Set){if("object"==typeof a&&"fontFamily"in a)if(Array.isArray(a.fontFamily)){let b=[];for(let c of a.fontFamily)"object"==typeof c&&"googleFont"in c?(b.push(c.googleFont),d?.add(c.googleFont)):b.push(c);a.fontFamily=b.join(", ")}else"object"==typeof a.fontFamily&&"googleFont"in a.fontFamily&&(a.fontFamily=a.fontFamily.googleFont,d?.add(a.fontFamily));return d}processFonts(b,c=new Set){return fA(b,a.processFontOptions,new Set(["data","theme"]),void 0,void 0,c)}static removeDisabledOptionJson(a){"enabled"in a&&!1===a.enabled&&Object.keys(a).forEach(b=>{"enabled"!==b&&delete a[b]})}removeDisabledOptions(b){fA(b,a.removeDisabledOptionJson,new Set(["data","theme","contextMenu"]))}static removeLeftoverSymbolsJson(a){if(a&&aQ(a))for(let b of Object.keys(a))aX(a[b])&&delete a[b]}removeLeftoverSymbols(b){fA(b,a.removeLeftoverSymbolsJson,new Set(["data"]))}specialOverridesDefaults(a){if(null==a.window?a.window=aH():aF.window=a.window,null==a.document?a.document=aG():aF.document=a.document,null==a.window)throw Error("AG Charts - unable to resolve global window");if(null==a.document)throw Error("AG Charts - unable to resolve global document");return a}};si.OPTIONS_CLONE_OPTS_SLOW={shallow:new Set(["data","container"]),assign:new Set(["context","theme"])},si.OPTIONS_CLONE_OPTS_FAST={shallow:new Set(["container"]),assign:new Set(["data","context","theme"])},si.JSON_DIFF_OPTS=new Set(["data"]),si.perfDebug=dw.create(!0,"perf"),si.FAST_PATH_OPTIONS=new Set(["data","width","height","container"]),si.debug=dw.create(!0,"opts");var sj=dw.create(!0,"opts"),sk="AG Charts - Chart was destroyed, cannot perform request.",sl=class{constructor(a,b,c){this.factoryApi=b,this.licenseManager=c,this.chart=a}async update(a){if(!this.chart)throw Error(sk);return sj.group("AgChartInstance.update()",async()=>{let b=dw.check("scene:stats","scene:stats:verbose")?performance.now():void 0;this.factoryApi.update(a,this,void 0,b),await this.chart?.waitForUpdate()})}async updateDelta(a){if(!this.chart)throw Error(sk);return sj.group("AgChartInstance.updateDelta()",async()=>{let b=dw.check("scene:stats","scene:stats:verbose")?performance.now():void 0;this.factoryApi.updateUserDelta(this,a,b),await this.chart?.waitForUpdate()})}getOptions(){if(!this.chart)throw Error(sk);let a=fy(this.chart.getOptions(),si.OPTIONS_CLONE_OPTS_FAST);for(let b of Object.keys(a))b.startsWith("_")&&delete a[b];return a}waitForUpdate(){if(!this.chart)throw Error(sk);return this.chart.waitForUpdate()}async download(a){if(!this.chart)throw Error(sk);let b=await this.prepareResizedChart(this,this.chart,a);try{b.chart?.download(a?.fileName,a?.fileFormat)}finally{b.destroy()}}async __toSVG(a){if(!this.chart)throw Error(sk);let b=await this.prepareResizedChart(this,this.chart,{width:600,height:300,...a});try{return b?.chart?.toSVG()}finally{b?.destroy()}}async getImageDataURL(a){if(!this.chart)throw Error(sk);let b=await this.prepareResizedChart(this,this.chart,a);try{return b.chart.getCanvasDataURL(a?.fileFormat)}finally{b.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(a){let{chart:b}=this;if(!b)return;let c=this.getEnabledOriginators();if(!c.includes(b.ctx.legendManager))return void await this.setStateOriginators(a,c);await this.setStateOriginators(a,c.filter(a=>a!==b.ctx.zoomManager)),await this.setStateOriginators(a,[b.ctx.zoomManager])}resetAnimations(){this.chart?.resetAnimations()}skipAnimations(){this.chart?.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.releaseChart=void 0):this.chart&&(this.chart.publicApi=void 0,this.chart.destroy()),this.chart=void 0}async prepareResizedChart(a,b,c={}){let d=c.width??b.width??b.ctx.scene.canvas.width,e=c.height??b.height??b.ctx.scene.canvas.height,f=a.getState(),g=dn.hasEnterpriseModules(),h={...b.chartOptions.processedOverrides,container:document.createElement("div"),width:d,height:e};null!=c.width&&null!=c.height&&(h.overrideDevicePixelRatio=1);let i=b.getOptions();g&&(h.animation={enabled:!1},this.licenseManager?.isDisplayWatermark()&&(h.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));let j={...b.chartOptions.specialOverrides},k={...b.chartOptions.optionMetadata},l=await this.chart?.ctx.dataService.getData(),m=this.factoryApi.create(i,h,j,k,l);await m.setState(f),m.chart?.ctx.zoomManager.updateZoom("chartProxy",b.ctx.zoomManager.getZoom()),m.chart?.ctx.legendManager.clearData(),m.chart?.ctx.legendManager.update(b.ctx.legendManager.getData()),b.series.forEach((a,b)=>{m.chart.series[b].visible=a.visible});let n=[];for(let a of b.modulesManager.legends())n.push(a.legend.pagination?.currentPage??0);for(let a of m.chart.modulesManager.legends()){let b=n.shift()??0;a.legend.pagination&&a.legend.pagination.setPage(b)}return m.chart?.update(0,{forceNodeDataRefresh:!0}),await m.waitForUpdate(),m}getEnabledOriginators(){if(!this.chart)return[];let{chartOptions:{processedOptions:a,optionMetadata:b},ctx:{annotationManager:c,chartTypeOriginator:d,zoomManager:e,legendManager:f}}=this.chart,g=[];return"annotations"in a&&a.annotations?.enabled&&g.push(c),"price-volume"===b.presetType&&g.push(d),(a.navigator?.enabled||a.zoom?.enabled)&&g.push(e),"legend"in this.chart&&g.push(f),g}async setStateOriginators(a,b){this.factoryApi.caretaker.restore(a,...b),this.chart?.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),await this.chart?.waitForUpdate()}};sl.chartInstances=new WeakMap,dl([fJ({oldValue(a){a.destroyed||(a.publicApi=void 0),sl.chartInstances.delete(a)},newValue(a){a&&(a.publicApi=this,sl.chartInstances.set(a,this))}})],sl.prototype,"chart",2);var sm=class extends dm{constructor(a){super(),this.ctx=a,this.localeText=void 0}};dl([dG(a=>{a.ctx.localeManager.setLocaleText(a.localeText)}),ey],sm.prototype,"localeText",2),dl([dG(a=>{a.ctx.localeManager.setLocaleTextFormatter(a.getLocaleText)}),ey],sm.prototype,"getLocaleText",2);var sn={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:a=>new sm(a)},so=class extends dm{constructor(a){super(),this.ctx=a,this.rectNode=new f9,this.textNode=new gb,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.cleanup.register(a.scene.attachNode(this.node),a.eventsHub.on("layout:complete",a=>this.onLayoutComplete(a)))}createNode(){return new fh({name:"background",zIndex:0})}onLayoutComplete(a){let{width:b,height:c}=a.chart;this.rectNode.width=b,this.rectNode.height=c}};dl([ey,fI("node","visible")],so.prototype,"visible",2),dl([ey,fI("rectNode","fill")],so.prototype,"fill",2),dl([ey],so.prototype,"image",2),dl([ey,fI("textNode")],so.prototype,"text",2);var sp={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:a=>new so(a)},sq=class extends ez{constructor(a){super(),this.node=a,this.enabled=!1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=1}};dl([fJ({changeValue(a){a?this.node.strokeWidth=this.strokeWidth:this.node.strokeWidth=0}}),ey],sq.prototype,"enabled",2),dl([fI("node","stroke"),ey],sq.prototype,"stroke",2),dl([fI("node","strokeOpacity"),ey],sq.prototype,"strokeOpacity",2),dl([fJ({changeValue(a){this.enabled?this.node.strokeWidth=a:this.node.strokeWidth=0}}),ey],sq.prototype,"strokeWidth",2);var sr=class extends ez{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};dl([ey],sr.prototype,"color",2),dl([ey],sr.prototype,"fontStyle",2),dl([ey],sr.prototype,"fontWeight",2),dl([ey],sr.prototype,"fontSize",2),dl([ey],sr.prototype,"fontFamily",2);var ss=class extends ez{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};dl([ey],ss.prototype,"size",2),dl([ey],ss.prototype,"fill",2),dl([ey],ss.prototype,"fillOpacity",2),dl([ey],ss.prototype,"stroke",2),dl([ey],ss.prototype,"strokeWidth",2),dl([ey],ss.prototype,"strokeOpacity",2);var st=class extends ez{constructor(a){super(),this.parent=a,this.shape="triangle",this.size=15,this.padding=8}};dl([fJ({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],st.prototype,"shape",2),dl([ey],st.prototype,"size",2),dl([ey],st.prototype,"padding",2);var su=class extends ez{constructor(a,b){super(),this.chartUpdateCallback=a,this.pageUpdateCallback=b,this.id=c_(this),this.marker=new st(this),this.activeStyle=new ss,this.inactiveStyle=new ss,this.highlightStyle=new ss,this.label=new sr,this.group=new fk({name:"pagination"}),this.labelNode=new gb,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this.nextButton=new l0,this.previousButton=new l0,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}set visible(a){this._visible=a,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(a){this._enabled=a,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(a){this._orientation=a,"horizontal"===a?(this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2):(this.previousButton.rotation=0,this.nextButton.rotation=Math.PI)}get orientation(){return this._orientation}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){let{size:a,padding:b}=this.marker;this.nextButton.size=a,this.previousButton.size=a,this.labelNode.x=a/2+b}updateNextButtonPosition(){let a=this.labelNode.getBBox();this.nextButton.translationX=a.width+(this.marker.size/2+this.marker.padding)*2}updateLabel(){let{currentPage:a,totalPages:b,labelNode:c,label:{color:d,fontStyle:e,fontWeight:f,fontSize:g,fontFamily:h}}=this;c.text=`${a+1} / ${b}`,c.fill=d,c.fontStyle=e,c.fontWeight=f,c.fontSize=g,c.fontFamily=h}updateMarkers(){let{nextButton:a,previousButton:b,nextButtonDisabled:c,previousButtonDisabled:d,activeStyle:e,inactiveStyle:f,highlightStyle:g,highlightActive:h}=this,i=(a,b)=>b?f:a===h?g:e;this.updateMarker(a,i("next",c)),this.updateMarker(b,i("previous",d))}updateMarker(a,b){let{shape:c,size:d}=this.marker;a.shape=c,a.size=d,a.fill=b.fill,a.fillOpacity=b.fillOpacity??1,a.stroke=b.stroke,a.strokeWidth=b.strokeWidth,a.strokeOpacity=b.strokeOpacity}enableOrDisableButtons(){let{currentPage:a,totalPages:b}=this,c=0===b;this.nextButtonDisabled=a===b-1||c,this.previousButtonDisabled=0===a||c}setPage(a){a=aA(0,a,Math.max(0,this.totalPages-1)),this.currentPage!==a&&(this.currentPage=a,this.onPaginationChanged())}getCursor(a){return({previous:this.previousButtonDisabled,next:this.nextButtonDisabled})[a]?void 0:"pointer"}onClick(a,b){a.preventDefault(),"next"!==b||this.nextButtonDisabled?"previous"!==b||this.previousButtonDisabled||(this.decrementPage(),this.onPaginationChanged()):(this.incrementPage(),this.onPaginationChanged())}onMouseHover(a){this.highlightActive=a,this.updateMarkers(),this.chartUpdateCallback(7)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(7)}attachPagination(a){a.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){return{prev:ff.toCanvas(this.previousButton),next:ff.toCanvas(this.nextButton)}}};su.className="Pagination",dl([ey],su.prototype,"marker",2),dl([ey],su.prototype,"activeStyle",2),dl([ey],su.prototype,"inactiveStyle",2),dl([ey],su.prototype,"highlightStyle",2),dl([ey],su.prototype,"label",2);var sv=class{constructor(a,b){this.dirty=!0,this.itemList=a.proxyInteractionService.createProxyContainer({type:"list",domManagerId:`${b}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=a.proxyInteractionService.createProxyContainer({type:"group",domManagerId:`${b}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"}}),this.itemDescription=aI("p"),this.itemDescription.style.display="none",this.itemDescription.id=c0(),this.itemDescription.textContent=this.getItemAriaDescription(a.localeManager),this.itemList.getElement().append(this.itemDescription)}initLegendList(a){if(!this.dirty)return;let{ctx:b,itemSelection:c,datumReader:d,itemListener:e}=a,f=b.localeManager,g=c.length;c.each((a,c,h)=>{a.proxyButton?.destroy(),a.proxyButton=b.proxyInteractionService.createProxyElement({type:"listswitch",textContent:this.getItemAriaText(f,d.getItemLabel(c),h,g),ariaChecked:!!a.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});let i=a.proxyButton;i.addListener("click",b=>e.onClick(b.sourceEvent,a.datum,i)),i.addListener("dblclick",b=>e.onDoubleClick(b.sourceEvent,a.datum)),i.addListener("mouseenter",b=>e.onHover(b.sourceEvent,a)),i.addListener("mouseleave",()=>e.onLeave()),i.addListener("contextmenu",b=>e.onContextClick(b,a)),i.addListener("blur",()=>e.onLeave()),i.addListener("focus",b=>e.onHover(b.sourceEvent,a)),i.addListener("drag-start",()=>{})}),this.dirty=!1}update(a){a.visible&&(this.initLegendList(a),this.updateItemProxyButtons(a),this.updatePaginationProxyButtons(a,!0)),this.updateVisibility(a.visible)}updateVisibility(a){this.itemList.setHidden(!a),this.paginationGroup.setHidden(!a)}updateItemProxyButtons({itemSelection:a,group:b,pagination:c,interactive:d}){let e=ff.toCanvas(b);this.itemList.setBounds(e);let f=Math.max(...a.nodes().map(a=>a.getBBox().height));a.each((a,b)=>{if(a.proxyButton){let b=a.pageIndex===c.currentPage,{x:g,y:h,height:i,width:j}=ff.toCanvas(a),k=(f-i)/2,l={x:g-e.x,y:h-k-e.y,height:f,width:j},m=d&&b;a.proxyButton.setCursor("pointer"),a.proxyButton.setEnabled(m),a.proxyButton.setPointerEvents(m?void 0:"none"),a.proxyButton.setBounds(l)}})}updatePaginationProxyButtons(a,b){let{pagination:c}=a;if(this.paginationGroup.setHidden(!c.visible),b&&"ctx"in a){let{ctx:b,oldPages:d,newPages:e}=a,f=(d?.length??e.length)>1,g=e.length>1;f!==g&&(g?(this.prevButton=b.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",b=>this.onPageButton(a,b,"previous")),this.prevButton.addListener("mouseenter",()=>c.onMouseHover("previous")),this.prevButton.addListener("mouseleave",()=>c.onMouseHover(void 0)),this.nextButton??(this.nextButton=b.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup})),this.nextButton.addListener("click",b=>this.onPageButton(a,b,"next")),this.nextButton.addListener("mouseenter",()=>c.onMouseHover("next")),this.nextButton.addListener("mouseleave",()=>c.onMouseHover(void 0))):(this.nextButton?.destroy(),this.prevButton?.destroy(),this.nextButton=void 0,this.prevButton=void 0)),this.paginationGroup.setAriaHidden(!g||void 0)}if(this.prevButton&&this.nextButton){let{prev:a,next:b}=c.computeCSSBounds(),d=dt.merge([a,b]);a.x-=d.x,a.y-=d.y,b.x-=d.x,b.y-=d.y,this.paginationGroup.setBounds(d),this.prevButton.setBounds(a),this.nextButton.setBounds(b),this.prevButton.setEnabled(0!==c.currentPage),this.nextButton.setEnabled(c.currentPage!==c.totalPages-1),this.nextButton.setCursor(c.getCursor("next")),this.prevButton.setCursor(c.getCursor("previous"))}}onPageButton(a,b,c){a.pagination.onClick(b.sourceEvent,c),this.updatePaginationProxyButtons(a,!1)}onDataUpdate(a,b){this.dirty=a.length!==b.length||a.some((c,d,e)=>{let[f,g]=[b[d],a[d]];return f.id!==g.id})}onLocaleChanged(a,b,c){let d=b.length;b.each(({proxyButton:b},e,f)=>{let g=b?.getElement();if(null!=g){let b=c.getItemLabel(e);g.textContent=this.getItemAriaText(a,b,f,d)}}),this.itemDescription.textContent=this.getItemAriaDescription(a)}onPageChange(a){this.updateItemProxyButtons(a),this.updatePaginationProxyButtons(a,!1)}getItemAriaText(a,b,c,d){return c>=0&&b?(c++,a.t("ariaLabelLegendItem",{label:b,index:c,count:d})):a.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(a){return a.t("ariaDescriptionLegendItem")}};function sw(a,{itemId:b,seriesId:c,label:{text:d}},e){let f={defaultPrevented:!1,apiEvent:{type:a,itemId:b,seriesId:c,text:d,event:e,preventDefault:()=>f.defaultPrevented=!0}};return f}var sx=class extends fk{constructor(){super({name:"markerLabelGroup"}),this.symbolsGroup=this.appendChild(new fh({name:"legend-markerLabel-symbols",renderToOffscreenCanvas:!0,optimizeForInfrequentRedraws:!0})),this.label=this.appendChild(new gb),this.enabled=!0,this.pageIndex=NaN,this.spacing=0,this.length=0,this.isCustomMarker=!1,this.marker=this.symbolsGroup.appendChild(new l0({zIndex:1})),this.line=this.symbolsGroup.appendChild(new jB({zIndex:0})),this.line.visible=!1,this.label.textBaseline="middle",this.label.y=1}destroy(){super.destroy(),this.proxyButton?.destroy()}setEnabled(a){this.enabled=a,this.refreshVisibilities()}getTextMeasureBBox(){return this.layout(),dt.merge([this.symbolsGroup.getBBox(),this.label.getTextMeasureBBox()])}refreshVisibilities(){let a=this.enabled?1:.5;this.label.opacity=a,this.opacity=a}layout(){let{marker:a,line:b,length:c,isCustomMarker:d}=this,e=0,f=0;if(a.visible){let{size:b}=a,g=l0.anchor(a.shape);e=(g.x-.5)*b+c/2,f=(g.y-.5)*b,d?(a.x=0,a.y=0,a.translationX=e,a.translationY=f):(a.x=e,a.y=f,a.translationX=0,a.translationY=0)}b.visible&&(b.x1=0,b.x2=c,b.y1=0,b.y2=0)}preRender(a){let b=super.preRender(a);return this.layout(),b}layoutLabel(){let{length:a,spacing:b}=this;this.label.x=a+b}computeBBox(){return this.layout(),super.computeBBox()}};function sy(a){let{placement:b="bottom",floating:c=!1,xOffset:d=0,yOffset:e=0}="string"==typeof a?{placement:a,floating:!1}:a;return{placement:b,floating:c,xOffset:d,yOffset:e}}sx.className="MarkerLabel",dl([fI("label")],sx.prototype,"text",2),dl([fI("label")],sx.prototype,"fontStyle",2),dl([fI("label")],sx.prototype,"fontWeight",2),dl([fI("label")],sx.prototype,"fontSize",2),dl([fI("label")],sx.prototype,"fontFamily",2),dl([fI("label","fill")],sx.prototype,"color",2),dl([dG(a=>a.layoutLabel())],sx.prototype,"spacing",2),dl([dG(a=>a.layoutLabel())],sx.prototype,"length",2),dl([d$()],sx.prototype,"isCustomMarker",2);var sz=class extends ez{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};dl([ey],sz.prototype,"maxLength",2),dl([ey],sz.prototype,"color",2),dl([ey],sz.prototype,"fontStyle",2),dl([ey],sz.prototype,"fontWeight",2),dl([ey],sz.prototype,"fontSize",2),dl([ey],sz.prototype,"fontFamily",2),dl([ey],sz.prototype,"formatter",2);var sA=class extends ez{constructor(){super(...arguments),this.shape=void 0,this.size=15,this.padding=8}};dl([ey],sA.prototype,"shape",2),dl([ey],sA.prototype,"size",2),dl([ey],sA.prototype,"padding",2),dl([ey],sA.prototype,"strokeWidth",2),dl([ey],sA.prototype,"enabled",2);var sB=class extends ez{};dl([ey],sB.prototype,"strokeWidth",2),dl([ey],sB.prototype,"length",2);var sC=class extends ez{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new sA,this.label=new sz,this.line=new sB}};dl([ey],sC.prototype,"maxWidth",2),dl([ey],sC.prototype,"paddingX",2),dl([ey],sC.prototype,"paddingY",2),dl([ey],sC.prototype,"showSeriesStroke",2),dl([ey],sC.prototype,"marker",2),dl([ey],sC.prototype,"label",2),dl([ey],sC.prototype,"line",2);var sD=class extends ez{};dl([ey],sD.prototype,"legendItemClick",2),dl([ey],sD.prototype,"legendItemDoubleClick",2);var sE={type:"gradient",bounds:"item",gradient:"linear",colorStops:[{color:"black"}],rotation:0,reverse:!1,colorSpace:"rgb"},sF={type:"pattern",pattern:"forward-slanted-lines",width:8,height:8,padding:1,fill:"black",fillOpacity:1,backgroundFill:"white",backgroundFillOpacity:1,stroke:"black",strokeOpacity:1,strokeWidth:1,rotation:0,scale:1},sG={type:"image",backgroundFill:"black",backgroundFillOpacity:1,rotation:0,repeat:"no-repeat",fit:"contain",width:8,height:8},sH=class extends ez{constructor(a){super(),this.ctx=a,this.id=c_(this),this.group=new fk({name:"legend",zIndex:16}),this.itemSelection=jA.select(this.group,sx),this.containerNode=this.group.appendChild(new f9({name:"legend-container"})),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.toggleSeries=!0,this.item=new sC,this.listeners=new sD,this.enabled=!0,this.position="bottom",this.border=new sq(this.containerNode),this.cornerRadius=0,this.fillOpacity=1,this.padding=4,this.spacing=0,this.cleanup=new cQ,this.size=[0,0],this._visible=!0,this.pagination=new su(b=>a.updateService.update(b),a=>this.updatePageNumber(a)),this.pagination.attachPagination(this.group);let{items:b}=a.contextMenuRegistry.builtins;b["toggle-series-visibility"].action=a=>this.contextToggleVisibility(a),b["toggle-other-series"].action=a=>this.contextToggleOtherSeries(a),this.cleanup.register(a.eventsHub.on("legend:change",this.onLegendDataChange.bind(this)),a.layoutManager.registerElement(1,a=>this.positionLegend(a)),a.eventsHub.on("locale:change",()=>this.onLocaleChanged()),()=>delete b["toggle-series-visibility"].action,()=>delete b["toggle-other-series"].action,()=>this.group.remove()),this.domProxy=new sv(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(a.legendManager)}set data(a){dK(a,this._data)||(this.domProxy.onDataUpdate(this._data,a),this._data=a,this.updateGroupVisibility())}get data(){return this._data}onLegendDataChange({legendData:a=[]}){this.enabled&&(this.data=a.filter(a=>!a.hideInLegend))}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.cleanup.flush(),this.itemSelection.clear()}getOrientation(){return this.orientation??"horizontal"}set visible(a){this._visible=a,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(a){a.appendChild(this.group)}getItemLabel(a){let{formatter:b}=this.item.label;if(b){let c=a.datum;return this.cachedCallWithContext(b,{itemId:a.itemId,value:a.label.text,seriesId:a.seriesId,...c&&{datum:c}})}return a.label.text}calcLayout(a,b){let{paddingX:c,paddingY:d,label:e,maxWidth:f,label:{maxLength:g=1/0,fontStyle:h,fontWeight:i,fontSize:j,fontFamily:k}}=this.item,l=[...this.data];this.reverseOrder&&l.reverse(),this.itemSelection.update(l);let m=[],n=db(e),o=f??.8*a,{markerWidth:p,anyLineEnabled:q}=this.calculateMarkerWidth();if(this.itemSelection.each((a,b)=>{a.fontStyle=h,a.fontWeight=i,a.fontSize=j,a.fontFamily=k;let c=this.updateMarkerLabel(a,b,p,q),d=b.itemId??b.id,e=(this.getItemLabel(b)??"<unknown>").replace(/\r?\n/g," ");a.text=this.truncate(e,g,o,c,n,d),m.push(a.getTextMeasureBBox())}),a=Math.max(1,a),b=Math.max(1,b),!isFinite(a))return{};[a,b]=this.updateContainer(a,b);let r=this.size,s=this.oldSize;r[0]=a,r[1]=b,(r[0]!==s[0]||r[1]!==s[1])&&(s[0]=r[0],s[1]=r[1]);let{pages:t,maxPageHeight:u,maxPageWidth:v}=this.updatePagination(m,a,b),w=this.pages;this.pages=t,this.maxPageSize=[v-c,u-d];let x=this.pagination.currentPage,y=this.pages[x];return this.pages.length<1||!y?this.visible=!1:(this.visible=!0,this.updatePositions(x),this.update()),{oldPages:w}}isCustomMarker(a,b){return a&&void 0!==b&&"string"!=typeof b}calcSymbolsEnabled(a){let{showSeriesStroke:b,marker:c}=this.item,d=!!c.enabled||!b||(a.marker.enabled??!0),e=!!(a.line&&b),f=this.isCustomMarker(d,a.marker.shape);return{markerEnabled:d,lineEnabled:e,isCustomMarker:f}}calcSymbolsLengths(a,b,c){let d,{marker:e,line:f}=this.item,{shape:g}=a.marker;if(this.isCustomMarker(b,g)){let a=new l0;a.shape=g,a.updatePath();let b=a.getBBox();d=Math.max(b.width,b.height)}return{markerLength:b?e.size:0,lineLength:c?f.length??25:0,customMarkerSize:d}}calculateMarkerWidth(){let a=0,b=!1;return this.itemSelection.each((c,d)=>{let{symbol:e}=d,{lineEnabled:f,markerEnabled:g}=this.calcSymbolsEnabled(e),{markerLength:h,lineLength:i,customMarkerSize:j=-1/0}=this.calcSymbolsLengths(e,g,f);a=Math.max(a,i,j,h),b||(b=f)}),{markerWidth:a,anyLineEnabled:b}}updateMarkerLabel(a,b,c,d){let{marker:e,paddingX:f}=this.item,{symbol:g}=b,h=f,{markerEnabled:i,isCustomMarker:j}=this.calcSymbolsEnabled(g),k=e.padding;(i||d)&&(h+=k+c);let{marker:l,line:m}=a;return l.visible=i,l.visible&&(l.shape=e.shape??g.marker.shape??"square",l.size=e.size,lL(l,this.getMarkerStyles(fy(g)))),m.visible=d,m.visible&&lL(m,this.getLineStyles(g)),a.length=c,a.spacing=k,a.isCustomMarker=j,h}updateContainer(a,b){let c=this.getContainerStyles();return this.containerNode.width=0,this.containerNode.height=0,lL(this.containerNode,c),this.containerNode.cornerRadius=c.cornerRadius,a-=2*c.strokeWidth+c.padding.left+c.padding.right,b-=2*c.strokeWidth+c.padding.top+c.padding.bottom,[a,b]}truncate(a,b,c,d,e,f){let g=!1;a.length>b&&(a=a.substring(0,b),g=!0);let h=df(a,e,c-d,g);return c7(h)?this.truncatedItems.add(f):this.truncatedItems.delete(f),h}updatePagination(a,b,c){let d=this.getOrientation(),e=Math.min(this.paginationTrackingIndex,a.length);this.pagination.orientation=d,this.pagination.translationX=0,this.pagination.translationY=0;let{pages:f,maxPageHeight:g,maxPageWidth:h,paginationBBox:i,paginationVertical:j}=this.calculatePagination(a,b,c),k=f.findIndex(a=>a.endIndex>=e);this.pagination.currentPage=aA(0,k,f.length-1);let{paddingX:l,paddingY:m}=this.item,n=g-m,o=0,p=-i.y-this.item.marker.size/2;j?p+=n+8:(o+=-i.x+(h-l)+8,p+=(n-i.height)/2),this.pagination.translationX=o,this.pagination.translationY=p,this.pagination.update(),this.pagination.updateMarkers();let q=0;return this.itemSelection.each((a,b,c)=>{c>(f[q]?.endIndex??1/0)&&q++,a.pageIndex=q}),{maxPageHeight:g,maxPageWidth:h,pages:f}}calculatePagination(a,b,c){let{paddingX:d,paddingY:e}=this.item,{placement:f}=sy(this.position),g=this.getOrientation(),h=["left","left-top","left-bottom","right","right-top","right-bottom"].includes(f),i=this.pagination.getBBox(),j=new dt(0,0,0,0),k=[],l=0,m=0,n=0,o=a=>a.width===i.width&&a.height===i.height,p=void 0!==this.maxWidth&&void 0!==this.maxHeight;do{if(n++>10){aa.warn("unable to find stable legend layout.");break}i=j;let f=b-(h?0:i.width),o=function({orientation:a,bboxes:b,maxHeight:c,maxWidth:d,itemPaddingY:e=0,itemPaddingX:f=0,forceResult:g=!1}){let h="horizontal"===a,i={max:h?d:c,fn:h?a=>a.width:a=>a.height,padding:h?f:e},j={max:h?c:d,fn:h?a=>a.height:a=>a.width,padding:h?e:f},k=0,l=[];for(;k<b.length;){let a=function(a,b,c,d,e){let f=function(a,b){let c=a.length,d=0;for(let e=0;e<c;e++)if((d+=b.fn(a[e])+b.padding)>b.max){if(c/e<2)return Math.ceil(c/2);return e}return c}(a,c);if(f<1){if(!e)return;f=1}let g=f;for(;g>=1;){let f=function(a,b,c,d,e,f){let g=[],h=0,i=0,j=[],k=[];for(let l=0;l<a.length;l++){let m=(l+c)%c;0===m&&(h+=i,i=0,j.length>0&&g.push(j),j=[]);let n=d.fn(a[l])+d.padding;k[m]=Math.max(k[m]??0,n);let o=h+(i=Math.max(i,e.fn(a[l])+e.padding)),p=!f||g.length>0;if(o>e.max&&p){j=[];break}if(k.reduce((a,b)=>a+b,0)>d.max&&!f){if(k.length<c)return k.length;return}j.push(l+b)}return j.length>0&&g.push(j),g.length>0?g:void 0}(a,b,g,c,d,e);if(null==f&&g<=1)return;if(null==f){g--;continue}if("number"==typeof f){if(f<=1)return;g=f<g&&f>1?f:g,g--;continue}return{processedBBoxCount:f.length*f[0].length,pageIndices:f}}}(b.slice(k),k,i,j,g);if(!a)return;k+=a.processedBBoxCount,l.push(a.pageIndices)}return function(a,b,c,d,e){let f=0,g=0;return{pages:a.map(a=>{"horizontal"===b&&(a=function(a){let b=[];for(let c of a[0])b.push([]);return a.forEach((a,c)=>{a.forEach((a,d)=>{b[d][c]=a})}),b}(a));let h=0,i=a.map(a=>{let b=a.map(a=>(h=Math.max(a,h),c[a])),f=0,g=0;return b.forEach(a=>{f+=a.height+d,g=Math.max(g,a.width+e)}),{indices:a,bboxes:b,columnHeight:Math.ceil(f),columnWidth:Math.ceil(g)}}),j=0,k=0;return i.forEach(a=>{j+=a.columnWidth,k=Math.max(k,a.columnHeight)}),f=Math.max(j,f),g=Math.max(k,g),{columns:i,startIndex:a[0][0],endIndex:h,pageWidth:j,pageHeight:k}}),maxPageWidth:f,maxPageHeight:g}}(l,a,b,e,f)}({orientation:g,bboxes:a,maxHeight:c-(h?i.height:0),maxWidth:f,itemPaddingY:e,itemPaddingX:d,forceResult:p});k=o?.pages??[],l=o?.maxPageWidth??0,m=o?.maxPageHeight??0;let q=k.length;if(this.pagination.visible=q>1,this.pagination.totalPages=q,this.pagination.update(),this.pagination.updateMarkers(),j=this.pagination.getBBox(),!this.pagination.visible)break}while(!o(j))return{maxPageWidth:l,maxPageHeight:m,pages:k,paginationBBox:j,paginationVertical:h}}updatePositions(a=0){let{item:{paddingY:b},itemSelection:c,pages:d}=this;if(d.length<1||!d[a])return;let{columns:e,startIndex:f,endIndex:g}=d[a],h=0,i=0,j=e.length,k=e[0].indices.length,l="horizontal"===this.getOrientation(),m=e[0].bboxes[0].height+b,n=[];c.each((a,b,c)=>{let d,o;if(c<f||c>g){a.visible=!1;return}let p=c-f;l?(d=p%j,o=Math.floor(p/j)):(d=Math.floor(p/k),o=p%k),a.visible=!0;let q=e[d];q&&(i=Math.floor(m*o),h=Math.floor(n[o]??0),n[o]=(n[o]??0)+q.columnWidth,a.translationX=h,a.translationY=i)})}updatePageNumber(a){let{itemSelection:b,group:c,pagination:d,pages:e,toggleSeries:f}=this,{startIndex:g,endIndex:h}=e[a];0===g?this.paginationTrackingIndex=0:a===e.length-1?this.paginationTrackingIndex=h:this.paginationTrackingIndex=Math.floor((g+h)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(a),this.domProxy.onPageChange({itemSelection:b,group:c,pagination:d,interactive:f}),this.ctx.updateService.update(7)}update(){let{label:{color:a}}=this.item;this.itemSelection.each((b,c)=>{b.setEnabled(c.enabled),b.color=a}),this.updateContextMenu()}updateContextMenu(){this.ctx.contextMenuRegistry.setVisible("toggle-series-visibility",this.toggleSeries),this.ctx.contextMenuRegistry.setVisible("toggle-other-series",this.toggleSeries)}getLineStyles(a){let{stroke:b,strokeOpacity:c=1,strokeWidth:d,lineDash:e}=a.line??{},f=Math.min(2,d??1);return{stroke:b,strokeOpacity:c,strokeWidth:this.item.line.strokeWidth??f,lineDash:e}}getMarkerStyles({marker:a}){let{fill:b,stroke:c,strokeOpacity:d=1,fillOpacity:e=1,strokeWidth:f,lineDash:g,lineDashOffset:h}=a,i=Math.min(2,f??1);return e2(b)&&(b.width=8,b.height=8,b.padding=1,b.strokeWidth=Math.min(2,b.strokeWidth??2)),e3(b)&&(b.fit="contain",b.width=void 0,b.height=void 0,b.repeat="no-repeat"),lJ({fill:b,stroke:c,strokeOpacity:d,fillOpacity:e,strokeWidth:this.item.marker.strokeWidth??i,lineDash:g,lineDashOffset:h},sE,sF,sG)}getContainerStyles(){let{stroke:a,strokeOpacity:b,strokeWidth:c}=this.border,{cornerRadius:d,fill:e,fillOpacity:f,padding:g}=this,h="number"==typeof g;return lJ({cornerRadius:d,fill:e,fillOpacity:f,padding:{top:h?g:g.top??0,right:h?g:g.right??0,bottom:h?g:g.bottom??0,left:h?g:g.left??0},stroke:a,strokeOpacity:b,strokeWidth:this.border.enabled?c:0},sE,sF,sG)}computePagedBBox(){let a=fh.computeChildrenBBox(this.group.excludeChildren({name:"legend-container"}));if(this.pages.length>1){let[b,c]=this.maxPageSize;a.height=Math.max(c,a.height),a.width=Math.max(b,a.width)}let{strokeWidth:b,padding:c}=this.getContainerStyles();return a.grow(c).grow(b),a}findNode(a){let{datum:b,proxyButton:c}=this.itemSelection.select(b=>b.datum?.itemId===a.itemId)[0]??{};if(void 0===b||void 0===c)throw Error(`AG Charts - Missing required properties { datum: ${b}, proxyButton: ${JSON.stringify(c)} }`);return{datum:b,proxyButton:c}}contextToggleVisibility(a){let{datum:b,proxyButton:c}=this.findNode(a);this.doClick(a.event,b,c)}contextToggleOtherSeries(a){this.doDoubleClick(a.event,this.findNode(a).datum)}onContextClick(a,b){let{sourceEvent:c}=a,d=b.datum;this.preventHidingAll&&this.contextMenuDatum?.enabled&&1>=this.getVisibleItemCount()?this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!1:this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!0;let e=this.ctx.chartService.series.length>1&&this.ctx.chartService.series[0]?.getLegendData("category")[0]?.hideToggleOtherSeries!==!0;this.ctx.contextMenuRegistry.setVisible("toggle-other-series",e);let{offsetX:f,offsetY:g}=c,{x:h,y:i}=ff.toCanvasPoint(b,f,g);this.ctx.contextMenuRegistry.dispatchContext("legend-item",{widgetEvent:a,canvasX:h,canvasY:i},{legendItem:d})}onClick(a,b,c){this.doClick(a,b,c)&&a.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(a=>a.getLegendData("category")).filter(a=>a.enabled).length}doClick(a,b,c){let{listeners:{legendItemClick:d},ctx:{chartService:e,highlightManager:f},preventHidingAll:g,toggleSeries:h}=this;if(!b)return!1;let{legendType:i,seriesId:j,itemId:k,enabled:l,legendItemName:m}=b,n=e.series.find(a=>a.id===j);if(!n)return!1;let o=l,p=sw("click",b,a);return d&&fn([n.properties,this.ctx.chartService],d,p.apiEvent),!!p.defaultPrevented||(h&&(o=!l,g&&!o&&2>this.getVisibleItemCount()&&(o=!0),c.setChecked(o),this.ctx.eventsHub.emit("legend:item-click",{legendType:i,series:n,itemId:k,enabled:o,legendItemName:m})),o?f.updateHighlight(this.id,{series:n,itemId:k,datum:void 0,datumIndex:void 0,legendItemName:m}):f.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0,skipAnimations:b.skipAnimations??!1}),!0)}onDoubleClick(a,b){this.doDoubleClick(a,b)&&a.preventDefault()}doDoubleClick(a,b){let{listeners:{legendItemDoubleClick:c},ctx:{chartService:d},toggleSeries:e}=this;if(!b)return!1;let{legendType:f,id:g,itemId:h,seriesId:i}=b,j=d.series.find(a=>a.id===g);if(!j)return!1;let k=sw("dblclick",b,a);if(c&&fn([j.properties,this.ctx.chartService],c,k.apiEvent),k.defaultPrevented)return!0;if(e){let a=d.series.flatMap(a=>a.getLegendData("category")),b=0,c=new Set;for(let d of a)d.enabled&&(b+=1,null!=d.legendItemName&&c.add(d.legendItemName));c.size>0&&(b=c.size);let e=a.find(a=>a.itemId===h&&a.seriesId===i);this.ctx.eventsHub.emit("legend:item-double-click",{legendType:f,series:j,itemId:h,numVisibleItems:b,enabled:e?.enabled??!1,legendItemName:e?.legendItemName})}return this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(a,b){let c;return a instanceof FocusEvent?c=ff.toCanvas(b).computeCenter():(a.preventDefault(),c=ff.toCanvasPoint(b,a.offsetX,a.offsetY)),{canvasX:c.x,canvasY:c.y,showArrow:!1}}onHover(a,b){if(!this.enabled)throw Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(b.pageIndex);let c=b.datum,d=c?this.ctx.chartService.series.find(a=>a.id===c?.id):void 0;if(c&&this.truncatedItems.has(c.itemId??c.id)){let d=this.toTooltipMeta(a,b);this.ctx.tooltipManager.updateTooltip(this.id,d,[{type:"structured",title:this.getItemLabel(c)}])}else this.ctx.tooltipManager.removeTooltip(this.id);c?.enabled&&d?this.updateHighlight({series:d,itemId:c?.itemId,datum:void 0,datumIndex:void 0,legendItemName:c?.legendItemName}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(a){this.ctx.interactionManager.isState(32)?this.ctx.highlightManager.updateHighlight(this.id,a):this.ctx.interactionManager.isState(2)&&(this.pendingHighlightDatum=a,this.ctx.animationManager.onBatchStop(()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)}))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(a){let b=this.positionLegendScene(a);this.positionLegendDOM(b)}positionLegendScene(a){if(!this.enabled||!this.data.length)return;let{placement:b,floating:c,xOffset:d,yOffset:e}=sy(this.position),f=c?new dt(0,0,a.width,a.height):a.layoutBox,{x:g,y:h,width:i,height:j}=f,[k,l]=this.calculateLegendDimensions(f),{oldPages:m}=this.calcLayout(k,l),n=this.computePagedBBox();if(this.visible){let a,k,l=function(a){},m=this.spacing;switch(b){case"top":a=(i-n.width)/2,k=0;break;case"bottom":a=(i-n.width)/2,k=j-n.height;break;case"right":a=i-n.width,k=(j-n.height)/2;break;case"left":a=0,k=(j-n.height)/2;break;case"top-right":case"right-top":a=i-n.width,k=0;break;case"top-left":case"left-top":a=0,k=0;break;case"bottom-right":case"right-bottom":a=i-n.width,k=j-n.height;break;case"bottom-left":case"left-bottom":a=0,k=j-n.height;break;default:l(b)}if(!c){let a,c;switch(b){case"top":case"top-right":case"top-left":a=n.height+m,c="top";break;case"bottom":case"bottom-right":case"bottom-left":a=n.height+m,c="bottom";break;case"left":case"left-top":case"left-bottom":a=n.width+m,c="left";break;case"right":case"right-top":case"right-bottom":a=n.width+m,c="right";break;default:l(b)}f.shrink(a,c)}a+=d,k+=e,this.group.translationX=Math.floor(g+a-n.x),this.group.translationY=Math.floor(h+k-n.y),this.containerNode.x=n.x,this.containerNode.y=n.y,this.containerNode.width=n.width,this.containerNode.height=n.height}return m}positionLegendDOM(a){let{ctx:b,itemSelection:c,pagination:d,pages:e,toggleSeries:f,group:g,listeners:{legendItemClick:h,legendItemDoubleClick:i}}=this,j=this.visible&&this.enabled;this.domProxy.update({visible:j,interactive:f||null!=i||null!=h,ctx:b,itemSelection:c,group:g,pagination:d,oldPages:a,newPages:e,datumReader:this,itemListener:this})}calculateLegendDimensions(a){let b,c,{width:d,height:e}=a,{placement:f}=sy(this.position),g=d/e;switch(f){case"top":case"top-left":case"top-right":case"bottom":case"bottom-left":case"bottom-right":{let a=g<1?Math.min(.5,1/g*.2):.2;b=this.maxWidth?Math.min(this.maxWidth,d):d,c=this.maxHeight?Math.min(this.maxHeight,e):Math.round(e*a);break}case"left":case"left-top":case"left-bottom":case"right":case"right-top":case"right-bottom":{let a=g>1?Math.min(.5,.25*g):.25;b=this.maxWidth?Math.min(this.maxWidth,d):Math.round(d*a),c=this.maxHeight?Math.min(this.maxHeight,e):e}}return[b,c]}cachedCallWithContext(a,...b){let{callbackCache:c,chartService:d}=this.ctx;return c.call([this,d],a,...b)}};sH.className="Legend",dl([ey],sH.prototype,"toggleSeries",2),dl([ey],sH.prototype,"pagination",2),dl([ey],sH.prototype,"item",2),dl([ey],sH.prototype,"listeners",2),dl([dG((a,b,c)=>{if(a.updateGroupVisibility(),b===c)return;let{ctx:{legendManager:d,stateManager:e}}=a;!1===c&&!0===b&&e.restoreState(d)}),ey],sH.prototype,"enabled",2),dl([ey],sH.prototype,"position",2),dl([ey],sH.prototype,"maxWidth",2),dl([ey],sH.prototype,"maxHeight",2),dl([ey],sH.prototype,"reverseOrder",2),dl([ey],sH.prototype,"orientation",2),dl([ey],sH.prototype,"preventHidingAll",2),dl([ey],sH.prototype,"border",2),dl([ey],sH.prototype,"cornerRadius",2),dl([ey],sH.prototype,"fill",2),dl([ey],sH.prototype,"fillOpacity",2),dl([ey],sH.prototype,"padding",2),dl([ey],sH.prototype,"spacing",2),dl([ey],sH.prototype,"xOffset",2),dl([ey],sH.prototype,"yOffset",2);var sI={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:a=>new sH(a),packageType:"community",removable:"standalone-only"},sJ=class extends ez{constructor(a){super(),this.ctx=a,this.rectNode=new f9,this.border=new sq(this.rectNode),this.cornerRadius=0,this.padding=0,this.cleanup=new cQ,this.node=this.createNode(),this.node.append([this.rectNode]),this.rectNode.fill=void 0,this.cleanup.register(a.scene.attachNode(this.node),a.eventsHub.on("layout:complete",a=>this.onLayoutComplete(a)))}destroy(){this.cleanup.flush()}getPadding(){let{border:a,padding:b}=this,c=a.enabled?a.strokeWidth:0;if("number"==typeof b){let a=b+c;return{top:a,right:a,bottom:a,left:a}}return{top:(b.top??0)+c,right:(b.right??0)+c,bottom:(b.bottom??0)+c,left:(b.left??0)+c}}createNode(){return new fh({name:"series-area-container",zIndex:4})}onLayoutComplete(a){let{x:b,y:c,width:d,height:e}=a.series.paddedRect;this.rectNode.x=b,this.rectNode.y=c,this.rectNode.width=d,this.rectNode.height=e}};dl([ey],sJ.prototype,"border",2),dl([ey],sJ.prototype,"clip",2),dl([fI("rectNode","cornerRadius"),ey],sJ.prototype,"cornerRadius",2),dl([ey],sJ.prototype,"padding",2);var sK={type:"root",optionsKey:"seriesArea",packageType:"community",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:a=>new sJ(a)};function sL(a,b,c,d,e){let f=(d,e,f,g)=>{c.animate({id:`${a}_${b}_${e.id}_${d}`,groupId:a,from:+!!f,to:1,ease:hP,collapsable:f,onUpdate(a,b){b&&"removed"!==d||(e.path.clear(!0),g(a,e),e.checkPathDirty())},onStop(){"added"===d&&(e.path.clear(!0),g(1,e),e.checkPathDirty())},phase:jv[d]})},g=new f6,h=a=>(g.resetPathDirty(),a(0,g),g.resetPathDirty(),a(1,g),g.checkPathDirty(),g.isPathDirty()),{addPhaseFn:i,updatePhaseFn:j,removePhaseFn:k}=e;for(let a of d)c.isSkipped()||(f("removed",a,!h(k),k),f("updated",a,!h(j),j)),f("added",a,!h(i),i)}function sM(a,b,c,d,e,f){if(a.visible&&d.itemStyler){let g=e||a.isSeriesHighlighted(f),h=a.getHighlightStateString(f,e||null!=b&&f?.series===b.series&&f?.datumIndex===b.datumIndex,b?.datumIndex),i={border:d.border,color:d.color,cornerRadius:d.cornerRadius,datum:b?.datum,enabled:d.enabled,fill:d.fill,fillOpacity:d.fillOpacity,fontFamily:d.fontFamily,fontSize:d.fontSize,fontStyle:d.fontStyle,fontWeight:d.fontWeight,itemId:b?.itemId,seriesId:a.id,padding:d.padding,highlighted:g,highlightState:h};return dM(a.ctx.optionsGraphService.resolvePartial(["series",`${a.declarationOrder}`,"label"],a.cachedCallWithContext(d.itemStyler,{...c,...i}),{pick:!1})??{},i)}return d}function sN(a,b,c,d,e,f,g){if(a.visible&&d.enabled&&e){let h=sM(a,b.datum,c,d,f,g);b.visible=!0,b.x=e.x,b.y=e.y,b.text=e.text,b.fill=h.color,b.setAlign(e),b.setFont(h),b.setBoxing(h)}else b.visible=!1}var sO={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function sP({isUpward:a,isVertical:b,placement:c,spacing:d=0,rect:e}){let f=e.x+e.width/2,g=e.y+e.height/2,h="center",i="middle";if("inside-center"!==c){let j=(a?1:-1)*(b?-1:1),{direction:k,textAlignment:l}=sO[c],m=(k+1)*.5;b?(g=(a?e.y+e.height:e.y)+e.height*j*m+d*l*j,i=l===j?"top":"bottom"):(f=(a?e.x:e.x+e.width)+e.width*j*m+d*l*j,h=l===j?"left":"right")}return{x:f,y:g,textAlign:h,textBaseline:i}}function sQ({id:a},b,c,...d){for(let a of d)a.cleanup();jx(a,b,c,d,{opacity:0},{opacity:1},{phase:"trailing"})}function sR({id:a},b,c,...d){jx(a,b,c,d,{opacity:1},{opacity:0},{phase:"remove"})}function sS(a){return{opacity:1}}function sT(a,b,c,d){if(Number.isFinite(b)){let e=d?.smallestKeyInterval;return iD(Math.trunc(1/(null!=e?e/(c-b):function a(b,c,d,e,f,g,h){let i,j=0;for(;j<100&&null==b[e]&&e<f;)e+=1,j+=1;for(;j<100&&null==b[f]&&f>e;)f-=1,j+=1;if(j>=100||e>=f)return g;let k=Number.isFinite(c)?sW(b[f],c,d)-sW(b[e],c,d):f/b.length-e/b.length;if(0===k||!Number.isFinite(k))return g;let l=Math.abs(k)/(f-e);if(i=h<3||!(h>20)&&l<=g,g=Math.min(g,l),!i)return g;let m=Math.floor((e+f)/2);return Math.min(a(b,c,d,e,m,g,h+1),a(b,c,d,m+1,f,g,h+1),g)}(a,b,c,0,a.length-1,1/(a.length-1),0))))>>3}{let b=Math.ceil(Math.log2(a.length))-1;return b=Math.min(Math.max(b,0),24),2**b|0}}function sU(a,b){switch(a){case"category":return[NaN,NaN];case"number":case"time":case"ordinal-time":case"unit-time":{let a=1/0,c=-1/0;for(let d of b){let b=Number(d);a=Math.min(a,b),c=Math.max(c,b)}return[a,c]}case"color":case"log":case"mercator":return[0,0]}}function sV(a,b){return a/b}function sW(a,b,c){return(a.valueOf()-b)/(c-b)}function sX(a,b){return 4*Math.min(Math.floor(a*b),b-1)|0}function sY(a,b,c,d,e,f,{positive:g}={}){let h=new Int32Array(4*f).fill(-1),i=new Float64Array(4*f).fill(NaN),j=Number.isFinite(d)&&Number.isFinite(e),k=a.length;for(let l=0;l<a.length;l+=1){let m=a[l];if(null==m)continue;let n=b[l],o=null!=n?n.valueOf():NaN;if(null!=g&&o>=0!==g)continue;let p=j?sW(m,d,e):l/k,q=sX(p,f),r=c[l],s=null!=r?r.valueOf():NaN,t=-1===h[q+0];(t||p<i[q+0])&&(h[q+0]=l,i[q+0]=p),(t||p>i[q+1])&&(h[q+1]=l,i[q+1]=p),!Number.isNaN(s)&&(t||s<i[q+2])&&(h[q+2]=l,i[q+2]=s),!Number.isNaN(o)&&(t||o>i[q+3])&&(h[q+3]=l,i[q+3]=o)}return{indexData:h,valueData:i}}function sZ(a,b,c,{inPlace:d=!1}={}){let e=c/2|0,f=d?a:new Int32Array(4*e),g=d?b:new Float64Array(4*e);for(let c=0;c<e;c+=1){let d=4*c|0,e=2*d|0,h=e+4|0,i=-1===a[h+0],j=i||b[e+0]<b[h+0]?e:h;f[d+0]=a[j+0],g[d+0]=b[j+0];let k=i||b[e+1]>b[h+1]?e:h;f[d+1]=a[k+1],g[d+1]=b[k+1];let l=i||b[e+2]<b[h+2]?e:h;f[d+2]=a[l+2],g[d+2]=b[l+2];let m=i||b[e+3]>b[h+3]?e:h;f[d+3]=a[m+3],g[d+3]=b[m+3]}return{maxRange:e,indexData:f,valueData:g}}function s$(a,b,c,d,e,f){let g=a[f];if(null==g)return -1;let h=sX(Number.isFinite(b)?sW(g,b,c):f/a.length,e);return f===d[h+0]||f===d[h+1]||f===d[h+2]||f===d[h+3]?h:-1}var s_=class extends ez{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(a){this._dirty=!1}isDirty(){return this._dirty}onChangeDetection(a){this.markDirty()}},s0=class extends s_{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};dl([ey,d$()],s0.prototype,"enabled",2),dl([ey,d$()],s0.prototype,"color",2),dl([ey,d$()],s0.prototype,"xOffset",2),dl([ey,d$()],s0.prototype,"yOffset",2),dl([ey,d$()],s0.prototype,"blur",2);var s1=class extends s_{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){let{size:a,shape:b,fill:c,fillOpacity:d,stroke:e,strokeWidth:f,strokeOpacity:g,lineDash:h,lineDashOffset:i}=this;return{size:a,shape:b,fill:c,fillOpacity:d,stroke:e,strokeWidth:f,strokeOpacity:g,lineDash:h,lineDashOffset:i}}getDiameter(){return this.size+this.strokeWidth}};dl([ey,d$()],s1.prototype,"enabled",2),dl([ey,d$({equals:dZ})],s1.prototype,"shape",2),dl([ey,d$()],s1.prototype,"size",2),dl([ey,d$({equals:dK})],s1.prototype,"fill",2),dl([ey,d$()],s1.prototype,"fillOpacity",2),dl([ey,d$()],s1.prototype,"stroke",2),dl([ey,d$()],s1.prototype,"strokeWidth",2),dl([ey,d$()],s1.prototype,"strokeOpacity",2),dl([ey],s1.prototype,"lineDash",2),dl([ey],s1.prototype,"lineDashOffset",2),dl([ey,d$({equals:dZ})],s1.prototype,"itemStyler",2);var s2=class extends ez{constructor(){super(...arguments),this.enabled=!1}};dl([ey],s2.prototype,"enabled",2);var s3=class extends ez{constructor(){super(...arguments),this.interaction=new s2,this.position=new mf,this.range=void 0,this.class=void 0}formatTooltip(a,b,c){let d=null==this.renderer?void 0:fn(a,this.renderer,c);return"string"==typeof d?{type:"raw",rawHtmlString:d}:null!=d?{type:"structured",...b,...d}:{type:"structured",...b}}};function s4(){return new s3}dl([ey],s3.prototype,"enabled",2),dl([ey],s3.prototype,"showArrow",2),dl([ey],s3.prototype,"renderer",2),dl([ey],s3.prototype,"interaction",2),dl([ey],s3.prototype,"position",2),dl([ey],s3.prototype,"range",2),dl([ey],s3.prototype,"class",2);var s5=class extends f6{constructor(){super(...arguments),this.segmentPath=new f6}drawPath(a){if(!this.segments||0===this.segments.length)return void super.drawPath(a);a.save();let b=new Path2D;for(let c of(s6(b,{x0:0,y0:0,x1:a.canvas.width,y1:a.canvas.height},!1),this.segments))s6(b,c.clipRect);a.clip(b),super.drawPath(a),a.restore();let{segmentPath:c}=this;for(let{clipRect:b,fill:d,stroke:e,...f}of(c.setProperties({opacity:this.opacity,visible:this.visible,lineCap:this.lineCap,lineJoin:this.lineJoin,pointerEvents:this.pointerEvents}),this.segments)){a.save(),c.path=this.path,c.setProperties(f),c.fill=null!=this.fill?d:"none",c.stroke=null!=this.stroke?e:"none";let g=new Path2D;s6(g,b),a.clip(g),c.drawPath(a),a.restore()}}};function s6(a,{x0:b,y0:c,x1:d,y1:e},f=!0){let g=Math.min(b,d),h=Math.min(c,e),i=Math.max(b,d),j=Math.max(c,e);a.moveTo(g,h),f?(a.lineTo(i,h),a.lineTo(i,j),a.lineTo(g,j)):(a.lineTo(g,j),a.lineTo(i,j),a.lineTo(i,h)),a.closePath()}dl([d$(void 0)],s5.prototype,"segments",2);var s7=class extends fk{constructor(){super(...arguments),this.segments=[],this.scalablePath=new(fd(f6))}renderInContext(a){if(!this.visible)return;let{ctx:b}=a;if(!this.segments||this.segments?.length===0)return super.renderInContext(a);b.save();let c=new Path2D;for(let a of(s6(c,{x0:0,y0:0,x1:b.canvas.width,y1:b.canvas.height},!1),this.segments))s6(c,a.clipRect);for(let d of(b.clip(c),this.children()))d.visible&&d.render(a);b.restore();let{scalablePath:d}=this;for(let{clipRect:c,...e}of this.segments){b.save();let f=new Path2D;for(let g of(s6(f,c),b.clip(f),d.setProperties(e),this.children()))g.visible&&g instanceof f6&&(d.path=g.path,d.setProperties({opacity:g.opacity,lineCap:g.lineCap,lineJoin:g.lineJoin,..."scalingX"in g&&"scalingY"in g&&"scalingCenterX"in g&&"scalingCenterY"in g&&{scalingX:g.scalingX,scalingY:g.scalingY,scalingCenterX:g.scalingCenterX,scalingCenterY:g.scalingCenterY}}),d.render(a));b.restore()}}};dl([d$(void 0)],s7.prototype,"segments",2);var s8=class{constructor(a,b,c){this.root=new tb(a,b,c)}clear(a){this.root.clear(a)}addValue(a,b){this.root.addElem({hitTester:a,value:b,distanceSquared:(b,c)=>a.distanceSquared(b,c)})}find(a,b){let c={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(a,b,c),c.best}},s9=class{constructor(a,b,c,d){this.nw=a,this.ne=b,this.sw=c,this.se=d}addElem(a){this.nw.addElem(a),this.ne.addElem(a),this.sw.addElem(a),this.se.addElem(a)}find(a,b,c){this.nw.find(a,b,c),this.ne.find(a,b,c),this.sw.find(a,b,c),this.se.find(a,b,c)}},ta=class{constructor(a,b,c){this.capacity=a,this.maxdepth=b,this.boundary=c??dt.NaN,this.elems=[],this.subdivisions=void 0}clear(a){this.elems.length=0,this.boundary=a,this.subdivisions=void 0}addElem(a){this.addCondition(a)&&(void 0===this.subdivisions?0===this.maxdepth||this.elems.length<this.capacity?this.elems.push(a):this.subdivide(a):this.subdivisions.addElem(a))}find(a,b,c){this.findCondition(a,b,c)&&(void 0===this.subdivisions?this.findAction(a,b,c):this.subdivisions.find(a,b,c))}subdivide(a){for(let a of(this.subdivisions=this.makeSubdivisions(),this.elems))this.subdivisions.addElem(a);this.subdivisions.addElem(a),this.elems.length=0}makeSubdivisions(){let{x:a,y:b,width:c,height:d}=this.boundary,{capacity:e}=this,f=this.maxdepth-1,g=c/2,h=d/2,i=new dt(a,b,g,h),j=new dt(a+g,b,g,h),k=new dt(a,b+h,g,h),l=new dt(a+g,b+h,g,h);return new s9(this.child(e,f,i),this.child(e,f,j),this.child(e,f,k),this.child(e,f,l))}},tb=class a extends ta{addCondition(a){let{x:b,y:c}=a.hitTester.midPoint;return this.boundary.containsPoint(b,c)}findCondition(a,b,c){let{best:d}=c;return 0!==d.distanceSquared&&this.boundary.distanceSquared(a,b)<d.distanceSquared}findAction(a,b,c){let d=dr(a,b,this.elems,c.best.distanceSquared);void 0!==d.nearest&&d.distanceSquared<c.best.distanceSquared&&(c.best=d)}child(b,c,d){return new a(b,c,d)}},tc=class extends lR{constructor({clipFocusBox:a,categoryKey:b,...c}){super(c),this.categoryKey=b,this.clipFocusBox=a??!0}dataCount(){return this.processedData?.dataSources?.get(this.id)?.length??0}getScaleInformation({xScale:a,yScale:b}){return{isContinuousX:iG.is(a),isContinuousY:iG.is(b),xScaleType:a?.type,yScaleType:b?.type}}getModulePropertyDefinitions(){let a=this.axes.x?.scale,b=this.axes.y?.scale;return this.moduleMap.mapModules(c=>c.getPropertyDefinitions(this.getScaleInformation({xScale:a,yScale:b}))).flat()}async requestDataModel(a,b,c){c.props.push(...this.getModulePropertyDefinitions());let{dataModel:d,processedData:e}=await a.request(this.id,b??[],c);return this.dataModel=d,this.processedData=e,this.events.emit("data-processed",{dataModel:d,processedData:e}),{dataModel:d,processedData:e}}isProcessedDataAnimatable(){let{processedData:a,ctx:b}=this;if(!a)return!1;let c=this.getNodeData();if(null!=c&&c.length>b.animationManager.maxAnimatableItems)return!1;let d=a.reduced?.animationValidation;if(!d)return!0;let{orderedKeys:e,uniqueKeys:f}=d;return e&&f}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(a){let b=this.getNodeData();if(void 0===b||0===b.length)return;let c=this.computeFocusDatumIndex(a,b);if(void 0===c)return;let{clipFocusBox:d}=this,e=b[c],f={...a,datumIndex:c},g=this.computeFocusBounds(f);if(void 0!==g)return{bounds:g,clipFocusBox:d,datum:e,datumIndex:c}}pickNodesExactShape(a){let b=super.pickNodesExactShape(a);return b.sort((a,b)=>a.datumIndex-b.datumIndex),b}isDatumEnabled(a,b){let{missing:c=!1,enabled:d=!0,focusable:e=!0}=a[b];return!c&&d&&e}computeFocusDatumIndex(a,b){let c,d=(a,c)=>{for(;a>=0&&!this.isDatumEnabled(b,a);)a+=c;return -1===a?void 0:a},e=(a,c)=>{for(;a<b.length&&!this.isDatumEnabled(b,a);)a+=c;return a===b.length?void 0:a},f=aA(0,a.datumIndex,b.length-1);return void 0!==(c=a.datumIndexDelta<0?d(f,a.datumIndexDelta):a.datumIndexDelta>0?e(f,a.datumIndexDelta):e(f,1)??d(f,-1))?c:0===a.datumIndexDelta?void 0:a.datumIndex-a.datumIndexDelta}dataModelPropertyIsKey(a){let{processedData:b}=this;return!!b&&b.defs.keys.some(b=>b.id===a&&b.idsMap?.get(this.id)?.has(a)===!0)}keysOrValues(a){let{dataModel:b,processedData:c}=this;return b&&c?this.dataModelPropertyIsKey(a)?b.resolveKeysById(this,a,c):b.resolveColumnById(this,a,c):[]}sortOrder(a){let{dataModel:b,processedData:c}=this;if(b&&c)return this.dataModelPropertyIsKey(a)?b.getKeySortOrder(this,a,c):b.getColumnSortOrder(this,a,c)}getCategoryKey(){return this.categoryKey}getCategoryValue(a){let{processedData:b,dataModel:c}=this,d=this.getCategoryKey();if(b&&c&&d)return b.invalidData?.get(this.id)?.[a]?void 0:this.keysOrValues(d)[a]}datumIndexForCategoryValue(a){let{processedData:b,dataModel:c}=this,d=this.getCategoryKey();if(!b||!c||!d)return;a=a.valueOf();let e=b.invalidData?.get(this.id),f=this.keysOrValues(d);for(let b=0;b<f.length;b+=1){if(e?.[b]===!0)continue;let c=f[b]?.valueOf();if(dK(a,c))return b}}},td={x:["xKey"],y:["yKey"]},te={x:["xName"],y:["yName"]},tf=class extends lN{constructor(a,b,c,d){super(a,b,c,d),this.xKey=d.properties.xKey,this.yKey=d.properties.yKey}},tg=class extends im{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1,this.segmentation=new ih}};dl([ey],tg.prototype,"legendItemName",2),dl([ey],tg.prototype,"pickOutsideVisibleMinorAxis",2),dl([ey],tg.prototype,"segmentation",2);var th=class extends tc{constructor({pathsPerSeries:a=["path"],pathsZIndexSubOrderOffset:b=[],datumSelectionGarbageCollection:c=!0,animationAlwaysUpdateSelections:d=!1,segmentedDataNodes:e=!0,animationResetFns:f,propertyKeys:g,propertyNames:h,...i}){if(super({propertyKeys:g,propertyNames:h,canHaveAxes:!0,...i}),this.NodeEvent=tf,this.dataNodeGroup=this.contentGroup.appendChild(new s7({name:`${this.id}-series-dataNodes`,zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new fk({name:`${this.id}-series-labels`})),this.labelSelection=jA.select(this.labelGroup,gb),this.highlightSelection=jA.select(this.highlightGroup,()=>this.nodeFactory()),this.annotationSelections=new Set,this.seriesBelowStackContext=void 0,this.debug=dw.create(),!g||!h)throw Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:a,pathsZIndexSubOrderOffset:b,propertyKeys:g,propertyNames:h,animationResetFns:f,animationAlwaysUpdateSelections:d,datumSelectionGarbageCollection:c,segmentedDataNodes:e},this.paths=a.map(a=>new s5({name:`${this.id}-${a}`})),this.datumSelection=jA.select(this.dataNodeGroup,()=>this.nodeFactory(),c),this.animationState=new jH("empty",{empty:{update:{target:"ready",action:a=>this.animateEmptyUpdateReady(a)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:a=>this.animateReadyHighlight(a),resize:a=>this.animateReadyResize(a),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:a=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(a):this.animateWaitingUpdateReady(a)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:a=>this.resetAllAnimation(a),reset:"empty"},clearing:{update:{target:"empty",action:a=>this.animateClearingUpdateEmpty(a)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){return this.contextNodeData?.nodeData}attachSeries(a,b,c){super.attachSeries(a,b,c),this.attachPaths(this.paths)}detachSeries(a,b,c){super.detachSeries(a,b,c),this.detachPaths(this.paths)}updatedDomains(){this.animationState.transition("updateData")}attachPaths(a){for(let b of a)this.contentGroup.appendChild(b)}detachPaths(a){for(let b of a)this.contentGroup.removeChild(b)}renderToOffscreenCanvas(){let a=this.getNodeData();return null!=a&&a.length>100}resetAnimation(a){"initial"===a?this.animationState.transition("reset"):"ready"===a?this.animationState.transition("skip"):"disabled"===a&&this.animationState.transition("disable")}addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",a=>this.onLegendItemClick(a)),this.ctx.eventsHub.on("legend:item-double-click",a=>this.onLegendItemDoubleClick(a)))}destroy(){super.destroy(),this._contextNodeData=void 0}isSeriesHighlighted(a){let{series:b,legendItemName:c}=a??{},{legendItemName:d}=this.properties;return b===this||null!=d&&d===c}strokewidthChange(){let a=("strokeWidth"in this.properties&&this.properties.strokeWidth)??0,b=this.properties.highlight.highlightedSeries.strokeWidth??a,c=this.properties.highlight.highlightedItem?.strokeWidth??a;return a>c||b>c}update({seriesRect:a}){let{_contextNodeData:b}=this,c=this.checkResize(a),d=this.updateHighlightSelection();this.contentGroup.batchedUpdate(()=>{let a=this.updateSelections(),b=this.contextNodeData?.segments;this.opts.segmentedDataNodes?this.dataNodeGroup.segments=b??this.dataNodeGroup.segments:this.dataNodeGroup.segments=void 0,this.updateNodes(d,c||a)});let e=this.getAnimationData(a,b);e&&(c&&this.animationState.transition("resize",e),this.animationState.transition("update",e))}createStackContext(){}updateSelections(){var a;let b=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!this.visible&&b)return!1;let{nodeDataRefresh:c}=this;if(!c&&!this.isPathOrSelectionDirty())return!1;if(c){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();let b=this.isProcessedDataAnimatable();this._contextNodeData&&((a=this._contextNodeData).animationValid??(a.animationValid=b));let{dataModel:c,processedData:d}=this;void 0!==c&&void 0!==d&&this.events.emit("data-update",{dataModel:c,processedData:d}),this.updateSeriesSelections()}return c}updateSeriesSelections(){let{datumSelection:a,labelSelection:b,paths:c}=this,d=this._contextNodeData;if(!d)return;let{nodeData:e,labelData:f,itemId:g}=d;this.updatePaths({itemId:g,contextData:d,paths:c}),this.datumSelection=this.updateDatumSelection({nodeData:e,datumSelection:a}),this.labelGroup.batchedUpdate(()=>{this.labelSelection=this.updateLabelSelection({labelData:f,labelSelection:b})??b})}getShapeFillBBox(){let{axes:a}=this,b=a.x,c=a.y,[d,e]=iB(b?.range??[0,1]),[f,g]=iB(c?.range??[0,1]),h=this.getSeriesDomain("x"),i=[b?.scale.convert(h.at(0)),b?.scale.convert(h.at(-1))],j=this.getSeriesDomain("y"),k=[c?.scale.convert(j.at(0)),c?.scale.convert(j.at(-1))],[l,m]=iB(i),[n,o]=iB(k);return{axis:new dt(d,f,e-d,g-f),series:new dt(l,n,m-l,o-n)}}updateNodes(a,b){let{highlightSelection:c,datumSelection:d}=this,e=!this.ctx.animationManager.isSkipped(),f=this.visible&&null!=this._contextNodeData;this.contentGroup.visible=e||f,this.highlightGroup.visible=(e||f)&&a,this.updateDatumStyles({datumSelection:c,isHighlight:!0}),this.updateDatumNodes({datumSelection:c,isHighlight:!0}),this.animationState.transition("highlight",c);let{dataNodeGroup:g,labelSelection:h,paths:i,labelGroup:j}=this,{itemId:k}=this.contextNodeData??{};if(this.updatePathNodes({itemId:k,paths:i,visible:f,animationEnabled:e}),g.visible=e||f,j.visible=f,!g.visible)return;this.hasItemStylers()&&this.updateDatumStyles({datumSelection:d,isHighlight:!1});let l=this.strokewidthChange()||this.hasChangesOnHighlight;(b||l)&&(this.updateDatumNodes({datumSelection:d,isHighlight:!1}),this.usesPlacedLabels||this.labelGroup.batchedUpdate(()=>{this.updateLabelNodes({labelSelection:h,isHighlight:!1})}))}getHighlightData(a,b){return b?[{...b}]:void 0}updateHighlightSelection(){let{highlightSelection:a,_contextNodeData:b}=this;if(!b)return!1;let c=this.ctx.highlightManager?.getActiveHighlight(),d=this.isSeriesHighlighted(c)&&c?.datum?c:void 0;if(null==d)return!1;let{nodeData:e}=b,f=this.getHighlightData(e,d);return this.highlightSelection=this.updateHighlightSelectionItem({items:f,highlightSelection:a}),!0}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(let{node:a}of this.datumSelection)!0!==a.datum.missing&&(yield a)}getQuadTree(){if(void 0===this.quadtree){let{width:a,height:b}=this.ctx.scene.canvas,c=new dt(0,0,a,b);this.quadtree=new s8(100,10,c),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(a){}pickNodeDataExactShape(a){let{x:b,y:c}=a,{dataNodeGroup:d}=this,e=d.pickNodes(b,c).filter(a=>!0!==a.datum.missing);if(0!==e.length)return e.map(a=>a.datum)}pickModulesExactShape(a){for(let b of this.moduleMap.modules()){let{datum:c}=b.pickNodeExact(a)??{};if(null!=c&&c?.missing!==!0)return[c]}}pickNodesExactShape(a){let b=super.pickNodesExactShape(a);return 0!==b.length?b:this.pickNodeDataExactShape(a)??this.pickModulesExactShape(a)??[]}pickNodeDataClosestDatum(a){let b,{x:c,y:d}=a,{axes:e,_contextNodeData:f}=this;if(!f)return;let g=e.x,h=e.y,i=1/0;for(let a of f.nodeData){let{point:{x:e=NaN,y:f=NaN}={}}=a;if(isNaN(e)||isNaN(f)||!(g?.inRange(e)&&h?.inRange(f)))continue;let j=Math.max((c-e)**2+(d-f)**2,0);j<i&&(i=j,b=a)}if(null!=i)return{datum:b,distance:Math.sqrt(i)}}pickModulesClosestDatum(a){let b,c=1/0;for(let d of this.moduleMap.modules()){let e=d.pickNodeNearest(a);void 0!==e&&e.distanceSquared<c&&(c=e.distanceSquared,b=e.datum)}if(null!=c)return{datum:b,distance:Math.sqrt(c)}}pickNodeClosestDatum(a){let b,c=1/0,d=this.pickNodeDataClosestDatum(a);null!=d&&d.distance<c&&(c=d.distance,b=d.datum);let e=this.pickModulesClosestDatum(a);if(null!=e&&e.distance<c&&(c=e.distance,b=e.datum),b){let a=Math.max(c-(b.point?.size??0)/2,0);return{datum:b,distance:a}}}pickNodeMainAxisFirst(a,b){let c,{x:d,y:e}=a,{axes:f,_contextNodeData:g}=this,{pickOutsideVisibleMinorAxis:h}=this.properties;if(!g)return;let i=f.x,j=f.y;if(null==i||null==j)return;let k=[i,j].filter(a=>a.isCategoryLike()).map(a=>a.direction);if(b&&0===k.length)return;let[l="x"]=k,m=[d,e];"x"!==l&&m.reverse();let n=[1/0,1/0];for(let a of g.nodeData){let{x:b=NaN,y:d=NaN}=a.point??a.midPoint??{};if(isNaN(b)||isNaN(d)||!0===a.missing)continue;let e=[i?.inRange(b,1),j?.inRange(d,1)];if("x"!==l&&e.reverse(),!e[0]||!h&&!e[1])continue;let f=[b,d];"x"!==l&&f.reverse();let g=!0;for(let a=0;a<f.length;a++){let b=Math.abs(f[a]-m[a]);if(b>n[a]){g=!1;break}b<n[a]&&(n[a]=b,n.fill(1/0,a+1,n.length))}g&&(c=a)}if(c){let b=Math.max(n[0]**2+n[1]**2-(c.point?.size??0),0);for(let d of this.moduleMap.modules()){let e=d.pickNodeMainAxisFirst(a,l);if(void 0!==e&&e.distanceSquared<b){c=e.datum,b=e.distanceSquared;break}}return{datum:c,distance:Math.sqrt(b)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}visibleRangeIndices(a,b,c,d){let e;if(null==d){let{processedData:b,dataModel:c}=this;e=c.getColumnSortOrder(this,a,b)??1}else e=d.sortOrder;let f=this.keysOrValues(a),[g,h]=iq(e,c?.length??f.length,b,a=>{let b=c?.[a]??a;return this.xCoordinateRange(f[b],0,b)});return g<h?[g,h]:[h,g]}domainForVisibleRange(a,b,c,d,e){let{processedData:f,dataModel:g}=this,[h,i]=d,j=this.keysOrValues(c),k=this.sortOrder(c);if(null!=k){let a=this.visibleRangeIndices(c,d,e,{sortOrder:k});return g.getDomainBetweenRange(this,b,a,f)}let l=b.map(a=>this.keysOrValues(a)),m=1/0,n=-1/0;return(j.forEach((a,c)=>{let[d,e]=this.xCoordinateRange(a,0,c);if(!(e<h)&&!(d>i))for(let a=0;a<b.length;a++){let b=l[a][c];m=Math.min(m,b),n=Math.max(n,b)}}),m>n)?[NaN,NaN]:[m,n]}domainForClippedRange(a,b,c){let{processedData:d,dataModel:e,axes:f}=this,g=function(a){let b,c;if((a instanceof pY||a instanceof p_)&&({min:b,max:c}=a),null!=b||null!=c)return b??(b=-1/0),c??(c=1/0),[b,c]}(f["x"===a?"y":"x"]);if(!g)return b.flatMap(a=>e.getDomain(this,a,"value",d));let h=this.keysOrValues(c),i=e.getColumnSortOrder(this,c,d);if(null!=i){let a=function(a,b,c,d){let e=c[0].valueOf(),f=c[1].valueOf(),g=cO(0,b-1,c=>{let f=d(1===a?c:b-c)?.valueOf();return!Number.isFinite(f)||f>=e}),h=cN(0,b-1,c=>{let e=d(1===a?c:b-c)?.valueOf();return!Number.isFinite(e)||e<=f});return null==g||null==h?[0,0]:(-1===a&&([g,h]=[b-h,b-g]),[g=Math.max(g,0),h=Math.min(h+1,b)])}(i,h.length,g,a=>h[a]);return e.getDomainBetweenRange(this,b,a,d)}let j=b.map(a=>this.keysOrValues(a)),k=g[0].valueOf(),l=g[1].valueOf(),m=[];return h.forEach((a,b)=>{let c=a.valueOf();if(c<k||c>l)return;let d=j.map(a=>a[b]);c>=k&&m.push(...d),c<=l&&m.push(...d)}),m}zoomFittingVisibleItems(a,b,c,d,e){let f,{dataModel:g,processedData:h}=this;if(!g||!h)return;let i=this.axes.x;if(null!=d)return;let j=this.sortOrder(a);if(null==j)return;let k=this.keysOrValues(a);if(e>k.length)return{x:[0,1],y:void 0};let l=i.scale,m=l.range;l.range=[0,1];let[n,o]=this.visibleRangeIndices(a,c,void 0,{sortOrder:j});if(o-=1,this.xCoordinateRange(k[n],0,n)[0]<c[0]&&(n+=1),this.xCoordinateRange(k[o],0,o)[1]>c[1]&&(o-=1),Math.abs(o-n)>=e-1)f=c;else{let a=(c[0]+c[1])/2;for(;Math.abs(o-n)<e-1&&(n>0||o<k.length-1);)0===n?o+=1:o===k.length-1||Math.abs(this.xCoordinateRange(k[n-1],0,n-1)[0]-a)<Math.abs(this.xCoordinateRange(k[o+1],0,o+1)[1]-a)?n-=1:o+=1;let b=this.xCoordinateRange(k[n],0,n)[0],d=this.xCoordinateRange(k[o],0,o)[1];f=[Math.min(c[0],b),Math.max(c[1],d)]}return l.range=m,{x:f,y:void 0}}countVisibleItems(a,b,c,d,e){let{dataModel:f,processedData:g}=this;if(!f||!g)return 1/0;let h=this.keysOrValues(a),i=b.map(a=>f.resolveColumnById(this,a,g)),j=this.shouldFlipXY(),k=j?this.axes.y:this.axes.x,l=j?this.axes.x:this.axes.y,m=j?d??[0,1]:c,n=j?c:d??[0,1];if(null==d){let b=this.sortOrder(a);if(null!=b){let c=k.scale,d=c.range;c.range=[0,1];let e=this.keysOrValues(a),[f,g]=this.visibleRangeIndices(a,m,void 0,{sortOrder:b});g-=1,this.xCoordinateRange(e[f],0,f)[0]<m[0]&&(f+=1),this.xCoordinateRange(e[g],0,g)[1]>m[1]&&(g-=1);let h=Math.abs(g-f)+1;return c.range=d,h}}let o=(a,b,c)=>a[0]+(c-b[0])/(b[1]-b[0])*(a[1]-a[0]),p=k.range.toSorted(),q=l.range.toSorted(),r=o(p,k.visibleRange,m[0]),s=o(p,k.visibleRange,m[1]),t=o(q,l.visibleRange,Math.min(...n)),u=o(q,l.visibleRange,Math.max(...n)),v=Math.round((m[0]+(m[1]-m[0])/2)*h.length);return is(0,h.length-1,v,e,a=>{let[b,c]=this.xCoordinateRange(h[a],0,a),[d,e]=this.yCoordinateRange(i.map(b=>b[a]),0,a);return!!aW(b)&&!!aW(c)&&!!aW(d)&&!!aW(e)&&b>=r&&c<=s&&d>=t&&e<=u})}minTimeInterval(){let a,b;try{a=this.keysOrValues("xValue")}catch{}if(null==a||a.length>1e3)return;let c=1/0,d=a[0];for(let e=1;e<a.length;e++){let f=a[e];if(null!=f&&null!=d){let a=f.valueOf()-d.valueOf(),e=Math.sign(a);if(0===e)continue;if(void 0!==b&&e!==b)return;c=Math.min(c,Math.abs(a)),b=e}d=f}if(Number.isFinite(c))return c}updateHighlightSelectionItem(a){let{items:b,highlightSelection:c}=a;return this.updateDatumSelection({nodeData:b??[],datumSelection:c})}updateDatumSelection(a){return a.datumSelection}updateDatumNodes(a){}updateDatumStyles(a){}updatePaths(a){a.paths.forEach(a=>a.visible=!1)}updatePathNodes(a){let{paths:b,visible:c}=a;for(let a of b)a.visible=c}resetPathAnimation(a){let{path:b}=this.opts?.animationResetFns??{};b&&a.paths.forEach(a=>{jz([a],b)})}resetDatumAnimation(a){let{datum:b}=this.opts?.animationResetFns??{};b&&jz([a.datumSelection],b)}resetLabelAnimation(a){let{label:b}=this.opts?.animationResetFns??{};b&&jz([a.labelSelection],b)}resetAllAnimation(a){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(a),this.resetDatumAnimation(a),this.resetLabelAnimation(a),a.contextData?.animationValid===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(a){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(a)}animateWaitingUpdateReady(a){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(a)}animateReadyHighlight(a){let{datum:b}=this.opts?.animationResetFns??{};b&&jz([a],b)}animateReadyResize(a){this.resetAllAnimation(a)}animateClearingUpdateEmpty(a){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(a)}getAnimationData(a,b){let{_contextNodeData:c}=this;if(c)return{datumSelection:this.datumSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:c,previousContextData:b,paths:this.paths,seriesRect:a}}updateLabelSelection(a){return a.labelSelection}getScaling(a){if(a instanceof pW){let{range:b,domain:c}=a;return{type:"log",convert:b=>a.convert(b),domain:[c[0],c[1]],range:[b[0],b[1]]}}if(a instanceof iG){let{range:b,domain:c}=a;return{type:"continuous",domain:[c[0],c[1]],range:[b[0],b[1]]}}if(a instanceof iJ)return{type:"category",domain:a instanceof k9?a.bands:a.domain,inset:a.inset,step:a.step}}calculateScaling(){let a={};for(let b of Object.values(gn)){let c=this.axes[b];if(!c)continue;let d=this.getScaling(c.scale);null!=d&&(a[b]=d)}return a}},ti=class extends ez{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};dl([ey],ti.prototype,"type",2),dl([ey],ti.prototype,"tension",2),dl([ey],ti.prototype,"position",2);var tj=class extends tg{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new ti,this.shadow=new s0,this.marker=new s1,this.label=new jK,this.tooltip=s4(),this.connectMissingData=!1}};function tk(a){switch(a.type){case"linear":case"step":case"multi-line":return[{x:a.x0,y:a.y0},{x:a.x1,y:a.y1}];case"cubic":return[{x:a.cp0x,y:a.cp0y},{x:a.cp3x,y:a.cp3y}]}}function tl(a,b,c){let[d,e]=tk(a),f=e.x!==d.x?(c.x-b.x)/(e.x-d.x):0,g=e.y!==d.y?(c.y-b.y)/(e.y-d.y):0;switch(a.type){case"linear":return{type:"linear",moveTo:a.moveTo,x0:b.x,y0:b.y,x1:c.x,y1:c.y};case"cubic":return{type:"cubic",moveTo:a.moveTo,cp0x:b.x,cp0y:b.y,cp1x:c.x-(a.cp2x-d.x)*f,cp1y:c.y-(a.cp2y-d.y)*g,cp2x:c.x-(a.cp1x-d.x)*f,cp2y:c.y-(a.cp1y-d.y)*g,cp3x:c.x,cp3y:c.y};case"step":return{type:"step",moveTo:a.moveTo,x0:b.x,y0:b.y,x1:c.x,y1:c.y,stepX:c.x-(a.stepX-d.x)*f};case"multi-line":return{type:"multi-line",moveTo:a.moveTo,x0:b.x,y0:b.y,x1:c.x,y1:c.y,midPoints:a.midPoints.map(a=>({x:b.x+(a.x-d.x)*f,y:b.y+(a.y-d.y)*g}))}}}function tm(a,b,c){let{moveTo:d}=a,[e,f]=function(a){let b=tk(a);return b[0].x>b[1].x&&b.reverse(),b}(a),{x:g,y:h}=e,{x:i,y:j}=f;if(c<g)return tl(a,e,e);if(b>i)return tl(a,f,f);switch(a.type){case"linear":{let a=h===j?void 0:(j-h)/(i-g),e=null==a?h:a*(b-g)+h,f=null==a?h:a*(c-g)+h;return{type:"linear",moveTo:d,x0:b,y0:e,x1:c,y1:f}}case"step":if(c<=a.stepX){let e=a.y0;return{type:"step",moveTo:d,x0:b,y0:e,x1:c,y1:e,stepX:c}}if(b>=a.stepX){let e=a.y1;return{type:"step",moveTo:d,x0:b,y0:e,x1:c,y1:e,stepX:b}}{let{y0:e,y1:f,stepX:g}=a;return{type:"step",moveTo:d,x0:b,y0:e,x1:c,y1:f,stepX:g}}case"cubic":{let e=eQ(a.cp0x,a.cp1x,a.cp2x,a.cp3x,b),[f,g]=eR(a.cp0x,a.cp0y,a.cp1x,a.cp1y,a.cp2x,a.cp2y,a.cp3x,a.cp3y,e),h=eQ(g[0].x,g[1].x,g[2].x,g[3].x,c);return[g,f]=eR(g[0].x,g[0].y,g[1].x,g[1].y,g[2].x,g[2].y,g[3].x,g[3].y,h),{type:"cubic",moveTo:d,cp0x:g[0].x,cp0y:g[0].y,cp1x:g[1].x,cp1y:g[1].y,cp2x:g[2].x,cp2y:g[2].y,cp3x:g[3].x,cp3y:g[3].y}}case"multi-line":{let{midPoints:e}=a,f=e.findLastIndex(a=>a.x<=b),k=e.findIndex(a=>a.x>=c);-1===k&&(k=e.length);let l=f>=0?e[f]:void 0,m=l?.x??g,n=l?.y??h,o=k<e.length?e[k]:void 0,p=o?.x??i,q=o?.y??j,r=n===q?void 0:(q-n)/(p-m);return{type:"multi-line",moveTo:d,x0:b,y0:null==r?n:r*(m-g)+n,x1:c,y1:null==r?n:r*(p-g)+n,midPoints:e.slice(Math.max(f,0),k)}}}}dl([ey],tj.prototype,"xKey",2),dl([ey],tj.prototype,"xName",2),dl([ey],tj.prototype,"yKey",2),dl([ey],tj.prototype,"yName",2),dl([ey],tj.prototype,"yFilterKey",2),dl([ey],tj.prototype,"normalizedTo",2),dl([ey],tj.prototype,"fill",2),dl([ey],tj.prototype,"fillOpacity",2),dl([ey],tj.prototype,"stroke",2),dl([ey],tj.prototype,"strokeWidth",2),dl([ey],tj.prototype,"strokeOpacity",2),dl([ey],tj.prototype,"lineDash",2),dl([ey],tj.prototype,"lineDashOffset",2),dl([ey],tj.prototype,"interpolation",2),dl([ey],tj.prototype,"styler",2),dl([ey],tj.prototype,"shadow",2),dl([ey],tj.prototype,"marker",2),dl([ey],tj.prototype,"label",2),dl([ey],tj.prototype,"tooltip",2),dl([ey],tj.prototype,"connectMissingData",2);var tn={start:0,middle:.5,end:1};function to(a,b){let{x0:c,y0:d,x1:e,y1:f}=a,g=(f-d)/(e-c)*(b-c)+d;return{leftCp1x:c,leftCp1y:d,leftCp2x:b,leftCp2y:g,stepX:b,stepY0:g,stepY1:g,rightCp1x:b,rightCp1y:g,rightCp2x:e,rightCp2y:f}}function tp(a,b){if("linear"===a.type)return to(a,b);if("cubic"===a.type){let{cp0x:c,cp0y:d,cp1x:e,cp1y:f,cp2x:g,cp2y:h,cp3x:i,cp3y:j}=a,k=eQ(c,e,g,i,b),[l,m]=eR(c,d,e,f,g,h,i,j,k),n=l[3].y;return{leftCp1x:l[1].x,leftCp1y:l[1].y,leftCp2x:l[2].x,leftCp2y:l[2].y,stepX:b,stepY0:n,stepY1:n,rightCp1x:m[1].x,rightCp1y:m[1].y,rightCp2x:m[2].x,rightCp2y:m[2].y}}if("step"!==a.type)return to(a,b);{let{x0:b,y0:c,x1:d,y1:e,stepX:f}=a;return{leftCp1x:(b+f)/2,leftCp1y:c,leftCp2x:(b+f)/2,leftCp2y:c,stepX:f,stepY0:c,stepY1:e,rightCp1x:(f+d)/2,rightCp1y:e,rightCp2x:(f+d)/2,rightCp2y:e}}}function tq(a,b,c,d,e,f,g){switch(b){case 0:g?a.moveTo(e,f):a.moveTo(c,d);break;case 1:g?a.lineTo(e,f):a.lineTo(c,d)}}function tr(a,b,c,d,e,f){f?a.lineTo(b,c):a.lineTo(d,e)}function ts(a,b,c,d,e,f,g,h,i,j){j?a.cubicCurveTo(f,g,d,e,b,c):a.cubicCurveTo(d,e,f,g,h,i)}function tt(a,b,c,d,e,f,g){g?(a.lineTo(f,e),a.lineTo(f,c),a.lineTo(b,c)):(a.lineTo(f,c),a.lineTo(f,e),a.lineTo(d,e))}function tu(a,b,c,d){let[e,f]=tk(b);switch(tq(a,c,e.x,e.y,f.x,f.y,d),b.type){case"linear":tr(a,b.x0,b.y0,b.x1,b.y1,d);break;case"cubic":ts(a,b.cp0x,b.cp0y,b.cp1x,b.cp1y,b.cp2x,b.cp2y,b.cp3x,b.cp3y,d);break;case"step":tt(a,b.x0,b.y0,b.x1,b.y1,b.stepX,d);break;case"multi-line":!function(a,b,c,d,e,f,g){if(g){for(let b=f.length-1;b>=0;b--){let{x:c,y:d}=f[b];a.lineTo(c,d)}a.lineTo(b,c)}else{for(let{x:b,y:c}of f)a.lineTo(b,c);a.lineTo(d,e)}}(a,b.x0,b.y0,b.x1,b.y1,b.midPoints,d)}}function tv(a,b,c){var d,e,f,g;let[h,i]=tk(a),[j,k]=tk(b),l=(d=h.x,(j.x-d)*c+d),m=(e=h.y,(j.y-e)*c+e);return[{x:l,y:m},{x:(f=i.x,(k.x-f)*c+f),y:(g=i.y,(k.y-g)*c+g)}]}function tw(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;let[{x:w,y:x},{x:y,y:z}]=tv(b,c,d);if(tq(a,e,w,x,y,z,f),"cubic"===b.type&&"cubic"===c.type){let e=(g=b.cp1x,(c.cp1x-g)*d+g),k=(h=b.cp1y,(c.cp1y-h)*d+h);ts(a,w,x,e,k,(i=b.cp2x,(c.cp2x-i)*d+i),(j=b.cp2y,(c.cp2y-j)*d+j),y,z,f)}else if("step"===b.type&&"step"===c.type)tt(a,w,x,y,z,(k=b.stepX,(c.stepX-k)*d+k),f);else if("linear"===b.type&&"linear"===c.type)tr(a,w,x,y,z,f);else{let e;e="step"===b.type?b.stepX:"step"===c.type?c.stepX:(w+y)/2;let g=tp(b,e),h=tp(c,e),i=(l=g.leftCp1x,(h.leftCp1x-l)*d+l),j=(m=g.leftCp1y,(h.leftCp1y-m)*d+m),k=(n=g.leftCp2x,(h.leftCp2x-n)*d+n),A=(o=g.leftCp2y,(h.leftCp2y-o)*d+o),B=(p=g.stepX,(h.stepX-p)*d+p),C=(q=g.stepY0,(h.stepY0-q)*d+q),D=(r=g.stepY1,(h.stepY1-r)*d+r),E=(s=g.rightCp1x,(h.rightCp1x-s)*d+s),F=(t=g.rightCp1y,(h.rightCp1y-t)*d+t),G=(u=g.rightCp2x,(h.rightCp2x-u)*d+u),H=(v=g.rightCp2y,(h.rightCp2y-v)*d+v);f?(a.cubicCurveTo(G,H,E,F,B,D),a.lineTo(B,C),a.cubicCurveTo(k,A,i,j,w,x)):(a.cubicCurveTo(i,j,k,A,B,C),a.lineTo(B,D),a.cubicCurveTo(E,F,G,H,y,z))}}var tx=(a=>(a[a.Zero=0]="Zero",a[a.Split=1]="Split",a))(tx||{});function ty(a){return jP(a).valueOf()}function tz(a,b){if(!b)return NaN;if(a instanceof Date&&(a=a.getTime()),"continuous"===b.type&&"number"==typeof a)return(a-b.domain[0])/(b.domain[1]-b.domain[0])*(b.range[1]-b.range[0])+b.range[0];if("log"===b.type&&"number"==typeof a)return b.convert(a);if("category"!==b.type)return NaN;let c=ty(a),d=b.domain.findIndex(a=>ty(a)===c);return(-1===d&&(d=b.domain.findIndex(b=>{var c;return null!=(c=a)&&null!=b&&"object"==typeof c&&"object"==typeof b&&("id"in c&&"id"in b?c.id===b.id:c.toString()===b.toString())})),d>=0)?b.inset+b.step*d:NaN}function tA({data:a},b){return a.map((a,c)=>({xValue0Index:b.indexOf(ty(a.xValue0)),xValue1Index:b.indexOf(ty(a.xValue1)),datumIndex:c}))}function tB(a){return Object.values(a.scales).every(a=>"category"!==a.type||a.domain.length<1e3)}function tC(a,b,c,d,e){let f,g;if(e.xValue1Index===e.xValue0Index+1)return a;let h=tk(a);if(b.scales.x?.type==="category"){let a=(h[1].x-h[0].x)/(e.xValue1Index-e.xValue0Index);g=(f=h[0].x+(d-e.xValue0Index)*a)+a}else{let a=c[d],e=c[d+1];f=tz(a,b.scales.x),g=tz(e,b.scales.x)}return tm(a,f,g)}function tD(a,b){let[c,d]=tk(a),e=tz(0,b.scales.y);return tl(a,{x:c.x,y:e},{x:d.x,y:e})}function tE(a){let[b,c]=tk(a),{x:d,y:e}={x:(b.x+c.x)/2,y:(b.y+c.y)/2};switch(a.type){case"linear":return{type:"linear",moveTo:a.moveTo,x0:d,y0:e,x1:d,y1:e};case"step":return{type:"step",moveTo:a.moveTo,x0:d,y0:e,x1:d,y1:e,stepX:d};case"cubic":return{type:"cubic",moveTo:a.moveTo,cp0x:d,cp0y:e,cp1x:d,cp1y:e,cp2x:d,cp2y:e,cp3x:d,cp3y:e};case"multi-line":return{type:"multi-line",moveTo:a.moveTo,x0:d,y0:e,x1:d,y1:e,midPoints:a.midPoints.map(()=>({x:d,y:e}))}}}function tF(a,b,c,d,e,f){let g,h;if(e.xValue0Index>=f.xValue1Index){let a=d.findLast(a=>a.xValue1Index<=f.xValue1Index)?.datumIndex,b=null!=a?c.data[a]:void 0;g=b?.xValue1,h=b?.yValue1}else if(e.xValue0Index<=f.xValue0Index){let a=d.find(a=>a.xValue0Index>=f.xValue0Index)?.datumIndex,b=null!=a?c.data[a]:void 0;g=b?.xValue0,h=b?.yValue0}if(null==g||null==h)switch(b){case 0:return tD(a,c);case 1:return tE(a)}let i={x:tz(g,c.scales.x),y:tz(h,c.scales.y)};return tl(a,i,i)}function tG(a,b){if(null==b)return;let c=ty(a.xValue0),d=ty(a.xValue1);return b.find(a=>ty(a.xValue0)===c&&ty(a.xValue1)===d)?.span}function tH(a,b,c,d,e,f,g){let h=a.data[d.datumIndex],i=h.span,j=tG(h,e);if(null!=j)g.removed.push({from:j,to:j}),g.moved.push({from:j,to:i}),g.added.push({from:i,to:i});else{let e=tF(i,b,a,c,d,f);g.added.push({from:e,to:i})}}function tI(a,b,c,d,e,f,g){let h=a.data[d.datumIndex],i=h.span,j=tG(h,e);if(null!=j)g.removed.push({from:i,to:i}),g.moved.push({from:i,to:j}),g.added.push({from:j,to:j});else{let e=tF(i,b,a,c,d,f);g.removed.push({from:i,to:e})}}function tJ(a,b,c,d,e){let f,g,h=d.scales.x,i=b[e.xValue0Index],j=b[e.xValue1Index];if(h?.type==="continuous"||h?.type==="log"?(f=c.data.findLast(a=>ty(a.xValue0)<=i),g=c.data.find(a=>ty(a.xValue1)>=j)):(f=c.data.find(a=>ty(a.xValue0)===i),g=c.data.find(a=>ty(a.xValue1)===j)),null==f||null==g)return;let[{x:k},{x:l}]=tk(a),m=tz(f.xValue0,c.scales.x),n=tz(f.yValue0,c.scales.y),o=tz(g.xValue1,c.scales.x),p=tz(g.yValue1,c.scales.y),q=d.data[e.datumIndex].span;return tm(q=tl(q,{x:m,y:n},{x:o,y:p}),k,l)}function tK(a,b,c){let{span:d}=b;switch(c){case 0:return tG(b,a.zeroData)??tD(d,a);case 1:return tE(d)}}function tL(a,b,c){if(!tB(a)||!tB(b)||!function(a,b){let c=b.scales.x,d=a.scales.x;if(c?.type!=="category"||d?.type!=="category")return!0;let e=-1/0;for(let a of c.domain){let b=tz(a,d);if(Number.isFinite(b))if(b<e)return!1;else e=b}return!0}(a,b))return;let d=function(a,b){let c=new Map;for(let{xValue0:b,xValue1:d}of a.data){let a=ty(b),e=ty(d);c.set(a,b).set(e,d)}let d=Array.from(c,([a,b])=>({axisValue:a,value:b}));d.sort((b,c)=>tz(b.value,a.scales.x)-tz(c.value,a.scales.x));let e=[];for(let{xValue0:a,xValue1:d}of b.data){let b=ty(a),f=ty(d);c.has(b)||(c.set(b,a),e.push({axisValue:b,value:a})),c.has(f)||(c.set(f,d),e.push({axisValue:f,value:d}))}e.sort((a,c)=>tz(a.value,b.scales.x)-tz(c.value,b.scales.x));let f=0;for(let a of e){for(let c=d.length-1;c>=f;c-=1)if(tz(a.value,b.scales.x)>tz(d[c].value,b.scales.x)){f=c+1;break}d.splice(f,0,a),f+=1}if(!function(a,b){let c=-1/0;for(let d of a){let a=tz(d.value,b.scales.x);if(Number.isFinite(a))if(a<c)return!1;else c=a}return!0}(d,b))return;let g=d.map(a=>a.axisValue),h=tA(b,g),i=tA(a,g);return{axisValues:g,oldDataAxisIndices:h,newDataAxisIndices:i}}(a,b);if(null==d)return function(a,b,c){let d=[],e=[];for(let a of b.data){let d=a.span,f=tK(b,a,c);e.push({from:d,to:f})}for(let b of a.data){let e=b.span,f=tK(a,b,c);d.push({from:f,to:e})}return{removed:e,moved:[],added:d}}(a,b,c);if(d.axisValues.length===d.oldDataAxisIndices.length+d.newDataAxisIndices.length+2)return function(a,b){let c=[],d=[],e=[];for(let f=0;f<b.data.length;f+=1){let g=b.data[f].span,h=a.data[f].span;c.push({from:g,to:g}),d.push({from:g,to:h}),e.push({from:h,to:h})}return{removed:c,moved:d,added:e}}(a,b);let e={removed:[],moved:[],added:[]},{axisValues:f,oldDataAxisIndices:g,newDataAxisIndices:h}=d,i={xValue0Index:Math.max(g.at(0)?.xValue0Index??-1/0,h.at(0)?.xValue0Index??-1/0),xValue1Index:Math.min(g.at(-1)?.xValue1Index??1/0,h.at(-1)?.xValue1Index??1/0)};for(let d=0;d<f.length-1;d+=1)!function(a,b,c,d,e,f,g,h,i){let j,k=e+1,l=g.find(a=>a.xValue0Index<=e&&a.xValue1Index>=k),m=f.find(a=>a.xValue0Index<=e&&a.xValue1Index>=k),n=b.zeroData,o=a.zeroData;if(null==l&&null!=m)return tH(a,c,f,m,n,h,i);if(null!=l&&null==m)return tI(b,c,g,l,o,h,i);if(null==l||null==m)return;j=l.xValue0Index===m.xValue0Index&&l.xValue1Index===m.xValue1Index?0:l.xValue0Index<=m.xValue0Index&&l.xValue1Index>=m.xValue1Index?-1:+(l.xValue0Index>=m.xValue0Index&&l.xValue1Index<=m.xValue1Index);let p=tC(b.data[l.datumIndex].span,b,d,e,l),q=tC(a.data[m.datumIndex].span,a,d,e,m);if(1===j){let e=tJ(p,d,b,a,m);null!=e?(i.removed.push({from:p,to:e}),i.moved.push({from:e,to:q}),i.added.push({from:q,to:q})):tI(b,c,g,l,o,h,i)}else if(-1===j){let e=tJ(q,d,a,b,l);null!=e?(i.removed.push({from:p,to:p}),i.moved.push({from:p,to:e}),i.added.push({from:e,to:q})):tH(a,c,f,m,n,h,i)}else i.removed.push({from:p,to:p}),i.moved.push({from:p,to:q}),i.added.push({from:q,to:q})}(a,b,c,f,d,h,g,i,e);return e}function tM(a){return"continuous"===a.type||"log"===a.type}function tN(a){return"category"===a.type}function tO(a,b){return void 0===a||void 0===b?void 0!==a||void 0!==b:tM(a)&&tM(b)?a.type===b.type&&cw(a.domain,b.domain)&&cw(a.range,b.range):!!(tN(a)&&tN(b))&&a.inset===b.inset&&a.step===b.step&&cw(a.domain,b.domain)}function tP(a){return null!=a&&("category"===a.type?a.domain.every(a=>null!=a):a.domain.every(a=>Number.isFinite(a)||a instanceof Date)&&a.range.every(a=>Number.isFinite(a)))}function tQ(a,b){let c,d=a.map(a=>a.point);switch(b.type){case"linear":c=function(a){let b=[],c=0,d=NaN,e=NaN;for(let{x:f,y:g}of a){if(c>0){let a=1===c;b.push({type:"linear",moveTo:a,x0:d,y0:e,x1:f,y1:g})}c+=1,d=f,e=g}return b}(d);break;case"smooth":c=function(a,b){let c=Array.isArray(a)?a:Array.from(a);if(c.length<=1)return[];let d=c.map((a,b)=>{let d=0===b?a:c[b-1],e=b===c.length-1?a:c[b+1],f=0===b||b===c.length-1;if(Math.sign(d.y-a.y)===Math.sign(e.y-a.y))return 0;if(!f){let b=Math.abs(d.y-e.y),c=Math.abs(a.y-d.y)/b,f=Math.abs(a.y-e.y)/b;if(c<=.05||1-c<=.05||f<=.05||1-f<=.05)return 0}return(e.y-d.y)/(e.x-d.x)});0===d[1]&&(d[0]*=2),0===d[d.length-2]&&(d[d.length-1]*=2);let e=[];for(let a=1;a<c.length;a+=1){let f=c[a-1],g=d[a-1],h=c[a],i=d[a],j=h.x-f.x,k=h.y-f.y,l=j*b/3,m=j*g*b/3,n=j*b/3,o=j*i*b/3;0===i&&Math.abs(m)>Math.abs(k)&&(l*=Math.abs(k/m),m=Math.sign(m)*Math.abs(k)),0===g&&Math.abs(o)>Math.abs(k)&&(n*=Math.abs(k/o),o=Math.sign(o)*Math.abs(k)),e.push({type:"cubic",moveTo:1===a,cp0x:f.x,cp0y:f.y,cp1x:f.x+l,cp1y:f.y+m,cp2x:h.x-n,cp2y:h.y-o,cp3x:h.x,cp3y:h.y})}return e}(d,b.tension);break;case"step":c=function(a,b){let c=[],d=0,e=NaN,f=NaN,g="number"==typeof b?b:tn[b];for(let{x:b,y:h}of a){if(d>0){let a=1===d,i=e+(b-e)*g;c.push({type:"step",moveTo:a,x0:e,y0:f,x1:b,y1:h,stepX:i})}d+=1,e=b,f=h}return c}(d,b.position)}return c.map((b,c)=>({span:b,xValue0:a[c].xDatum,yValue0:a[c].yDatum,xValue1:a[c+1].xDatum,yValue1:a[c+1].yDatum}))}function tR(a,b,c=.001){return Math.abs(a.x-b.x)<c&&Math.abs(a.y-b.y)<c}function tS({path:a},b){let c;for(let{span:d}of b){let[b,e]=tk(d);tu(a,d,null!=c&&tR(c,b)?2:0,!1),c=e}}function tT(a,b,c){let d;for(let e of c){let[c,f]=tv(e.from,e.to,a),g=null!=d&&tR(d,c)?2:0;tw(b.path,e.from,e.to,a,g,!1),d=f}}function tU(a,b,c){let d=tV(a,c);return{status:a,path:{addPhaseFn:(a,c)=>tT(a,c,b.added),updatePhaseFn:(a,c)=>tT(a,c,b.moved),removePhaseFn:(a,c)=>tT(a,c,b.removed)},pathProperties:d}}function tV(a,b){let c="none"===b?"updated":a,d={fromFn(b,d){let e={phase:jv[c]},f=b.previousDatum??d;return null!=f&&(e.segments=f),"removed"===a?e.finish={visible:!1}:"added"===a&&(e.start={visible:!0}),e},toFn(a,b){let d={phase:jv[c]};return null!=b&&(d.segments=b),d}};return"fade"===b?{fromFn(b,c){let e="added"===a?0:b.opacity,f="removed"===a?b.previousDatum??c:c;return{...d.fromFn(b,c),opacity:e,segments:f}},toFn(b,c){let e="removed"===a?b.previousDatum??c:c;return{...d.toFn(b,c),opacity:+("removed"!==a),segments:e}}}:d}function tW(a,b,c){if(a.scales.x?.type==="category"!=(b.scales.x?.type==="category")||!tP(a.scales.x)||!tP(b.scales.x)||null==a.strokeData||null==b.strokeData)return;let d="updated";b.visible&&!a.visible?d="removed":!b.visible&&a.visible&&(d="added");let e=tL({scales:a.scales,data:a.strokeData.spans},{scales:b.scales,data:b.strokeData.spans},1);if(null==e)return;let f=tU(d,e,"fade"),g=(c?.changed??!0)||!tO(a.scales.x,b.scales.x)||!tO(a.scales.y,b.scales.y)||"updated"!==d;return{status:d,stroke:f,hasMotion:g}}function tX({path:a},{spans:b,phantomSpans:c}){let d=0,e={x:NaN,y:NaN},f={x:NaN,y:NaN};for(let g=0;g<b.length;g+=1){let{span:h}=b[g],{span:i}=c[g],{0:j,1:k}=tk(h),{0:l,1:m}=tk(i);if(tR(e,j)&&tR(f,l))tu(a,h,2,!1);else{for(let b=g-1;b>=d;b-=1)tu(a,c[b].span,1,!0);a.closePath(),tu(a,h,0,!1),d=g}e=k,f=m}for(let e=b.length-1;e>=d;e-=1)tu(a,c[e].span,1,!0);a.closePath()}function tY(a,{path:b},c,d){for(let e=0;e<c.length;e+=1){let f=c[e],g=d[e];tw(b,f.from,f.to,a,0,!1),tw(b,g.from,g.to,a,1,!0),b.closePath()}}function tZ(a,b,c,d){let e=tV(a,d);return{status:a,path:{addPhaseFn:(a,d)=>tY(a,d,b.added,c.added),updatePhaseFn:(a,d)=>tY(a,d,b.moved,c.moved),removePhaseFn:(a,d)=>tY(a,d,b.removed,c.removed)},pathProperties:e}}function t$(a,b){if(a.scales.x?.type==="category"!=(b.scales.x?.type==="category")||!tP(a.scales.x)||!tP(b.scales.x))return;let c="updated";b.visible&&!a.visible?c="removed":!b.visible&&a.visible&&(c="added");let d=tL({scales:a.scales,data:a.fillData.spans},{scales:b.scales,data:b.fillData.spans},0);if(null==d)return;let e=tL({scales:a.scales,data:a.fillData.phantomSpans},{scales:b.scales,data:b.fillData.phantomSpans},0);if(null==e)return;let f=tL({scales:a.scales,data:a.strokeData.spans,zeroData:a.fillData.phantomSpans},{scales:b.scales,data:b.strokeData.spans,zeroData:b.fillData.phantomSpans},0);if(null==f)return;let g="none",h=tZ(c,d,e,g),i=tU(c,f,g);return{status:c,fill:h,stroke:i}}function t_({id:a},b,c,...d){jx(a,"markers",b,d,{opacity:0},{opacity:1},{phase:c?jv[c]:"trailing"}),d.forEach(a=>a.cleanup())}function t0({id:a},b,...c){jx(a,"markers",b,c,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),c.forEach(a=>a.cleanup())}function t1({id:a,nodeDataDependencies:b},c,...d){let e=b.seriesRectWidth;jw(a,"markers",c,d,{fromFn:(a,b)=>{let c=aA(0,hU((b.midPoint?.x??e)/e),1);return isNaN(c)&&(c=0),{scalingX:0,scalingY:0,delay:c,duration:.2,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function t2(a){return{opacity:1,scalingX:1,scalingY:1}}function t3(a,b){return{x:b.point?.x??NaN,y:b.point?.y??NaN,scalingCenterX:b.point?.x??NaN,scalingCenterY:b.point?.y??NaN}}function t4(a,{datumIndex:b}){let c=a.getNodeData();if(void 0===c)return;let d=c[b],{point:e}=d??{};if(null==d||null==e)return;let f=a.getFormattedMarkerStyle(d),g=l0.anchor(f.shape),h=e.focusSize??f.size,i=4+h,j=i/2,k=(g.x-.5)*h,l=(g.y-.5)*h,m=d.point.x-j-k,n=d.point.y-j-l;return ff.toCanvas(a.contentGroup,new dt(m,n,i,i))}function t5(a,b,c,d=c){return!!(d.enabled??c.enabled)&&(b.step??iC(b.range)/Math.max(1,a))>1}function t6(a,b,c){return c??(c={stroke:a.properties.stroke,strokeOpacity:a.properties.strokeOpacity,strokeWidth:a.properties.strokeWidth}),h9.reduce((d,e)=>(d[e]=a.getMarkerStyle(b,{},void 0,{highlightState:e},void 0,c),d),{})}function t7({id:a,visible:b,nodeDataDependencies:c},d,...e){let{seriesRectWidth:f,seriesRectHeight:g}=c;jx(a,"path_properties",d,e,{clipX:0},{clipX:f},{phase:"initial",start:{clip:!0,clipY:g,visible:b},finish:{clip:!1,visible:b}})}function t8({id:a},b,c,d="add",...e){jx(a,b,c,e,{opacity:0},{opacity:1},{phase:d})}function t9(a){return b=>({visible:a.getVisible(),opacity:a.getOpacity(),clipScalingX:1,clip:!1})}function ua({nodeDataDependencies:a},b){let c=a=>isFinite(a)?a:0;b.clipX=c(a.seriesRectWidth),b.clipY=c(a.seriesRectHeight)}function ub(a){return a.isReversed()!==a.range[1]<a.range[0]}function uc(a,b,c,d,e,f=!0){if(0===b.scale.domain.length||0===c.scale.domain.length)return;let{scale:g,direction:h}="x"===a.key?b:c,i="x"===h,j=g.bandwidth??0,k=f?((g.step??0)-j)/2:0,l=Math.max(d.x,e.width-(d.x+d.width)),m=Math.max(d.y,e.height-(d.y+d.height)),n=()=>ub(i?b:c)?i?d.width+l:d.height+m:i?-l:-m,o=()=>ub(i?b:c)?i?-l:-m:i?d.width+l:d.height+m;return(a=>{let b=[],c=-1;for(let d=0;d<a.length;d++){if(aT(a[d]))continue;let{start:e,stop:f,...h}=a[d],i=a[c]?.stop,j=a.slice(d+1).find(a=>null!=a.start)?.start,l=g.convert(e??i)-k,m=g.convert(f??j)+2*k,p=null!=e&&isNaN(l),q=null!=f&&isNaN(m);p||q||(isNaN(l)&&(l=n()),isNaN(m)&&(m=o()),null!=f&&(c=d),b.push({start:l,stop:m,...h}))}return b})(a.segments).map(({stop:a,start:b,...c})=>{let e=i?a+j:d.width+l;return{clipRect:{x0:i?b:-l,y0:i?-m:b,x1:e,y1:i?d.height+m:a+j},...c}})}var ud=new Set(["time","timestamp","date","datetime"]);function ue(a,b,c){if("x"!==a&&"y"!==a||!aQ(b))return;let d=uh(a,c);if(null==d||!(d in b))return;let e=b[d],f=ui(a,c),g=ug(d,e);return g?{type:g,position:f}:"number"==typeof e?{type:"number",position:f}:{type:"category",position:f}}function uf(a,b,c){if("x"!==a&&"y"!==a||!aQ(b))return;let d=uh(a,c);if(null==d||!(d in b))return;let e=ui(a,c),f=ug(d,b[d]);if(f)return{type:f,position:e}}function ug(a,b){if(aN(b)||ud.has(a)&&aV(b))return"time"}function uh(a,b){let c;return"x"===a?"xKey"in b&&(c=b.xKey):"y"===a&&"yKey"in b&&(c=b.yKey),c}function ui(a,b){return"direction"in b&&"horizontal"===b.direction?"x"===a?"left":"bottom":"x"===a?"bottom":"left"}var uj=hy(function(a,b,c,d){if(b.length<1e3)return;let[e,f]=sU(a,d),g=sT(b,e,f),{indexData:h,valueData:i}=sY(b,c,c,e,f,g),j=[],k=[],l=-1;for(let a=0;a<b.length;a+=1){let c=s$(b,e,f,h,g,a);if(-1===c)continue;let d=k.push(a)-1;c!==l&&(j.push(d),l=c)}j.push(k.length-1);let m=[{maxRange:g,metaIndices:j,indices:k}];for(;k.length>10&&g>64;){({maxRange:g}=sZ(h,i,g,{inPlace:!0}));let a=k;for(let c of(j=[],k=[],l=-1,a)){let a=s$(b,e,f,h,g,c);if(-1===a)continue;let d=k.push(c)-1;a!==l&&(j.push(d),l=a)}j.push(k.length-1),m.push({maxRange:g,metaIndices:j,indices:k})}return m.reverse(),m}),uk=class extends th{constructor(a){super({moduleCtx:a,propertyKeys:td,propertyNames:te,categoryKey:"xValue",pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],datumSelectionGarbageCollection:!1,segmentedDataNodes:!1,pickModes:[2,0],animationResetFns:{path:t9({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:sS,datum:(a,b)=>({...t2(a),...t3(a,b)})},clipFocusBox:!1}),this.properties=new tj,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0,this.backgroundGroup=new fh({name:`${this.id}-background`,zIndex:0}),this._isStacked=void 0,this.fillSpans=[],this.phantomSpans=[],this.strokeSpans=[]}get pickModeAxis(){return"main"}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||null!=this.contextNodeData&&(this.contextNodeData.fillData.spans.length>100||this.contextNodeData.strokeData.spans.length>100)}attachSeries(a,b,c){super.attachSeries(a,b,c),a.appendChild(this.backgroundGroup)}detachSeries(a,b,c){super.detachSeries(a,b,c),a?.removeChild(this.backgroundGroup)}attachPaths([a,b]){this.backgroundGroup.appendChild(a),this.contentGroup.appendChild(b),b.zIndex=-1}detachPaths([a,b]){this.backgroundGroup.removeChild(a),this.contentGroup.removeChild(b)}isStacked(){return(this.seriesGrouping?.stackCount??1)>1}isNormalized(){return null!=this.properties.normalizedTo}setSeriesIndex(a){let b=this.isStacked()===this._isStacked;return this._isStacked=b,super.setSeriesIndex(a,b)}setZIndex(a){super.setZIndex(a),this.isStacked()?(this.backgroundGroup.zIndex=[0,a],this.contentGroup.zIndex=[1,a,0]):(this.backgroundGroup.zIndex=[1,a,0,0],this.contentGroup.zIndex=[1,a,0,1])}async processData(a){if(null==this.data)return;let{data:b,visible:c,seriesGrouping:{groupIndex:d=this.id,stackCount:e=1}={}}=this,{xKey:f,yKey:g,yFilterKey:h,connectMissingData:i,normalizedTo:j}=this.properties,k=!this.ctx.animationManager.isSkipped(),l=this.axes.x?.scale,m=this.axes.y?.scale,{xScaleType:n,yScaleType:o}=this.getScaleInformation({xScale:l,yScale:m}),p=e>1||null!=j,q={value:`area-stack-${d}-yValue`,marker:`area-stack-${d}-yValues-marker`},r={invalidValue:null};(aL(j)||i)&&e>1&&(r.invalidValue=0),c||(r.forceValue=0);let s=[pj(f,n,{id:"xValue"}),pk(g,o,{id:"yValueRaw",...r}),...null!=h?[pk(h,o,{id:"yFilterRaw"})]:[]];p&&s.push(...pr(g,"normal","current",{id:"yValueCumulative",...r,groupId:q.marker},o)),aL(j)&&s.push(pk(g,o,{id:"yValue",...r,groupId:q.value}),pw(Object.values(q),j)),k&&s.push(pA());let{dataModel:t,processedData:u}=await this.requestDataModel(a,b,{props:s,groupByKeys:p,groupByData:!p});this.dataAggregationFilters=this.aggregateData(t,u),this.animationState.transition("updateData")}xCoordinateRange(a,b){let{marker:c}=this.properties,d=this.axes.x.scale.convert(a),e=c.enabled?.5*c.size*b:0;return[d-e,d+e]}yCoordinateRange(a,b){let{marker:c}=this.properties,d=this.axes.y.scale.convert(a[0]),e=c.enabled?.5*c.size*b:0;return[d-e,d+e]}yValueKey(){return this.isNormalized()?"yValue":"yValueRaw"}yCumulativeKey(a){return"grouped"===a.type?"yValueCumulative":this.yValueKey()}getSeriesDomain(a){let{dataModel:b,processedData:c,axes:d}=this;if(!b||!c)return[];let e=d.y;if("x"===a){let a=b.resolveProcessedDataDefById(this,"xValue"),d=b.getDomain(this,"xValue","key",c);return a?.def.type==="key"&&"category"===a.def.valueType?d:ja(o4(d))}let f=this.domainForClippedRange("y",[this.yCumulativeKey(c)],"xValue");return e instanceof pY&&!(e instanceof pZ)?ja(Number.isFinite(f[1]-f[0])?[f[0]>0?0:f[0],f[1]<0?0:f[1]]:[]):ja(f)}getSeriesRange(a,b){let[c,d]=this.domainForVisibleRange("y",[this.yCumulativeKey(this.processedData)],"xValue",b);return[Math.min(c,0),Math.max(d,0)]}getZoomRangeFittingItems(a,b,c){return this.zoomFittingVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],a,b,c)}getVisibleItems(a,b,c){return this.countVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],a,b,c)}aggregateData(a,b){if(pe(b))return;let c=this.axes.x;if(null==c)return;let{scale:d}=c,e=a.resolveKeysById(this,"xValue",b),f=a.resolveColumnById(this,this.yCumulativeKey(b),b),g=a.getDomain(this,"xValue","key",b);return uj(d.type,e,f,g)}stackAggregatedData(a){let{indices:b,metaIndices:c}=a,{visible:d,axes:e,dataModel:f,processedData:g,seriesBelowStackContext:h}=this,i=e.x,j=e.y;if(!d)return this.phantomSpans=[],this.fillSpans=[],this.strokeSpans=[],h;if(null==i||null==j||null==f||null==g)return;let{scale:k}=i,{scale:l}=j,m=(k.bandwidth??0)/2,n=f.resolveKeysById(this,"xValue",g),o=f.resolveColumnById(this,this.yCumulativeKey(g),g),[p,q]=iq(1,c.length-1,i.range,a=>{let d=c[a],e=c[a+1],f=b[d],g=b[e],h=n[f],i=n[g],{0:j}=this.xCoordinateRange(h,0),{1:k}=this.xCoordinateRange(i,0);return[j,k]});p=Math.max(p-1,0),q=Math.min(q+1,c.length-1);let r=[];if(h?.fillSpans)r=h?.fillSpans;else for(let a=p;a<q;a+=1){let d=c[a],e=c[a+1],f=b[d],g=b[e],h=n[f],i=n[g],j={type:"linear",moveTo:!1,x0:k.convert(h)+m,y0:l.convert(0),x1:k.convert(i)+m,y1:l.convert(0)};r.push({span:j,xValue0:h,xValue1:i,yValue0:0,yValue1:0})}this.phantomSpans=r;let s=[],t=[];for(let a=p;a<q;a+=1){let d=c[a],e=c[a+1],f=b[d],g=b[e],h=n[f],i=n[g],j=o[f],p=o[g],q=[];for(let a=d+1;a<e;a++){let c=b[a];q.push({x:k.convert(n[c])+m,y:l.convert(o[c])})}let r={span:{type:"multi-line",moveTo:!1,x0:k.convert(h)+m,y0:l.convert(j),x1:k.convert(i)+m,y1:l.convert(p),midPoints:q},xValue0:h,xValue1:i,yValue0:j,yValue1:p};s.push(r),t.push(r)}return this.fillSpans=s,this.strokeSpans=t,{stack:[],fillSpans:s,strokeSpans:t}}stackYValueData(){let a,{visible:b,axes:c,dataModel:d,processedData:e,seriesBelowStackContext:f,properties:g}=this,h=c.x,i=c.y;if(null==h||null==i||null==d||null==e)return;let{interpolation:j}=g,{scale:k}=h,{scale:l}=i,m=(k.bandwidth??0)/2,n=d.resolveKeysById(this,"xValue",e),o=d.resolveColumnById(this,this.yValueKey(),e),p=!this.isStacked()&&this.properties.connectMissingData,q=e.invalidKeys?.get(this.id),r=(p?e.invalidData?.get(this.id):void 0)??q;null!=r&&(n=n.filter((a,b)=>!1===r[b]),o=o.filter((a,b)=>!1===r[b]));let[s,t]=iq(1,n.length,h.range,a=>this.xCoordinateRange(n[a],0));if(s=Math.max(s-2,0),t=Math.min(t+2,n.length),f?.fillSpans)a=f?.fillSpans;else{let b=[];for(let a=s;a<t;a+=1){let c=n[a];b.push({point:{x:k.convert(c)+m,y:l.convert(0)},xDatum:c,yDatum:0})}a=tQ(b,{type:"linear"})}if(this.phantomSpans=a,!b)return this.fillSpans=a,this.strokeSpans=[],f;let u=f?.stack;if(null==u){u=[];for(let a=s;a<t-1;a+=1)u.push({leading:0,trailing:0,dataValid:!0,breakBefore:!1})}let v=u.slice(),w=!1;for(let a=0;a<v.length;a+=1){let b=s+a,c=s+a+1,{leading:d,trailing:e,breakBefore:f}=u[a],g=o[b],h=o[c],i=!Number.isFinite(g),j=!Number.isFinite(h),k=!i&&!j;k&&(d+=g,e+=h),0!==a&&k!==w&&(f=!0),w=k,v[a]={leading:d,trailing:e,dataValid:k,breakBefore:f}}let x=[],y=[],z=[];for(let b=0;b<v.length;b+=1){let{leading:c,dataValid:d,breakBefore:e}=v[b],f=s+b;if(e){if(0!==z.length){let a=v[b-1],c={point:{x:k.convert(n[f])+m,y:l.convert(a.trailing)},xDatum:n[f],yDatum:a.trailing};z.push(c);let d=tQ(z,j);x.push(...d),y.push(...d)}z.length=0}if(d){let a={point:{x:k.convert(n[f])+m,y:l.convert(c)},xDatum:n[f],yDatum:c};z.push(a)}else x.push(a[b])}if(0!==z.length){let a=v[v.length-1],b=s+v.length,c={point:{x:k.convert(n[b])+m,y:l.convert(a.trailing)},xDatum:n[b],yDatum:a.trailing};z.push(c);let d=tQ(z,j);x.push(...d),y.push(...d),z.length=0}return this.fillSpans=x,this.strokeSpans=y,{stack:v,fillSpans:x,strokeSpans:y}}createStackContext(){let a=this.axes.x;if(null==a)return;let{scale:b}=a,[c,d]=b.range,e=Math.abs(d-c),f=this.dataAggregationFilters?.find(a=>a.maxRange>e);return f?this.stackAggregatedData(f):this.stackYValueData()}createNodeData(){let{axes:a,data:b,processedData:c,dataModel:d,dataAggregationFilters:e}=this,f=a.x,g=a.y;if(!f||!g||!b||!d||!c)return;let{xKey:h,xName:i,yFilterKey:j,yKey:k,yName:l,marker:m,label:n,fill:o,stroke:p}=this.properties,q=f.scale,r=g.scale,{isContinuousY:s}=this.getScaleInformation({xScale:q,yScale:r}),t=(q.bandwidth??0)/2,u="grouped"===c.type,v=d.resolveKeysById(this,"xValue",c),w=d.resolveColumnById(this,"yValueRaw",c),x=u?d.resolveColumnById(this,"yValueCumulative",c):w,y=null!=j?d.resolveColumnById(this,"yFilterRaw",c):void 0,z=this.getSeriesDomain("y"),A=[],B=[],{visibleSameStackCount:C}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),D=!1,E=c.dataSources.get(this.id)??[],F=c.invalidData?.get(this.id),[G,H]=q.range,I=Math.abs(H-G),J=e?.find(a=>a.maxRange>I),K=0,L=0,M=J?.indices;[K,L]=this.visibleRangeIndices("xValue",f.range,M),K=Math.max(K-2,0),L=Math.min(L+2,M?.length??v.length),c.input.count<1e3&&(K=0,L=c.input.count);let N=(a,b,c)=>{let d;return(aL(this.properties.normalizedTo)?s&&jO(c):!isNaN(c))&&(d=b),{x:q.convert(a)+t,y:r.convert(d),size:m.size}},O=a=>{let b=v[a];if(null==b)return;let c=E[a],d=w[a],e=x[a],f=Number.isFinite(d)&&F?.[a]!==!0,g=N(b,+e,d),j=null!=y?y[a]===d:void 0;if(!1===j&&(D=!0),f&&m&&B.push({series:this,itemId:k,datum:c,datumIndex:a,midPoint:{x:g.x,y:g.y},cumulativeValue:+e,yValue:d,xValue:b,yKey:k,xKey:h,point:g,fill:m.fill??o,stroke:m.stroke??p,strokeWidth:m.strokeWidth??this.properties.strokeWidth,selected:j}),n.enabled&&f){let b=this.getLabelText(d,c,k,"y",z,n,{value:d,datum:c,xKey:h,yKey:k,xName:i,yName:l});A.push({series:this,itemId:k,datum:c,datumIndex:a,x:g.x,y:g.y,labelText:b})}};for(let a=K;a<L;a+=1){let b=M?.[a]??a;null!=v[b]&&O(b)}let P=uc(this.properties.segmentation,f,g,this.chart.seriesRect,this.ctx.scene,!1);return{itemId:k,fillData:{itemId:k,spans:this.fillSpans,phantomSpans:this.phantomSpans},strokeData:{itemId:k,spans:this.strokeSpans},labelData:A,nodeData:B,scales:this.calculateScaling(),visible:this.visible,stackVisible:C>0,crossFiltering:D,styles:t6(this,m),segments:P}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(a){let{paths:[b,c],visible:d,animationEnabled:e}=a,f=this.contextNodeData?.crossFiltering===!0,g=this.contextNodeData?.segments,{strokeWidth:h,stroke:i,strokeOpacity:j,lineDash:k,lineDashOffset:l,fill:m,fillOpacity:n,opacity:o}=dM(this.getHighlightStyle(),this.getStyle(!1));c.setProperties({segments:g,fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:i,strokeWidth:h,strokeOpacity:j*(f?.25:1),lineDash:k,lineDashOffset:l,opacity:o,visible:d||e}),c.datum=g,lL(b,{fill:m,stroke:void 0,fillOpacity:n*(f?.125:1)},this.getShapeFillBBox()),b.setProperties({segments:g,lineJoin:"round",pointerEvents:1,fillShadow:this.properties.shadow,opacity:o,visible:d||e}),b.datum=g,ua(this,c),ua(this,b)}updatePaths(a){this.updateAreaPaths(a.paths,a.contextData)}updateAreaPaths(a,b){for(let c of a)c.visible=b.visible;if(b.visible)this.updateFillPath(a,b),this.updateStrokePath(a,b);else for(let b of a)b.path.clear(),b.markDirty("AreaSeries")}updateFillPath(a,b){let[c]=a;c.path.clear(),tX(c,b.fillData),c.markDirty("AreaSeries")}updateStrokePath(a,b){let{spans:c}=b.strokeData,[,d]=a;d.path.clear(),tS(d,c),d.markDirty("AreaSeries")}updateDatumSelection(a){let{nodeData:b,datumSelection:c}=a,{contextNodeData:d,processedData:e,axes:f,properties:g}=this,{marker:h,styler:i}=g,j=i?this.getStyle(!1).marker:void 0,k=d?.crossFiltering===!0||t5(e.input.count,f.x.scale,h,j);return h.isDirty()&&(c.clear(),c.cleanup()),c.update(k?b:[])}updateDatumStyles(a){let{datumSelection:b,isHighlight:c}=a,{marker:d}=this.properties,e=this.ctx.highlightManager.getActiveHighlight();b.each((f,g)=>{if(!b.isGarbage(f)){let b=this.getHighlightState(e,a.isHighlight,g.datumIndex),f=this.getStyle(c,b),{stroke:h,strokeWidth:i,strokeOpacity:j}=f,k=this.makeItemStylerParams(this.dataModel,this.processedData,g.datumIndex,f.marker);g.style=this.getMarkerStyle(d,g,k,{isHighlight:c,highlightState:b},f.marker,{stroke:h,strokeWidth:i,strokeOpacity:j})}})}updateDatumNodes(a){let{contextNodeData:b}=this;if(!b)return;let{datumSelection:c,isHighlight:d}=a,e=this.getShapeFillBBox(),f=this.ctx.highlightManager.getActiveHighlight();c.each((a,c)=>{let g=c.style??b.styles[this.getHighlightState(f,d,c.datumIndex)];this.applyMarkerStyle(g,a,c.point,e,{selected:c.selected})}),d||this.properties.marker.markClean()}updateLabelSelection(a){return a.labelSelection.update(this.isLabelEnabled()?a.labelData:[])}updateLabelNodes(a){let{isHighlight:b=!1}=a,c=this.ctx.highlightManager?.getActiveHighlight(),d=this.makeLabelFormatterParams();a.labelSelection.each((a,e)=>{let f=sM(this,e,d,this.properties.label,b,c),{enabled:g,fontStyle:h,fontWeight:i,fontSize:j,fontFamily:k,color:l}=f;g&&e?.labelText?(a.fontStyle=h,a.fontWeight=i,a.fontSize=j,a.fontFamily=k,a.textAlign="center",a.textBaseline="bottom",a.text=e.labelText,a.x=e.x,a.y=e.y-10,a.fill=l,a.visible=!0,a.fillOpacity=this.getHighlightStyle(b,e.datumIndex).opacity??1,a.setBoxing(f)):a.visible=!1})}makeStylerParams(a,b){let{id:c}=this,{marker:d,fill:e,fillOpacity:f,lineDash:g,lineDashOffset:h,stroke:i,strokeOpacity:j,strokeWidth:k,xKey:l,yKey:m}=this.properties,n=ia(b??0);return{marker:{fill:d.fill,fillOpacity:d.fillOpacity,size:d.size,shape:d.shape,stroke:d.stroke,strokeOpacity:d.strokeOpacity,strokeWidth:d.strokeWidth,lineDash:d.lineDash,lineDashOffset:d.lineDashOffset},highlightState:n,highlighted:a,fill:e,fillOpacity:f,lineDash:g,lineDashOffset:h,seriesId:c,stroke:i,strokeOpacity:j,strokeWidth:k,xKey:l,yKey:m}}makeItemStylerParams(a,b,c,d){let{xKey:e,yKey:f}=this.properties,g=a.resolveKeysById(this,"xValue",b)[c],h=a.resolveColumnById(this,"yValueRaw",b)[c];return{...ip(g,h,e,f,a.getDomain(this,"xValue","key",b),a.getDomain(this,this.yCumulativeKey(b),"value",b)),xValue:g,yValue:h,...d}}makeLabelFormatterParams(){let{xKey:a,xName:b,yKey:c,yName:d}=this.properties;return{xKey:a,xName:b,yKey:c,yName:d}}getTooltipContent(a){let{id:b,dataModel:c,processedData:d,axes:e,properties:f}=this,{xKey:g,xName:h,yKey:i,yName:j,tooltip:k,legendItemName:l}=f,m=e.x,n=e.y;if(!c||!d||!m||!n)return;let o=d.dataSources.get(this.id)?.[a],p=c.resolveKeysById(this,"xValue",d)[a],q=c.resolveColumnById(this,"yValueRaw",d)[a];if(null==p)return;let r=this.getStyle(!1),s=this.makeItemStylerParams(c,d,a,r.marker),t=this.getMarkerStyle(this.properties.marker,{datumIndex:a,datum:o},s,{isHighlight:!1},r.marker);return this.formatTooltipWithContext(k,{heading:this.getAxisValueText(m,"tooltip",p,o,g,l),symbol:this.legendItemSymbol(),data:[{label:j,fallbackLabel:i,value:this.getAxisValueText(n,"tooltip",q,o,i,l)}]},{seriesId:b,datum:o,title:j,xKey:g,xName:h,yKey:i,yName:j,...t,...this.getModuleTooltipParams()})}legendItemSymbol(){let{fill:a,stroke:b,fillOpacity:c,strokeOpacity:d,strokeWidth:e,lineDash:f,marker:g}=this.getStyle(!1),h=!g.enabled||null==g.fill,i=h?a:g.fill;return{marker:{...this.getMarkerStyle(this.properties.marker,{},void 0,{isHighlight:!1,checkForHighlight:!1},{size:g.size,shape:g.shape,fill:i,fillOpacity:h?c:g.fillOpacity,stroke:g.stroke}),enabled:g.enabled||e<=0},line:{stroke:b,strokeOpacity:d,strokeWidth:e,lineDash:f}}}getLegendData(a){if("category"!==a)return[];let{id:b,ctx:{legendManager:c},visible:d}=this,{yKey:e,yName:f,legendItemName:g,showInLegend:h}=this.properties;return[{legendType:a,id:b,itemId:e,legendItemName:g,seriesId:b,enabled:d&&c.getItemEnabled({seriesId:b,itemId:e}),label:{text:g??f??e},symbol:this.legendItemSymbol(),hideInLegend:!h}]}animateEmptyUpdateReady(a){let{datumSelection:b,labelSelection:c,contextData:d,paths:e}=a,{animationManager:f}=this.ctx;this.updateAreaPaths(e,d),t7(this,f,...e),jz([b],t3),t1(this,f,b),sQ(this,"labels",f,c)}animateReadyResize(a){let{contextData:b,paths:c}=a;this.updateAreaPaths(c,b),super.animateReadyResize(a)}animateWaitingUpdateReady(a){let{animationManager:b}=this.ctx,{datumSelection:c,labelSelection:d,contextData:e,paths:f,previousContextData:g}=a,[h,i]=f;if(!1===e.visible&&g?.visible===!1||null==h&&null==i)return;this.resetDatumAnimation(a),this.resetLabelAnimation(a);let j=()=>{this.resetPathAnimation(a),this.updateAreaPaths(f,e)},k=()=>{b.skipCurrentBatch(),j()};if(null==e||null==g){j(),t_(this,b,"added",c),t8(this,"fill_path_properties",b,"add",h),t8(this,"stroke_path_properties",b,"add",i),sQ(this,"labels",b,d);return}if(e.crossFiltering!==g.crossFiltering)return void k();let l=t$(e,g);if(void 0===l)return void k();"no-op"!==l.status&&(t_(this,b,void 0,c),jw(this.id,"fill_path_properties",b,[h],l.fill.pathProperties),sL(this.id,"fill_path_update",b,[h],l.fill.path),jw(this.id,"stroke_path_properties",b,[i],l.stroke.pathProperties),sL(this.id,"stroke_path_update",b,[i],l.stroke.path),sQ(this,"labels",b,d),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(f,e)}))}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new l0}getStyle(a,b){let{styler:c,marker:d,fill:e,fillOpacity:f,lineDash:g,lineDashOffset:h,stroke:i,strokeOpacity:j,strokeWidth:k}=this.properties,{size:l,shape:m,fill:n="transparent",fillOpacity:o}=d,p={};if(c){let d=this.makeStylerParams(a,b),e=this.cachedCallWithContext(c,d)??{};p=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],e,{pick:!1})??{}}return p.marker??(p.marker={}),{fill:p.fill??e,fillOpacity:p.fillOpacity??f,lineDash:p.lineDash??g,lineDashOffset:p.lineDashOffset??h,stroke:p.stroke??i,strokeOpacity:p.strokeOpacity??j,strokeWidth:p.strokeWidth??k,marker:{enabled:p.marker.enabled??d.enabled,fill:p.marker.fill??n,fillOpacity:p.marker.fillOpacity??o,shape:p.marker.shape??m,size:p.marker.size??l,lineDash:p.marker.lineDash??d.lineDash??g,lineDashOffset:p.marker.lineDashOffset??d.lineDashOffset??h,stroke:p.marker.stroke??d.stroke??i,strokeOpacity:p.marker.strokeOpacity??d.strokeOpacity??j,strokeWidth:p.marker.strokeWidth??d.strokeWidth??k}}}getFormattedMarkerStyle(a){let b=this.getStyle(!1),c=this.makeItemStylerParams(this.dataModel,this.processedData,a.datumIndex,b.marker);return this.getMarkerStyle(this.properties.marker,a,c,{isHighlight:!0},void 0,b)}computeFocusBounds(a){return t4(this,a)}hasItemStylers(){return null!=this.properties.styler||null!=this.properties.marker.itemStyler||null!=this.properties.label.itemStyler}};uk.className="AreaSeries",uk.type="area";var ul={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:a=>new uk(a),stackable:!0,predictAxis:uf,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",ng],["image",nt],["pattern",np]]},stroke:{$palette:"stroke"},fillOpacity:.8,strokeOpacity:1,strokeWidth:{$isUserOption:["./stroke",2,0]},lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:mF,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:{$isUserOption:["./stroke",1,0]},fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",nl],["pattern",np]]},stroke:{$palette:"stroke"}},label:{...ny,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:nz(),segmentation:nC}}},um={type:"series",name:"area",chartType:"cartesian",options:qi,create:a=>new uk(a)},un=class extends f9{constructor(){super(...arguments),this.direction="x",this.featherRatio=0}get feathered(){return Math.abs(this.featherRatio)>1e-6}isPointInPath(a,b){return this.feathered?this.getBBox().containsPoint(a,b):super.isPointInPath(a,b)}updatePath(){if(!this.feathered)return void super.updatePath();let{path:a,borderPath:b,x:c,y:d,width:e,height:f,direction:g,featherRatio:h}=this;if(a.clear(),b.clear(),"x"===g){let b=Math.abs(h)*e;h>0?(a.moveTo(c,d),a.lineTo(c+e-b,d),a.lineTo(c+e,d+f/2),a.lineTo(c+e-b,d+f),a.lineTo(c,d+f)):(a.moveTo(c+b,d),a.lineTo(c+e,d),a.lineTo(c+e,d+f),a.lineTo(c+b,d+f),a.lineTo(c,d+f/2)),a.closePath()}else{let b=Math.abs(h)*f;h>0?(a.moveTo(c,d+b),a.lineTo(c+e/2,d),a.lineTo(c+e,d+b),a.lineTo(c+e,d+f),a.lineTo(c,d+f)):(a.moveTo(c,d),a.lineTo(c+e,d),a.lineTo(c+e,d+f-b),a.lineTo(c+e/2,d+f),a.lineTo(c,d+f-b)),a.closePath()}}renderStroke(a){if(!this.feathered)return void super.renderStroke(a);let{stroke:b,strokeWidth:c}=this;if(b&&c){let{globalAlpha:b}=a,{lineDash:d,lineDashOffset:e,lineCap:f,lineJoin:g,path:h}=this;this.applyStrokeAndAlpha(a),a.lineWidth=c,d&&a.setLineDash(d),e&&(a.lineDashOffset=e),f&&(a.lineCap=f),g&&(a.lineJoin=g),a.stroke(h.getPath2D()),a.globalAlpha=b}}};function uo(a,b){for(let c of b){let b=c.datum;void 0===b?aa.error("undefined datum"):a.addValue(c,b)}}function up(a,b){let{x:c,y:d}=b,{nearest:e,distanceSquared:f}=a.getQuadTree().find(c,d);if(void 0!==e)return{datum:e.value,distance:Math.sqrt(f)}}dl([d$()],un.prototype,"direction",2),dl([d$()],un.prototype,"featherRatio",2);var uq=class extends tg{constructor(){super(...arguments),this.direction="vertical"}};dl([ey],uq.prototype,"direction",2);var ur=class extends th{constructor(){super(...arguments),this.groupScale=new kJ,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(a,b){let c=aW(this.smallestDataInterval)?this.smallestDataInterval*("boolean"==typeof b?1:.5):0,d=o4(a)??[NaN,NaN];return"boolean"==typeof b?d[+!b]-=(b?1:-1)*c:(d[0]-=c,d[1]+=c),ja(d)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return"vertical"===this.properties.direction}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){let a=this.getBarDirection();return this.axes[a]}getCategoryAxis(){let a=this.getCategoryDirection();return this.axes[a]}getBandwidth(a,b){return iG.is(a.scale)?a.scale.calcBandwidth(this.smallestDataInterval,b):a.scale.bandwidth}xCoordinateRange(a){let b=this.axes[this.getCategoryDirection()],c=b.scale,d=this.getBandwidth(b,0)??0,e=iG.is(c)?-.5*d:0,f=c.convert(a)+e;return[f,f+d]}yCoordinateRange(a){let b=this.axes[this.getBarDirection()].scale,c=a.map(a=>b.convert(a));if(1===c.length){let a=b.convert(0);return[Math.min(c[0],a),Math.max(c[0],a)]}return[Math.min(...c),Math.max(...c)]}updateGroupScale(a){let b=[],{groupScale:c}=this,d=this.getBandwidth(a),{index:e,visibleGroupCount:f}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let a=0;a<f;a++)b.push(String(a));return c.domain=b,c.range=[0,d??0],a instanceof pO?c.paddingInner=a.groupPaddingInner:a instanceof o2?(c.paddingInner=a.groupPaddingInner,c.round=0!==c.padding):c.padding=0,{barWidth:c.bandwidth>=1?c.bandwidth:c.rawBandwidth,groupIndex:e}}resolveKeyDirection(a){return"x"===this.getBarDirection()?"x"===a?"y":"x":a}initQuadTree(a){uo(a,this.datumNodesIter())}pickNodeClosestDatum(a){return up(this,a)}};function us(a,b){return Array.from({length:a},(a,c)=>{let d=4*c;return(b[d+0]+b[d+1])/2|0})}var ut=class extends jK{constructor(){super(...arguments),this.placement="inside-center",this.spacing=0}};dl([ey],ut.prototype,"placement",2),dl([ey],ut.prototype,"spacing",2);var uu=class extends uq{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new s0,this.label=new ut,this.tooltip=s4(),this.sparklineMode=!1}};function uv(a,b,c,d){if(null!=b){let[a,c]=b;if(0!==a||1!==c)return!1}if(iG.is(a)){let b=a.calcBandwidth(d)-a.calcBandwidth(c);if(b>0&&b<1)return!1}if(iJ.is(a)){let{bandwidth:b,step:c}=a;if(b>0&&b<1)return!1;let d=c-b;if(d>0&&d<1)return!1}return!0}dl([ey],uu.prototype,"xKey",2),dl([ey],uu.prototype,"xName",2),dl([ey],uu.prototype,"yKey",2),dl([ey],uu.prototype,"yName",2),dl([ey],uu.prototype,"yFilterKey",2),dl([ey],uu.prototype,"stackGroup",2),dl([ey],uu.prototype,"normalizedTo",2),dl([ey],uu.prototype,"fill",2),dl([ey],uu.prototype,"fillOpacity",2),dl([ey],uu.prototype,"stroke",2),dl([ey],uu.prototype,"strokeWidth",2),dl([ey],uu.prototype,"strokeOpacity",2),dl([ey],uu.prototype,"lineDash",2),dl([ey],uu.prototype,"lineDashOffset",2),dl([ey],uu.prototype,"cornerRadius",2),dl([ey],uu.prototype,"crisp",2),dl([ey],uu.prototype,"styler",2),dl([ey],uu.prototype,"itemStyler",2),dl([ey],uu.prototype,"shadow",2),dl([ey],uu.prototype,"label",2),dl([ey],uu.prototype,"tooltip",2),dl([ey],uu.prototype,"sparklineMode",2);var uw=a=>aC(a.yValue??0);function ux(a,b,c){let{startingX:d,startingY:e}=function(a,b){let c=b[a?"y":"x"],d=1/0,e=0;return c&&(a?e=c.scale.convert(iG.is(c.scale)?0:Math.max(...c.range)):d=c.scale.convert(iG.is(c.scale)?0:Math.min(...c.range))),{startingX:d,startingY:e}}(a,b);return{isVertical:a,calculate:(b,c)=>{let f,g=a?b.x:d,h=a?e:b.y,i=a?b.width:0,j=a?0:b.height,{opacity:k=1}=b;return c&&(isNaN(g)||isNaN(h))&&({x:g,y:h}=c,i=a?c.width:0,j=a?0:c.height,a&&!uw(c)?h+=c.height:!a&&uw(c)&&(g+=c.width)),f=null==b.clipBBox?void 0:uw(b)?a?new dt(g,h-j,i,j):new dt(g-i,h,i,j):new dt(g,h,i,j),{x:g,y:h,width:i,height:j,clipBBox:f,opacity:k}},mode:c}}function uy(a,b){return{isVertical:a,calculate:b=>({x:a?b.x:b.x+b.width/2,y:a?b.y+b.height/2:b.y,width:a?b.width:0,height:a?0:b.height,clipBBox:b.clipBBox,opacity:b.opacity??1}),mode:b}}function uz(a,b){let c=a=>null==a||isNaN(a.x)||isNaN(a.y);return{toFn:(b,d,e)=>"removed"===e&&null==b.datum&&"fade"===a.mode?{...uA(b,d),opacity:0}:"removed"===e||c(d)?a.calculate(d,b.previousDatum):{x:d.x,y:d.y,width:d.width,height:d.height,clipBBox:d.clipBBox,opacity:d.opacity??1},fromFn:(d,e,f)=>{let g;"updated"===f&&c(e)?f="removed":"updated"===f&&c(d.previousDatum)&&(f="added"),"unknown"===f||"added"===f?(g=null==d.previousDatum&&"fade"===a.mode?{...uA(d,e),opacity:0}:a.calculate(e,d.previousDatum),"unknown"===f&&(f=b)):g={x:d.x,y:d.y,width:d.width,height:d.height,clipBBox:d.clipBBox,opacity:d.opacity??1};let h=jv[f];return{...g,phase:h}},applyFn:(a,b,c)=>{a.setProperties(b),a.crisp="end"===c&&(a.datum?.crisp??!1)}}}function uA(a,{x:b,y:c,width:d,height:e,clipBBox:f,opacity:g=1}){return{x:b,y:c,width:d,height:e,clipBBox:f,opacity:g,crisp:a.datum?.crisp??!1}}function uB(a,b){if(void 0===b)return;let{x:c,y:d,width:e,height:f}=b;return ff.toCanvas(a.contentGroup,new dt(c,d,e,f))}function uC(a,b,c,d,e,f){let g=f?.reduced?.diff?.[a];if(g?.changed)return g;let h=function(a,b){if(!b)return!1;let c=a.scales,d=b.scales;return!(tO(c.x,d.x)&&tO(c.y,d.y))||!!uD(a)&&!!uD(b)&&!tO(a.groupScale,b.groupScale)}(d,e);return null==g&&f?.reduced?.diff!=null?(g={changed:!0,added:new Set,updated:new Set,removed:new Set,moved:new Set},h?g.updated=new Set(Array.from(b,({datum:a})=>c(a))):g.added=new Set(Array.from(b,({datum:a})=>c(a)))):h&&(g={changed:!0,added:new Set,updated:new Set(Array.from(b,({datum:a})=>c(a))),removed:new Set,moved:new Set}),g}function uD(a){return"object"==typeof a&&null!==a&&"groupScale"in a}var uE=hy(function(a,b,c,d,e,f){if(b.length<1e3)return;let[g,h]=sU(a,e),i=sT(b,g,h,{smallestKeyInterval:f}),{indexData:j,valueData:k}=sY(b,d,c??d,g,h,i,{positive:!0}),{indexData:l,valueData:m}=sY(b,d,c??d,g,h,i,{positive:!1}),n=us(i,j),o=us(i,l),p=[{maxRange:i,positiveIndices:n,positiveIndexData:j,negativeIndices:o,negativeIndexData:l}];for(;i>64;)({indexData:j,valueData:k}=sZ(j,k,i)),({indexData:l,valueData:m,maxRange:i}=sZ(l,m,i)),n=us(i,j),o=us(i,l),p.push({maxRange:i,positiveIndices:n,positiveIndexData:j,negativeIndices:o,negativeIndexData:l});return p.reverse(),p}),uF=class extends ur{constructor(a){super({moduleCtx:a,propertyKeys:td,propertyNames:te,categoryKey:"xValue",pickModes:[2,1,0],pathsPerSeries:[],datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:uA,label:sS}}),this.properties=new uu,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return null!=this.properties.yFilterKey&&(null==this.seriesGrouping||0===this.seriesGrouping.stackIndex)}async processData(a){if(!this.data)return;let{xKey:b,yKey:c,yFilterKey:d,normalizedTo:e}=this.properties,{seriesGrouping:{groupIndex:f=this.id}={},data:g}=this,h=(this.seriesGrouping?.stackCount??0)>1||null!=e,i=!this.ctx.animationManager.isSkipped(),j=this.getCategoryAxis()?.scale,k=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:m,yScaleType:n}=this.getScaleInformation({xScale:j,yScale:k}),o=`bar-stack-${f}-yValues`,p=`${o}-trailing`,q=this.visible?{}:{forceValue:0},r=[pj(b,m,{id:"xValue"}),pk(c,n,{id:"yValue-raw",invalidValue:null,...q})];this.crossFilteringEnabled()&&r.push(pk(d,n,{id:"yFilterValue",invalidValue:null,...q})),h&&r.push(...pr(c,"normal","current",{id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:o,separateNegative:!0,...q},n),...pr(c,"trailing","current",{id:"yValue-start",invalidValue:null,missingValue:0,groupId:p,separateNegative:!0,...q},n)),l&&r.push(ps,pt),aW(e)&&r.push(pw([o,p],Math.abs(e))),i&&this.processedData&&r.push(pG(this.id,this.processedData)),(i||!h)&&r.push(pA());let{dataModel:s,processedData:t}=await this.requestDataModel(a,g,{props:r,groupByKeys:h,groupByData:!h});this.dataAggregationFilters=this.aggregateData(s,t),this.smallestDataInterval=t.reduced?.smallestKeyInterval,this.largestDataInterval=t.reduced?.largestKeyInterval,this.animationState.transition("updateData")}yCumulativeKey(a){return a.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw"}getSeriesDomain(a){let{processedData:b,dataModel:c}=this;if(null==c||null==b)return[];if(a===this.getCategoryDirection()){let a=c.resolveProcessedDataDefById(this,"xValue"),d=c.getDomain(this,"xValue","key",b);return a?.def.type==="key"&&"category"===a.def.valueType?d:this.padBandExtent(d)}let d=this.yCumulativeKey(c),e=this.domainForClippedRange(a,[d],"xValue"),f=this.crossFilteringEnabled()?c.getDomain(this,"yFilterValue","value",b):void 0;null!=f&&(e=[Math.min(e[0],f[0]),Math.max(e[1],f[1])]);let g=this.getValueAxis();return g instanceof pY&&!(g instanceof pZ)?ja(Number.isFinite(e[1]-e[0])?[Math.min(0,e[0]),Math.max(0,e[1])]:[]):ja(e)}getSeriesRange(a,b){if(("horizontal"===this.properties.direction?"x":"y")!==a)return[];let c=this.yCumulativeKey(this.dataModel),[d,e]=this.domainForVisibleRange("y",[c],"xValue",b);return[Math.min(d,0),Math.max(e,0)]}getZoomRangeFittingItems(a,b,c){let d=this.yCumulativeKey(this.dataModel);return this.zoomFittingVisibleItems("xValue",[d],a,b,c)}getVisibleItems(a,b,c){let d=this.yCumulativeKey(this.dataModel);return this.countVisibleItems("xValue",[d],a,b,c)}aggregateData(a,b){if(pe(b))return;let c=this.axes.x;if(null==c)return;let d=a.resolveKeysById(this,"xValue",b),e=a.hasColumnById(this,"yValue-start"),f=e?a.resolveColumnById(this,"yValue-start",b):void 0,g=e?a.resolveColumnById(this,"yValue-end",b):a.resolveColumnById(this,"yValue-raw",b),{index:h}=a.resolveProcessedDataDefById(this,"xValue"),i=b.domain.keys[h];return uE(c.scale.type,d,f,g,i,b.reduced?.smallestKeyInterval)}createNodeData(){let{dataModel:a,processedData:b,groupScale:c,dataAggregationFilters:d}=this,e=this.getCategoryAxis(),f=this.getValueAxis();if(!a||!b||!e||!f)return;let g=b.dataSources?.get(this.id);if(null==g)return;let h=e.scale,i=f.scale,{xKey:j,yKey:k,xName:l,yName:m,legendItemName:n,label:o}=this.properties,p=this.getSeriesDomain("y"),q=f.isReversed(),{barWidth:r,groupIndex:s}=this.updateGroupScale(e),t=c.convert(String(s)),u=iG.is(h)?-.5*r:0,v=a.hasColumnById(this,"yValue-start"),w=a.resolveKeysById(this,"xValue",b),x=a.resolveColumnById(this,"yValue-raw",b),y=v?a.resolveColumnById(this,"yValue-start",b):void 0,z=v?a.resolveColumnById(this,"yValue-end",b):void 0,A=this.crossFilteringEnabled()?a.resolveColumnById(this,"yFilterValue",b):void 0,B=!this.ctx.animationManager.isSkipped(),C=a=>h.convert(w[a])+t+u,[D,E]=h.range,F=Math.abs(E-D),G=d?.find(a=>a.maxRange>F),H=null==G&&(this.properties.crisp??uv(e?.scale,e?.visibleRange,this.smallestDataInterval,this.largestDataInterval)),I=i.convert(0),J=({datum:a,datumIndex:b,xValue:c,yValue:d,cumulativeValue:e,phantom:f,currY:g,prevY:h,x:l,width:m,isPositive:n,yRange:p,labelText:r,opacity:s,featherRatio:t,crossScale:u=1})=>{let v=n!==q,w=i.convert(g),x=i.convert(h),y=i.convert(p),z="x"===this.getBarDirection(),A=.5*m*(1-u),B={x:z?Math.min(w,x):l+A,y:z?l+A:Math.min(w,x),width:z?Math.abs(x-w):m*u,height:z?m*u:Math.abs(x-w)},C=new dt(B.x,B.y,B.width,B.height),D={x:z?Math.min(I,y):l+A,y:z?l+A:Math.min(I,y),width:z?Math.abs(I-y):m*u,height:z?m*u:Math.abs(I-y)},E=this.shouldFlipXY()?B.height:B.width,F=o.spacing+("number"==typeof o.padding?o.padding:0);return{series:this,itemId:f?pH(k,f):k,datum:a,datumIndex:b,cumulativeValue:e,phantom:f,xValue:c,yValue:d,yKey:k,xKey:j,capDefaults:{lengthRatioMultiplier:E,lengthMax:E},x:D.x,y:D.y,width:D.width,height:D.height,midPoint:{x:B.x+B.width/2,y:B.y+B.height/2},opacity:s,featherRatio:t,topLeftCornerRadius:z!==v,topRightCornerRadius:v,bottomRightCornerRadius:z===v,bottomLeftCornerRadius:!v,clipBBox:C,crisp:H,label:null!=r?{text:r,...sP({isUpward:v,isVertical:!z,placement:o.placement,spacing:F,rect:B})}:void 0,missing:null==d,focusable:!f}},K=[],L=[],M=[],N=(a,b,c,d,e,f,h=0,i=1)=>{let q=w[a];if(null==q)return;let r=g[a],s=x[a],t=null!=A?Number(A[a]):void 0,u=s>=0&&!Object.is(s,-0);if(!Number.isFinite(e)||null!=t&&!Number.isFinite(t))return;let v=o.enabled&&null!=s?this.getLabelText(t??s,r,k,"y",p,o,{datum:r,value:t??s,xKey:j,yKey:k,xName:l,yName:m,legendItemName:n}):void 0,y=null!=t&&t>s,z=J({datum:r,datumIndex:a,xValue:q,yValue:t??s,cumulativeValue:t??e,phantom:!1,currY:null!=t?d+t:e,prevY:d,x:b,width:c,isPositive:u,yRange:Math.max(d+(t??-1/0),f),labelText:v,opacity:i,featherRatio:h,crossScale:y?.6:void 0});if(L.push(z),M.push(z),null!=t){let j=J({datum:g[a],datumIndex:a,xValue:q,yValue:t,cumulativeValue:t,phantom:!0,currY:e,prevY:d,x:b,width:c,isPositive:u,yRange:f,labelText:void 0,opacity:i,featherRatio:h,crossScale:void 0});K.push(j)}};if(null!=G){let{positiveIndices:a,positiveIndexData:b,negativeIndices:c,negativeIndexData:d}=G,f=q?-1:1;for(let g=0;g<2;g+=1){let i=0===g,j=i?a:c,k=i?b:d,l=i?2:3,m=i?3:2,[n,o]=this.visibleRangeIndices("xValue",e.range,j);for(let a=n;a<o;a+=1){let b,c,d=4*a,e=k[d+0],g=k[d+1],j=k[d+l],n=k[d+m];if(-1===e||null==w[n]||null==w[j])continue;let o=C((e+g)/2|0),p=Math.abs(C(g)-C(e))+r;if(o-p<0||o>F)continue;let q=Math.abs(g-e)+1,s=iJ.is(h)?Math.min(h.bandwidth*Math.max(q-1,1)/(h.step*q),1):1,t=0;if(v)b=Number(y[j]),c=Number(z[n]);else{let a=Number(x[n]),d=Number(x[j]);b=0,c=a,t=(i?1:-1)*f*(1-d/a)}N(n,o,p,b,c,c,t,s)}}}else if("grouped"===b.type){let c=v?a.resolveProcessedDataIndexById(this,"yValue-range"):-1,d=b.columnScopes.findIndex(a=>a.has(this.id)),{groups:f}=b,[g,h]=iq(1,f.length,e.range,a=>{let b=f[a].keys[0];return this.xCoordinateRange(b)});for(let a=g;a<h;a+=1){let b=f[a],{aggregation:e}=b,g=b.datumIndices[d];if(null!=g)for(let a of g){let b=C(a),d=x[a],f=d>=0&&!Object.is(d,-0),g=v?Number(y?.[a]):0,h=v?Number(z?.[a]):d,i=h;v&&(i=e[c][+!!f]),N(a,b,r,g,h,i)}}}else{let a=b.invalidData?.get(this.id),[c,d]=this.visibleRangeIndices("xValue",e.range);b.input.count<1e3&&(c=0,d=b.input.count);for(let b=c;b<d;b+=1){if(a?.[b]===!0)continue;let c=C(b),d=Number(x[b]);N(b,c,r,0,d,d)}}let O=uc(this.properties.segmentation,e,f,this.chart.seriesRect,this.ctx.scene);return{itemId:k,nodeData:K.length>0?[...K,...L]:L,labelData:M,scales:this.calculateScaling(),visible:this.visible||B,groupScale:this.getScaling(this.groupScale),styles:it(this.getItemStyle.bind(this)),segments:O}}nodeFactory(){return new un}getHighlightData(a,b){let c=a.find(a=>a.datum===b.datum&&!a.phantom);return null!=c?[{...c}]:void 0}updateDatumSelection(a){return a.datumSelection.update(a.nodeData,void 0,a=>this.getDatumId(a))}makeStylerParams(a,b){let{id:c}=this,{cornerRadius:d,fill:e,fillOpacity:f,lineDash:g,lineDashOffset:h,stackGroup:i,stroke:j,strokeOpacity:k,strokeWidth:l,xKey:m,yKey:n}=this.properties;return{cornerRadius:d,fill:e,fillOpacity:f,highlightState:ia(b??0),highlighted:a,lineDash:g,lineDashOffset:h,seriesId:c,stackGroup:i,stroke:j,strokeOpacity:k,strokeWidth:l,xKey:m,yKey:n}}makeItemStylerParams(a,b,c,d,e,f){let{id:g}=this,{xKey:h,yKey:i,stackGroup:j}=this.properties,k=b.dataSources.get(g)?.[c],l=a.resolveColumnById(this,"yValue-raw",b)[c],m=a.getDomain(this,"xValue","key",b),n=a.getDomain(this,this.yCumulativeKey(a),"value",b),o=this.ctx.highlightManager?.getActiveHighlight(),p=this.getHighlightStateString(o,e,c);return{seriesId:g,...ip(d,l,h,i,m,n),datum:k,xValue:d,yValue:l,stackGroup:j,highlighted:e,highlightState:p,...f}}getStyle(a,b,c){let{cornerRadius:d,fill:e,fillOpacity:f,lineDash:g,lineDashOffset:h,stroke:i,strokeOpacity:j,strokeWidth:k,styler:l}=this.properties,m={};if(!a&&l){let a=this.makeStylerParams(b,c);m=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.cachedCallWithContext(l,a)??{},{pick:!1})??{}}return{cornerRadius:m.cornerRadius??d,fill:m.fill??e,fillOpacity:m.fillOpacity??f,lineDash:m.lineDash??g,lineDashOffset:m.lineDashOffset??h,opacity:1,stroke:m.stroke??i,strokeOpacity:m.strokeOpacity??j,strokeWidth:m.strokeWidth??k}}getItemStyle(a,b,c){let{properties:d,dataModel:e,processedData:f}=this,{itemStyler:g}=d,h=dM(this.getHighlightStyle(b,a,c),this.getStyle(void 0===a,b,c));if(g&&null!=e&&null!=f&&null!=a){let c=e.resolveKeysById(this,"xValue",f)[a],d=this.cachedDatumCallback(pH(this.getDatumId({xValue:c,phantom:!1}),b?"highlight":"node"),()=>{let d=this.makeItemStylerParams(e,f,a,c,b,h);return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.callWithContext(g,d))});d&&(h=dM(d,h))}return h}updateDatumStyles(a){let b=this.ctx.highlightManager.getActiveHighlight();a.datumSelection.each((c,d)=>{if(!a.datumSelection.isGarbage(c)){let c=this.getHighlightState(b,a.isHighlight,d.datumIndex);d.style=this.getItemStyle(d.datumIndex,a.isHighlight,c)}})}updateDatumNodes(a){let{contextNodeData:b}=this;if(!b)return;let c=this.ctx.highlightManager.getActiveHighlight(),{shadow:d}=this.properties,e="x"===this.getCategoryDirection(),f=this.getShapeFillBBox(),g=this.getBarDirection();a.datumSelection.each((h,i)=>{let j=i.style??b.styles[this.getHighlightState(c,a.isHighlight,i.datumIndex)];lL(h,j,f);let k=j.cornerRadius??0;h.topLeftCornerRadius=i.topLeftCornerRadius?k:0,h.topRightCornerRadius=i.topRightCornerRadius?k:0,h.bottomRightCornerRadius=i.bottomRightCornerRadius?k:0,h.bottomLeftCornerRadius=i.bottomLeftCornerRadius?k:0,h.visible=e?(i.clipBBox?.width??i.width)>0:(i.clipBBox?.height??i.height)>0,h.direction=g,h.featherRatio=i.featherRatio,h.crisp=i.crisp,h.fillShadow=d})}updateLabelSelection(a){let b=this.isLabelEnabled()?a.labelData:[];return a.labelSelection.update(b,a=>{a.pointerEvents=1})}updateLabelNodes(a){let{isHighlight:b=!1}=a,c={xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xKey,yKey:this.properties.yKey,yName:this.properties.yName??this.properties.yKey,legendItemName:this.properties.legendItemName??this.properties.xName??this.properties.xKey},d=this.ctx.highlightManager?.getActiveHighlight();a.labelSelection.each((a,e)=>{a.fillOpacity=this.getHighlightStyle(b,e?.datumIndex).opacity??1,sN(this,a,c,this.properties.label,e.label,b,d)})}getTooltipContent(a){let{id:b,dataModel:c,processedData:d,properties:e}=this,{xKey:f,xName:g,yKey:h,yName:i,legendItemName:j,stackGroup:k,tooltip:l}=e,m=this.getCategoryAxis(),n=this.getValueAxis();if(!c||!d||!m||!n)return;let o=d.dataSources.get(this.id)?.[a],p=c.resolveKeysById(this,"xValue",d)[a],q=c.resolveColumnById(this,"yValue-raw",d)[a];if(null==p)return;let r=this.getItemStyle(a,!1);return this.formatTooltipWithContext(l,{heading:this.getAxisValueText(m,"tooltip",p,o,f,j),symbol:this.legendItemSymbol(),data:[{label:i,fallbackLabel:h,value:this.getAxisValueText(n,"tooltip",q,o,h,j)}]},{seriesId:b,datum:o,title:i,xKey:f,xName:g,yKey:h,yName:i,legendItemName:j,stackGroup:k,...r,...this.getModuleTooltipParams()})}legendItemSymbol(){let{fill:a,stroke:b,strokeWidth:c,fillOpacity:d,strokeOpacity:e,lineDash:f,lineDashOffset:g}=this.getStyle(!1,!1,0);return{marker:{fill:a??"rgba(0, 0, 0, 0)",stroke:b??"rgba(0, 0, 0, 0)",fillOpacity:d,strokeOpacity:e,strokeWidth:c,lineDash:f,lineDashOffset:g}}}getLegendData(a){let{showInLegend:b}=this.properties;if("category"!==a)return[];let{id:c,ctx:{legendManager:d},visible:e}=this,{yKey:f,yName:g,legendItemName:h}=this.properties;return[{legendType:"category",id:c,itemId:f,seriesId:c,enabled:e&&d.getItemEnabled({seriesId:c,itemId:f}),label:{text:h??g??f},symbol:this.legendItemSymbol(),legendItemName:h,hideInLegend:!b}]}animateEmptyUpdateReady({datumSelection:a,labelSelection:b,annotationSelections:c}){let d=uz(ux(this.isVertical(),this.axes,"normal"),"unknown");jw(this.id,"nodes",this.ctx.animationManager,[a],d),sQ(this,"labels",this.ctx.animationManager,b),sQ(this,"annotations",this.ctx.animationManager,...c)}animateWaitingUpdateReady(a){let{datumSelection:b,labelSelection:c,annotationSelections:d,contextData:e,previousContextData:f}=a;this.ctx.animationManager.stopByAnimationGroupId(this.id);let g=uC(this.id,b,this.getDatumId.bind(this),a.contextData,f,this.processedData),h=null==f?"fade":"normal",i=uz(ux(this.isVertical(),this.axes,h),"added");jw(this.id,"nodes",this.ctx.animationManager,[b],i,(a,b)=>this.getDatumId(b),g),(!g||g?.changed||!tO(e.groupScale,f?.groupScale))&&(sQ(this,"labels",this.ctx.animationManager,c),sQ(this,"annotations",this.ctx.animationManager,...d))}getDatumId(a){return pH(a.xValue,a.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:a}){return uB(this,this.contextNodeData?.nodeData[a].clipBBox)}hasItemStylers(){return null!=this.properties.styler||null!=this.properties.itemStyler||null!=this.properties.label.itemStyler}};uF.className="BarSeries",uF.type="bar";var uG={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:a=>new uF(a),stackable:!0,groupable:!0,predictAxis:uf,defaultAxes:na,themeTemplate:{zoom:{autoScaling:{enabled:{$and:[{$eq:[{$path:"../axes"},"x"]},{$not:{$eq:[{$path:"/series/0/direction"},"horizontal"]}}]}}},series:{direction:"vertical",fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",ng],["image",nt],["pattern",np]]},stroke:{$palette:"stroke"},fillOpacity:1,strokeWidth:{$isUserOption:["./stroke",2,0]},lineDash:[0],lineDashOffset:0,label:{...ny,padding:{$isUserOption:["./spacing",0,8]},enabled:!1,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$if:[{$or:[{$eq:[{$path:"./placement"},"outside-start"]},{$eq:[{$path:"./placement"},"outside-end"]}]},{$ref:"textColor"},{$ref:"chartBackgroundColor"}]},placement:"inside-center"},shadow:{enabled:!1,color:mF,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}},highlight:nz(),segmentation:nC}}},uH={type:"series",name:"bar",chartType:"cartesian",options:qm,create:a=>new uF(a)};function uI(a,b,c,d,e,f,g,h,i,j,k){let l=g.length<5&&j-h<.05&&k-i<.05||h===j&&i===k?null:function(a,b,c,d,e,f,g,h,i,j,k){let l=[{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]}],m=(h+j)/2,n=(i+k)/2;for(let h of g){let g=a[h],i=b[h];if(null==g||null==i)continue;let j=sW(g,c,e),k=sW(i,d,f),o=l[+(j>m)+2*(k>n)];o.indices.push(h),o.x0=Math.min(o.x0,j),o.y0=Math.min(o.y0,k),o.x1=Math.max(o.x1,j),o.y1=Math.max(o.y1,k)}let o=[];for(let g of l){let{indices:h,x0:i,x1:j,y0:k,y1:l}=g;if(0===h.length)continue;let m=uI(a,b,c,d,e,f,h,i,k,j,l);o.push(m)}return o}(a,b,c,d,e,f,g,h,i,j,k);if(l?.length===1)return l[0];l?.length===0&&(l=null);let m=Math.hypot(j-h,k-i),n=function(a,b,c,d,e,f,g,h,i,j,k){let l=0,m=1/0,n=(h+j)/2,o=(i+k)/2;for(let h of g){let g=a[h],i=b[h];if(null==g||null==i)continue;let j=(sW(g,c,e)-n)**2+(sW(i,d,f)-o)**2;j<m&&(m=j,l=h)}return l}(a,b,c,d,e,f,g,h,i,j,k);return{scale:m,x0:h,y0:i,x1:j,y1:k,indices:g,primaryDatumIndex:n,children:l}}function uJ(a,b,c,d,e,f){let{xRange:g,yRange:h,xVisibleRange:[i,j],yVisibleRange:[k,l],minSize:m,maxSize:n}=c,{xValues:o,yValues:p,xd0:q,xd1:r,yd0:s,yd1:t}=b,u=1/Math.min(g/(j-i),h/(l-k));for(let{sizeRatio:c,node:v}of b.filters){let b=.5*(m+c*(n-m)),w=b*u,x=a*w,y=i-b/g,z=j+b/g,A=k-b/h,B=l+b/h,C=[v];for(;C.length>0;){let b=C.pop();if(!(b.x1<y)&&!(b.x0>z)&&!(b.y1<A)&&!(b.y0>B))if(1!==a&&b.scale<=x)null!=d&&(d.count+=1),e?.push({datumIndex:b.primaryDatumIndex,count:b.indices.length,area:(b.x1-b.x0)*(b.y1-b.y0),dilation:aA(1,b.scale/w,a)});else if(null==b.children){let{indices:a}=b;if(null!=d){let c=b.x0>=i&&b.x1<=j&&b.y0>=k&&b.y1<=l?a.length:function(a,b,c,d,e,f,g,h,i,j,k){let l=0;for(let m of g){let g=a[m],n=b[m];if(null==g||null==n)continue;let o=sW(g,c,e),p=sW(n,d,f);o>=h&&o<=j&&p>=i&&p<=k&&(l+=1)}return l}(o,p,q,s,r,t,a,i,k,j,l);d.count+=c}f?.push(...a)}else C.push(...b.children)}}}function uK(a,b,c){let d={count:0};return uJ(a,b,c,d,void 0,void 0),d.count}var uL=class extends s1{constructor(){super(...arguments),this.maxSize=30}};dl([ey,d$()],uL.prototype,"maxSize",2),dl([ey,d1()],uL.prototype,"domain",2);var uM=class extends jK{constructor(){super(...arguments),this.placement="top"}};dl([ey],uM.prototype,"placement",2);var uN=class extends tg{constructor(){super(...arguments),this.label=new uM,this.tooltip=s4(),this.maxRenderedItems=1/0,this.marker=new uL}};dl([ey],uN.prototype,"xKey",2),dl([ey],uN.prototype,"yKey",2),dl([ey],uN.prototype,"sizeKey",2),dl([ey],uN.prototype,"labelKey",2),dl([ey],uN.prototype,"xFilterKey",2),dl([ey],uN.prototype,"yFilterKey",2),dl([ey],uN.prototype,"sizeFilterKey",2),dl([ey],uN.prototype,"xName",2),dl([ey],uN.prototype,"yName",2),dl([ey],uN.prototype,"sizeName",2),dl([ey],uN.prototype,"labelName",2),dl([ey],uN.prototype,"title",2),dl([fG("marker.shape")],uN.prototype,"shape",2),dl([fG("marker.size")],uN.prototype,"size",2),dl([fG("marker.maxSize")],uN.prototype,"maxSize",2),dl([fG("marker.domain")],uN.prototype,"domain",2),dl([fG("marker.fill")],uN.prototype,"fill",2),dl([fG("marker.fillOpacity")],uN.prototype,"fillOpacity",2),dl([fG("marker.stroke")],uN.prototype,"stroke",2),dl([fG("marker.strokeWidth")],uN.prototype,"strokeWidth",2),dl([fG("marker.strokeOpacity")],uN.prototype,"strokeOpacity",2),dl([fG("marker.lineDash")],uN.prototype,"lineDash",2),dl([fG("marker.lineDashOffset")],uN.prototype,"lineDashOffset",2),dl([fG("marker.itemStyler")],uN.prototype,"itemStyler",2),dl([ey],uN.prototype,"styler",2),dl([ey],uN.prototype,"label",2),dl([ey],uN.prototype,"tooltip",2),dl([ey],uN.prototype,"maxRenderedItems",2);var uO=class extends tf{constructor(a,b,c,d){super(a,b,c,d),this.sizeKey=d.properties.sizeKey}},uP=class extends th{constructor(a){super({moduleCtx:a,propertyKeys:{...td,label:["labelKey"],size:["sizeKey"]},propertyNames:{...te,label:["labelName"],size:["sizeName"]},categoryKey:void 0,pickModes:[2,1,0],pathsPerSeries:[],datumSelectionGarbageCollection:!1,animationResetFns:{label:sS,datum:t2},usesPlacedLabels:!0,clipFocusBox:!1}),this.NodeEvent=uO,this.properties=new uN,this.dataAggregation=void 0,this.sizeScale=new pX}get pickModeAxis(){return"main-category"}get type(){return super.type}async processData(a){if(null==this.data||!this.visible)return;let b=this.axes.x?.scale,c=this.axes.y?.scale,{xScaleType:d,yScaleType:e}=this.getScaleInformation({xScale:b,yScale:c}),f=this.sizeScale.type,{xKey:g,yKey:h,sizeKey:i,xFilterKey:j,yFilterKey:k,sizeFilterKey:l,labelKey:m,marker:n}=this.properties,{dataModel:o,processedData:p}=await this.requestDataModel(a,this.data,{props:[pk(g,d,{id:"xValue"}),pk(h,e,{id:"yValue"}),...null!=j?[pk(j,d,{id:"xFilterValue"})]:[],...null!=k?[pk(k,e,{id:"yFilterValue"})]:[],...null!=l?[pk(l,f,{id:"sizeFilterValue"})]:[],...i?[pk(i,f,{id:"sizeValue"})]:[],...m?[pk(m,"category",{id:"labelValue"})]:[]]}),q=i?o.resolveProcessedDataIndexById(this,"sizeValue"):void 0,r=n.domain?[n.domain[0],n.domain[1]]:void 0;this.sizeScale.domain=r??(null==q?void 0:p.domain.values[q])??[],this.dataAggregation=this.aggregateData(o,p),this.animationState.transition("updateData")}xCoordinateRange(a,b,c){let{properties:d,sizeScale:e}=this,{size:f,sizeKey:g}=d,h=this.axes.x.scale.convert(a),i=null!=g?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,j=.5*(null!=i?e.convert(i[c]):f)*b;return[h-j,h+j]}yCoordinateRange(a,b,c){let{properties:d,sizeScale:e}=this,{size:f,sizeKey:g}=d,h=this.axes.y.scale.convert(a[0]),i=null!=g?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,j=.5*(null!=i?e.convert(i[c]):f)*b;return[h-j,h+j]}getSeriesDomain(a){let{dataModel:b,processedData:c}=this;if(!c||!b)return[];let d={x:"xValue",y:"yValue"},e=d[a],f=b.resolveProcessedDataDefById(this,e),g=b.getDomain(this,e,"value",c);if(f?.def.type==="value"&&f?.def.valueType==="category")return g;let h=d["x"===a?"y":"x"];return ja(o4(this.domainForClippedRange(a,[e],h)))}getSeriesRange(a,b){return this.domainForVisibleRange("y",["yValue"],"xValue",b)}getVisibleItems(a,b,c){let{dataAggregation:d,axes:e}=this,f=e.x,g=e.y;return null==d||null==f||null==g?this.countVisibleItems("xValue",["yValue"],a,b,c):uK(0,d,this.aggregationOptions(f,g,a,b??[0,1]))}aggregateData(a,b){if("grouped"===b.type||b.input.count<=this.properties.maxRenderedItems)return;let c=this.axes.x,d=this.axes.y;if(null==c||null==d)return;let e=c.scale,f=d.scale;if(!iG.is(e)||!iG.is(f))return;let{sizeScale:g,properties:h}=this,{sizeKey:i}=h,j=a.resolveColumnById(this,"xValue",b),k=a.resolveColumnById(this,"yValue",b),l=i?a.resolveColumnById(this,"sizeValue",b):void 0,m=a.getDomain(this,"xValue","value",b),n=a.getDomain(this,"yValue","value",b),o=i?g.domain:[0,0];return function(a,b,c,d,e,f,g,h){let[i,j]=sU(a,f),[k,l]=sU(b,g),[m,n]=h,o=[];if(null!=e&&n>m){let a=Array.from({length:3},()=>[]);for(let b=0;b<e.length;b+=1){let c=(e[b]-m)/(n-m)*3|0;c>=0&&c<3&&a[c].push(b)}for(let b=0;b<a.length;b+=1){let e=uI(c,d,i,k,j,l,a[b],0,0,1,1);if(null!=e){let a=b/3;o.push({sizeRatio:a,node:e})}}}else{let a=c.map((a,b)=>b),b=uI(c,d,i,k,j,l,a,0,0,1,1);null!=b&&o.push({sizeRatio:0,node:b})}return o.length>0?{xValues:c,yValues:d,xd0:i,xd1:j,yd0:k,yd1:l,filters:o}:void 0}(e.type,f.type,j,k,l,m,n,o)}aggregationOptions(a,b,c=a.visibleRange,d=b.visibleRange){let{processedData:e,dataModel:f}=this,{sizeKey:g}=this.properties,[h,i]=this.getSizeRange(),j=Math.abs(a.range[1]-a.range[0]),k=Math.abs(b.range[1]-b.range[0]),l=Math.max(h,1),m=g?Math.max(i,1):l,n=a.scale,o=b.scale;return null!=e&&null!=f&&(iG.is(n)&&(c=kO(c,n.domain.map(kC),f.getDomain(this,"xValue","value",e).map(kC))),iG.is(o)&&(d=kO(d,o.domain.map(kC),f.getDomain(this,"yValue","value",e).map(kC)))),{xRange:j,yRange:k,minSize:l,maxSize:m,xVisibleRange:c,yVisibleRange:d}}createNodeData(){let a,{axes:b,dataModel:c,processedData:d,sizeScale:e,visible:f}=this,{xKey:g,yKey:h,sizeKey:i,xFilterKey:j,yFilterKey:k,sizeFilterKey:l,labelKey:m,xName:n,yName:o,sizeName:p,labelName:q,label:r,marker:s,maxRenderedItems:t}=this.properties,{enabled:u,placement:v}=r,w=l0.anchor(s.shape),x=b.x,y=b.y;if(!(c&&d&&x&&y))return;let z=!this.ctx.animationManager.isSkipped(),A=c.resolveColumnById(this,"xValue",d),B=c.resolveColumnById(this,"yValue",d),C=null!=i?c.resolveColumnById(this,"sizeValue",d):void 0,D=null!=m?c.resolveColumnById(this,"labelValue",d):void 0,E=null!=j?c.resolveColumnById(this,"xFilterValue",d):void 0,F=null!=k?c.resolveColumnById(this,"yFilterValue",d):void 0,G=null!=l?c.resolveColumnById(this,"sizeFilterValue",d):void 0;a=m?[]:i?c.getDomain(this,"sizeValue","value",d):[];let H=x.scale,I=y.scale,J=(H.bandwidth??0)/2,K=(I.bandwidth??0)/2,L=[];e.range=this.getSizeRange();let M=db(r),N=d.dataSources.get(this.id);if(null==N)return;let O=jL(r),P=(b,c,d,f)=>{let j,k,l=N[b],t=A[b],x=B[b],y=C?.[b],z=H.convert(t)+J,P=I.convert(x)+K;if(null!=E&&null!=F&&(j=E[b]===t&&F[b]===x,null!=G&&j&&(j=G[b]===y)),u){let c,d,e;m&&D?(c=D[b],d=m,e="label"):i?(c=y,d=i,e="size"):(c=x,d=h,e="y");let f=this.getLabelText(c,l,d,e,a,r,{value:c,datum:l,xKey:g,yKey:h,sizeKey:i,labelKey:m,xName:n,yName:o,sizeName:p,labelName:q}),j=M.measureText(String(f));j.width+=O.left+O.right,j.height+=O.bottom+O.top,k={text:f,...j}}else k={text:"",width:0,height:0};let Q=null!=y?e.convert(y):e.range[0];L.push({series:this,itemId:h,yKey:h,xKey:g,datum:l,datumIndex:b,xValue:t,yValue:x,sizeValue:y,capDefaults:{lengthRatioMultiplier:s.getDiameter(),lengthMax:1/0},point:{x:z,y:P,size:Math.sqrt(d)*Q},midPoint:{x:z,y:P},label:k,anchor:w,placement:v,count:c,dilation:d,area:f,selected:j})},{dataAggregation:Q}=this;if(f)if(null==Q)for(let a=0;a<N.length;a++)P(a,1,1,0);else{let a=this.aggregationOptions(x,y),{groupedAggregation:b,singleDatumIndices:c}=function(a,b,c){let d=[],e=[];return uJ(a,b,c,void 0,d,e),{groupedAggregation:d,singleDatumIndices:e}}(function(a,b,c){if(uK(1,a,b)<=c)return 1;let d=1,e=2;for(;uK(e,a,b)>c&&e<100;)d*=2,e*=2;for(let f=0;f<12;f+=1){let f=(e+d)/2;uK(f,a,b)>c?d=f:e=f}return(d+e)/2}(Q,a,t),Q,a);for(let{datumIndex:a,count:c,dilation:d,area:e}of b)P(a,c,d,e);for(let a of c)P(a,1,1,0)}return{itemId:h,nodeData:L,labelData:u?L:[],scales:this.calculateScaling(),visible:this.visible||z,styles:t6(this,s)}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}updateDatumSelection(a){let b,{nodeData:c,datumSelection:d}=a,{sizeKey:e}=this.properties;return this.properties.marker.isDirty()&&(d.clear(),d.cleanup()),e&&(b=a=>pH(a.xValue,a.yValue,a.sizeValue,a.label.text)),d.update(c,void 0,b)}updateDatumStyles(a){let{datumSelection:b,isHighlight:c}=a,{xKey:d,yKey:e,sizeKey:f,labelKey:g,marker:h}=this.properties,i={xKey:d,yKey:e,sizeKey:f,labelKey:g},j=this.ctx.highlightManager.getActiveHighlight();b.each((d,e)=>{if(!b.isGarbage(d)){let b=this.getHighlightState(j,a.isHighlight,e.datumIndex),d=this.getStyle(a.isHighlight,b);e.style=this.getMarkerStyle(h,e,i,{isHighlight:c,highlightState:b,resolveItemStylerMarkerPath:!1},d)}})}updateDatumNodes(a){let{contextNodeData:b}=this;if(!b)return;let{datumSelection:c,isHighlight:d}=a;this.sizeScale.range=this.getSizeRange();let e=this.getShapeFillBBox(),f=null!=this.dataAggregation,g=this.ctx.highlightManager.getActiveHighlight();c.each((a,c,h)=>{let{point:{size:i},count:j,area:k,dilation:l}=c,m=c.style??b.styles[this.getHighlightState(g,d,c.datumIndex)];if((m={...m}).size=i,l>1){let a=m.fillOpacity??0,b=.269669+683e-6*j+-37.534348*k+.004449*j*k+-0*j**2+44.428603*k**2;m.fillOpacity=aA(a/l,a/.1*b,1)}this.applyMarkerStyle(m,a,c.point,e,{selected:c.selected}),a.zIndex=f?[-j,h]:0}),d||this.properties.marker.markClean()}updatePlacedLabelData(a){this.labelSelection.update(a.map(a=>({...a.datum,point:{x:a.x,y:a.y,size:a.datum.point.size}})),a=>{a.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(a){let{isHighlight:b=!1}=a,c=this.ctx.highlightManager?.getActiveHighlight(),d=this.makeLabelFormatterParams();a.labelSelection.each((a,e)=>{let f=sM(this,e,d,this.properties.label,b,c);a.text=e.label.text,a.fill=f.color,a.x=e.point?.x??0,a.y=e.point?.y??0,a.fontStyle=f.fontStyle,a.fontWeight=f.fontWeight,a.fontSize=f.fontSize,a.fontFamily=f.fontFamily,a.textBaseline="top",a.fillOpacity=this.getHighlightStyle(b,e.datumIndex).opacity??1,a.setBoxing(f)})}makeStylerParams(a,b){let{id:c,properties:{size:d,maxSize:e,shape:f,fill:g,fillOpacity:h,lineDash:i,lineDashOffset:j,stroke:k,strokeOpacity:l,strokeWidth:m,xKey:n,yKey:o,sizeKey:p,labelKey:q}}=this,r=ia(b??0);return"bubble"===this.type?{highlightState:r,highlighted:a,size:d,maxSize:e,shape:f,fill:g,fillOpacity:h,lineDash:i,lineDashOffset:j,seriesId:c,sizeKey:p,stroke:k,strokeOpacity:l,strokeWidth:m,xKey:n,yKey:o,labelKey:q}:"scatter"===this.type?{highlightState:r,highlighted:a,size:d,shape:f,fill:g,fillOpacity:h,lineDash:i,lineDashOffset:j,seriesId:c,stroke:k,strokeOpacity:l,strokeWidth:m,xKey:n,yKey:o,labelKey:q}:this.type}makeLabelFormatterParams(){let{xKey:a,xName:b,yKey:c,yName:d,sizeKey:e,sizeName:f,labelKey:g,labelName:h}=this.properties;return{xKey:a,xName:b,yKey:c,yName:d,sizeKey:e,sizeName:f,labelKey:g,labelName:h}}getTooltipContent(a){let{id:b,dataModel:c,processedData:d,axes:e,properties:f,ctx:g}=this,{formatManager:h}=g,{xKey:i,xName:j,yKey:k,yName:l,sizeKey:m,sizeName:n,labelKey:o,labelName:p,title:q,tooltip:r,marker:s,legendItemName:t}=f,u=e.x,v=e.y;if(!c||!d||!u||!v)return;let w=d.dataSources.get(this.id)?.[a],x=c.resolveColumnById(this,"xValue",d)[a],y=c.resolveColumnById(this,"yValue",d)[a];if(null==x)return;let z=[];if(this.isLabelEnabled()&&null!=o){let e=c.resolveColumnById(this,"labelValue",d)[a],f=h.format(this.callWithContext.bind(this),{type:"category",value:e,datum:w,seriesId:b,legendItemName:t,key:o,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});z.push({label:p,fallbackLabel:o,value:f??g4(e)})}if(z.push({label:j,fallbackLabel:i,value:this.getAxisValueText(u,"tooltip",x,w,i,t)},{label:l,fallbackLabel:k,value:this.getAxisValueText(v,"tooltip",y,w,k,t)}),null!=m){let e=c.resolveColumnById(this,"sizeValue",d)[a],f=c.getDomain(this,"sizeValue","value",d),g=h.format(this.callWithContext.bind(this),{type:"number",value:e,datum:w,seriesId:b,legendItemName:t,key:m,source:"tooltip",property:"size",boundSeries:this.getFormatterContext("size"),domain:f,fractionDigits:void 0});z.push({label:n,fallbackLabel:m,value:g??g4(e)})}let A=this.getMarkerStyle(s,{datum:w,datumIndex:a},{xKey:i,yKey:k,sizeKey:m,labelKey:o,highlighted:!0},{resolveItemStylerMarkerPath:!1});return this.formatTooltipWithContext(r,{title:q,symbol:this.legendItemSymbol(),data:z},{seriesId:b,datum:w,title:k,xKey:i,xName:j,yKey:k,yName:l,sizeKey:m,sizeName:n,labelKey:o,labelName:p,...A,...this.getModuleTooltipParams()})}legendItemSymbol(){let a=this.getStyle(!1);return{marker:this.getMarkerStyle(this.properties.marker,{},void 0,{isHighlight:!1,checkForHighlight:!1,resolveItemStylerMarkerPath:!1},a)}}getLegendData(){let{id:a,ctx:{legendManager:b},visible:c}=this,{yKey:d,yName:e,title:f}=this.properties;return[{legendType:"category",id:a,itemId:d,seriesId:a,enabled:c&&b.getItemEnabled({seriesId:a,itemId:d}),label:{text:f??e??d},symbol:this.legendItemSymbol()}]}animateEmptyUpdateReady({datumSelection:a,labelSelection:b}){t0(this,this.ctx.animationManager,a),sQ(this,"labels",this.ctx.animationManager,b)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new l0}getStyle(a,b){let{properties:c}=this,d={};if(c.styler){let e=this.makeStylerParams(a,b),f=this.cachedCallWithContext(c.styler,e)??{};d=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],f,{pick:!1})??{}}return{fill:d.fill??c.fill,fillOpacity:d.fillOpacity??c.fillOpacity,lineDash:d.lineDash??c.lineDash,lineDashOffset:d.lineDashOffset??c.lineDashOffset,shape:d.shape??c.shape,size:d.size??c.size,maxSize:d.maxSize??c.maxSize,stroke:d.stroke??c.stroke,strokeOpacity:d.strokeOpacity??c.strokeOpacity,strokeWidth:d.strokeWidth??c.strokeWidth}}getSizeRange(){let{size:a,maxSize:b}=this.getStyle(!1);return[a,b]}getFormattedMarkerStyle(a){let{xKey:b,yKey:c,sizeKey:d,labelKey:e,marker:f}=this.properties;return this.getMarkerStyle(f,a,{xKey:b,yKey:c,sizeKey:d,labelKey:e},{resolveItemStylerMarkerPath:!1})}computeFocusBounds(a){return t4(this,a)}hasItemStylers(){let{styler:a,itemStyler:b,marker:c,label:d}=this.properties;return!!(a??b??c.itemStyler??d.itemStyler)}initQuadTree(a){uo(a,this.datumNodesIter())}pickNodeDataClosestDatum(a){return up(this,a)}};uP.className="BubbleSeries",uP.type="bubble";var uQ={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:a=>new uP(a),predictAxis:ue,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",nl],["image",nt],["pattern",np]]},stroke:{$palette:"stroke"},fillOpacity:.8,maxRenderedItems:1e4,label:{...ny,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:nz()}}},uR={type:"series",name:"bubble",chartType:"cartesian",options:qo,create:a=>new uP(a)},uS=class extends tg{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new s0,this.label=new jK,this.tooltip=s4()}getStyle(){let{fill:a,fillOpacity:b,stroke:c,strokeWidth:d,strokeOpacity:e,lineDash:f,lineDashOffset:g,cornerRadius:h}=this;return{fill:a,fillOpacity:b,stroke:c,strokeWidth:d,strokeOpacity:e,lineDash:f,lineDashOffset:g,cornerRadius:h,opacity:1}}};dl([ey],uS.prototype,"xKey",2),dl([ey],uS.prototype,"yKey",2),dl([ey],uS.prototype,"xName",2),dl([ey],uS.prototype,"yName",2),dl([ey],uS.prototype,"fill",2),dl([ey],uS.prototype,"fillOpacity",2),dl([ey],uS.prototype,"stroke",2),dl([ey],uS.prototype,"strokeWidth",2),dl([ey],uS.prototype,"strokeOpacity",2),dl([ey],uS.prototype,"lineDash",2),dl([ey],uS.prototype,"lineDashOffset",2),dl([ey],uS.prototype,"cornerRadius",2),dl([ey],uS.prototype,"areaPlot",2),dl([ey],uS.prototype,"bins",2),dl([ey],uS.prototype,"aggregation",2),dl([ey],uS.prototype,"binCount",2),dl([ey],uS.prototype,"shadow",2),dl([ey],uS.prototype,"label",2),dl([ey],uS.prototype,"tooltip",2);var uT=class extends th{constructor(a){super({moduleCtx:a,propertyKeys:td,propertyNames:te,categoryKey:void 0,pickModes:[1,0],datumSelectionGarbageCollection:!0,animationResetFns:{datum:uA,label:sS}}),this.properties=new uS,this.calculatedBins=[]}deriveBins(a){let b=kU(a[0],a[1],10).ticks,c=kZ(a[0],a[1],10),[d]=b;return[[d-c,d],...b.map(a=>[a,a+c])]}calculateNiceBins(a,b){let c=Math.floor(a[0]),d=a[1],e=b||1,{start:f,binSize:g}=this.calculateNiceStart(c,d,e);return this.getBins(f,d,g,e)}getBins(a,b,c,d){let e=[],f=this.calculatePrecision(c);for(let g=0;g<d;g++){let h=Math.round((a+g*c)*f)/f,i=Math.round((a+(g+1)*c)*f)/f;g===d-1&&(i=Math.max(i,b)),e[g]=[h,i]}return e}calculatePrecision(a){let b=10;if(isFinite(a)&&a>0)for(;a<1;)b*=10,a*=10;return b}calculateNiceStart(a,b,c){let d=Math.abs(b-a)/c,e=Math.pow(10,Math.floor(Math.log10(d)));return{start:Math.floor(a/e)*e,binSize:d}}async processData(a){let{visible:b}=this,{xKey:c,yKey:d,areaPlot:e,aggregation:f}=this.properties,g=this.axes.x?.scale,h=this.axes.y?.scale,{xScaleType:i,yScaleType:j}=this.getScaleInformation({yScale:h,xScale:g}),k=b?{}:{forceValue:0},l=[pj(c,i),pu];if(d){let a=o9("groupAgg",{visible:b});"count"===f||("sum"===f?a=o8("groupAgg",{visible:b}):"mean"===f&&(a=pa("groupAgg",{visible:b}))),e&&(a=pb("groupAgg",a)),l.push(pk(d,j,{invalidValue:void 0,...k}),a)}else{l.push(pl("count"));let a=o9("groupAgg",{visible:b});e&&(a=pb("groupAgg",a)),l.push(a)}let m=[],n=a=>{let b=ja(a.domain.keys[0]);if(0===b.length)return a.domain.groups=[],()=>[];let c=aV(this.properties.binCount)?this.calculateNiceBins(b,this.properties.binCount):this.properties.bins??this.deriveBins(b),d=c.length;return m=[...c],a=>{let b=a[0];if(aN(b)&&(b=b.getTime()),!aV(b))return[];for(let a=0;a<d;a++){let e=c[a];if(b>=e[0]&&b<e[1]||a===d-1&&b<=e[1])return e}return[]}},{dataModel:o,processedData:p}=await this.requestDataModel(a,this.data,{props:l,groupByFn:n}),q=new Map;p.groups.forEach((a,b)=>{let c=a.keys;q.set(pH(...c),{group:a,groupIndex:b})}),this.calculatedBins=m.map(a=>{let b=q.get(pH(...a));if(!b)return{domain:a,datum:[],groupIndex:-1,frequency:0,total:0};{let{group:c,groupIndex:d}=b,[[e,f]=[0,0]]=c.aggregation,g=[...o.forEachDatum(this,p,c)];return{domain:a,datum:g,groupIndex:d,frequency:this.frequency(c),total:e+f}}}),this.animationState.transition("updateData")}xCoordinateRange(){return[NaN,NaN]}yCoordinateRange(){return[NaN,NaN]}getSeriesDomain(a){let{processedData:b,dataModel:c}=this;if(!b||!c||!this.calculatedBins.length)return[];let d=c.getDomain(this,"groupAgg","aggregate",b),e=this.calculatedBins[0].domain[0],f=this.calculatedBins[(this.calculatedBins?.length??0)-1].domain[1];return"x"===a?ja([e,f]):ja(d)}getSeriesRange(a,[b,c]){let{dataModel:d,processedData:e}=this;if(!d||e?.type!=="grouped")return[NaN,NaN];let f=this.axes.x.scale,g=-1/0;return(e.groups.forEach(({keys:a,aggregation:d})=>{let[[e,h]=[0,0]]=d,[i,j]=a,[k,l]=iB([f.convert(i),f.convert(j)]);l>=b&&k<=c&&(g=Math.max(g,e+h))}),0>g)?[NaN,NaN]:[0,g]}frequency(a){return a.datumIndices.reduce((a,b)=>a+b.length,0)}createNodeData(){let{axes:a,processedData:b,dataModel:c}=this,d=a.x,e=a.y;if(!d||!e||!c)return;let{scale:f}=d,{scale:g}=e,{xKey:h,yKey:i,xName:j,yName:k,label:l}=this.properties,m=!this.ctx.animationManager.isSkipped(),n=[],o={itemId:this.properties.yKey??this.id,nodeData:n,labelData:n,scales:this.calculateScaling(),animationValid:!0,visible:this.visible||m,styles:it(this.getItemStyle.bind(this))};return null==b||"grouped"!==b.type||(this.calculatedBins.forEach(({domain:a,datum:b,groupIndex:c,frequency:d,total:m})=>{let o,[p,q]=a,r=f.convert(p),s=f.convert(q),t=g.convert(0),u=g.convert(m),v=Math.abs(s-r),w=Math.abs(u-t),x=Math.min(r,s),y=Math.min(t,u);l.enabled&&0!==m&&(o={x:x+v/2,y:y+w/2,text:this.getLabelText(m,b,i,"y",[],l,{value:m,datum:b,xKey:h,yKey:i,xName:j,yName:k})});let z=e.isReversed();n.push({series:this,datumIndex:c,datum:b,aggregatedValue:m,frequency:d,domain:a,yKey:i,xKey:h,x,y,xValue:r,yValue:u,width:v,height:w,midPoint:{x:x+v/2,y:y+w/2},topLeftCornerRadius:!z,topRightCornerRadius:!z,bottomRightCornerRadius:z,bottomLeftCornerRadius:z,label:o,crisp:!0})}),n.sort((a,b)=>a.x-b.x)),o}nodeFactory(){return new f9}updateDatumSelection(a){let{nodeData:b,datumSelection:c}=a;return c.update(b,void 0,a=>pH(...a.domain))}getItemStyle(a,b,c){let{properties:d}=this;return dM(this.getHighlightStyle(b,a,c),d.getStyle())}updateDatumStyles(a){let{datumSelection:b,isHighlight:c}=a;b.each((a,d)=>{b.isGarbage(a)||(d.style=this.getItemStyle(d.datumIndex,c))})}updateDatumNodes(a){let{contextNodeData:b}=this;if(!b)return;let c=this.ctx.highlightManager.getActiveHighlight(),{shadow:d}=this.properties,e=this.getShapeFillBBox();a.datumSelection.each((f,g)=>{let h=g.style??b.styles[this.getHighlightState(c,a.isHighlight,g.datumIndex)],{cornerRadius:i=0}=h,{topLeftCornerRadius:j,topRightCornerRadius:k,bottomRightCornerRadius:l,bottomLeftCornerRadius:m}=g;lL(f,h,e),f.topLeftCornerRadius=j?i:0,f.topRightCornerRadius=k?i:0,f.bottomRightCornerRadius=l?i:0,f.bottomLeftCornerRadius=m?i:0,f.crisp=g.crisp,f.fillShadow=d})}updateLabelSelection(a){let{labelData:b,labelSelection:c}=a;return c.update(b,a=>{a.pointerEvents=1,a.textAlign="center",a.textBaseline="middle"})}updateLabelNodes(a){let b=this.isLabelEnabled(),c=this.ctx.highlightManager?.getActiveHighlight();a.labelSelection.each((a,d)=>{let e=sM(this,d,this.properties,this.properties.label,!1,c),{enabled:f,fontStyle:g,fontWeight:h,fontSize:i,fontFamily:j,color:k}=e;f&&b&&d?.label?(a.text=d.label.text,a.x=d.label.x,a.y=d.label.y,a.fontStyle=g,a.fontWeight=h,a.fontFamily=j,a.fontSize=i,a.fill=k,a.visible=!0,a.fillOpacity=this.getHighlightStyle(!1,d.datumIndex).opacity??1,a.setBoxing(e)):a.visible=!1})}initQuadTree(a){let{value:b}=this.contentGroup.children().next();b instanceof fh&&uo(a,b.children())}pickNodeClosestDatum(a){return up(this,a)}getTooltipContent(a){let{id:b,dataModel:c,processedData:d,axes:e,properties:f,ctx:{localeManager:g}}=this,{xKey:h,xName:i,yKey:j,yName:k,tooltip:l,legendItemName:m}=f,n=e.x,o=e.y;if(!c||d?.type!=="grouped"||!n||!o)return;let p=d.groups[a],{aggregation:q,keys:r}=p,[[s,t]=[0,0]]=q,u=this.frequency(p),[v,w]=r,x=s+t,y={data:[...c.forEachDatum(this,d,p)],aggregatedValue:x,frequency:u,domain:r},z=[{label:i,fallbackLabel:h,value:`${this.getAxisValueText(n,"tooltip",v,y,h,m)} - ${this.getAxisValueText(n,"tooltip",w,y,h,m)}`},{label:g.t("seriesHistogramTooltipFrequency"),value:this.getAxisValueText(o,"tooltip",u,y,j,m)}];if(null!=j){let a;switch(f.aggregation){case"sum":a=g.t("seriesHistogramTooltipSum",{yName:k??j});break;case"mean":a=g.t("seriesHistogramTooltipMean",{yName:k??j});break;case"count":a=g.t("seriesHistogramTooltipCount",{yName:k??j})}z.push({label:a,value:this.getAxisValueText(o,"tooltip",x,y,j,m)})}return this.formatTooltipWithContext(l,{symbol:this.legendItemSymbol(),data:z},{seriesId:b,datum:y,title:k,xKey:h,xName:i,yKey:j,yName:k,xRange:[v,w],frequency:u,...this.getItemStyle(a,!1)})}legendItemSymbol(){let{fill:a,fillOpacity:b,stroke:c,strokeWidth:d,strokeOpacity:e,lineDash:f,lineDashOffset:g}=this.properties;return{marker:{fill:fy(a)??"rgba(0, 0, 0, 0)",stroke:c??"rgba(0, 0, 0, 0)",fillOpacity:b,strokeOpacity:e,strokeWidth:d,lineDash:f,lineDashOffset:g}}}getLegendData(a){if("category"!==a)return[];let{id:b,ctx:{legendManager:c},visible:d}=this,{xKey:e,yName:f,showInLegend:g}=this.properties;return[{legendType:"category",id:b,itemId:e,seriesId:b,enabled:d&&c.getItemEnabled({seriesId:b,itemId:e}),label:{text:f??e??"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!g}]}animateEmptyUpdateReady({datumSelection:a,labelSelection:b}){let c=uz(ux(!0,this.axes,"normal"),"unknown");jw(this.id,"datums",this.ctx.animationManager,[a],c),sQ(this,"labels",this.ctx.animationManager,b)}animateWaitingUpdateReady(a){let b=uz(ux(!0,this.axes,"normal"),"added"),c={changed:!0,added:new Set,updated:new Set,removed:new Set,moved:new Set};jw(this.id,"datums",this.ctx.animationManager,[a.datumSelection],b,(a,b)=>pH(...b.domain),c),c?.changed&&sQ(this,"labels",this.ctx.animationManager,a.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:a}){return uB(this,this.contextNodeData?.nodeData[a])}hasItemStylers(){return null!=this.properties.label.itemStyler}};uT.className="HistogramSeries",uT.type="histogram";var uU={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:a=>new uT(a),predictAxis:uf,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",ng],["image",nt],["pattern",np]]},stroke:{$palette:"stroke"},strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{...ny,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},shadow:{enabled:!1,color:mF,xOffset:3,yOffset:3,blur:5},highlight:nz()}}},uV={type:"series",name:"histogram",chartType:"cartesian",enterprise:!0,options:qq,create:a=>new uT(a)};function uW(a,b,c,d,e,f){let g=a[f];if(null==g)return!1;let h=sX(Number.isFinite(b)?sW(g,b,c):f/a.length,e);return f===d[h+0]||f===d[h+1]||f===d[h+2]||f===d[h+3]}var uX=class extends tg{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new ti,this.marker=new s1,this.label=new jK,this.tooltip=s4(),this.connectMissingData=!1,this.sparklineMode=!1}};dl([ey],uX.prototype,"xKey",2),dl([ey],uX.prototype,"yKey",2),dl([ey],uX.prototype,"xName",2),dl([ey],uX.prototype,"yName",2),dl([ey],uX.prototype,"yFilterKey",2),dl([ey],uX.prototype,"stackGroup",2),dl([ey],uX.prototype,"normalizedTo",2),dl([ey],uX.prototype,"title",2),dl([ey],uX.prototype,"stroke",2),dl([ey],uX.prototype,"strokeWidth",2),dl([ey],uX.prototype,"strokeOpacity",2),dl([ey],uX.prototype,"lineDash",2),dl([ey],uX.prototype,"lineDashOffset",2),dl([ey],uX.prototype,"interpolation",2),dl([ey],uX.prototype,"styler",2),dl([ey],uX.prototype,"marker",2),dl([ey],uX.prototype,"label",2),dl([ey],uX.prototype,"tooltip",2),dl([ey],uX.prototype,"connectMissingData",2),dl([ey],uX.prototype,"sparklineMode",2);var uY=hy(function(a,b,c,d){if(b.length<1e3)return;let[e,f]=sU(a,d),g=sT(b,e,f),{indexData:h,valueData:i}=sY(b,c,c,e,f,g),j=[];for(let a=0;a<b.length;a+=1)uW(b,e,f,h,g,a)&&j.push(a);let k=[{maxRange:g,indices:j}];for(;j.length>10&&g>64;)({maxRange:g}=sZ(h,i,g,{inPlace:!0})),j=j.filter(uW.bind(null,b,e,f,h,g)),k.push({maxRange:g,indices:j});return k.reverse(),k}),uZ=class extends th{constructor(a){super({moduleCtx:a,propertyKeys:td,propertyNames:te,categoryKey:"xValue",pickModes:[2,1,0],datumSelectionGarbageCollection:!1,segmentedDataNodes:!1,animationResetFns:{path:t9({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:sS,datum:(a,b)=>({...t2(a),...t3(a,b)})},clipFocusBox:!1}),this.properties=new uX,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}isNormalized(){return null!=this.properties.normalizedTo}async processData(a){if(null==this.data)return;let{data:b,visible:c,seriesGrouping:{groupIndex:d=this.id,stackCount:e=0}={}}=this,{xKey:f,yKey:g,yFilterKey:h,connectMissingData:i,normalizedTo:j}=this.properties,k=!this.ctx.animationManager.isSkipped(),l=this.axes.x?.scale,m=this.axes.y?.scale,{isContinuousX:n,xScaleType:o,yScaleType:p}=this.getScaleInformation({xScale:l,yScale:m}),q=e>1||null!=j,r={invalidValue:null};i&&q&&(r.invalidValue=0),q&&!c&&(r.forceValue=0);let s={value:`area-stack-${d}-yValue`,marker:`area-stack-${d}-yValues-marker`},t=[];(!n||q)&&t.push(pj(f,o,{id:"xKey"})),t.push(pk(f,o,{id:"xValue"}),pk(g,p,{id:"yValueRaw",...r,invalidValue:void 0})),null!=h&&t.push(pk(h,p,{id:"yFilterRaw"})),q&&t.push(...pr(g,"normal","current",{id:"yValueCumulative",...r,groupId:s.marker},p)),aL(j)&&t.push(pk(g,p,{id:"yValue",...r,groupId:s.value}),pw(Object.values(s),j)),k&&(t.push(pA(n?["xValue"]:void 0)),this.processedData&&t.push(pG(this.id,this.processedData)));let{dataModel:u,processedData:v}=await this.requestDataModel(a,b,{props:t,groupByKeys:q,groupByData:!q});this.dataAggregationFilters=this.aggregateData(u,v),this.animationState.transition("updateData")}yValueKey(){return this.isNormalized()?"yValue":"yValueRaw"}yCumulativeKey(a){return"grouped"===a.type?"yValueCumulative":this.yValueKey()}xCoordinateRange(a,b){let{marker:c}=this.properties,d=this.axes.x.scale.convert(a),e=c.enabled?.5*c.size*b:0;return[d-e,d+e]}yCoordinateRange(a,b){let{marker:c}=this.properties,d=this.axes.y.scale.convert(a[0]),e=c.enabled?.5*c.size*b:0;return[d-e,d+e]}getSeriesDomain(a){let{dataModel:b,processedData:c,axes:d}=this;if(!b||!c)return[];let e=d.y;if("x"===a){let a=b.resolveProcessedDataDefById(this,"xValue"),d=b.getDomain(this,"xValue","value",c);return a?.def.type==="value"&&"category"===a.def.valueType?d:ja(o4(d))}let f=this.domainForClippedRange("y",[this.yCumulativeKey(c)],"xValue");return this.isNormalized()&&e instanceof pY&&!(e instanceof pZ)?ja(Number.isFinite(f[1]-f[0])?[f[0]>0?0:f[0],f[1]<0?0:f[1]]:[]):ja(f)}getSeriesRange(a,b){return this.domainForVisibleRange("y",[this.yCumulativeKey(this.processedData)],"xValue",b)}getZoomRangeFittingItems(a,b,c){return this.zoomFittingVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],a,b,c)}getVisibleItems(a,b,c){return this.countVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],a,b,c)}aggregateData(a,b){if("ungrouped"!==b.type||pe(b))return;let c=this.axes.x;if(null==c)return;let{scale:d}=c,e=a.resolveColumnById(this,"xValue",b),f=a.resolveColumnById(this,this.yCumulativeKey(b),b),g=a.getDomain(this,"xValue","value",b);return uY(d.type,e,f,g)}createNodeData(){let{dataModel:a,processedData:b,axes:c,dataAggregationFilters:d}=this,e=c.x,f=c.y;if(!a||!b||!e||!f)return;let{xKey:g,xName:h,yFilterKey:i,yKey:j,yName:k,marker:l,label:m,connectMissingData:n,interpolation:o,legendItemName:p}=this.properties,q=e.scale,r=f.scale,s=(q.bandwidth??0)/2,t=(r.bandwidth??0)/2,u=l.enabled?l.size:0,v=b.dataSources.get(this.id)??[],w=a.resolveColumnById(this,"xValue",b),x=a.resolveColumnById(this,"yValueRaw",b),y=a.resolveColumnById(this,this.yCumulativeKey(b),b),z=null!=i?a.resolveColumnById(this,"yFilterRaw",b):void 0,A=this.getSeriesDomain("y"),B={lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},C=[],D=[],E=a=>{let b=v[a],c=w[a],d=x[a],e=y[a],f=z?.[a],i=q.convert(c)+s,l=r.convert(e)+t;if(!Number.isFinite(i))return;if(null!=d){let n=m.enabled?this.getLabelText(d,b,j,"y",A,m,{value:d,datum:b,xKey:g,yKey:j,xName:h,yName:k,legendItemName:p}):void 0;C.push({series:this,datum:b,datumIndex:a,yKey:j,xKey:g,point:{x:i,y:l,size:u},midPoint:{x:i,y:l},cumulativeValue:e,yValue:d,xValue:c,capDefaults:B,labelText:n,selected:f})}let o=D[D.length-1];if(null!=d){let a={point:{x:i,y:l},xDatum:c,yDatum:d};Array.isArray(o)?o.push(a):(null!=o&&(o.skip+=1),D.push([a]))}else n||(Array.isArray(o)||null==o?D.push({skip:0}):o.skip+=1)},[F,G]=q.range,H=Math.abs(G-F),I=d?.find(a=>a.maxRange>H),J=I?.indices,[K,L]=this.visibleRangeIndices("xValue",e.range,J);K=Math.max(K-1,0),L=Math.min(L+1,J?.length??w.length),b.input.count<1e3&&(K=0,L=b.input.count);for(let a=K;a<L;a+=1)E(J?.[a]??a);let M=D.flatMap(a=>Array.isArray(a)?tQ(a,o):[]),N=z?.some((a,b)=>a===x[b])??!1,O=uc(this.properties.segmentation,e,f,this.chart.seriesRect,this.ctx.scene,!1);return{itemId:j,nodeData:C,labelData:C,strokeData:{itemId:j,spans:M},scales:this.calculateScaling(),visible:this.visible,crossFiltering:N,styles:t6(this,l),segments:O}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(a){let{paths:[b],visible:c,animationEnabled:d}=a,e=this.contextNodeData?.crossFiltering===!0,{strokeWidth:f,stroke:g,strokeOpacity:h,lineDash:i,lineDashOffset:j,opacity:k}=dM(this.getHighlightStyle(),this.getStyle(!1)),l=this.contextNodeData?.segments;b.setProperties({segments:l,fill:void 0,lineJoin:"round",pointerEvents:1,opacity:k,stroke:g,strokeWidth:f,strokeOpacity:h*(e?.25:1),lineDash:i,lineDashOffset:j}),b.datum=l,d||(b.visible=c),ua(this,b)}updateDatumSelection(a){let{nodeData:b}=a,{datumSelection:c}=a,{contextNodeData:d,processedData:e,axes:f,properties:g}=this,{marker:h}=g;return b=d?.crossFiltering===!0||t5(e.input.count,f.x.scale,h)?b:[],h.isDirty()&&(c.clear(),c.cleanup()),c.update(b,void 0,a=>pH(a.xValue))}updateDatumStyles(a){let{datumSelection:b,isHighlight:c}=a,{marker:d}=this.properties,e=this.ctx.highlightManager.getActiveHighlight();b.each((f,g)=>{if(!b.isGarbage(f)){let b=this.getHighlightState(e,a.isHighlight,g.datumIndex),f=this.getStyle(c,b),{stroke:h,strokeWidth:i,strokeOpacity:j}=f,k=this.makeItemStylerParams(this.dataModel,this.processedData,g.datumIndex,f.marker);g.style=this.getMarkerStyle(d,g,k,{isHighlight:c,highlightState:b},f.marker,{stroke:h,strokeWidth:i,strokeOpacity:j})}})}updateDatumNodes(a){let{contextNodeData:b}=this;if(!b)return;let{datumSelection:c,isHighlight:d}=a,e=this.ctx.animationManager.isSkipped(),f=this.getShapeFillBBox(),g=this.ctx.highlightManager.getActiveHighlight();c.each((a,c)=>{let h=this.getHighlightState(g,d,c.datumIndex),i=c.style??b.styles[h];this.applyMarkerStyle(i,a,c.point,f,{applyTranslation:e,selected:c.selected})}),d||this.properties.marker.markClean()}updateLabelSelection(a){return a.labelSelection.update(this.isLabelEnabled()?a.labelData:[])}updateLabelNodes(a){let{isHighlight:b=!1}=a,c=this.ctx.highlightManager?.getActiveHighlight(),d=this.makeLabelFormatterParams();a.labelSelection.each((a,e)=>{let f=sM(this,e,d,this.properties.label,b,c),{enabled:g,fontStyle:h,fontWeight:i,fontSize:j,fontFamily:k,color:l}=f;g&&e?.labelText?(a.fontStyle=h,a.fontWeight=i,a.fontSize=j,a.fontFamily=k,a.textAlign="center",a.textBaseline="bottom",a.text=e.labelText,a.x=e.point.x,a.y=e.point.y-10,a.fill=l,a.visible=!0,a.fillOpacity=this.getHighlightStyle(b,e.datumIndex).opacity??1,a.setBoxing(f)):a.visible=!1})}makeStylerParams(a,b){let{id:c}=this,{marker:d,lineDash:e,lineDashOffset:f,stroke:g,strokeOpacity:h,strokeWidth:i,xKey:j,yKey:k}=this.properties,l=ia(b??0);return{marker:{fill:d.fill,fillOpacity:d.fillOpacity,size:d.size,shape:d.shape,stroke:d.stroke,strokeOpacity:d.strokeOpacity,strokeWidth:d.strokeWidth,lineDash:d.lineDash,lineDashOffset:d.lineDashOffset},highlightState:l,highlighted:a,lineDash:e,lineDashOffset:f,seriesId:c,stroke:g,strokeOpacity:h,strokeWidth:i,xKey:j,yKey:k}}makeItemStylerParams(a,b,c,d){let{xKey:e,yKey:f}=this.properties,g=a.resolveColumnById(this,"xValue",b)[c],h=a.resolveColumnById(this,"yValueRaw",b)[c];return{...ip(g,h,e,f,a.getDomain(this,"xValue","key",b),a.getDomain(this,this.yCumulativeKey(b),"value",b)),xValue:g,yValue:h,...d}}makeLabelFormatterParams(){let{xKey:a,xName:b,yKey:c,yName:d,legendItemName:e}=this.properties;return{xKey:a,xName:b,yKey:c,yName:d,legendItemName:e}}getTooltipContent(a){let{id:b,dataModel:c,processedData:d,axes:e,properties:f}=this,{xKey:g,xName:h,yKey:i,yName:j,tooltip:k,legendItemName:l}=f,m=e.x,n=e.y;if(!c||!d||!m||!n)return;let o=d.dataSources.get(this.id)?.[a],p=c.resolveColumnById(this,"xValue",d)[a],q=c.resolveColumnById(this,"yValueRaw",d)[a];if(null==p)return;let r=this.getStyle(!1),s=this.makeItemStylerParams(c,d,a,r.marker),t=this.getMarkerStyle(this.properties.marker,{datumIndex:a,datum:o},s,{isHighlight:!1},r.marker);return this.formatTooltipWithContext(k,{heading:this.getAxisValueText(m,"tooltip",p,o,g,l),symbol:this.legendItemSymbol(),data:[{label:j,fallbackLabel:i,value:this.getAxisValueText(n,"tooltip",q,o,i,l)}]},{seriesId:b,datum:o,title:j,xKey:g,xName:h,yKey:i,yName:j,...t,...this.getModuleTooltipParams()})}legendItemSymbol(){let{stroke:a,strokeOpacity:b,strokeWidth:c,lineDash:d,marker:e}=this.getStyle(!1);return{marker:{...this.getMarkerStyle(this.properties.marker,{},void 0,{isHighlight:!1,checkForHighlight:!1,resolveStylerMarkerPath:"marker"},{size:e.size,shape:e.shape,fill:e.fill,fillOpacity:e.fillOpacity,stroke:e.stroke,strokeOpacity:e.strokeOpacity,strokeWidth:e.strokeWidth,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset}),enabled:this.properties.marker.enabled},line:{stroke:a,strokeOpacity:b,strokeWidth:c,lineDash:d}}}getLegendData(a){if("category"!==a)return[];let{id:b,ctx:{legendManager:c},visible:d}=this,{yKey:e,yName:f,title:g,legendItemName:h,showInLegend:i}=this.properties;return[{legendType:a,id:b,itemId:e,legendItemName:h,seriesId:b,enabled:d&&c.getItemEnabled({seriesId:b,itemId:e}),label:{text:h??g??f??e},symbol:this.legendItemSymbol(),hideInLegend:!i}]}updatePaths(a){this.updateLinePaths(a.paths,a.contextData)}updateLinePaths(a,b){let c=b.strokeData.spans,[d]=a;d.path.clear(),tS(d,c),d.markDirty("LineSeries")}animateEmptyUpdateReady(a){let{datumSelection:b,labelSelection:c,annotationSelections:d,contextData:e,paths:f}=a,{animationManager:g}=this.ctx;this.updateLinePaths(f,e),t7(this,g,...f),jz([b],t3),t1(this,g,b),sQ(this,"labels",g,c),sQ(this,"annotations",g,...d)}animateReadyResize(a){let{contextData:b,paths:c}=a;this.updateLinePaths(c,b),super.animateReadyResize(a)}animateWaitingUpdateReady(a){let{animationManager:b}=this.ctx,{datumSelection:c,labelSelection:d,annotationSelections:e,contextData:f,paths:g,previousContextData:h}=a,[i]=g;if(!1===f.visible&&h?.visible===!1)return;this.resetDatumAnimation(a),this.resetLabelAnimation(a);let j=()=>{this.resetPathAnimation(a),this.updateLinePaths(g,f)},k=()=>{b.skipCurrentBatch(),j()};if(null==f||null==h){j(),t_(this,b,"added",c),t8(this,"path_properties",b,"add",i),sQ(this,"labels",b,d),sQ(this,"annotations",b,...e);return}if(f.crossFiltering!==h.crossFiltering)return void k();let l=tW(f,h,this.processedData?.reduced?.diff?.[this.id]);if(void 0===l)return void k();"no-op"!==l.status&&(jw(this.id,"path_properties",b,[i],l.stroke.pathProperties),"added"===l.status?this.updateLinePaths(g,f):"removed"===l.status?this.updateLinePaths(g,h):sL(this.id,"path_update",b,[i],l.stroke.path),l.hasMotion&&(t_(this,b,void 0,c),sQ(this,"labels",b,d),sQ(this,"annotations",b,...e)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateLinePaths(g,f)}))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new l0}getStyle(a,b){let{styler:c,marker:d,lineDash:e,lineDashOffset:f,stroke:g,strokeOpacity:h,strokeWidth:i}=this.properties,{size:j,shape:k,fill:l="transparent",fillOpacity:m}=d,n={};if(c){let d=this.makeStylerParams(a,b),e=this.cachedCallWithContext(c,d)??{};n=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],e,{pick:!1})??{}}return n.marker??(n.marker={}),{lineDash:n.lineDash??e,lineDashOffset:n.lineDashOffset??f,stroke:n.stroke??g,strokeOpacity:n.strokeOpacity??h,strokeWidth:n.strokeWidth??i,marker:{fill:n.marker.fill??l,fillOpacity:n.marker.fillOpacity??m,shape:n.marker.shape??k,size:n.marker.size??j,lineDash:n.marker.lineDash??d.lineDash??e,lineDashOffset:n.marker.lineDashOffset??d.lineDashOffset??f,stroke:n.marker.stroke??d.stroke??g,strokeOpacity:n.marker.strokeOpacity??d.strokeOpacity??h,strokeWidth:n.marker.strokeWidth??d.strokeWidth??i}}}getFormattedMarkerStyle(a){let b=this.getStyle(!1),c=this.makeItemStylerParams(this.dataModel,this.processedData,a.datumIndex,b.marker);return this.getMarkerStyle(this.properties.marker,a,c,{isHighlight:!0},void 0,b)}computeFocusBounds(a){return t4(this,a)}hasItemStylers(){return null!=this.properties.styler||null!=this.properties.marker.itemStyler||null!=this.properties.label.itemStyler}};uZ.className="LineSeries",uZ.type="line";var u$={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:a=>new uZ(a),stackable:!0,predictAxis:uf,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{stroke:nd,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear"},marker:{shape:"circle",size:7,strokeWidth:{$isUserOption:["./stroke",1,0]},fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",nl],["image",nt],["pattern",np]]},stroke:{$palette:"stroke"}},label:{...ny,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:nz(),segmentation:nC}}},u_={type:"series",name:"line",chartType:"cartesian",options:qt,create:a=>new uZ(a)},u0=class extends uP{};u0.className="ScatterSeries",u0.type="scatter";var u1={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:a=>new u0(a),predictAxis:ue,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",nl],["image",nt],["pattern",np]]},stroke:{$palette:"stroke"},fillOpacity:.8,maxRenderedItems:1e4,label:{...ny,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:nz()}}},u2={type:"series",name:"scatter",chartType:"cartesian",options:qv,create:a=>new u0(a)},u3=class a{constructor(a,b,c,d){this.startAngle=a,this.endAngle=b,this.innerRadius=c,this.outerRadius=d}clone(){let{startAngle:b,endAngle:c,innerRadius:d,outerRadius:e}=this;return new a(b,c,d,e)}equals(a){return this.startAngle===a.startAngle&&this.endAngle===a.endAngle&&this.innerRadius===a.innerRadius&&this.outerRadius===a.outerRadius}[dp](b,c){return new a(this.startAngle*(1-c)+b.startAngle*c,this.endAngle*(1-c)+b.endAngle*c,this.innerRadius*(1-c)+b.innerRadius*c,this.outerRadius*(1-c)+b.outerRadius*c)}};function u4({startAngle:a,endAngle:b,innerRadius:c,outerRadius:d}){let e=1/0,f=1/0,g=-1/0,h=-1/0,i=(a,b)=>{e=Math.min(a,e),f=Math.min(b,f),g=Math.max(a,g),h=Math.max(b,h)};return i(c*Math.cos(a),c*Math.sin(a)),i(c*Math.cos(b),c*Math.sin(b)),i(d*Math.cos(a),d*Math.sin(a)),i(d*Math.cos(b),d*Math.sin(b)),ed(0,a,b)&&i(d,0),ed(.5*Math.PI,a,b)&&i(0,d),ed(Math.PI,a,b)&&i(-d,0),ed(1.5*Math.PI,a,b)&&i(0,-d),new dt(e,f,g-e,h-f)}function u5(a,b,c){let d=Math.sqrt(Math.pow(a,2)+Math.pow(b,2)),{innerRadius:e,outerRadius:f}=c;if(c.startAngle===c.endAngle||d<Math.min(e,f)||d>Math.max(e,f))return!1;let g=ec(c.startAngle),h=ec(c.endAngle),i=Math.atan2(b,a);return g<h?i<=h&&i>=g:i<=h&&i>=-Math.PI||i>=g&&i<=Math.PI}function u6(a,b){let{startAngle:c,endAngle:d,innerRadius:e,outerRadius:f}=b,g={x:f*Math.cos(c),y:f*Math.sin(c)},h={x:f*Math.cos(d),y:f*Math.sin(d)},i=0===e?{x:0,y:0}:{x:e*Math.cos(c),y:e*Math.sin(c)},j=0===e?{x:0,y:0}:{x:e*Math.cos(d),y:e*Math.sin(d)};return eN(a.start.x,a.start.y,a.end.x,a.end.y,g.x,g.y,i.x,i.y)||eN(a.start.x,a.start.y,a.end.x,a.end.y,h.x,h.y,j.x,j.y)||function(a,b,c,d,e,f,g,h,i,j){if(isNaN(0)||isNaN(0))return 0;f&&([e,d]=[d,e]);let k=(j-h)/(i-g),l=h-k*g,m=Math.pow(k,2)+1,n=2*(k*(l-0)-0),o=Math.pow(n,2)-4*m*(Math.pow(a,2)+Math.pow(l-b,2)-Math.pow(c,2));if(o<0)return 0;let p=0;return[(-n+Math.sqrt(o))/2/m,(-n-Math.sqrt(o))/2/m].forEach(c=>{c>=Math.min(g,i)&&c<=Math.max(g,i)&&ed(Math.atan2(k*c+l-b,c-a),d,e)&&p++}),p}(0,0,f,c,d,!0,a.start.x,a.start.y,a.end.x,a.end.y)}function u7(a,b,c,d){if(0===c&&0===d)return 0;if(Math.asin(Math.abs(+c)/(a+ +c))+Math.asin(Math.abs(+d)/(a+ +d))-b<0)return 1;let e=0,f=1;for(let g=0;g<8;g+=1){let g=(e+f)/2;Math.asin(Math.abs(g*c)/(a+g*c))+Math.asin(Math.abs(g*d)/(a+g*d))-b<0?e=g:f=g}return e}function u8(a,b){return 1e-6>eg(a,b)?b:ea(a-b)+b}function u9(a,b,c=0){let d=Math.abs(b-a)>=2*Math.PI?2*Math.PI:ea(b-a);return b=(a=u8(a,c))+d,{startAngle:a,endAngle:b}}function va(a,b,c,d,e,f){let g,h,i,j,k=Math.sin(f),l=Math.cos(f),m=a**2+b**2-c**2;if(l>.5){let c=k/l,d=1+c**2,e=-2*(a+b*c),f=e**2-4*d*m;if(f<0)return;let n=(-e+Math.sqrt(f))/(2*d),o=(-e-Math.sqrt(f))/(2*d);g=n,h=n*c,i=o,j=o*c}else{let c=l/k,d=1+c**2,e=-2*(b+a*c),f=e**2-4*d*m;if(f<0)return;let n=(-e+Math.sqrt(f))/(2*d),o=(-e-Math.sqrt(f))/(2*d);g=n*c,h=n,i=o*c,j=o}let n=g*l+h*k,o=i*l+j*k,p=n>0?u8(Math.atan2(h-b,g-a),d):NaN,q=o>0?u8(Math.atan2(j-b,i-a),d):NaN;return p>=d&&p<=e?p:q>=d&&q<=e?q:void 0}function vb(a,b,c,d,e,f){let g=Math.hypot(a,b),h=Math.atan2(b,a),i=Math.acos(-(g-(g**2-c**2+f**2)/(2*g))/c),j=u8(h+i,d),k=u8(h-i,d);return j>=d&&j<=e?j:k>=d&&k<=e?k:void 0}var vc=class{constructor(a,b,c,d,e){this.cx=a,this.cy=b,this.r=c,this.a0=d,this.a1=e,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(a){return{x:this.cx+this.r*Math.cos(a),y:this.cy+this.r*Math.sin(a)}}clipStart(a){null!=a&&this.isValid()&&!(a<this.a0)&&(this.a0=a,(Number.isNaN(a)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(a){null!=a&&this.isValid()&&!(a>this.a1)&&(this.a1=a,(Number.isNaN(a)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},vd=class extends f6{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(a){this.concentricEdgeInset=a,this.radialEdgeInset=a}set cornerRadius(a){this.startOuterCornerRadius=a,this.endOuterCornerRadius=a,this.startInnerCornerRadius=a,this.endInnerCornerRadius=a}computeBBox(){return u4(this).translate(this.centerX,this.centerY)}normalizedRadii(){let{concentricEdgeInset:a}=this,{innerRadius:b,outerRadius:c}=this;return{innerRadius:b=b>0?b+a:0,outerRadius:c=Math.max(c-a,0)}}normalizedClipSector(){let{clipSector:a}=this;if(null==a)return;let{startAngle:b,endAngle:c}=u9(this.startAngle,this.endAngle),{innerRadius:d,outerRadius:e}=this.normalizedRadii(),f=u9(a.startAngle,a.endAngle,b);return new u3(Math.max(b,f.startAngle),Math.min(c,f.endAngle),Math.max(d,a.innerRadius),Math.min(e,a.outerRadius))}getAngleOffset(a){return a>0?this.radialEdgeInset/a:0}arc(a,b,c,d,e,f,g,h){if(a<=0)return;let{startAngle:i,endAngle:j}=u9(this.startAngle,this.endAngle),{innerRadius:k,outerRadius:l}=this.normalizedRadii(),m=this.normalizedClipSector();if(h&&k<=0)return;let n=h?this.getAngleOffset(k+a):this.getAngleOffset(l-a),o=g?i+n+b:j-n-b,p=h?k+a:l-a,q=p*Math.cos(o),r=p*Math.sin(o);if(null!=m&&(!g&&!(o>=i-1e-6&&o<=m.endAngle-1e-6)||g&&!(o>=m.startAngle+1e-6&&o<=j-1e-6)||h&&p<m.innerRadius-1e-6||!h&&p>m.outerRadius+1e-6))return;let s=new vc(q,r,a,c,d);if(null!=m){let b,j;if(h?(s.clipStart(va(q,r,a,c,d,m.endAngle)),s.clipEnd(va(q,r,a,c,d,m.startAngle))):(s.clipStart(va(q,r,a,c,d,m.startAngle)),s.clipEnd(va(q,r,a,c,d,m.endAngle))),g?(b=vb(q,r,a,c,d,m.innerRadius),j=vb(q,r,a,c,d,m.outerRadius)):(b=vb(q,r,a,c,d,m.outerRadius),j=vb(q,r,a,c,d,m.innerRadius)),s.clipStart(b),s.clipEnd(j),null!=b){let{x:a,y:c}=s.pointAt(b),d=u8(Math.atan2(c,a),i);g?f?.clipStart(d):e.clipEnd(d)}if(null!=j){let{x:a,y:b}=s.pointAt(j),c=u8(Math.atan2(b,a),i);g?e.clipStart(c):f?.clipEnd(c)}}if(null!=m){let{x:a,y:b}=s.pointAt((s.a0+s.a1)/2);if(!u5(a,b,m))return}let{x:t,y:u}=s.pointAt(g===h?s.a0:s.a1),v=u8(Math.atan2(u,t),i),w=h?f:e;return g?w?.clipStart(v):w?.clipEnd(v),s}updatePath(){let{path:a,centerX:b,centerY:c,concentricEdgeInset:d,radialEdgeInset:e}=this,{startOuterCornerRadius:f,endOuterCornerRadius:g,startInnerCornerRadius:h,endInnerCornerRadius:i}=this,{startAngle:j,endAngle:k}=u9(this.startAngle,this.endAngle),{innerRadius:l,outerRadius:m}=this.normalizedRadii(),n=this.normalizedClipSector(),o=k-j,p=o>=2*Math.PI-1e-6;if(a.clear(),0===l&&0===m||l>m||(n?.startAngle??j)===(n?.endAngle??k))return;if(p&&null==this.clipSector&&0===f&&0===g&&0===h&&0===i){a.moveTo(b+m*Math.cos(j),c+m*Math.sin(j)),a.arc(b,c,m,j,k),l>d&&(a.moveTo(b+l*Math.cos(k),c+l*Math.sin(k)),a.arc(b,c,l,k,j,!0)),a.closePath();return}if(null==this.clipSector&&1e-6>Math.abs(l-m)){a.arc(b,c,m,j,k,!1),a.arc(b,c,m,k,j,!0),a.closePath();return}let q=this.getAngleOffset(l),r=this.getAngleOffset(m);if(o<2*r)return;let s=(n?.innerRadius??l)>d,t=l<d||o<2*q,u=m-l,v=Math.max(f,h,g,i),w=v>0?Math.min(u/v,1):1;f*=w,g*=w,h*=w,i*=w;let x=u7(m,o-2*r,-f,-g);if(f*=x,g*=x,!t&&s){let a=u7(l,o-2*q,h,i);h*=a,i*=a}else h=0,i=0;let y=Math.max(f+h,g+i),z=y>0?Math.min(u/y,1):1;f*=z,g*=z,h*=z,i*=z;let A=0,B=0,C=f/(m-f),D=g/(m-g);C>=0&&C<.999999?A=Math.asin(C):f=Math.min(m/(1/Math.sin(A=o/2)+1),f),D>=0&&D<.999999?B=Math.asin(D):g=Math.min(m/(1/Math.sin(B=o/2)+1),g);let E=Math.asin(h/(l+h)),F=Math.asin(i/(l+i)),G=n?.outerRadius??m,H=this.getAngleOffset(G),I=new vc(0,0,G,j+H,k-H),J=n?.innerRadius??l,K=this.getAngleOffset(J),L=s?new vc(0,0,J,j+K,k-K):void 0;null!=n&&(I.clipStart(n.startAngle),I.clipEnd(n.endAngle),L?.clipStart(n.startAngle),L?.clipEnd(n.endAngle));let M=this.arc(f,A,j-.5*Math.PI,j+A,I,L,!0,!1),N=this.arc(g,B,k-B,k+.5*Math.PI,I,L,!1,!1),O=this.arc(i,F,k+.5*Math.PI,k+Math.PI-F,I,L,!1,!0),P=this.arc(h,E,j+Math.PI+E,j+1.5*Math.PI,I,L,!0,!0);if(t){let d,f=o<.5*Math.PI?e*(1+Math.cos(o))/Math.sin(o):NaN;d=Math.max(d=f>0&&f<m?Math.max(Math.hypot(e,f),l):e,l);let g=j+.5*o;a.moveTo(b+d*Math.cos(g),c+d*Math.sin(g))}else if(P?.isValid()===!0||L?.isValid()===!0);else{let d=j+o/2,e=l*Math.cos(d),f=l*Math.sin(d);a.moveTo(b+e,c+f)}if(M?.isValid()===!0){let{cx:d,cy:e,r:f,a0:g,a1:h}=M;a.arc(b+d,c+e,f,g,h)}if(I.isValid()){let{r:d,a0:e,a1:f}=I;a.arc(b,c,d,e,f)}if(N?.isValid()===!0){let{cx:d,cy:e,r:f,a0:g,a1:h}=N;a.arc(b+d,c+e,f,g,h)}if(!t){if(O?.isValid()===!0){let{cx:d,cy:e,r:f,a0:g,a1:h}=O;a.arc(b+d,c+e,f,g,h)}if(L?.isValid()===!0){let{r:d,a0:e,a1:f}=L;a.arc(b,c,d,f,e,!0)}if(P?.isValid()===!0){let{cx:d,cy:e,r:f,a0:g,a1:h}=P;a.arc(b+d,c+e,f,g,h)}}a.closePath()}isPointInPath(a,b){let{startAngle:c,endAngle:d,innerRadius:e,outerRadius:f}=this.clipSector??this;return u5(a-this.centerX,b-this.centerY,{startAngle:c,endAngle:d,innerRadius:Math.min(e,f),outerRadius:Math.max(e,f)})}};vd.className="Sector",dl([d$()],vd.prototype,"centerX",2),dl([d$()],vd.prototype,"centerY",2),dl([d$()],vd.prototype,"innerRadius",2),dl([d$()],vd.prototype,"outerRadius",2),dl([d$()],vd.prototype,"startAngle",2),dl([d$()],vd.prototype,"endAngle",2),dl([d$({equals:(a,b)=>a.equals(b)})],vd.prototype,"clipSector",2),dl([d$()],vd.prototype,"concentricEdgeInset",2),dl([d$()],vd.prototype,"radialEdgeInset",2),dl([d$()],vd.prototype,"startOuterCornerRadius",2),dl([d$()],vd.prototype,"endOuterCornerRadius",2),dl([d$()],vd.prototype,"startInnerCornerRadius",2),dl([d$()],vd.prototype,"endInnerCornerRadius",2);var ve=class extends gm{constructor(){super(...arguments),this.showInLegend=!1}};dl([ey],ve.prototype,"showInLegend",2);var vf=class extends jK{constructor(){super(...arguments),this.spacing=2}set(a,b){return super.set(a)}};dl([ey],vf.prototype,"text",2),dl([ey],vf.prototype,"spacing",2);var vg=class extends ez{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};dl([ey],vg.prototype,"fill",2),dl([ey],vg.prototype,"fillOpacity",2);var vh=class extends jK{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};dl([ey],vh.prototype,"offset",2),dl([ey],vh.prototype,"minAngle",2),dl([ey],vh.prototype,"minSpacing",2),dl([ey],vh.prototype,"maxCollisionOffset",2),dl([ey],vh.prototype,"avoidCollisions",2);var vi=class extends jK{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};dl([ey],vi.prototype,"positionOffset",2),dl([ey],vi.prototype,"positionRatio",2);var vj=class extends ez{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};dl([ey],vj.prototype,"colors",2),dl([ey],vj.prototype,"length",2),dl([ey],vj.prototype,"strokeWidth",2),dl([ey],vj.prototype,"itemStyler",2);var vk=class extends im{constructor(){super(...arguments),this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=Object.values(mA),this.strokes=Object.values(mB),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new eA(vf),this.title=new ve,this.innerCircle=new vg,this.shadow=new s0,this.calloutLabel=new vh,this.sectorLabel=new vi,this.calloutLine=new vj,this.tooltip=s4()}};function vl(a,b,c,d){let e=[c.convert(0),c.convert(1)],f=[d.convert(0),d.convert(1)],g=-(Math.PI/2)+ee(b),h=a?"initial":"update";return{nodes:{toFn:(a,b,c,{prevLive:d})=>{let{startAngle:f,endAngle:h,innerRadius:i,outerRadius:j}=b,{stroke:k,fill:l}=b.sectorFormat;if("removed"===c&&d?(f=d.datum?.endAngle,h=d.datum?.endAngle):"removed"!==c||d||(f=g,h=g),"removed"===c){let a=(({radius:a})=>({innerRadius:e[0],outerRadius:e[0]+(e[1]-e[0])*a}))(b);i=a.innerRadius,j=a.outerRadius}return{startAngle:f,endAngle:h,outerRadius:j,innerRadius:i,stroke:k,fill:l}},fromFn:(b,c,d,{prevFromProps:e})=>{let{startAngle:i,endAngle:j,innerRadius:k,outerRadius:l}=b,{fill:m,stroke:n}=c.sectorFormat;if("updated"===d&&null==b.previousDatum&&(d="added"),"unknown"!==d&&("added"!==d||e)?"added"===d&&e&&(i=e.endAngle??g,j=e.endAngle??g,k=e.innerRadius??c.innerRadius,l=e.outerRadius??c.outerRadius):(i=g,j=g,k=c.innerRadius,l=c.outerRadius),"added"===d&&!a){let a=(({radius:a})=>({innerRadius:f[0],outerRadius:f[0]+(f[1]-f[0])*a}))(c);k=a.innerRadius,l=a.outerRadius}return"updated"===d&&(m=b.fill??m,n=("string"==typeof b.stroke?b.stroke:void 0)??n),{startAngle:i,endAngle:j,innerRadius:k,outerRadius:l,fill:m,stroke:n,phase:h}}},innerCircle:{fromFn:(a,b)=>({size:a.previousDatum?.radius??a.size??0,phase:h}),toFn:(a,b)=>({size:b.radius??0})}}}function vm(a,b){return{startAngle:b.startAngle,endAngle:b.endAngle,innerRadius:b.innerRadius,outerRadius:b.outerRadius,stroke:b.sectorFormat.stroke}}function vn(a,b){let c=b.y-a.centerY,d=b.x-a.centerX,e=Math.atan2(c,d);for(let b of a.getItemNodes())if(!0!==b.datum.missing&&ed(e,b.startAngle,b.endAngle)){let a=Math.sqrt(d*d+c*c),e=0;return a<b.innerRadius?e=b.innerRadius-a:a>b.outerRadius&&(e=a-b.outerRadius),{datum:b.datum,distance:e}}}dl([ey],vk.prototype,"angleKey",2),dl([ey],vk.prototype,"angleName",2),dl([ey],vk.prototype,"angleFilterKey",2),dl([ey],vk.prototype,"radiusKey",2),dl([ey],vk.prototype,"radiusName",2),dl([ey],vk.prototype,"radiusMin",2),dl([ey],vk.prototype,"radiusMax",2),dl([ey],vk.prototype,"calloutLabelKey",2),dl([ey],vk.prototype,"calloutLabelName",2),dl([ey],vk.prototype,"sectorLabelKey",2),dl([ey],vk.prototype,"sectorLabelName",2),dl([ey],vk.prototype,"legendItemKey",2),dl([ey],vk.prototype,"defaultColorRange",2),dl([ey],vk.prototype,"defaultPatternFills",2),dl([ey],vk.prototype,"fills",2),dl([ey],vk.prototype,"strokes",2),dl([ey],vk.prototype,"fillOpacity",2),dl([ey],vk.prototype,"strokeOpacity",2),dl([ey],vk.prototype,"lineDash",2),dl([ey],vk.prototype,"lineDashOffset",2),dl([ey],vk.prototype,"cornerRadius",2),dl([ey],vk.prototype,"itemStyler",2),dl([ey],vk.prototype,"rotation",2),dl([ey],vk.prototype,"outerRadiusOffset",2),dl([ey],vk.prototype,"outerRadiusRatio",2),dl([ey],vk.prototype,"innerRadiusOffset",2),dl([ey],vk.prototype,"innerRadiusRatio",2),dl([ey],vk.prototype,"strokeWidth",2),dl([ey],vk.prototype,"sectorSpacing",2),dl([ey],vk.prototype,"hideZeroValueSectorsInLegend",2),dl([ey],vk.prototype,"innerLabels",2),dl([ey],vk.prototype,"title",2),dl([ey],vk.prototype,"innerCircle",2),dl([ey],vk.prototype,"shadow",2),dl([ey],vk.prototype,"calloutLabel",2),dl([ey],vk.prototype,"sectorLabel",2),dl([ey],vk.prototype,"calloutLine",2),dl([ey],vk.prototype,"tooltip",2);var vo=(a=>(a[a.BACKGROUND=0]="BACKGROUND",a[a.FOREGROUND=1]="FOREGROUND",a[a.HIGHLIGHT=2]="HIGHLIGHT",a[a.LABEL=3]="LABEL",a))(vo||{}),vp={angle:["angleKey"],radius:["radiusKey"]},vq={angle:["angleName"],radius:["radiusName"]},vr=class extends tc{constructor({categoryKey:a,pickModes:b=[1,0],canHaveAxes:c=!1,animationResetFns:d,...e}){super({...e,categoryKey:a,pickModes:b,canHaveAxes:c}),this.directions=["angle","radius"],this.itemGroup=this.contentGroup.appendChild(new fh),this.nodeData=[],this.itemSelection=jA.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=jA.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=jA.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.animationResetFns=d,this.animationState=new jH("empty",{empty:{update:{target:"ready",action:a=>this.animateEmptyUpdateReady(a)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:a=>this.animateReadyHighlight(a),highlightMarkers:a=>this.animateReadyHighlightMarkers(a),resize:a=>this.animateReadyResize(a),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:a=>this.animateWaitingUpdateReady(a)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:a=>this.animateClearingUpdateEmpty(a)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}setZIndex(a){super.setZIndex(a),this.contentGroup.zIndex=[a,1],this.highlightGroup.zIndex=[a,2],this.labelGroup.zIndex=[a,3]}resetAnimation(a){"initial"===a?this.animationState.transition("reset"):"ready"===a&&this.animationState.transition("skip")}labelFactory(){let a=new gb;return a.pointerEvents=1,a}addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",a=>this.onLegendItemClick(a)),this.ctx.eventsHub.on("legend:item-double-click",a=>this.onLegendItemDoubleClick(a)))}getInnerRadius(){return 0}computeLabelsBBox(a,b){return null}getShapeFillBBox(){let a=this.radius;return{series:new dt(-a,-a,2*a,2*a),axis:new dt(-a,-a,2*a,2*a)}}resetAllAnimation(){let{item:a,label:b}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),a&&jz([this.itemSelection,this.highlightSelection],a),b&&jz([this.labelSelection],b),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(a){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(a){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(a){let{item:b}=this.animationResetFns??{};b&&jz([this.highlightSelection],b)}animateReadyHighlightMarkers(a){}animateReadyResize(a){this.resetAllAnimation()}animateClearingUpdateEmpty(a){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(a){let b=this.getNodeData()?.[a.datumIndex];if(void 0!==b)return this.itemSelection.select(a=>a instanceof f6&&a.datum===b)[0]}getSeriesRange(a,b){return[NaN,NaN]}isSeriesHighlighted(a,b){let{series:c,legendItemName:d,itemId:e}=a??{},f=b?.[e];return c===this||null!=f&&f===d}},vs=class extends lN{constructor(a,b,c,d){super(a,b,c,d),this.angleKey=d.properties.angleKey,this.radiusKey=d.properties.radiusKey,this.calloutLabelKey=d.properties.calloutLabelKey,this.sectorLabelKey=d.properties.sectorLabelKey}},vt=class extends vr{constructor(a){super({moduleCtx:a,categoryKey:void 0,propertyKeys:{...vp,sectorLabel:["sectorLabelKey"],calloutLabel:["calloutLabelKey"]},propertyNames:{...vq,sectorLabel:["sectorLabelName"],calloutLabel:["calloutLabelName"]},pickModes:[1,0],animationResetFns:{item:vm,label:sS}}),this.properties=new vk,this.phantomNodeData=void 0,this.backgroundGroup=new fk({name:`${this.id}-background`,zIndex:0}),this.noVisibleData=!1,this.previousRadiusScale=new pX,this.radiusScale=new pX,this.phantomGroup=this.backgroundGroup.appendChild(new fh({name:"phantom"})),this.phantomSelection=jA.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new fh({name:"pieCalloutLabels"})),this.calloutLabelSelection=new jA(this.calloutLabelGroup,fh),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new fh({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new l0({shape:"circle"})),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new l0({shape:"circle"})),this.innerLabelsGroup=this.contentGroup.appendChild(new fh({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new fh({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=jA.select(this.innerLabelsGroup,gb),this.innerCircleSelection=jA.select(this.innerCircleGroup,()=>new l0({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=vs,this.angleScale=new pX,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(a=>a+Math.PI/2),this.phantomGroup.opacity=.2,this.innerLabelsGroup.pointerEvents=1}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(a,b,c){super.attachSeries(a,b,c),a?.appendChild(this.backgroundGroup)}detachSeries(a,b,c){super.detachSeries(a,b,c),a?.removeChild(this.backgroundGroup)}setZIndex(a){super.setZIndex(a),this.backgroundGroup.zIndex=[0,a]}nodeFactory(){let a=new vd;return a.miterLimit=1e9,a}getSeriesDomain(a){return"angle"===a?this.angleScale.domain:this.radiusScale.domain}async processData(a){if(null==this.data)return;let{visible:b,id:c,ctx:{legendManager:d}}=this,{angleKey:e,angleFilterKey:f,radiusKey:g,calloutLabelKey:h,sectorLabelKey:i,legendItemKey:j}=this.properties,k=()=>(a,e)=>b&&d.getItemEnabled({seriesId:c,itemId:e})?a:0,l=!this.ctx.animationManager.isSkipped(),m=[],n=[];j?m.push(pj(j,"category",{id:"legendItemKey"})):h?m.push(pj(h,"category",{id:"calloutLabelKey"})):i&&m.push(pj(i,"category",{id:"sectorLabelKey"}));let o=this.radiusScale.type,p=this.angleScale.type;for(let b of(g&&n.push(po(g,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax,missingValue:this.properties.radiusMax??1,processor:k}),pk(g,o,{id:"radiusRaw",processor:k}),py("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),h&&n.push(pk(h,"category",{id:"calloutLabelValue"})),i&&n.push(pk(i,"category",{id:"sectorLabelValue"})),j&&n.push(pk(j,"category",{id:"legendItemValue"})),f&&n.push(pp(f,p,{id:"angleFilterValue",onlyPositive:!0,invalidValue:0,processor:k}),pk(f,p,{id:"angleFilterRaw"}),py("angleFilterValue",[0,1],0,0)),l&&this.processedData?.reduced?.animationValidation?.uniqueKeys&&m.length>0&&n.push(pG(this.id,this.processedData)),n.push(pA()),await this.requestDataModel(a,this.data,{props:[...m,pp(e,p,{id:"angleValue",onlyPositive:!0,invalidValue:0,processor:k}),pk(e,p,{id:"angleRaw"}),py("angleValue",[0,1],0,0),...n]}),this.processedData?.defs?.values??[])){let{id:a,missing:c,property:d}=b,e=jb(this,c);"angleRaw"!==a&&e>0&&aa.warnOnce(`no value was found for the key '${String(d)}' on ${e} data element${e>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;let{nodeData:a=[],phantomNodeData:b}=this.createNodeData()??{};this.nodeData=a,this.phantomNodeData=b,this.nodeDataRefresh=!1}getProcessedDataValues(a,b){let c=a.resolveColumnById(this,"angleValue",b),d=a.resolveColumnById(this,"angleRaw",b),e=null!=this.properties.angleFilterKey?a.resolveColumnById(this,"angleFilterValue",b):void 0,f=null!=this.properties.angleFilterKey?a.resolveColumnById(this,"angleFilterRaw",b):void 0,g=this.properties.radiusKey?a.resolveColumnById(this,"radiusValue",b):void 0,h=this.properties.radiusKey?a.resolveColumnById(this,"radiusRaw",b):void 0,i=this.properties.calloutLabelKey?a.resolveColumnById(this,"calloutLabelValue",b):void 0;return{angleValues:c,angleRawValues:d,angleFilterValues:e,angleFilterRawValues:f,radiusValues:g,radiusRawValues:h,calloutLabelValues:i,sectorLabelValues:this.properties.sectorLabelKey?a.resolveColumnById(this,"sectorLabelValue",b):void 0,legendItemValues:this.properties.legendItemKey?a.resolveColumnById(this,"legendItemValue",b):void 0}}createNodeData(){let{id:a,processedData:b,dataModel:c,angleScale:d,ctx:{legendManager:e},visible:f}=this,{rotation:g,innerRadiusRatio:h}=this.properties;if(!c||b?.type!=="ungrouped")return;let i=this.getProcessedDataValues(c,b),{angleValues:j,angleRawValues:k,angleFilterValues:l,angleFilterRawValues:m,radiusValues:n,radiusRawValues:o,legendItemValues:p}=i,q=m?.some((a,b)=>a>k[b])??!1,r=0,s=0,t=[],u=null!=m?[]:void 0,v=b.dataSources.get(this.id)??[],w=b.invalidData?.get(this.id);return v.forEach((b,c)=>{if(w?.[c]===!0)return;let h=q?l[c]:j[c],v=null==m||q?1:Math.sqrt(m[c]/k[c]),x=d.convert(r)+ee(g);r=h,s+=h;let y=d.convert(r)+ee(g),z=Math.abs(y-x),A=x+z/2,B=k[c],C=(n?.[c]??1)*v,D=o?.[c],E=p?.[c],F=this.getLabels(c,b,A,z,i),G=this.getItemStyle({datum:b,datumIndex:c},!1),H={itemId:c,series:this,datum:b,datumIndex:c,angleValue:B,midAngle:A,midCos:Math.cos(A),midSin:Math.sin(A),startAngle:x,endAngle:y,radius:C,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(C),0),sectorFormat:G,radiusValue:D,legendItemValue:E,enabled:f&&e.getItemEnabled({seriesId:a,itemId:c}),focusable:!0,...F};t.push(H),null!=u&&u.push({...H,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1})}),this.zerosumOuterRing.visible=0===s,this.zerosumInnerRing.visible=0===s&&null!=h&&1!==h&&h>0,{itemId:a,nodeData:t,labelData:t,phantomNodeData:u}}getLabelContent(a,b,c){let{id:d,ctx:e,properties:f}=this,{formatManager:g}=e,{calloutLabel:h,sectorLabel:i,calloutLabelKey:j,sectorLabelKey:k,legendItemKey:l}=f,m=c.calloutLabelValues?.[a],n=c.sectorLabelValues?.[a],o=c.legendItemValues?.[a],p={datum:b,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},q={callout:void 0,sector:void 0,legendItem:void 0};return j&&(q.callout=this.getLabelText(m,b,j,"calloutLabel",[],h,{...p,value:m})),k&&(q.sector=this.getLabelText(n,b,k,"sectorLabel",[],i,{...p,value:n})),null!=l&&null!=o&&(q.legendItem=g.format(this.callWithContext.bind(this),{type:"category",value:o,datum:b,seriesId:d,legendItemName:void 0,key:l,source:"legend-label",property:"legendItem",domain:[],boundSeries:this.getFormatterContext("legendItem")})??o),q}getLabels(a,b,c,d,e){let{properties:f}=this,{calloutLabel:g,sectorLabel:h,legendItemKey:i}=f,j=this.getLabelContent(a,b,e),k={};return g.enabled&&j.callout&&d>=ee(g.minAngle)&&(k.calloutLabel={...this.getTextAlignment(c),text:j.callout,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),h.enabled&&j.sector&&(k.sectorLabel={text:j.sector}),i&&j.legendItem&&(k.legendItem={key:i,text:j.legendItem}),k}getTextAlignment(a){var b,c;let d=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"top"},{textAlign:"right",textBaseline:"middle"}],e=ec(a),f=Math.floor((b=Math.floor((e- -.75*Math.PI)/(Math.PI/2)))%(c=d.length)+(b<0?Math.abs(c):0));return d[f]}getFillParams(a,b,c){if(e1(a)&&"item"!==a.bounds)return{centerX:0,centerY:0,innerRadius:b,outerRadius:c}}getItemStyle({datum:a,datumIndex:b},c,d,e){let f,{angleKey:g,radiusKey:h,calloutLabelKey:i,sectorLabelKey:j,legendItemKey:k,fills:l,strokes:m,itemStyler:n}=this.properties,o=m[b],p=l[b],{fill:q,fillOpacity:r,stroke:s,strokeWidth:t,strokeOpacity:u,lineDash:v,lineDashOffset:w,cornerRadius:x,opacity:y}=dM(this.getHighlightStyle(c,b,d,e),{fill:p,stroke:o},this.properties);return n&&(f=this.cachedDatumCallback(this.getDatumId(b)+(c?"-highlight":"-hide"),()=>this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.callWithContext(n,{datum:a,angleKey:g,radiusKey:h,calloutLabelKey:i,sectorLabelKey:j,legendItemKey:k,fill:q,fillOpacity:r,stroke:s,strokeWidth:t,strokeOpacity:u,lineDash:v,lineDashOffset:w,cornerRadius:x,highlighted:c,highlightState:this.getHighlightStateString(this.ctx.highlightManager?.getActiveHighlight(),c,b),seriesId:this.id}),{proxyPaths:{fill:["fills",`${b}`],stroke:["strokes",`${b}`]}}))),{fill:f?.fill??q,fillOpacity:f?.fillOpacity??r,stroke:f?.stroke??s,strokeWidth:f?.strokeWidth??t,strokeOpacity:f?.strokeOpacity??u,lineDash:f?.lineDash??v,lineDashOffset:f?.lineDashOffset??w,cornerRadius:f?.cornerRadius??x,opacity:y}}getCalloutLineStyle(a,b){let{properties:c}=this,d={};if(c.calloutLine.itemStyler){let e=this.getHighlightStateString(this.ctx.highlightManager?.getActiveHighlight(),b,a.datumIndex),f={angleKey:c.angleKey,angleName:c.angleName??c.angleKey,calloutLabelKey:c.calloutLabelKey,calloutLabelName:c.calloutLabelName??c.calloutLabelKey,datum:a.datum,highlighted:b,highlightState:e,legendItemKey:c.legendItemKey,radiusKey:c.radiusKey,radiusName:c.radiusName??c.radiusKey,sectorLabelKey:c.sectorLabelKey,sectorLabelName:c.sectorLabelName??c.sectorLabelKey,seriesId:this.id};d=this.cachedCallWithContext(c.calloutLine.itemStyler,f)??{}}return{length:d.length??c.calloutLine.length,strokeWidth:d.strokeWidth??c.calloutLine.strokeWidth,color:d.color,colors:c.calloutLine.colors}}getInnerRadius(){let{radius:a}=this,{innerRadiusRatio:b=1,innerRadiusOffset:c=0}=this.properties,d=a*b+c;return d===a||d<0?0:d}getOuterRadius(){let{outerRadiusRatio:a,outerRadiusOffset:b}=this.properties;return Math.max(this.radius*a+b,0)}updateRadiusScale(a){let b=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=b,a&&(this.previousRadiusScale.range=b);let c=a=>({...a,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(a.radius),0)});this.nodeData=this.nodeData.map(c),this.phantomNodeData=this.phantomNodeData?.map(c)}getTitleTranslationY(){let a=Math.max(0,this.radiusScale.range[1]);if(0===a)return NaN;let b=this.properties.title?.spacing??0,c=Math.max(0,-a);return-a-(2+b)-c}update({seriesRect:a}){let{title:b}=this.properties,c={seriesRectWidth:a?.width,seriesRectHeight:a?.height},d=null!=fw(this.nodeDataDependencies,c);if(d&&(this._nodeDataDependencies=c),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(d),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),b){let a=this.getTitleTranslationY();b.node.y=isFinite(a)?a:0;let c=b.node.getBBox();b.node.visible=b.enabled&&isFinite(a)&&!this.bboxIntersectsSurroundingSeries(c)}for(let a of[this.zerosumInnerRing,this.zerosumOuterRing])a.fillOpacity=0,a.stroke=this.properties.calloutLabel.color,a.strokeWidth=1,a.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(a)}updateTitleNodes(){let{oldTitle:a}=this,{title:b}=this.properties;a!==b&&(a&&this.labelGroup?.removeChild(a.node),b&&(b.node.textBaseline="bottom",this.labelGroup?.appendChild(b.node)),this.oldTitle=b)}updateNodeMidPoint(){let a=a=>{let b=a.innerRadius+(a.outerRadius-a.innerRadius)/2;a.midPoint={x:a.midCos*Math.max(0,b),y:a.midSin*Math.max(0,b)}};this.nodeData.forEach(a),this.phantomNodeData?.forEach(a)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){let{itemSelection:a,highlightSelection:b,phantomSelection:c,calloutLabelSelection:d,labelSelection:e,innerLabelsSelection:f}=this,g=this.nodeData.map(a=>({...a,sectorFormat:{...a.sectorFormat}})),h=(a,b)=>{a.update(b,void 0,a=>this.getDatumId(a.datumIndex)),this.ctx.animationManager.isSkipped()&&a.cleanup()};h(a,this.nodeData),h(b,g),h(c,this.phantomNodeData??[]),d.update(this.calloutNodeData,a=>{let b=new jB;b.tag=0,b.pointerEvents=1,a.appendChild(b);let c=new gb;c.tag=1,c.pointerEvents=1,a.appendChild(c)}),e.update(this.nodeData),f.update(this.properties.innerLabels,a=>{a.pointerEvents=1})}updateInnerCircleSelection(){let{innerCircle:a}=this.properties,b=0,c=this.getInnerRadius();c>0&&(b=Math.ceil(2*Math.min(c,this.getOuterRadius())+1));let d=a?[{radius:b}]:[];this.innerCircleSelection.update(d)}updateNodes(a){let b=this.ctx.highlightManager.getActiveHighlight(),{visible:c,dataModel:d,processedData:e}=this;if(this.backgroundGroup.visible=c,this.contentGroup.visible=c,!d||!e)return;let{legendItemValues:f}=this.getProcessedDataValues(d,e),g=this.isSeriesHighlighted(b,f);this.highlightGroup.visible=c&&g,this.labelGroup.visible=c,this.innerCircleSelection.each((a,{radius:b})=>{a.setProperties({fill:this.properties.innerCircle?.fill,opacity:this.properties.innerCircle?.fillOpacity,size:b})});let h=this.radiusScale.range[0],i=this.radiusScale.range[1],j=this.getShapeFillBBox(),k=this.ctx.animationManager.isSkipped(),l=(a,b,c,d)=>{let e=this.getItemStyle(b,d,void 0,f);b.sectorFormat.fill=e.fill,b.sectorFormat.stroke=e.stroke,k&&(a.startAngle=b.startAngle,a.endAngle=b.endAngle,a.innerRadius=b.innerRadius,a.outerRadius=b.outerRadius),(d||k)&&(a.fill=e.fill,a.stroke=e.stroke);let g=this.getFillParams(e.fill,h,i);lL(a,e,j,g),a.cornerRadius=e.cornerRadius,a.fillShadow=this.properties.shadow;let l=Math.max((this.properties.sectorSpacing+(null!=e.stroke?e.strokeWidth:0))/2,0);a.inset=l,a.lineJoin=this.properties.sectorSpacing>=0||l>0?"miter":"round"};this.itemSelection.each((a,b,c)=>l(a,b,c,!1)),this.highlightSelection.each((a,c,d)=>{l(a,c,d,!0),a.visible=c.itemId===b?.itemId}),this.phantomSelection.each((a,b,c)=>l(a,b,c,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(a),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){let{strokes:a}=this.properties,{offset:b}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(c=>{let d=c.closestDatum(),{length:e,strokeWidth:f,color:g,colors:h}=this.getCalloutLineStyle(d,!1),i=aM(h)&&h.every(a=>"string"==typeof a)?h:a,{calloutLabel:j,outerRadius:k,datumIndex:l}=d;if(j?.text&&!j.hidden&&0!==k){c.visible=!0,c.strokeWidth=f,c.stroke=g??i[l%i.length],c.strokeOpacity=this.getHighlightStyle(!1,d.datumIndex).opacity??1,c.fill=void 0;let a=d.midCos*k,h=d.midSin*k,m=d.midCos*(k+e),n=d.midSin*(k+e);if((j.collisionTextAlign??0!==j.collisionOffsetY)&&null!=j.box){let a=j.box,c=m,d=n;m<a.x?c=a.x:m>a.x+a.width&&(c=a.x+a.width),n<a.y?d=a.y:n>a.y+a.height&&(d=a.y+a.height);let e=c-m,f=d-n,g=Math.sqrt(Math.pow(e,2)+Math.pow(f,2)),h=g-b;h>0&&(m+=e*h/g,n+=f*h/g)}c.x1=a,c.y1=h,c.x2=m,c.y2=n}else c.visible=!1})}getLabelOverflow(a,b,c){let d=-this.centerX,e=d+c.width,f=-this.centerY,g=f+c.height,h=1;b.x+1<d?h=(b.x+b.width-d)/b.width:b.x+b.width-1>e&&(h=(e-b.x)/b.width);let i=b.y+1<f||b.y+b.height-1>g;return{textLength:1===h?a.length:Math.floor(a.length*h)-1,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(b)}}bboxIntersectsSurroundingSeries(a){let{surroundingRadius:b}=this;if(null==b)return!1;let c=[{x:a.x,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width,y:a.y+a.height},{x:a.x,y:a.y+a.height}],d=b**2;return c.some(a=>a.x**2+a.y**2>d)}computeCalloutLabelCollisionOffsets(){let{radiusScale:a}=this,{calloutLabel:b}=this.properties,{offset:c,minSpacing:d}=b,e=a.convert(0),f=this.calloutNodeData,g=f.filter(a=>!(!a.calloutLabel||0===a.outerRadius));if(g.forEach(a=>{let b=a.calloutLabel;null!=b&&(b.hidden=!1,b.collisionTextAlign=void 0,b.collisionOffsetY=0)}),g.length<=1)return;let h=g.filter(a=>a.midCos<0).sort((a,b)=>a.midSin-b.midSin),i=g.filter(a=>a.midCos>=0).sort((a,b)=>a.midSin-b.midSin),j=g.filter(a=>a.midSin<0&&a.calloutLabel?.textAlign==="center").sort((a,b)=>a.midCos-b.midCos),k=g.filter(a=>a.midSin>=0&&a.calloutLabel?.textAlign==="center").sort((a,b)=>a.midCos-b.midCos),l=a=>{let d=a.calloutLabel;if(null==d)return dt.zero.clone();let e=jL(this.getLabelStyle(a,b)),f=this.getCalloutLineStyle(a,!1).length,g=a.outerRadius+f+c,h=a.midCos*g,i=a.midSin*g+d.collisionOffsetY,j=d.collisionTextAlign??d.textAlign,k=d.textBaseline;return gb.computeBBox(d.text,h,i,{font:this.properties.calloutLabel,textAlign:j,textBaseline:k}).grow(e)},m=(a,b,c)=>{let e=l(a).grow(d/2),f=l(b).grow(d/2);e.x<f.x+f.width&&e.x+e.width>f.x&&("to-top"===c?e.y<f.y+f.height:e.y+e.height>f.y)&&(b.calloutLabel.collisionOffsetY="to-top"===c?e.y-f.y-f.height:e.y+e.height-f.y)},n=a=>{let b=a.slice().sort((a,b)=>Math.abs(a.midSin)-Math.abs(b.midSin))[0],c=a.indexOf(b);for(let b=c-1;b>=0;b--)m(a[b+1],a[b],"to-top");for(let b=c+1;b<a.length;b++)m(a[b-1],a[b],"to-bottom")},o=a=>{let b=g.some(a=>0!==a.calloutLabel.collisionOffsetY),c=a.map(a=>l(a)),h=c.map(a=>a.clone().grow(d/2)),i=!1;for(let b=0;b<h.length&&!i;b++){let c=h[b];for(let d=b+1;d<a.length;d++){let a=h[d];if(c.collidesBBox(a)){i=!0;break}}}let j=f.map(a=>{let{startAngle:b,endAngle:c,outerRadius:d}=a;return{startAngle:b,endAngle:c,innerRadius:e,outerRadius:d}}),k=c.some(a=>j.some(b=>(function(a,b){let c={x:a.x,y:a.y},d={x:a.x+a.width,y:a.y},e={x:a.x,y:a.y+a.height},f={x:a.x+a.width,y:a.y+a.height};return u6({start:c,end:d},b)||u6({start:e,end:f},b)})(a,b)));if(i||b||k)for(let b of a){if("center"!==b.calloutLabel.textAlign)continue;let a=b.calloutLabel;b.midCos<0?a.collisionTextAlign="right":b.midCos>0?a.collisionTextAlign="left":a.collisionTextAlign="center"}};n(h),n(i),o(j),o(k)}getLabelStyle(a,b){let c=this.ctx.highlightManager?.getActiveHighlight();return sM(this,a,this.properties,b,!1,c)}updateCalloutLabelNodes(a){let{radiusScale:b}=this,{calloutLabel:c}=this.properties,d=new gb;this.calloutLabelSelection.selectByTag(1).forEach(e=>{let f=e.closestDatum(),g=f.calloutLabel,h=Math.max(0,b.convert(f.radius));if(!g?.text||0===h||g.hidden){e.visible=!1;return}let i=this.getLabelStyle(f,c),j=h+this.getCalloutLineStyle(f,!1).length+c.offset,k=f.midCos*j,l=f.midSin*j+g.collisionOffsetY,m={textAlign:g.collisionTextAlign??g.textAlign,textBaseline:g.textBaseline};d.text=g.text,d.x=k,d.y=l,d.setFont(i),d.setAlign(m),d.setBoxing(i);let n=d.getBBox(),o=g.text,p=!0;if(c.avoidCollisions){let{textLength:b,hasVerticalOverflow:c}=this.getLabelOverflow(g.text,n,a);o=g.text.length===b?g.text:`${g.text.substring(0,b)}\u2026`,p=!c}e.text=o,e.x=k,e.y=l,e.setFont(i),e.setAlign(m),e.setBoxing(i),e.fill=i.color,e.fillOpacity=this.getHighlightStyle(!1,f.datumIndex).opacity??1,e.visible=p})}computeLabelsBBox(a,b){let c,{calloutLabel:d}=this.properties,{offset:e,maxCollisionOffset:f,minSpacing:g}=d;if(!d.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let h=[],i=new gb,{title:j}=this.properties;if(j?.text&&j.enabled){let a=this.getTitleTranslationY();isFinite(a)&&(i.text=j.text,i.x=0,i.y=a,i.setFont(j),i.setAlign({textBaseline:"bottom",textAlign:"center"}),c=i.getBBox(),h.push(c))}return(this.calloutNodeData.forEach(j=>{let k=j.calloutLabel;if(!k||0===j.outerRadius)return null;let l=this.getLabelStyle(j,d),m=this.getCalloutLineStyle(j,!1).length,n=j.outerRadius+m+e,o=j.midCos*n,p=j.midSin*n+k.collisionOffsetY;i.text=k.text,i.x=o,i.y=p,i.setFont(l),i.setAlign({textAlign:k.collisionTextAlign??k.textAlign,textBaseline:k.textBaseline}),i.setBoxing(l);let q=i.getBBox();if(k.box=q,Math.abs(k.collisionOffsetY)>f){k.hidden=!0;return}if(c){let a=-this.centerY,b=new dt(c.x-g,a,c.width+2*g,c.y+c.height+g-a);if(q.collidesBBox(b)){k.hidden=!0;return}}if(a.hideWhenNecessary){let{textLength:a,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:d}=this.getLabelOverflow(k.text,q,b),e=k.text.length>2&&a<2;if(c||e||d){k.hidden=!0;return}}k.hidden=!1,h.push(q)}),0===h.length)?null:dt.merge(h)}updateSectorLabelNodes(){let{properties:a}=this,{positionOffset:b,positionRatio:c}=this.properties.sectorLabel,d=this.radiusScale.convert(0),e=d<=0&&this.ctx.legendManager.getData(this.id)?.filter(a=>a.enabled).length===1,f={textAlign:"center",textBaseline:"middle"},g=(g,h)=>{let{outerRadius:i,startAngle:j,endAngle:k}=h,l=!1;if(h.sectorLabel&&0!==i){let m=this.getLabelStyle(h,a.sectorLabel),n=d*(1-c)+i*c+b;g.fill=m.color,g.fillOpacity=this.getHighlightStyle(!1,h.datumIndex).opacity??1,g.text=h.sectorLabel.text,e?(g.x=0,g.y=0):(g.x=h.midCos*n,g.y=h.midSin*n),g.setFont(m),g.setAlign(f),g.setBoxing(m);let o=g.getBBox(),p=[[o.x,o.y],[o.x+o.width,o.y],[o.x+o.width,o.y+o.height],[o.x,o.y+o.height]],q={startAngle:j,endAngle:k,innerRadius:d,outerRadius:i};p.every(([a,b])=>u5(a,b,q))&&(l=!0)}g.visible=l};this.labelSelection.each(g)}updateInnerLabelNodes(){let a=[],b=[];this.innerLabelsSelection.each((c,d)=>{let{fontStyle:e,fontWeight:f,fontSize:g,fontFamily:h,color:i}=d;c.fontStyle=e,c.fontWeight=f,c.fontSize=g,c.fontFamily=h,c.text=d.text,c.x=0,c.y=0,c.fill=i,c.textAlign="center",a.push(c.getBBox()),b.push(d.spacing)});let c=a=>0===a?0:b[a],d=a=>a===b.length-1?0:b[a],e=a.reduce((a,b)=>a<b.width?b.width:a,0),f=a.reduce((a,b,e)=>a+b.height+c(e)+d(e),0),g=this.getInnerRadius(),h=Math.sqrt(Math.pow(e/2,2)+Math.pow(f/2,2))<=(g>0?g:this.getOuterRadius()),i=[];for(let b=0,e=-f/2;b<a.length;b++){let f=a[b].height+e+c(b);i.push(f),e=f+d(b)}this.innerLabelsSelection.each((b,c,d)=>{b.visible=h,Array.isArray(b.text)?b.y=i[d]-a[d].height:b.y=i[d]})}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}pickNodeClosestDatum(a){return vn(this,a)}getTooltipContent(a){let{id:b,dataModel:c,processedData:d,properties:e,ctx:{formatManager:f}}=this,{legendItemKey:g,calloutLabelKey:h,calloutLabelName:i,sectorLabelKey:j,sectorLabelName:k,angleKey:l,angleName:m,radiusKey:n,radiusName:o,tooltip:p}=e,q=this.properties.title.node.getPlainText();if(!c||!d)return;let r=d.dataSources.get(this.id)?.[a],s=this.getProcessedDataValues(c,d),{angleRawValues:t}=s,u=t[a],v=this.getLabelContent(a,r,s),w=v.legendItem??v.callout??v.sector??m,x=c.getDomain(this,"angleRaw","value",d),y=f.format(this.callWithContext.bind(this),{type:"number",value:u,datum:r,seriesId:b,legendItemName:void 0,key:l,source:"tooltip",property:"angle",domain:x,boundSeries:this.getFormatterContext("angle"),fractionDigits:void 0})??g4(u,3);return this.formatTooltipWithContext(p,{title:q,symbol:this.legendItemSymbol(a),data:[{label:w,fallbackLabel:l,value:y}]},{seriesId:b,datum:r,title:m,legendItemKey:g,calloutLabelKey:h,calloutLabelName:i,sectorLabelKey:j,sectorLabelName:k,angleKey:l,angleName:m,radiusKey:n,radiusName:o,...this.getItemStyle({datum:r,datumIndex:a},!1)})}legendItemSymbol(a){let b=this.processedData?.dataSources.get(this.id)?.[a],c=this.getItemStyle({datum:b,datumIndex:a},!1),{fillOpacity:d,strokeOpacity:e,strokeWidth:f,lineDash:g,lineDashOffset:h}=this.properties,{fill:i}=c,{stroke:j}=c;return e1(i)&&(i={...i,gradient:"linear",rotation:0,reverse:!1}),{marker:{fill:i,stroke:j,fillOpacity:d,strokeOpacity:e,strokeWidth:f,lineDash:g,lineDashOffset:h}}}getLegendData(a){let{visible:b,processedData:c,dataModel:d,id:e,ctx:{legendManager:f}}=this;if(!d||!c||"category"!==a)return[];let{angleKey:g,calloutLabelKey:h,sectorLabelKey:i,legendItemKey:j,showInLegend:k}=this.properties;if(!j&&(!h||h===g)&&(!i||i===g))return[];let l=this.getProcessedDataValues(d,c),{angleRawValues:m}=l,n=this.properties.title?.showInLegend&&this.properties.title.text,o=[],p=this.properties.hideZeroValueSectorsInLegend,q=c.dataSources.get(this.id),r=c.invalidData?.get(this.id);for(let a=0;a<c.input.count;a++){let c=q?.[a],d=m[a];if(r?.[a]===!0||p&&0===d)continue;let s=[];n&&s.push(n);let t=this.getLabelContent(a,c,l);j&&void 0!==t.legendItem?s.push(t.legendItem):h&&h!==g&&void 0!==t.callout?s.push(t.callout):i&&i!==g&&void 0!==t.sector&&s.push(t.sector),0!==s.length&&o.push({legendType:"category",id:e,datum:c,itemId:a,seriesId:e,hideToggleOtherSeries:!0,enabled:b&&f.getItemEnabled({seriesId:e,itemId:a}),label:{text:s.join(" - ")},symbol:this.legendItemSymbol(a),legendItemName:null!=j?c[j]:void 0,hideInLegend:!k})}return o}setLegendState(a){let{id:b,ctx:{legendManager:c,updateService:d}}=this;a.forEach((a,d)=>c.toggleItem(a,b,d)),c.update(),d.update(5)}animateEmptyUpdateReady(a){let{animationManager:b}=this.ctx,c=vl(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);jw(this.id,"nodes",b,[this.itemSelection,this.highlightSelection,this.phantomSelection],c.nodes,(a,b)=>this.getDatumId(b.datumIndex)),jw(this.id,"innerCircle",b,[this.innerCircleSelection],c.innerCircle),sQ(this,"callout",b,this.calloutLabelSelection),sQ(this,"sector",b,this.labelSelection),sQ(this,"inner",b,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){let{itemSelection:a,highlightSelection:b,phantomSelection:c,processedData:d,radiusScale:e,previousRadiusScale:f}=this,{animationManager:g}=this.ctx,h=d?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);let i=(h?.moved.size??0)===0,j=(d?.defs.keys.length??0)>0,k=d?.reduced?.animationValidation?.uniqueKeys??!0;i&&j&&k||this.ctx.animationManager.skipCurrentBatch();let l=!this.nodeData.some(a=>a.enabled),m=vl(!1,this.properties.rotation,e,f);jw(this.id,"nodes",g,[a,b,c],m.nodes,(a,b)=>this.getDatumId(b.datumIndex),h),jw(this.id,"innerCircle",g,[this.innerCircleSelection],m.innerCircle),sQ(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),sQ(this,"sector",this.ctx.animationManager,this.labelSelection),this.noVisibleData!==l&&(this.noVisibleData=l,sQ(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:a,highlightSelection:b,phantomSelection:c,radiusScale:d,previousRadiusScale:e}=this,{animationManager:f}=this.ctx,g=vl(!1,this.properties.rotation,d,e);jw(this.id,"nodes",f,[a,b,c],g.nodes,(a,b)=>this.getDatumId(b.datumIndex)),jw(this.id,"innerCircle",f,[this.innerCircleSelection],g.innerCircle),sR(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),sR(this,"sector",this.ctx.animationManager,this.labelSelection),sR(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(a){let{dataModel:b,processedData:c}=this;if(!b||!c)return`${a}`;let{calloutLabelKey:d,sectorLabelKey:e,legendItemKey:f}=this.properties;return c.reduced?.animationValidation?.uniqueKeys?f?pH(b.resolveKeysById(this,"legendItemKey",c)[a]):d?pH(b.resolveKeysById(this,"calloutLabelKey",c)[a]):e?pH(b.resolveKeysById(this,"sectorLabelKey",c)[a]):`${a}`:`${a}`}hasItemStylers(){let{itemStyler:a,calloutLabel:b,sectorLabel:c}=this.properties;return(a??b.itemStyler??c.itemStyler)!=null}};vt.className="DonutSeries",vt.type="donut";var vu={series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:gh.LARGE},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{...ny,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{...ny,enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"chartBackgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2,colors:{$map:[{$if:[{$or:[{$isGradient:{$value:"$1"}},{$isPattern:{$value:"$1"}},{$isImage:{$value:"$1"}}]},{$path:["../../strokes/$index",{$ref:"foregroundColor"}]},{$value:"$1"}]},{$if:[{$eq:[{$path:"../strokeWidth"},0]},{$path:"../fills"},{$path:"../strokes"}]}]}},fills:{$applyCycle:[{$cacheMax:{$size:{$path:["./data",{$path:"/data"}]}}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",nn],["pattern",np],["image",nt]]}]},strokes:{$applyCycle:[{$cacheMax:{$size:{$path:["./data",{$path:"/data"}]}}},{$palette:"strokes"}]},fillOpacity:1,strokeOpacity:1,strokeWidth:{$isUserOption:["./strokes/0",2,0]},lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:mF,xOffset:3,yOffset:3,blur:5},highlight:nz()},legend:{enabled:!0}},vv={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:a=>new vt(a),themeTemplate:{...vu,series:{...vu.series,innerRadiusRatio:{$if:[{$eq:[{$path:["./innerRadiusOffset",void 0]},void 0]},.7,void 0]},innerLabels:{$apply:{...ny,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:2}},highlight:nA()}}},vw=class extends vt{};vw.className="PieSeries",vw.type="pie";var vx={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:a=>new vw(a),themeTemplate:vu},vy=Symbol("IGNORED_PROP");function vz(a,b){let c={};for(let d of Object.keys(b)){let e=b[d];e!==vy&&Object.hasOwn(a,d)&&(c[d]=e)}return c}function vA(a){let{enabled:b,mode:c,showArrow:d,range:e,position:f,pagination:g,delay:h,wrapping:i,interaction:j,renderer:k,...l}=a,m=vz(a,{enabled:b,showArrow:d,range:e,position:f,interaction:j,renderer:k,...l});return{chartTooltipOptions:vz(a,{enabled:vy,showArrow:vy,range:vy,position:vy,mode:c,pagination:g,delay:h,wrapping:i,...l}),seriesTooltipOptions:m}}function vB(a,b){if(null==b)return a;let{targets:c,...d}=b;return null!=(a=dM(a,d)).targets&&null!=c&&(a.targets=dO(a.targets,c)),a}var vC={stroke:mW},vD={fill:m$},vE={color:"white",fill:mW},vF={color:mW},vG={color:mY,fontSize:{$rem:gh.LARGE},fontFamily:{$ref:"fontFamily"}},vH={...vG,fontSize:{$ref:"fontSize"},color:m1,fill:m_,stroke:m0,strokeWidth:1,divider:{stroke:m2,strokeWidth:1,strokeOpacity:.5}},vI={...vC,background:{fill:mZ,fillOpacity:.2},handle:{...vD},text:{...vF},statistics:{...vH}},vJ={line:{...vC,handle:{...vD},text:{...vF}},"horizontal-line":{...vC,handle:{...vD},axisLabel:{...vE},text:{...vF}},"vertical-line":{...vC,handle:{...vD},axisLabel:{...vE},text:{...vF}},"disjoint-channel":{...vC,background:{fill:mZ,fillOpacity:.2},handle:{...vD},text:{...vF}},"parallel-channel":{...vC,background:{fill:mZ,fillOpacity:.2},handle:{...vD},text:{...vF}},"fibonacci-retracement":{...vC,strokes:mX,rangeStroke:mW,handle:{...vD},text:{...vF,position:"center"},label:{...vG,color:void 0,fontSize:{$rem:gh.SMALLER}}},"fibonacci-retracement-trend-based":{...vC,strokes:mX,rangeStroke:mW,handle:{...vD},text:{...vF,position:"center"},label:{...vG,color:void 0,fontSize:{$rem:gh.SMALLER}}},callout:{...vC,...vG,color:{$ref:"textColor"},handle:{...vD},fill:mZ,fillOpacity:.2},comment:{...vG,color:"white",fontWeight:700,handle:{...vD},fill:mW},note:{...vG,color:m7,fill:mW,stroke:{$ref:"chartBackgroundColor"},strokeWidth:1,strokeOpacity:1,handle:{...vD},background:{fill:m5,stroke:m6,strokeWidth:1}},text:{...vG,handle:{...vD}},arrow:{...vC,handle:{...vD},text:{...vF}},"arrow-up":{fill:{$palette:"up.fill"},handle:{...vD,stroke:mW}},"arrow-down":{fill:{$palette:"down.fill"},handle:{...vD,stroke:mW}},"date-range":{...vI},"price-range":{...vI},"date-price-range":{...vI},"quick-date-price-range":{up:{...vC,fill:mZ,fillOpacity:.2,handle:{...vD},statistics:{...vH,color:"#fff",fill:mZ,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...vC,stroke:m4,fill:m3,fillOpacity:.2,handle:{...vD,stroke:m4},statistics:{...vH,color:"#fff",fill:m3,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}},axesButtons:{enabled:!0}},vK=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"],vL=[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"fibonacci-retracement-drawing",tooltip:"toolbarAnnotationsFibonacciAnnotations",value:"fibonacci-menu"},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}],vM="range-area";function vN(a,b){return[{type:"candlestick",focusPriority:0,...a,...b}]}function vO(a,b){return b[a]??b.default}var vP={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:mV,lineDash:[0],label:{enabled:!1}}},vQ={...vP,nice:!1},vR={mode:"compact",position:{anchorTo:"node",placement:["right","left"]},showArrow:!1},vS={style:[{stroke:{$ref:"gridLineColor"}}],width:2},vT={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},navigator:{enabled:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:{...vQ,interval:{values:[0]}},log:{...vQ},time:{...vQ},category:{...vP}}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:{...vR,position:{...vR.position,anchorTo:"pointer"},range:"nearest"},axes:{number:{gridLine:vS},time:{gridLine:vS},category:{gridLine:vS}}},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3}},tooltip:vR},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4},tooltip:vR}}},vU=hz(function(a,b){return"string"==typeof a?{...b,baseTheme:a}:null!=a?{...a,baseTheme:vU(a.baseTheme,b)}:b});function vV(a){if(Array.isArray(a)&&0!==a.length){let b=a.find(a=>null!=a);if("number"==typeof b)return{data:a.map((a,b)=>({x:b,y:a})),series:[{xKey:"x",yKey:"y"}],datumKey:"y"};if(Array.isArray(b))return{data:a.map(a=>({x:a?.[0],y:a?.[1],datum:a})),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}else if(a?.length===0)return{data:a,series:[{xKey:"x",yKey:"y"}],datumKey:"y"};return{data:a}}var vW=hz((a,b,c)=>d=>{let e=d.datum[d.xKey],f=d.datum[d.yKey],g=null!=c?d.datum[c]:d.datum,h=b?.renderer?.({context:a,datum:g,xValue:e,yValue:f});if("string"==typeof h)return h;let i=h?.content??f.toFixed(2);return h?.title?{heading:void 0,title:void 0,data:[{label:h.title,value:i}]}:{heading:void 0,title:i,data:[]}}),vX={chartType:bT("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),dateKey:bJ,openKey:bJ,highKey:bJ,lowKey:bJ,closeKey:bJ,volumeKey:bJ,navigator:bC,volume:bC,rangeButtons:bC,statusBar:bC,toolbar:bC,zoom:bC,sync:bC,theme:bG,container:bG,width:bG,height:bG,minWidth:bG,minHeight:bG,listeners:bG,initialState:bG,title:bG,data:bB,formatter:bG},vY={theme:bG,container:bG,animation:bG,background:bG,contextMenu:bG,context:()=>!0,listeners:bG,locale:bG,width:bG,height:bG,minWidth:bG,minHeight:bG,title:bG,subtitle:bG,footnote:bG,padding:bG,tooltip:{...oA,...or.tooltip}};vY.overrideDevicePixelRatio=bv(bO);var vZ=["showInLegend","showInMiniChart","grouped","stacked","stackGroup","tooltip","listeners","errorBar","xKey","yKey","type"],v$={visible:bC,reverse:bC,stroke:bE,strokeWidth:bO},v_={context:()=>!0,tooltip:bG,theme:bG,background:bG,container:bG,width:bG,height:bG,minWidth:bG,minHeight:bG,padding:bG,listeners:bG,locale:bG,data:bG,styleNonce:bJ,axis:bx({number:{...v$,min:by(bH,bR("max")),max:by(bH,bS("min"))},category:{...v$,paddingInner:bQ,paddingOuter:bQ},time:{...v$,min:by(bz(bH,bF),bR("max")),max:by(bz(bH,bF),bS("min"))}},"axis options","category"),min:by(bH,bR("max")),max:by(bH,bS("min")),crosshair:{enabled:bC,snap:bC,...b5,...cc},xKey:bJ,yKey:bJ};v_.overrideDevicePixelRatio=bv(bH);var v0={type:"preset",name:"gauge-preset",enterprise:!0,options:bx({"linear-gauge":{...dQ(oH,["type"]),...vY},"radial-gauge":{...dQ(oJ,["type"]),...vY}},"gauge options"),create:function(a,b){switch(a.type){case"radial-gauge":return function(a){let{animation:b,background:c,container:d,contextMenu:e,context:f,footnote:g,height:h,listeners:i,locale:j,minHeight:k,minWidth:l,overrideDevicePixelRatio:m,padding:n,subtitle:o,theme:p,title:q,width:r,type:s,cursor:t,nodeClickRange:u,tooltip:v={},value:w,scale:x={},startAngle:y,endAngle:z,highlightStyle:A,highlight:B,segmentation:C,bar:D,needle:E,targets:F,outerRadius:G,innerRadius:H,outerRadiusRatio:I,innerRadiusRatio:J,cornerRadius:K,cornerMode:L,label:M,secondaryLabel:N,spacing:O,...P}=a,{chartTooltipOptions:Q,seriesTooltipOptions:R}=vA(v),S=vz(a,{animation:b,background:c,container:d,contextMenu:e,context:f,footnote:g,height:h,listeners:i,locale:j,minHeight:k,minWidth:l,overrideDevicePixelRatio:m,padding:n,subtitle:o,theme:p,title:q,tooltip:Q,width:r}),T=vz(a,{needle:null!=E?{enabled:!0,...E}:vy,startAngle:y,endAngle:z,scale:x,type:s,cursor:t,context:f,nodeClickRange:u,tooltip:R,value:w,highlightStyle:A,highlight:B,segmentation:C,bar:D,targets:F,outerRadius:G,innerRadius:H,outerRadiusRatio:I,innerRadiusRatio:J,cornerRadius:K,cornerMode:L,label:M,secondaryLabel:N,spacing:O,...P});return{...S,series:[T]}}(vB(a,b));case"linear-gauge":return function(a){let{animation:b,background:c,container:d,contextMenu:e,context:f,footnote:g,height:h,listeners:i,locale:j,minHeight:k,minWidth:l,overrideDevicePixelRatio:m,padding:n,subtitle:o,theme:p,title:q,width:r,type:s,cursor:t,nodeClickRange:u,tooltip:v={},value:w,scale:x={},direction:y="vertical",thickness:z,highlightStyle:A,highlight:B,segmentation:C,bar:D,targets:E,cornerRadius:F,cornerMode:G,label:H,...I}=a,{chartTooltipOptions:J,seriesTooltipOptions:K}=vA(v),L=vz(a,{animation:b,background:c,container:d,contextMenu:e,context:f,footnote:g,height:h,listeners:i,locale:j,minHeight:k,minWidth:l,overrideDevicePixelRatio:m,padding:n,subtitle:o,theme:p,title:q,tooltip:J,width:r}),M=vz(a,{scale:x,type:s,cursor:t,context:f,nodeClickRange:u,tooltip:K,value:w,direction:y,thickness:z,highlightStyle:A,highlight:B,segmentation:C,bar:D,targets:E,cornerRadius:F,cornerMode:G,label:H,...I});return{...L,series:[M]}}(vB(a,b));default:return{}}}},v1={type:"preset",name:"sparkline",options:bx({area:{...v_,...dQ(qi,vZ)},bar:{...v_,...dQ(qm,vZ)},line:{...v_,...dQ(qt,vZ)}},"sparkline options"),create:function(a){let{background:b,container:c,height:d,listeners:e,locale:f,minHeight:g,minWidth:h,overrideDevicePixelRatio:i,padding:j,width:k,theme:l,data:m,crosshair:n,axis:o,min:p,max:q,tooltip:r,context:s,styleNonce:t,...u}=a,v=vz(a,{background:b,container:c,height:d,listeners:e,locale:f,minHeight:g,minWidth:h,overrideDevicePixelRatio:i,padding:j,width:k,styleNonce:t,tooltip:vy,context:vy,data:vy,crosshair:vy,axis:vy,min:vy,max:vy,theme:vy}),{data:w,series:[x]=[],datumKey:y}=vV(m);null!=x&&Object.assign(u,x),u.tooltip={...r,renderer:vW(s,r,y)},v.theme=vU(l,vT),v.data=w,v.series=[u];let z="bar"!==u.type||"horizontal"!==u.direction,[A,B]=z?["bottom","left"]:["left","bottom"],C={...function(a){switch(a?.type){case"number":{let{type:b,min:c,max:d,reverse:e}=a;return vz(a,{type:b,reverse:e,min:c,max:d})}case"time":{let{type:b,min:c,max:d,reverse:e}=a;return vz(a,{type:b,reverse:e,min:c,max:d})}default:{let{paddingInner:b,paddingOuter:c,reverse:d}=a??{};return vz({...a,type:"category"},{type:"category",reverse:d,paddingInner:b,paddingOuter:c})}}}(o),position:A,...vz(a,{crosshair:n})},D={type:"number",gridLine:function(a,b,c){let d={};return a?.stroke!=null&&(d.style=[{stroke:a?.stroke}],d.enabled??(d.enabled=!0)),a?.strokeWidth!=null&&(d.width=a?.strokeWidth,d.enabled??(d.enabled=!0)),"bar"===c.type&&"horizontal"!==c.direction&&(d.enabled??(d.enabled=!0)),a?.visible!=null&&(d.enabled=a.visible),d.enabled??(d.enabled=b),d}(o,!1,a),position:B,...vz(a,{min:p,max:q})};return v.axes=z?[D,C]:[C,D],v},processData:vV};function v2(a){let b=new Map;for(let c of a){if(!(c instanceof th))continue;let a=(c.seriesGrouping?.stackCount??0)>0?c.seriesGrouping?.groupIndex:void 0;if(null==a){c.seriesBelowStackContext=void 0,c.createStackContext();continue}let d=`${c.type}-${a}`,e=b.get(d);null==e&&(e=[],b.set(d,e)),e.push(c)}for(let a of b.values()){let b;for(let c of(a.sort((a,b)=>(a.seriesGrouping?.stackIndex??0)-(b.seriesGrouping?.stackIndex??0)),a))c.seriesBelowStackContext=b,b=c.createStackContext()}}var v3=["top","right","bottom","left"],v4=class a extends mx{constructor(a,b){super(a,b),this.paired=!0,this.lastUpdateClipRect=void 0,this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}onAxisChange(a,b){super.onAxisChange(a,b),this.syncAxisChanges(a,b),null!=this.ctx&&this.ctx.zoomManager.updateAxes(a)}destroySeries(a){super.destroySeries(a),this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}getChartType(){return"cartesian"}setRootClipRects(a){let{seriesRoot:b,annotationRoot:c}=this;b.setClipRect(a),c.setClipRect(a)}async processData(){await super.processData(),"init"===this.syncStatus&&(this.syncStatus="domains-calculated"),this.ctx.updateService.dispatchProcessData({series:{shouldFlipXY:this.shouldFlipXY()}})}async processDomains(){for(let a of(await super.processDomains(),this.axes)){let b=await this.getSyncedDomain(a);null!=b&&a.setDomains(b)}}performLayout(a){let{seriesRoot:b,annotationRoot:c}=this,{clipSeries:d,seriesRect:e,visible:f}=this.updateAxes(a.layoutBox);this.seriesRoot.visible=f,this.seriesRect=e,this.animationRect=a.layoutBox;let{x:g,y:h}=e;if(a.width!==this.lastLayoutWidth||a.height!==this.lastLayoutHeight)for(let a of[b,c])a.translationX=Math.floor(g),a.translationY=Math.floor(h);else{let{translationX:a,translationY:d}=b;jx(this.id,"seriesRect",this.ctx.animationManager,[b,c],{translationX:a,translationY:d},{translationX:Math.floor(g),translationY:Math.floor(h)},{phase:"update"})}this.lastLayoutWidth=a.width,this.lastLayoutHeight=a.height;let i=this.modulesManager.getModule("seriesArea"),j=e.clone().grow(i.getPadding()),k=i.clip||d?j:void 0,{lastUpdateClipRect:l}=this;this.lastUpdateClipRect=k,this.ctx.animationManager.isActive()&&null!=l?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:l,to:j,onUpdate:a=>this.setRootClipRects(a),onComplete:()=>this.setRootClipRects(k)}):this.setRootClipRects(k),this.ctx.layoutManager.emitLayoutComplete(a,{axes:this.axes.map(a=>a.getLayoutState()),series:{visible:f,rect:e,paddedRect:j},clipSeries:d}),v2(this.series)}updateAxes(a){let{clipSeries:b,seriesRect:c,overflows:d}=this.resolveAxesLayout(a);for(let b of this.axes)b.update(),b.setCrossLinesVisible(!d),this.clipAxis(b,c,a);return{clipSeries:b,seriesRect:c,visible:!d}}resolveAxesLayout(a){let b,c,d=0;do if(c=b??this.getDefaultState(),b=this.updateAxesPass(new Map(c.axisAreaWidths),a.clone()),d++>10){aa.warn("Max iterations reached. Unable to stabilize axes layout.");break}while(!this.isLayoutStable(b,c))return this.lastAreaWidths=b.axisAreaWidths,b}updateAxesPass(b,c){let d=new Map,e={},f=!1,g=!1;for(let a of v3){let b=this.modulesManager.getModule("seriesArea").getPadding()[a],d=this.axes.findLast(b=>b.position===a);d?d.seriesAreaPadding=b:c.shrink(b,a)}let h=(b.get("left")??0)+(b.get("right")??0),i=(b.get("top")??0)+(b.get("bottom")??0),j=this.buildCrossLinePadding(b),k=j.left+j.right,l=j.top+j.bottom;c.width<=h+k||c.height<=i+l?f=!0:c.shrink(j);let{scene:m}=this.ctx,n=c.clone().shrink(Object.fromEntries(b));for(let a of this.axes){let b,{position:c="left",direction:f}=a,h="y"===f;this.sizeAxis(a,n,c),b=null==a.thickness?v5(h,m)*(a.maxThicknessRatio??1):a.thickness;let{primaryTickCount:i,bbox:j}=a.calculateLayout(a.nice?e[f]:void 0,{sizeLimit:b,padding:this.padding});e[f]??(e[f]=i),g||(g=a.dataDomain.clipped||a.visibleRange[0]>0||a.visibleRange[1]<1),null==a.thickness&&(b=Math.min(v5(h,j)??0,b)),d.set(a.id,Math.ceil(b))}let o=cv(this.axes,a=>a.position??"left"),p=new Map,q=new Map;for(let[b,c]of cC(o)){let e=v5("left"!==b&&"right"!==b,m)%m.pixelRatio,f=0;for(let b of c??[]){q.set(b.id,e);let c=d.get(b.id)??0;f=Math.max(f,e+c),b.layoutConstraints.stacked&&(e+=c+a.AxesPadding)}p.set(b,Math.ceil(f))}for(let[a,b]of cC(o))this.positionAxes({axes:b??[],position:a,axisWidths:d,axisOffsets:q,axisAreaWidths:p,axisBound:c,seriesRect:n});return{clipSeries:g,seriesRect:n,axisAreaWidths:p,overflows:f}}buildCrossLinePadding(a){let b={top:0,right:0,bottom:0,left:0};for(let[c,d=0]of(this.axes.forEach(a=>{let{position:c,label:d}=a;a.crossLines?.forEach(a=>{var e;a instanceof jX&&(a.position=c??"top",(e=a.label).parallel??(e.parallel=d.parallel)),a.calculatePadding?.(b)})}),cC(b)))b[c]=Math.max(d-(a.get(c)??0),0);return b}clampToOutsideSeriesRect(a,b,c,d){let e="x"===c?a.x:a.y,f="x"===c?a.width:a.height;return 1===d?Math.min(b,e+f):Math.max(b,e)}async getSyncedDomain(a){let b=this.modulesManager.getModule("sync");if(b?.enabled)return await b.getSyncedDomain(a)}syncAxisChanges(a,b){let c=this.modulesManager.getModule("sync");if(!c?.enabled)return;let d=new Set(b??[]);for(let b of a)d.delete(b);for(let a of d)c.removeAxis(a)}sizeAxis(a,b,c){let d=a instanceof pY,e="left"===c||"right"===c,{width:f,height:g}=b,h=e?g:f,i=0,j=h,{min:k,max:l}=this.ctx.zoomManager.getAxisZoom(a.id),{width:m,unit:n,align:o}=a.layoutConstraints;j="px"===n?i+m:j*m/100,"end"===o&&(i=h-(j-i),j=h),e&&(d?[i,j]=[j,i]:[k,l]=[1-l,1-k]),a.range=[i,j],a.visibleRange=[k,l],a.gridLength=e?f:g}positionAxes(a){let{axes:b,axisBound:c,axisWidths:d,axisOffsets:e,axisAreaWidths:f,seriesRect:g,position:h}=a,i=f.get(h)??0,j="x",k="y",l=1;("top"===h||"bottom"===h)&&(j="y",k="x");let m=c[j];for(let a of(("right"===h||"bottom"===h)&&(l=-1,m+="x"===j?c.width:c.height),b)){let b=f.get("x"===k?"left":"top")??0,h=d.get(a.id)??0,n=e.get(a.id)??0;a.gridPadding=i-n-h,a.translation[k]=c[k]+b,a.translation[j]=this.clampToOutsideSeriesRect(g,m+l*(n+h),j,l)}}shouldFlipXY(){return this.series.every(a=>a instanceof th&&a.shouldFlipXY())}getDefaultState(){let a=new Map;if(this.lastAreaWidths)for(let{position:b="left"}of this.axes){let c=this.lastAreaWidths.get(b);null!=c&&a.set(b,c)}return{axisAreaWidths:a,clipSeries:!1,overflows:!1}}isLayoutStable(a,b){if(b.overflows!==a.overflows||b.clipSeries!==a.clipSeries)return!1;for(let c of a.axisAreaWidths.keys())if(!b.axisAreaWidths.has(c))return!1;for(let[c,d]of b.axisAreaWidths.entries()){let b=a.axisAreaWidths.get(c);if((null!=d||null!=b)&&d!==b)return!1}return!0}clipAxis(a,b,c){let d=Math.ceil(a.gridLine?.width??0),e=Math.ceil(a.line?.width??0),{width:f,height:g}=b;switch(f+="x"===a.direction?d:e,g+="y"===a.direction?d:e,a.clipGrid(b.x,b.y,f,g),a.position){case"left":case"right":a.clipTickLines(c.x,b.y-d,c.width+d,b.height+2*d);break;case"top":case"bottom":a.clipTickLines(b.x-d,c.y,b.width+2*d,c.height+d)}}};function v5(a,b){return a?b?.width:b?.height}v4.className="CartesianChart",v4.type="cartesian",v4.AxesPadding=15;var v6={mode:bv(bT("integrated","standalone")),container:bK,context:()=>!0,theme:bG,series:bB,annotations:bG,navigator:bG,initialState:{chartType:bJ,annotations:bG,legend:bW({visible:bC,seriesId:bJ,itemId:bJ,legendItemName:bJ},"legend state array"),zoom:bG}},v7={...or,...v6,axes:bL(2),data:bB},v8={...or,...v6,axes:bL(2),data:bB},v9={...or,...v6,data:bB,topology:cW},wa={...or,...v6,data:bB},wb=new Set(["number","log","time"]),wc=a=>aQ(a)&&!wb.has(a.type),wd=()=>{throw Error("Enterprise module placeholder cannot be initialised")},we=class extends ke{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}layoutCrossLines(){let a=this.label.getSideFlag(),b=this.hasDefinedDomain()||this.hasVisibleSeries(),{rotation:c,parallelFlipRotation:d,regularFlipRotation:e}=this.calculateRotations();this.crossLines.forEach(f=>{f.sideFlag=-a,f.direction=c===-Math.PI/2?"angle":"radius",f.parallelFlipRotation=d,f.regularFlipRotation=e,f.calculateLayout?.(b,this.reverse)})}updatePosition(){super.updatePosition();let a=Math.floor(this.translation.x),b=Math.floor(this.translation.y);this.tickLineGroup.translationX=a,this.tickLineGroup.translationY=b,this.tickLabelGroup.translationX=a,this.tickLabelGroup.translationY=b,this.crossLineRangeGroup.translationX=a,this.crossLineRangeGroup.translationY=b,this.crossLineLineGroup.translationX=a,this.crossLineLineGroup.translationY=b,this.crossLineLabelGroup.translationX=a,this.crossLineLabelGroup.translationY=b,this.tickLabelGroupSelection.each(j8())}computeLabelsBBox(a,b){return null}computeRange(){}getAxisLinePoints(){}};dl([ey],we.prototype,"shape",2),dl([ey],we.prototype,"innerRadiusRatio",2);var wf=class extends mx{constructor(a,b){super(a,b),this.padding=new fF(40),this.ctx.axisManager.axisGroup.zIndex=8}getChartType(){return"polar"}async performLayout(a){let{layoutBox:b}=a,c=b.clone().shrink(this.modulesManager.getModule("seriesArea").getPadding());this.seriesRect=c,this.animationRect=c,this.seriesRoot.translationX=c.x,this.seriesRoot.translationY=c.y,await this.computeCircle(c),this.axes.forEach(a=>a.update()),this.ctx.layoutManager.emitLayoutComplete(a,{series:{visible:!0,rect:c,paddedRect:b}})}updateAxes(a,b,c,d){let e=this.axes.find(a=>"angle"===a.direction),f=this.axes.find(a=>"radius"===a.direction);if(!(e instanceof we)||!(f instanceof we))return;let g=e.scale,h=f.innerRadiusRatio;e.innerRadiusRatio=h,e.computeRange(),e.gridLength=d,f.gridAngles=g.ticks({nice:e.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.map(a=>g.convert(a)),f.gridRange=e.range,f.range=[d,d*h],[e,f].forEach(d=>{d.translation.x=a.x+b,d.translation.y=a.y+c,d.calculateLayout()})}async computeCircle(a){let b=this.series.filter(wg),c=this.axes.filter(wh),d=(c,d,e)=>{this.updateAxes(a,c,d,e),b.forEach(a=>{a.centerX=c,a.centerY=d,a.radius=e});let f=b.filter(a=>"donut"===a.type||"pie"===a.type);if(f.length>1){let a=f.map(a=>{let b=a.getInnerRadius();return{series:a,innerRadius:b}}).sort((a,b)=>a.innerRadius-b.innerRadius);a.at(-1).series.surroundingRadius=void 0;for(let b=0;b<a.length-1;b++)a[b].series.surroundingRadius=a[b+1].innerRadius}},e=a.width/2,f=a.height/2,g=Math.max(0,Math.min(a.width,a.height)/2),h=g;d(e,f,h);let i=async({hideWhenNecessary:i=!1}={})=>{let j=[];for(let d of cA(c,b)){let b=await d.computeLabelsBBox({hideWhenNecessary:i},a);b&&j.push(b)}if(0===j.length)return void d(e,f,g);let k=dt.merge(j),l=this.refineCircle(k,h,a);d(l.centerX,l.centerY,l.radius),h=l.radius};for(let d of(await i(),await i(),await i(),await i({hideWhenNecessary:!0}),await i({hideWhenNecessary:!0}),cA(c,b)))await d.computeLabelsBBox({hideWhenNecessary:!0},a);return{radius:h,centerX:e,centerY:f}}refineCircle(a,b,c){let d=Math.max(0,-b-a.x),e=Math.max(0,-b-a.y),f=Math.max(0,a.x+a.width-b),g=Math.max(0,a.y+a.height-b);d=f=Math.max(d,f),e=g=Math.max(e,g);let h=Math.min(c.width-d-f,c.height-e-g)/2,i=Math.min(.5*c.width/2,.5*c.height/2);if(h<i){let a=d+f,b=e+g;if(2*(h=i)+b>c.height){let a=c.height-2*h;2*Math.min(e,g)>a?(e=a/2,g=a/2):e>g?e=a-g:g=a-e}if(2*h+a>c.width){let a=c.width-2*h;2*Math.min(d,f)>a?(d=a/2,f=a/2):d>f?d=a-f:f=a-d}}let j=d+2*h+f,k=e+2*h+g;return{centerX:(c.width-j)/2+d+h,centerY:(c.height-k)/2+e+h,radius:h}}};function wg(a){return a instanceof vr}function wh(a){return a instanceof we}wf.className="PolarChart",wf.type="polar";var wi=[{type:"chart",name:"cartesian",options:v7,detect:ly,create:(a,b)=>new v4(a,b),validate(a,b,c){let d=[];a?.series?.[0]?.type==="histogram"&&a?.axes?.some(wc)&&(d.push(new bq("invalid","only continuous axis types when histogram series is used",a.axes,c,"axes")),a=dQ(a,["axes"]));let e=bs(a,b,c);return e.invalid.push(...d),e}},{type:"axis",name:"number",chartType:"cartesian",options:p5,create:a=>new pY(a)},{type:"axis",name:"log",chartType:"cartesian",options:p6,create:a=>new pZ(a)},{type:"axis",name:"time",chartType:"cartesian",options:p7,create:a=>new p_(a)},{type:"axis",name:"category",chartType:"cartesian",options:p8,create:a=>new o2(a)},{type:"axis",name:"grouped-category",chartType:"cartesian",options:p9,create:a=>new pO(a)},{type:"axis",name:"unit-time",chartType:"cartesian",options:qa,create:a=>new p4(a)},um,uH,uR,uV,u_,u2,{type:"chart",name:"polar",options:v8,detect:function(a){let b=lx(a);return jo.isPolar(b)||"polar"===jk(b)?.find(a=>"polar"===a)},create:(a,b)=>new wf(a,b),validate(a,b,c){let d=[],e=a?.series?.[0]?.type;("pie"===e||"donut"===e)&&a?.axes&&(d.push(new br([],a.axes,c,"axes")),a=dQ(a,["axes"]));let f=bs(a,b,c);return f.invalid.push(...d),f}},{type:"series",name:"donut",chartType:"polar",options:qA,create:a=>new vt(a)},{type:"series",name:"pie",chartType:"polar",options:qy,create:a=>new vw(a)},{type:"chart",name:"standalone",placeholder:!0,options:{},detect:lA,create:wd},{type:"chart",name:"topology",placeholder:!0,options:{},detect:lz,create:wd},{type:"preset",name:"price-volume",enterprise:!0,options:vX,create:function(a,b,c){var d,e,f,g,h;let{dateKey:i="date",highKey:j="high",openKey:k="open",lowKey:l="low",closeKey:m="close",volumeKey:n="volume",chartType:o="candlestick",navigator:p=!1,volume:q=!0,rangeButtons:r=!0,statusBar:s=!0,toolbar:t=!0,zoom:u=!0,sync:v=!1,theme:w,data:x,formatter:y,...z}=a,A=function(a,b,c,d,e,f){var g,h,i,j;let k={xKey:b,openKey:e,closeKey:f,highKey:c,lowKey:d},l={xKey:b,yKey:f},m={pickOutsideVisibleMinorAxis:!0};switch(a??"candlestick"){case"ohlc":return g=m,h=k,[{type:"ohlc",focusPriority:0,...g,...h}];case"line":case"step-line":return i=m,j=l,[{type:"line",focusPriority:0,...i,...j}];case"hlc":return function(a,b,{xKey:c,highKey:d,closeKey:e,lowKey:f}){return[{type:vM,focusPriority:0,...a,xKey:c,yHighKey:d,yLowKey:e,fill:mK,stroke:mI},{type:vM,focusPriority:0,...a,xKey:c,yHighKey:e,yLowKey:f,fill:mL,stroke:mJ},{type:"line",...a,...b}]}(m,l,k);case"high-low":return function(a,{xKey:b,highKey:c,lowKey:d}){return[{type:"range-bar",...a,xKey:b,yHighKey:c,yLowKey:d,fill:mN,stroke:mM,tooltip:{range:"nearest"},focusPriority:0}]}(m,k);case"candlestick":case"hollow-candlestick":return vN(m,k);default:return aa.warnOnce(`unknown chart type: ${a}; expected one of: ${vK.join(", ")}`),vN(m,k)}}(o,i,j,l,k,m),B=(d=c,e=k,f=m,g=q,h=n,g?[{type:"bar",xKey:"date",yKey:h,tooltip:{enabled:!1},itemStyler({datum:a}){let{up:b,down:c}=d().palette;return{fill:a[e]<a[f]?b?.fill:c?.fill}},focusPriority:1,highlight:{enabled:!1}}]:[]),C=q?{miniChart:{enabled:p,series:[{type:"line",xKey:i,yKey:n,stroke:nd,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null,D={navigator:{enabled:p,...C}},E=s?{statusBar:{enabled:!0,data:x,highKey:j,openKey:k,lowKey:l,closeKey:m,volumeKey:q?n:void 0}}:null,F=q?[{type:"number",position:"left",keys:[n],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percent",align:"end"}}]:[];return{theme:{baseTheme:"string"==typeof w?w:"ag-financial",...dM("object"==typeof w?w:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:6},chartToolbar:{enabled:t},annotations:{...vJ},axes:{number:{interval:{maxSpacing:45},label:{format:".2f"}}}},bar:{series:{fillOpacity:.5}},line:{series:{marker:{enabled:!1},...vO(o,{hlc:{stroke:{$palette:"altNeutral.stroke"},strokeWidth:2},line:{stroke:{$palette:"neutral.stroke"}},"step-line":{stroke:{$palette:"neutral.stroke"},interpolation:{type:"step"}}})}},candlestick:{series:{...vO(o,{"hollow-candlestick":{item:{up:{fill:"transparent"}}}})}},"range-area":{series:{fillOpacity:.3,strokeWidth:2}}}})},animation:{enabled:!1},legend:{enabled:!1},series:[...B,...A],axes:[{type:"number",position:"right",keys:[k,m,j,l],crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percent",align:"start"}},...F,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:x,formatter:y,...{annotations:{enabled:t,optionsToolbar:{enabled:t},snap:!0,toolbar:{enabled:t,buttons:vL,padding:0},data:x,xKey:i,volumeKey:q?n:void 0}},...D,...E,...{zoom:{enabled:u,autoScaling:{enabled:!0},enableIndependentAxes:!0}},...{ranges:{enabled:r}},...v?{sync:{enabled:v,nodeInteraction:!0,zoom:!0}}:null,...z}}},v0,v1],wj=class a{constructor(a,b,c,d,e,f=1e3){this.name=a,this.buildItem=b,this.releaseItem=c,this.destroyItem=d,this.maxPoolSize=e,this.cleanupTimeMs=f,this.freePool=[],this.busyPool=new Set}static getPool(b,c,d,e,f){return this.pools.has(b)||this.pools.set(b,new a(b,c,d,e,f)),this.pools.get(b)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}hasFree(){return this.freePool.length>0}obtain(b){if(!this.hasFree()&&this.isFull())throw Error("AG Charts - pool exhausted");let c=this.freePool.pop();return null==c?(c=this.buildItem(b),a.debug(()=>[`Pool[name=${this.name}]: Created instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,c])):a.debug(()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,c]),this.busyPool.add(c),{item:c,release:()=>this.release(c)}}obtainFree(){let b=this.freePool.pop();if(null==b)throw Error("AG Charts - pool has no free instances");return a.debug(()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,b]),this.busyPool.add(b),{item:b,release:()=>this.release(b)}}release(b){if(!this.busyPool.has(b))throw Error("AG Charts - cannot free item from pool which is not tracked as busy.");a.debug(()=>[`Pool[name=${this.name}]: Releasing instance (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,b]),this.releaseItem(b),this.busyPool.delete(b),this.freePool.push(b),a.debug(()=>[`Pool[name=${this.name}]: Returned instance to free pool (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,b]);let c=Date.now(),d=c+.5*this.cleanupTimeMs;this.cleanPoolTimer&&(this.cleanPoolDue??1/0)<d&&(clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=void 0),this.cleanPoolTimer||(this.cleanPoolDue=c+this.cleanupTimeMs,this.cleanPoolTimer=setTimeout(this.cleanPool.bind(this),this.cleanupTimeMs))}cleanPool(){let b=this.freePool.splice(0);for(let a of b)this.destroyItem(a);a.debug(()=>[`Pool[name=${this.name}]: Cleaned pool of ${b.length} items (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`])}destroy(){for(let a of(this.cleanPool(),this.busyPool.values()))this.destroyItem(a);this.busyPool.clear()}};wj.pools=new Map,wj.debug=dw.create(!0,"pool"),al.registerMany(wi,gs);var wk=dw.create(!0,"opts"),wl=class{static licenseCheck(a){this.licenseChecked||(this.licenseManager=rJ.licenseManager?.(a),this.licenseManager?.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(a){return rJ.licenseManager?.({}).getLicenseDetails(a)}static getInstance(a){return wn.getInstance(a)}static create(a,b){let c=dw.check("scene:stats","scene:stats:verbose")?performance.now():void 0;return wk.group("AgCharts.create()",()=>{a=dw.inDevelopmentMode(()=>dW(fy(a)))??a,this.licenseCheck(a);let d=wn.createOrUpdate({userOptions:a,licenseManager:this.licenseManager,optionsMetadata:b,apiStartTime:c});return this.licenseManager?.isDisplayWatermark()&&this.licenseManager&&rJ.injectWatermark?.(d.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()),d})}static createFinancialChart(a){return wk.group("AgCharts.createFinancialChart()",()=>this.create(a,{presetType:"price-volume"}))}static createGauge(a){return wk.group("AgCharts.createGauge()",()=>this.create(a,{presetType:"gauge-preset"}))}static __createSparkline(a){return wk.group("AgCharts.__createSparkline()",()=>{let{pool:b,...c}=a;return this.create(c,{presetType:"sparkline",pool:b??!0,domMode:"minimal",withDragInterpretation:!1})})}};wl.licenseChecked=!1;var wm=class a{static getInstance(a){let b=mx.getInstance(a);return b?sl.chartInstances.get(b):void 0}static initialiseModules(){if(!a.initialised){for(let a of(dn.register(sp,sK,sI,sn,ul,uG,uQ,u$,u1,vv,vx,uU),[pY,o2,p_,pO,pZ,p4]))ji.register(a.type,{moduleFactory:b=>new a(b)});for(let a of dn.modules){if("enterprise"===a.packageType&&!function(a){if("enterprise"!==a.packageType)throw Error("AG Charts - internal configuration error, only enterprise modules need verification.");let b=jj.find(b=>b.type===a.type&&(!("optionsKey"in b)||!("optionsKey"in a)||b.optionsKey===a.optionsKey)&&(!("contextKey"in b)||!("contextKey"in a)||b.contextKey===a.contextKey)&&b.identifier===a.identifier&&a.chartTypes.every(a=>b.chartTypes.includes(a)));return b&&(b.useCount??(b.useCount=0),b.useCount++),null!=b}(a)&&aa.errorOnce("Unexpected enterprise module registered: "+a.identifier),"root"===a.type&&a.themeTemplate)for(let b of a.chartTypes)jq.set(b,a.themeTemplate);if("series"===a.type){if(a.chartTypes.length>1)throw Error(`AG Charts - Module definition error: ${a.identifier}`);jr.register(a.identifier,a)}if("series-option"===a.type&&a.themeTemplate)for(let b of a.seriesTypes)jr.setThemeTemplate(b,a.themeTemplate);if("axis-option"===a.type&&a.themeTemplate)for(let b of a.axisTypes){let c=ji.getThemeTemplate(b),d=dM(a.themeTemplate,c);ji.setThemeTemplate(b,d)}"axis"===a.type&&ji.register(a.identifier,a),"legend"===a.type&&jl.register(a.identifier,a)}if(dn.hasEnterpriseModules()){let a=jj.filter(({useCount:a})=>null==a||0===a);a.length>0&&aa.errorOnce("Enterprise modules expected but not registered: ",a)}a.initialised=!0}}static createOrUpdate(b){let c,{proxy:d}=b,{userOptions:e,licenseManager:f,processedOverrides:g=d?.chart?.chartOptions.processedOverrides??{},specialOverrides:h=d?.chart?.chartOptions.specialOverrides??{},optionsMetadata:i=d?.chart?.chartOptions.optionMetadata??{},deltaOptions:j,data:k,stripSymbols:l=!1,apiStartTime:m}=b,n=null!=rJ.styles?[["ag-charts-enterprise",rJ.styles]]:[];a.initialiseModules(),wk(()=>[">>> AgCharts.createOrUpdate() user options",fy(e)]);let{presetType:o}=i,p=e;wl.optionsMutationFn&&p&&(p=wl.optionsMutationFn(fy(p,si.OPTIONS_CLONE_OPTS_FAST),o),wk(()=>[">>> AgCharts.createOrUpdate() MUTATED user options",fy(p)]));let q=this.getPool(i),r=!1,s=d?.chart;null==s&&q?.hasFree()&&(s=(c=q.obtainFree()).item);let{document:t,window:u,styleContainer:v,...w}=p??{},x=new si(s?.getChartOptions(),w,g,{...h,document:t,window:u,styleContainer:v},i,j,l,m);return(null==s||al.detectChartDefinition(x.processedOptions)!==al.detectChartDefinition(s.chartOptions.processedOptions))&&(c?.release(),(c=this.getPool(x.optionMetadata)?.obtain(x))?s=c.item:(r=!0,s=a.createChartInstance(x,s))),x.optionsGraph&&s.ctx.optionsGraphService.updateCallback((a,b,c)=>x.optionsGraph?.resolvePartial(a,b,c)),n.forEach(([a,b])=>{s.ctx.domManager.addStyles(a,b)}),s.ctx.fontManager.updateFonts(x.googleFonts),null!=k&&s.ctx.dataService.restoreData(k),null==d?(d=new sl(s,a.callbackApi,f)).releaseChart=c?.release:(c||r)&&(d.releaseChart?.(),d.chart=s,d.releaseChart=c?.release),wk.check(),s.queuedUserOptions.push(x.userOptions),s.queuedChartOptions.push(x),s.requestFactoryUpdate(a=>{wk.group(">>>> Chart.applyOptions()",()=>{a.applyOptions(x);let b=a.queuedUserOptions.indexOf(x.userOptions)+1;a.queuedUserOptions.splice(0,b),a.queuedChartOptions.splice(0,b)})}),d}static markRemovedProperties(a,b,c=!1){if("object"!=typeof a)return c;for(let b of Object.keys(a))void 0===a[b]&&(Object.assign(a,{[b]:Symbol("UNSET")}),c||(c=!0));return c}static updateUserDelta(b,c,d){let e=fA(c=fy(c,si.OPTIONS_CLONE_OPTS_FAST),a.markRemovedProperties,new Set(["data"]),void 0,void 0,!1);wk(()=>[">>> AgCharts.updateUserDelta() user delta",fy(c)]),a.createOrUpdate({proxy:b,deltaOptions:c,stripSymbols:e,apiStartTime:d})}static createChartInstance(a,b){let c=b?.destroy({keepTransferableResources:!0});return al.detectChartDefinition(a.processedOptions).create(a,c)}static getPool(a){if(!0===a.pool)return wj.getPool(a.presetType??"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}};wm.caretaker=new gv(gs),wm.initialised=!1,wm.callbackApi={caretaker:wm.caretaker,create:(a,b,c,d,e)=>wm.createOrUpdate({userOptions:a,processedOverrides:b,specialOverrides:c,optionsMetadata:d,data:e}),update:(a,b,c,d)=>wm.createOrUpdate({userOptions:a,proxy:b,specialOverrides:c,apiStartTime:d}),updateUserDelta:(a,b,c)=>wm.updateUserDelta(a,b,c)},wm.detachAndClear=a=>a.detachAndClear(),wm.destroy=a=>a.destroy();var wn=wm;dk({},{Arc:()=>wo,BBox:()=>dt,Caption:()=>gm,CategoryScale:()=>kJ,Group:()=>fh,Line:()=>jB,LinearScale:()=>pX,Marker:()=>l0,Path:()=>f6,RadialColumnShape:()=>wq,Rect:()=>f9,Scene:()=>hl,Sector:()=>vd,Shape:()=>e6,TranslatableGroup:()=>fk,getRadialColumnWidth:()=>wr,toRadians:()=>ee});var wo=class extends f6{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=0}get fullPie(){return aB(ea(this.startAngle),ea(this.endAngle))}updatePath(){let a=this.path;a.clear(),a.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),1===this.type?a.closePath():2!==this.type||this.fullPie||(a.lineTo(this.centerX,this.centerY),a.closePath())}computeBBox(){return new dt(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(a,b){let c=this.getBBox();return 0!==this.type&&c.containsPoint(a,b)&&this.path.isPointInPath(a,b)}};function wp(a,b,c){let d=Math.sqrt(a**2+b**2),e=Math.atan2(b,a)+c;return{x:Math.cos(e)*d,y:Math.sin(e)*d}}wo.className="Arc",dl([d$()],wo.prototype,"centerX",2),dl([d$()],wo.prototype,"centerY",2),dl([d$()],wo.prototype,"radius",2),dl([d$()],wo.prototype,"startAngle",2),dl([d$()],wo.prototype,"endAngle",2),dl([d$()],wo.prototype,"counterClockwise",2),dl([d$()],wo.prototype,"type",2);var wq=class extends f6{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(a){}computeBBox(){let{innerRadius:a,outerRadius:b,columnWidth:c}=this,d=this.getRotation(),e=-c/2,f=c/2,g=-b,h=-a,i=1/0,j=1/0,k=-1/0,l=-1/0;for(let a=0;a<4;a+=1){let{x:b,y:c}=wp(a%2==0?e:f,a<2?g:h,d);i=Math.min(b,i),j=Math.min(c,j),k=Math.max(b,k),l=Math.max(c,l)}return new dt(i,j,k-i,l-j)}getRotation(){let{startAngle:a,endAngle:b}=this,c=eg(a,b);return ea(a+c/2+Math.PI/2)}updatePath(){let{isBeveled:a}=this;a?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){let{columnWidth:a,innerRadius:b,outerRadius:c,path:d}=this,e=-a/2,f=a/2,g=-c,h=-b,i=this.getRotation(),j=[[e,h],[e,g],[f,g],[f,h]].map(([a,b])=>wp(a,b,i));d.clear(!0),d.moveTo(j[0].x,j[0].y),d.lineTo(j[1].x,j[1].y),d.lineTo(j[2].x,j[2].y),d.lineTo(j[3].x,j[3].y),d.closePath()}updateBeveledPath(){let{columnWidth:a,path:b,outerRadius:c,innerRadius:d,axisInnerRadius:e,axisOuterRadius:f,isRadiusAxisReversed:g}=this,h=aB(d,e),i=Math.asin(a/2/d),j=this.getRotation(),k=(a,b)=>wp(a,b,j),l=(a,b)=>Math.sqrt(a**2+b**2),m=(a,b)=>b>a?0:Math.sqrt(a**2-b**2),n=(a,b,c)=>c?a<b:a>b,o=h&&!isNaN(i)&&i<Math.PI/6,p=-a/2,q=a/2,r=-c,s=-d*(o?Math.cos(i):1),t=n(f,l(d,a/2),!g);if(t){let a=m(f,d);p=-a,q=a}b.clear(!0);let u=k(p,s);b.moveTo(u.x,u.y);let v=aB(d,c),w=n(f,l(c,a/2),!g);if(v&&o)b.arc(0,0,d,ea(-i-Math.PI/2)+j,ea(i-Math.PI/2)+j,!1);else if(w){let d=-m(f,a/2),e=m(f,c);if(!t){let a=k(p,d);b.lineTo(a.x,a.y)}if(b.arc(0,0,f,Math.atan2(d,p)+j,Math.atan2(r,-e)+j,!1),!aB(e,0)){let a=k(e,r);b.lineTo(a.x,a.y)}b.arc(0,0,f,Math.atan2(r,e)+j,Math.atan2(d,q)+j,!1)}else{let a=k(p,r),c=k(q,r);b.lineTo(a.x,a.y),b.lineTo(c.x,c.y)}let x=k(q,s);if(b.lineTo(x.x,x.y),o)b.arc(0,0,d,ea(i-Math.PI/2)+j,ea(-i-Math.PI/2)+j,!0);else{let a=k(p,s);b.lineTo(a.x,a.y)}b.closePath()}};function wr(a,b,c,d,e){let f=eg(a,b),g=f*(1-d)/2;if(a+=g,b-=g,f<.001)return 2*c*e;if(f>=2*Math.PI){let c=a+f/2;a=c-Math.PI,b=c+Math.PI}let h=c*Math.cos(a),i=c*Math.sin(a),j=Math.floor(Math.sqrt((h-c*Math.cos(b))**2+(i-c*Math.sin(b))**2));return Math.max(1,Math.min(2*c*e,j))}wq.className="RadialColumnShape",dl([d$()],wq.prototype,"isBeveled",2),dl([d$()],wq.prototype,"columnWidth",2),dl([d$()],wq.prototype,"startAngle",2),dl([d$()],wq.prototype,"endAngle",2),dl([d$()],wq.prototype,"outerRadius",2),dl([d$()],wq.prototype,"innerRadius",2),dl([d$()],wq.prototype,"axisInnerRadius",2),dl([d$()],wq.prototype,"axisOuterRadius",2),dl([d$()],wq.prototype,"isRadiusAxisReversed",2),dk({},{ChartTheme:()=>nH,DEFAULT_ANNOTATION_HANDLE_FILL:()=>m$,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>m1,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>m2,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>m3,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>m4,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>m_,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>m0,DEFAULT_CAPTION_ALIGNMENT:()=>mH,DEFAULT_CAPTION_LAYOUT_STYLE:()=>mG,DEFAULT_FIBONACCI_STROKES:()=>mX,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>mZ,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>mW,DEFAULT_GRIDLINE_ENABLED:()=>m9,DEFAULT_POLAR_SERIES_STROKE:()=>mU,DEFAULT_SEPARATION_LINES_COLOUR:()=>mE,DEFAULT_SHADOW_COLOUR:()=>mF,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>mV,DEFAULT_TEXTBOX_COLOR:()=>m7,DEFAULT_TEXTBOX_FILL:()=>m5,DEFAULT_TEXTBOX_STROKE:()=>m6,DEFAULT_TEXT_ANNOTATION_COLOR:()=>mY,DEFAULT_TOOLBAR_POSITION:()=>m8,IS_DARK_THEME:()=>mD,PALETTE_ALT_DOWN_FILL:()=>mR,PALETTE_ALT_DOWN_STROKE:()=>mP,PALETTE_ALT_NEUTRAL_FILL:()=>mS,PALETTE_ALT_NEUTRAL_STROKE:()=>mT,PALETTE_ALT_UP_FILL:()=>mQ,PALETTE_ALT_UP_STROKE:()=>mO,PALETTE_DOWN_FILL:()=>mL,PALETTE_DOWN_STROKE:()=>mJ,PALETTE_NEUTRAL_FILL:()=>mN,PALETTE_NEUTRAL_STROKE:()=>mM,PALETTE_UP_FILL:()=>mK,PALETTE_UP_STROKE:()=>mI,getChartTheme:()=>rG,resolveOperation:()=>wt,themeNames:()=>ws,themeSymbols:()=>mC,themes:()=>rF});var ws=Object.keys(rF);function wt(a){return new sg({line:{operation:a}},{series:[{type:"line"}]},nH.getDefaultPublicParameters(),nH.getDefaultColors()).resolve().operation}function wu(){return(a,b)=>{let c=[`Property [${a}] is deprecated.`,b].filter(Boolean).join(" ");aa.warnOnce(c)}}function wv(a,b){let c=wu(),d=b?.default;return dF((b,e,f)=>(f!==d&&c(e.toString(),a),f))}function ww(a,b){let c=wu();return dF((d,e,f)=>(f!==d[a]&&(c(e.toString(),`Use [${a}] instead.`),dU(d,a,b?b(f):f)),dB),(b,d)=>(c(d.toString(),`Use [${a}] instead.`),dS(b,a)))}dk({},{Color:()=>en,interpolateColor:()=>hL}),dk({},{AGGREGATION_INDEX_X_MAX:()=>1,AGGREGATION_INDEX_X_MIN:()=>0,AGGREGATION_INDEX_Y_MAX:()=>3,AGGREGATION_INDEX_Y_MIN:()=>2,AGGREGATION_SPAN:()=>4,AbstractBarSeries:()=>ur,AbstractBarSeriesProperties:()=>uq,ActionOnSet:()=>fJ,AnchoredPopover:()=>w0,Animation:()=>hZ,AnimationManager:()=>h2,Arc:()=>wo,Axis:()=>ke,AxisGroupZIndexMap:()=>kb,AxisInterval:()=>jZ,AxisLabel:()=>j$,AxisTick:()=>j0,BASE_FONT_SIZE:()=>gg,BBox:()=>dt,Background:()=>so,BackgroundModule:()=>sp,BandScale:()=>iJ,BarSeries:()=>uF,BarSeriesModule:()=>uG,BaseModuleInstance:()=>dm,BaseProperties:()=>ez,BaseToolbar:()=>w7,Border:()=>sq,ButtonWidget:()=>g$,CallbackCache:()=>fo,Caption:()=>gm,CartesianAxis:()=>lu,CartesianSeries:()=>th,CartesianSeriesNodeEvent:()=>tf,CartesianSeriesProperties:()=>tg,CategoryAxis:()=>o2,CategoryScale:()=>kJ,ChangeDetectableProperties:()=>s_,Chart:()=>mx,ChartAxisDirection:()=>gn,ChartOptions:()=>si,ChartUpdateType:()=>hp,CollapseMode:()=>tx,Color:()=>en,ColorScale:()=>et,ConicGradient:()=>ev,ContextMenuBuiltins:()=>h5,ContextMenuRegistry:()=>h6,ContinuousScale:()=>iG,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>td,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>te,DEFAULT_POLAR_DIRECTION_KEYS:()=>vp,DEFAULT_POLAR_DIRECTION_NAMES:()=>vq,DEFAULT_TOOLTIP_CLASS:()=>l2,DEFAULT_TOOLTIP_DARK_CLASS:()=>l3,DIRECTION_SWAP_AXES:()=>na,DOMManager:()=>gW,DataController:()=>jh,DataModel:()=>jg,DataModelSeries:()=>tc,DataService:()=>hq,Debug:()=>dw,Deprecated:()=>wv,DeprecatedAndRenamedTo:()=>ww,DiscreteTimeAxis:()=>p3,DiscreteTimeScale:()=>iK,DragInterpreter:()=>ix,DraggablePopover:()=>w2,DropShadow:()=>s0,ExtendedPath2D:()=>eX,FILL_GRADIENT_BLANK_DEFAULTS:()=>nf,FILL_GRADIENT_CONIC_SERIES_DEFAULTS:()=>no,FILL_GRADIENT_LINEAR_DEFAULTS:()=>ng,FILL_GRADIENT_LINEAR_HIERARCHY_DEFAULTS:()=>nh,FILL_GRADIENT_LINEAR_SHADED_DEFAULTS:()=>nj,FILL_GRADIENT_LINEAR_SINGLE_DEFAULTS:()=>ni,FILL_GRADIENT_RADIAL_DEFAULTS:()=>nk,FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS:()=>nl,FILL_GRADIENT_RADIAL_REVERSED_SERIES_DEFAULTS:()=>nn,FILL_GRADIENT_RADIAL_SERIES_DEFAULTS:()=>nm,FILL_IMAGE_BLANK_DEFAULTS:()=>nu,FILL_IMAGE_DEFAULTS:()=>nt,FILL_PATTERN_BLANK_DEFAULTS:()=>nr,FILL_PATTERN_DEFAULTS:()=>np,FILL_PATTERN_HIERARCHY_DEFAULTS:()=>ns,FILL_PATTERN_SINGLE_DEFAULTS:()=>nq,FONT_SIZE:()=>gf,FONT_SIZE_RATIO:()=>gh,FillGradientDefaults:()=>ii,FillImageDefaults:()=>ik,FillPatternDefaults:()=>ij,FloatingToolbar:()=>xa,FormatManager:()=>hK,Gradient:()=>eu,Group:()=>fh,GroupedCategoryAxis:()=>pO,HdpiCanvas:()=>hi,HierarchyNode:()=>wC,HierarchySeries:()=>wD,HierarchySeriesProperties:()=>wE,HighlightManager:()=>h7,HighlightProperties:()=>ic,HighlightState:()=>h8,HighlightStyle:()=>il,Image:()=>wV,InteractionManager:()=>h0,InteractionState:()=>h_,InterpolationProperties:()=>ti,Invalidating:()=>eq,LABEL_BOXING_DEFAULTS:()=>ny,LARGEST_KEY_INTERVAL:()=>pt,LEGEND_CONTAINER_THEME:()=>nB,Label:()=>jK,LayoutElement:()=>iU,LayoutManager:()=>iV,LegendMarkerLabel:()=>sx,Line:()=>jB,LineSeries:()=>uZ,LineSeriesModule:()=>u$,LinearGradient:()=>ew,LinearScale:()=>pX,LogScale:()=>pW,LonLatBBox:()=>wF,MIN_CATEGORY_SPACING:()=>5,Marker:()=>l0,Menu:()=>w1,MenuItemRadioWidget:()=>wX,MenuItemWidget:()=>wW,MenuWidget:()=>wZ,MercatorScale:()=>wJ,ModuleRegistry:()=>al,Motion:()=>hM,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>jv,NativeWidget:()=>g2,NewAreaSeriesModule:()=>um,NewBarSeriesModule:()=>uH,NewBubbleSeriesModule:()=>uR,NewHistogramSeriesModule:()=>uV,NewLineSeriesModule:()=>u_,NewScatterSeriesModule:()=>u2,NiceMode:()=>j2,Node:()=>d7,NumberAxis:()=>pY,ObserveChanges:()=>fK,OrdinalTimeScale:()=>k7,PHASE_METADATA:()=>hW,PHASE_ORDER:()=>hV,PREV_NEXT_KEYS:()=>gH,Padding:()=>fF,ParallelStateMachine:()=>jI,Path:()=>f6,PointerEvents:()=>d5,PolarAxis:()=>we,PolarSeries:()=>vr,PolarZIndexMap:()=>vo,Popover:()=>w_,PropertiesArray:()=>eA,Property:()=>ey,ProxyInteractionService:()=>hd,ProxyOnWrite:()=>fH,ProxyProperty:()=>fG,ProxyPropertyOnWrite:()=>fI,QUICK_TRANSITION:()=>.2,QuadtreeNearest:()=>s8,RENDER_TO_OFFSCREEN_CANVAS_THRESHOLD:()=>100,RadialColumnShape:()=>wq,Range:()=>jN,Rect:()=>f9,RepeatType:()=>hX,Rotatable:()=>fc,RotatableGroup:()=>fj,RotatableText:()=>gc,SAFE_FILLS_OPERATION:()=>nc,SAFE_FILL_OPERATION:()=>nb,SAFE_RANGE2_OPERATION:()=>ne,SAFE_STROKE_FILL_OPERATION:()=>nd,SEGMENTATION_DEFAULTS:()=>nC,SKIP_JS_BUILTINS:()=>dT,SMALLEST_KEY_INTERVAL:()=>ps,SORT_DOMAIN_GROUPS:()=>pu,Scalable:()=>fd,ScalableGroup:()=>fi,ScaleAlignment:()=>eo,Scene:()=>hl,SceneArrayChangeDetection:()=>d1,SceneChangeDetection:()=>d$,SceneObjectChangeDetection:()=>d0,SceneRefChangeDetection:()=>d_,Sector:()=>vd,SectorBox:()=>u3,SegmentOptions:()=>ig,Segmentation:()=>ih,SegmentedPath:()=>s5,Selection:()=>jA,Series:()=>lR,SeriesContentZIndexMap:()=>lH,SeriesGroupingChangedEvent:()=>lO,SeriesItemHighlightStyle:()=>ib,SeriesMarker:()=>s1,SeriesNodeEvent:()=>lN,SeriesNodePickMode:()=>lM,SeriesProperties:()=>im,SeriesTooltip:()=>s3,SeriesZIndexMap:()=>lG,Shape:()=>e6,SliderWidget:()=>g8,StateMachine:()=>jH,StateMachineProperty:()=>jE,StopProperties:()=>eC,SvgPath:()=>wT,TIME_AXIS_KEYS:()=>ud,TRIPLE_EQ:()=>dZ,Text:()=>gb,ThemeConstants:()=>ge,ThemeSymbols:()=>mC,TimeAxisParentLevel:()=>p$,TimeScale:()=>k5,Toolbar:()=>w8,ToolbarButtonProperties:()=>w3,ToolbarButtonWidget:()=>w5,ToolbarWidget:()=>ha,Tooltip:()=>mg,TooltipManager:()=>iv,TooltipPosition:()=>mf,Transformable:()=>ff,TransformableGroup:()=>fl,TransformableText:()=>gd,Translatable:()=>fe,TranslatableGroup:()=>fk,TranslatableSvgPath:()=>wU,UnitTimeScale:()=>k9,UpdateService:()=>i1,Vec2:()=>wx,Vec4:()=>iL,WIDGET_HTML_EVENTS:()=>fM,Widget:()=>f$,WidgetEventUtil:()=>fQ,ZIndexMap:()=>hn,ZoomManager:()=>iS,accumulateGroup:()=>pD,accumulatedValue:()=>pc,accumulativeValueProperty:()=>pp,addEscapeEventListener:()=>gz,addHitTestersToQuadtree:()=>uo,addMouseCloseListener:()=>gA,addOverrideFocusVisibleEventListener:()=>gD,addTouchCloseListener:()=>gB,adjustLabelPlacement:()=>sP,aggregationDomain:()=>sU,aggregationIndexForXRatio:()=>sX,aggregationRangeFittingPoints:()=>sT,aggregationXRatioForDatumIndex:()=>sV,aggregationXRatioForXValue:()=>sW,angleBetween:()=>eg,angleCategoryAxisOptionsDefs:()=>qd,angleNumberAxisOptionsDefs:()=>qc,angularPadding:()=>ei,animationValidation:()=>pA,annotationCalloutStylesDefs:()=>qQ,annotationChannelStyleDefs:()=>qM,annotationChannelTextDefs:()=>qF,annotationCommentStylesDefs:()=>qR,annotationCrossLineStyleDefs:()=>qL,annotationDisjointChannelStyleDefs:()=>qN,annotationFibonacciStylesDefs:()=>qP,annotationLineStyleDefs:()=>qK,annotationLineTextDefs:()=>qE,annotationMeasurerStylesDefs:()=>qU,annotationNoteStylesDefs:()=>qS,annotationOptionsDef:()=>qW,annotationParallelChannelStyleDefs:()=>qO,annotationQuickMeasurerStylesDefs:()=>qV,annotationShapeStylesDefs:()=>qT,annotationTextStylesDef:()=>qD,applyShapeFillBBox:()=>lK,applyShapeStyle:()=>lL,areScalingEqual:()=>tO,area:()=>pb,autoSizedLabelOptionsDefs:()=>ox,axisLabelsOverlap:()=>le,bezier2DDistance:()=>eV,bezier2DExtrema:()=>eT,boxPlotHighlightStyleOptionsDef:()=>qY,boxPlotSeriesThemeableOptionsDef:()=>qZ,boxPlotStyleOptionsDef:()=>qX,buildResetPathFn:()=>t9,calculateDataDiff:()=>uC,calculateLabelRotation:()=>lo,calculateLabelTranslation:()=>wM,calculatePlacement:()=>lV,calculateSegments:()=>uc,callWithContext:()=>fn,candlestickSeriesThemeableOptionsDef:()=>q0,cartesianAxisBandHighlightOptions:()=>oZ,cartesianAxisCrosshairOptions:()=>o$,cartesianAxisLabelOptionsDefs:()=>oR,cartesianAxisOptionsDefs:()=>oY,cartesianChartOptionsDefs:()=>v7,cartesianCrossLineOptionsDefs:()=>oP,cartesianNumericAxisLabel:()=>oS,cartesianTimeAxisLabel:()=>oT,cartesianTimeAxisParentLevel:()=>oV,checkCrisp:()=>uv,chordSeriesThemeableOptionsDef:()=>q1,clampArray:()=>iA,clippedRoundRect:()=>f8,collapsedStartingBarPosition:()=>ux,commonAxisIntervalOptionsDefs:()=>oW,commonAxisLabelOptionsDefs:()=>oQ,commonAxisOptionsDefs:()=>oX,commonChartOptionsDefs:()=>or,commonCrossLineLabelOptionsDefs:()=>oN,commonCrossLineOptionsDefs:()=>oO,commonSeriesOptionsDefs:()=>ot,commonSeriesThemeableOptionsDefs:()=>os,compactAggregationIndices:()=>sZ,compareDates:()=>kL,computeBarFocusBounds:()=>uB,computeMarkerFocusBounds:()=>t4,coneFunnelSeriesThemeableOptionsDef:()=>q2,continuousAxisOptions:()=>o_,countExpandingSearch:()=>is,createAggregationIndices:()=>sY,createButton:()=>wN,createCheckbox:()=>wO,createDatumId:()=>pH,createDeprecationWarning:()=>wu,createIcon:()=>wR,createIdsGenerator:()=>lc,createSelect:()=>wP,createTextArea:()=>wQ,dateToNumber:()=>kC,dateTruncationForDomain:()=>kG,datesSortOrder:()=>kN,datumKeys:()=>je,datumStylerProperties:()=>ip,deconstructSelectionsOrNodes:()=>hY,deepClone:()=>fy,deepFreeze:()=>dW,diff:()=>pG,discreteTimeAxisIntervalOptionsDefs:()=>o0,drawCorner:()=>f5,drawMarkerUnitPolygon:()=>lZ,durationDay:()=>864e5,durationHour:()=>36e5,durationMinute:()=>6e4,durationMonth:()=>2592e6,durationSecond:()=>1e3,durationWeek:()=>6048e5,durationYear:()=>31536e6,easing:()=>hM,enterpriseModule:()=>rJ,errorBarOptionsDefs:()=>oz,errorBarThemeableOptionsDefs:()=>oy,estimateTickCount:()=>k3,evaluateBezier:()=>eP,expandLegendPosition:()=>sy,extent:()=>o4,extractDecoratedProperties:()=>dJ,fillsOptionsDef:()=>oD,findMinMax:()=>iB,findQuadtreeMatch:()=>up,findRangeExtent:()=>iC,fixNumericExtent:()=>ja,focusCursorAtEnd:()=>fr,formatNumber:()=>g7,formatObjectValidator:()=>op,formatPercent:()=>g5,formatTicks:()=>lh,formatValue:()=>g4,fromToMotion:()=>jw,funnelSeriesThemeableOptionsDef:()=>q3,generateTicks:()=>lq,getAngleRatioRadians:()=>eh,getColorStops:()=>eE,getCrossLineValue:()=>jQ,getDateTicksForInterval:()=>k6,getDatumRefPoint:()=>ir,getElementBBox:()=>fq,getIconClassNames:()=>ft,getItemStyles:()=>it,getItemStylesPerItemId:()=>iu,getLabelStyles:()=>sM,getLastFocus:()=>gL,getMarkerStyles:()=>t6,getMissCount:()=>jb,getPath:()=>dS,getPathComponents:()=>jf,getRadialColumnWidth:()=>wr,getSequentialColors:()=>nv,getShapeFill:()=>lI,getShapeStyle:()=>lJ,getTextAlign:()=>lm,getTextBaseline:()=>ll,getTimeIntervalTicks:()=>lj,groupAccumulativeValueProperty:()=>pr,groupAverage:()=>pa,groupCount:()=>o9,groupSum:()=>o8,hasNoModifiers:()=>gE,heatmapSeriesThemeableOptionsDef:()=>q4,highlightStates:()=>h9,initRovingTabIndex:()=>gI,interpolatePoints:()=>tQ,interpolationOptionsDefs:()=>oC,intervalCeil:()=>kp,intervalEpoch:()=>kz,intervalExtent:()=>ks,intervalFloor:()=>ko,intervalHierarchy:()=>kA,intervalMilliseconds:()=>kB,intervalNext:()=>kr,intervalPrevious:()=>kq,intervalRange:()=>kv,intervalRangeCount:()=>ku,intervalRangeStartIndex:()=>kw,intervalStep:()=>ky,intervalUnit:()=>kx,isAgStandaloneChartOptions:()=>lA,isAgTopologyChartOptions:()=>lz,isBetweenAngles:()=>ed,isButtonClickEvent:()=>gK,isChartAxisDirection:()=>go,isContinuous:()=>jO,isDecoratedObject:()=>dH,isDenseInterval:()=>k1,isGradientFill:()=>e1,isGradientOrPatternFill:()=>e4,isImageFill:()=>e3,isInputPending:()=>fs,isObjectWithProperty:()=>dX,isObjectWithStringProperty:()=>dY,isPatternFill:()=>e2,isProperties:()=>eB,isScaleValid:()=>tP,jsonApply:()=>fB,jsonDiff:()=>fw,jsonPropertyCompare:()=>fx,jsonWalk:()=>fA,keyProperty:()=>pj,legendSymbolSvg:()=>l1,lineDistanceSquared:()=>eH,linearGaugeSeriesOptionsDef:()=>oH,linearGaugeSeriesThemeableOptionsDef:()=>oG,linearGaugeTargetOptionsDef:()=>oE,listDecoratedProperties:()=>dI,lowestGranularityForInterval:()=>kD,lowestGranularityUnitForTicks:()=>kE,lowestGranularityUnitForValue:()=>kF,makeAccessibleClickListener:()=>gJ,makeSeriesTooltip:()=>s4,mapLineBackgroundSeriesThemeableOptionsDef:()=>q7,mapLineSeriesThemeableOptionsDef:()=>q6,mapMarkerSeriesThemeableOptionsDef:()=>q8,mapShapeBackgroundSeriesThemeableOptionsDef:()=>ra,mapShapeSeriesThemeableOptionsDef:()=>q9,mapValues:()=>dP,markerEnabled:()=>t5,markerFadeInAnimation:()=>t_,markerOptionsDefs:()=>ov,markerScaleInAnimation:()=>t0,markerStyleOptionsDefs:()=>ou,markerSwipeScaleInAnimation:()=>t1,memo:()=>hw,merge:()=>dN,mergeArrayDefaults:()=>dO,mergeDefaults:()=>dM,midpointStartingBarPosition:()=>uy,minimumTimeAxisDatumGranularity:()=>p0,moduleRegistry:()=>dn,motion:()=>xc,multiSeriesHighlightStyle:()=>nz,nearestSquared:()=>dr,nearestSquaredInContainer:()=>ds,nextPowerOf2:()=>iD,nightingaleSeriesThemeableOptionsDef:()=>rb,normaliseGroupTo:()=>pw,normalisePropertyTo:()=>py,normalisedExtentWithMetadata:()=>o5,normalizeAngle180:()=>ec,normalizeAngle360:()=>ea,normalizeAngle360FromDegrees:()=>ej,normalizeAngle360Inclusive:()=>eb,normalizeContinuousDomains:()=>iH,numberFormatValidator:()=>oq,objectsEqual:()=>dK,objectsEqualWith:()=>dL,ohlcSeriesThemeableOptionsDef:()=>q5,ordinalTimeAxisOptionsDefs:()=>qb,pairUpSpans:()=>tL,partialAssign:()=>dV,pathFadeInAnimation:()=>t8,pathMotion:()=>sL,pathSwipeInAnimation:()=>t7,pick:()=>dR,pickByMatchingAngle:()=>vn,plotAreaPathFill:()=>tX,plotInterpolatedAreaSeriesFillSpans:()=>tY,plotInterpolatedLinePathStroke:()=>tT,plotLinePathStroke:()=>tS,pointsEq:()=>tR,polarChartOptionsDefs:()=>v8,predictCartesianAxis:()=>ue,predictCartesianTimeAxis:()=>uf,predictTimeAxisType:()=>ug,prepareAreaFillAnimationFns:()=>tZ,prepareAreaPathAnimation:()=>t$,prepareAxisAnimationContext:()=>j3,prepareAxisAnimationFunctions:()=>j6,prepareBarAnimationFunctions:()=>uz,prepareLinePathAnimation:()=>tW,prepareLinePathPropertyAnimation:()=>tV,prepareLinePathStrokeAnimationFns:()=>tU,preparePieSeriesAnimationFunctions:()=>vl,previousPowerOf2:()=>iE,processedDataIsAnimatable:()=>pe,pyramidSeriesThemeableOptionsDef:()=>rc,radarAreaSeriesThemeableOptionsDef:()=>rd,radarLineSeriesThemeableOptionsDef:()=>re,radialBarSeriesThemeableOptionsDef:()=>rf,radialColumnSeriesThemeableOptionsDef:()=>rg,radialGaugeSeriesOptionsDef:()=>oJ,radialGaugeSeriesThemeableOptionsDef:()=>oI,radialGaugeTargetOptionsDef:()=>oF,radiusCategoryAxisOptionsDefs:()=>qf,radiusNumberAxisOptionsDefs:()=>qe,range:()=>k0,rangeAreaSeriesThemeableOptionsDef:()=>rh,rangeBarSeriesThemeableOptionsDef:()=>ri,rangeValidator:()=>oe,rangedValueProperty:()=>po,resetAxisFillSelectionFn:()=>ka,resetAxisGroupFn:()=>j7,resetAxisLabelSelectionFn:()=>j8,resetAxisLineSelectionFn:()=>j9,resetBarSelectionsFn:()=>uA,resetLabelFn:()=>sS,resetMarkerFn:()=>t2,resetMarkerPositionFn:()=>t3,resetMotion:()=>jz,resetPieSelectionsFn:()=>vm,rowCountProperty:()=>pl,sankeySeriesThemeableOptionsDef:()=>rj,scale:()=>tz,sectorBox:()=>u4,seriesLabelFadeInAnimation:()=>sQ,seriesLabelFadeOutAnimation:()=>sR,seriesLabelOptionsDefs:()=>ow,setElementBBox:()=>fp,setPath:()=>dU,shadowOptionsDefs:()=>oB,shallowClone:()=>fz,simpleMemorize:()=>hz,simpleMemorize2:()=>hy,singleSeriesHighlightStyle:()=>nA,solveBezier:()=>eQ,sortAndUniqueDates:()=>kM,splitBezier2D:()=>eR,stackCartesianSeries:()=>v2,standaloneChartOptionsDefs:()=>wa,staticFromToMotion:()=>jx,stopPageScrolling:()=>gM,sum:()=>o7,sumValues:()=>o6,sunburstSeriesThemeableOptionsDef:()=>rk,textOrSegments:()=>of,tickFormat:()=>k_,ticksEqual:()=>lf,ticksSpacing:()=>lg,timeInterval:()=>oM,timeIntervalMaxLabelSize:()=>lk,timeIntervalUnit:()=>oK,toDegrees:()=>ef,toHighlightString:()=>ia,toRadians:()=>ee,toolbarButtonOptionsDefs:()=>on,tooltipContentAriaLabel:()=>l5,tooltipHtml:()=>l9,tooltipOptionsDefs:()=>oA,topologyChartOptionsDefs:()=>v9,trailingAccumulatedValue:()=>pd,trailingAccumulatedValueProperty:()=>pq,treemapSeriesThemeableOptionsDef:()=>rl,updateClipPath:()=>ua,updateLabelNode:()=>sN,validateCrossLineValue:()=>jR,valueProperty:()=>pk,visibleRangeIndices:()=>iq,waterfallSeriesThemeableOptionsDef:()=>rn,withTemporaryDomain:()=>li,without:()=>dQ});var wx={add:function(a,b){return"number"==typeof b?{x:a.x+b,y:a.y+b}:{x:a.x+b.x,y:a.y+b.y}},angle:function(a,b){return null==b?Math.atan2(a.y,a.x):Math.atan2(a.y,a.x)-Math.atan2(b.y,b.x)},apply:function(a,b){return a.x=b.x,a.y=b.y,a},equal:function(a,b){return a.x===b.x&&a.y===b.y},distance:function(a,b){let c=wy(a,b);return Math.sqrt(c.x*c.x+c.y*c.y)},distanceSquared:function(a,b){let c=wy(a,b);return c.x*c.x+c.y*c.y},from:function(a,b){if("number"==typeof a)return{x:a,y:b};if("currentX"in a)return{x:a.currentX,y:a.currentY};if("offsetWidth"in a)return{x:a.offsetWidth,y:a.offsetHeight};if("width"in a)return[{x:a.x,y:a.y},{x:a.x+a.width,y:a.y+a.height}];if("x1"in a)return[{x:a.x1,y:a.y1},{x:a.x2,y:a.y2}];throw Error(`Values can not be converted into a vector: [${JSON.stringify(a)}] [${b}]`)},gradient:function(a,b,c){let d=b.x-a.x;return(null==c?b.y-a.y:c-b.y-(c-a.y))/d},intercept:function(a,b,c){return(null==c?a.y:c-a.y)-b*a.x},intersectAtX:function(a,b,c=0,d){let e=a===1/0?1/0:a*c+b;return{x:c,y:null==d?e:d-e}},intersectAtY:function(a,b,c=0,d){return{x:a===1/0?1/0:(c-b)/a,y:null==d?c:d-c}},length:wz,lengthSquared:function(a){return a.x*a.x+a.y*a.y},multiply:function(a,b){return"number"==typeof b?{x:a.x*b,y:a.y*b}:{x:a.x*b.x,y:a.y*b.y}},normalized:function(a){let b=wz(a);return{x:a.x/b,y:a.y/b}},origin:wA,required:function(a){return{x:a?.x??0,y:a?.y??0}},rotate:function(a,b,c=wA()){let d=wz(a);return{x:c.x+d*Math.cos(b),y:c.y+d*Math.sin(b)}},round:function(a,b=2){return{x:aD(a.x,b),y:aD(a.y,b)}},sub:wy};function wy(a,b){return"number"==typeof b?{x:a.x-b,y:a.y-b}:{x:a.x-b.x,y:a.y-b.y}}function wz(a){return Math.sqrt(a.x*a.x+a.y*a.y)}function wA(){return{x:0,y:0}}var wB=class a{constructor(a,b,c,d,e,f,g,h,i,j){this.series=a,this.datumIndex=b,this.datum=c,this.sizeValue=d,this.colorValue=e,this.sumSize=f,this.depth=g,this.parent=h,this.children=i,this.style=j,this.midPoint={x:0,y:0}}get hasChildren(){return this.children.length>0}walk(b,c=a.Walk.PreOrder){c===a.Walk.PreOrder&&b(this),this.children.forEach(a=>{a.walk(b,c)}),c===a.Walk.PostOrder&&b(this)}*[Symbol.iterator](){for(let a of(yield this,this.children))yield*a}};wB.Walk={PreOrder:0,PostOrder:1};var wC=wB,wD=class extends lR{constructor(a){super({moduleCtx:a,pickModes:[1,0]}),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new et,this.animationState=new jH("empty",{empty:{update:{target:"ready",action:a=>this.animateEmptyUpdateReady(a)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:a=>this.animateReadyHighlight(a),resize:a=>this.animateReadyResize(a),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:a=>this.animateWaitingUpdateReady(a)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:a=>this.animateClearingUpdateEmpty(a)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(a){"initial"===a?this.animationState.transition("reset"):"ready"===a&&this.animationState.transition("skip")}processData(){let{NodeClass:a}=this,{childrenKey:b,sizeKey:c,colorKey:d,colorRange:e}=this.properties,f=0,g=1/0,h=-1/0,i=(e,i,k)=>{let l=null!=k.depth?k.depth+1:0,m=null!=b?e[b]:void 0,n=null==m||0===m.length,o=null!=c?e[c]:void 0,p=o=Number.isFinite(o)?Math.max(o,0):+!!n;f=Math.max(f,l);let q=null!=d?e[d]:void 0;"number"==typeof q&&(g=Math.min(g,q),h=Math.max(h,q));let r=this.getItemStyle({datumIndex:i,datum:e,depth:l,colorValue:q},n,!1);return j(new a(this,i,e,o,q,p,l,k,[],r),m)},j=(a,b)=>{let{datumIndex:c}=a;return b?.forEach((b,d)=>{let e=i(b,c.concat(d),a);a.children.push(e),a.sumSize+=e.sumSize}),a},k=j(new a(this,[],void 0,0,void 0,0,void 0,void 0,[],{}),this.data),l=[g,h];this.colorScale.domain=g<h?[g,h]:[0,1],this.colorScale.range=e??["black"],this.colorScale.update(),this.rootNode=k,this.maxDepth=f,this.colorDomain=l}update({seriesRect:a}){this.updateSelections(),this.updateNodes();let b=this.getAnimationData();this.checkResize(a)&&this.animationState.transition("resize",b),this.animationState.transition("update",b)}resetAllAnimation(a){this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(a){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(a)}animateWaitingUpdateReady(a){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(a)}animateReadyHighlight(a){}animateReadyResize(a){this.resetAllAnimation(a)}animateClearingUpdateEmpty(a){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(a)}getAnimationData(){return{}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}dataCount(){return NaN}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(a,b){return[NaN,NaN]}getLegendData(a){let{colorKey:b,colorRange:c}=this.properties,{id:d,ctx:{legendManager:e},visible:f}=this;return"gradient"===a&&null!=b&&null!=c?[{legendType:"gradient",enabled:f&&e.getItemEnabled({seriesId:d}),seriesId:d,series:this.getFormatterContext("color"),colorRange:c,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(a){return a.datumIndex.join(":")}getDatumId(a){return this.getDatumIdFromData(a)}removeMeIndexPathForIndex(a){return this.datumSelection.at(a+1)?.datum.datumIndex??[]}removeMeIndexForIndexPath(a){for(let{index:b,datum:c}of this.datumSelection)if(cw(c.datumIndex,a))return b-1;return 0}pickFocus(a){if(!this.rootNode?.children.length)return;let b=aA(0,a.datumIndex-a.datumIndexDelta,this.datumSelection.length-1),{datumIndexDelta:c,otherIndexDelta:d}=a,e=this.removeMeIndexPathForIndex(b),f=e.reduce((a,b)=>a.children[b],this.rootNode);if(d>0&&f.hasChildren)e=[...e,0];else if(d<0&&e.length>1)e=e.slice(0,-1);else if(0===d&&0!==c){let a=f.parent.children.length-1;(e=e.slice())[e.length-1]=aA(0,e[e.length-1]+c,a)}let g=e.reduce((a,b)=>a.children[b],this.rootNode),h=this.computeFocusBounds(this.datumSelection.at(b+1));if(null!=h)return{datum:g,datumIndex:this.removeMeIndexForIndexPath(e),otherIndex:g.depth,bounds:h,clipFocusBox:!0}}getDatumAriaText(a,b){return a instanceof this.NodeClass?this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(a.depth??-1)+1,count:a.children.length,description:b}):void aa.error(`datum is not HierarchyNode: ${JSON.stringify(a)}`)}getCategoryValue(a){}datumIndexForCategoryValue(a){}},wE=class extends im{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(mA),this.strokes=Object.values(mB)}};dl([ey],wE.prototype,"childrenKey",2),dl([ey],wE.prototype,"sizeKey",2),dl([ey],wE.prototype,"colorKey",2),dl([ey],wE.prototype,"colorName",2),dl([ey],wE.prototype,"fills",2),dl([ey],wE.prototype,"strokes",2),dl([ey],wE.prototype,"colorRange",2);var wF=class a{constructor(a,b,c,d){this.lon0=a,this.lat0=b,this.lon1=c,this.lat1=d}extend(a,b,c,d){return this.lon0=Math.min(this.lon0,a),this.lat0=Math.min(this.lat0,b),this.lon1=Math.max(this.lon1,c),this.lat1=Math.max(this.lat1,d),this}merge(a){return this.extend(a.lon0,a.lat0,a.lon1,a.lat1)}static extend(b,c,d,e,f){return b?b.extend(c,d,e,f):new a(c,d,e,f)}},wG=Math.PI/180,wH=a=>-Math.log(Math.tan(.25*Math.PI+a*wG*.5)),wI=a=>(Math.atan(Math.exp(-a))-.25*Math.PI)/(.5*wG),wJ=class a extends ep{constructor(b,c){super(),this.domain=b,this.range=c,this.type="mercator",this.defaultTickCount=0,this.bounds=a.bounds(b)}static bounds(a){let[[b,c],[d,e]]=a,f=b*wG,g=wH(c),h=d*wG,i=wH(e);return new dt(Math.min(f,h),Math.min(g,i),Math.abs(h-f),Math.abs(i-g))}static fixedScale(){return new a([[0/wG,wI(0)],[1/wG,wI(1)]],[[0,0],[1,1]])}toDomain(){}normalizeDomains(...a){let b=-1/0,c=1/0,d=-1/0,e=1/0;for(let f of a)for(let[a,g]of f)b=Math.min(a,b),c=Math.max(a,c),d=Math.min(g,d),e=Math.max(g,e);return{domain:[[b,d],[c,e]],animatable:!0}}convert([a,b]){let[[c,d],[e,f]]=this.range,g=(e-c)/this.bounds.width,h=(f-d)/this.bounds.height;return[(a*wG-this.bounds.x)*g+c,(wH(b)-this.bounds.y)*h+d]}invert([a,b]){let[[c,d],[e,f]]=this.range,g=(e-c)/this.bounds.width,h=(f-d)/this.bounds.height;return[((a-c)/g+this.bounds.x)/wG,wI((b-d)/h+this.bounds.y)]}},wK={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},wL={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}};function wM({yDirection:a,padding:b=0,position:c="top",bbox:d}){let{xTranslationDirection:e,yTranslationDirection:f}=(a?wK:wL)[c];return{xTranslation:e*(b+d.width/2),yTranslation:f*(b+d.height/2)}}function wN(a,b){let c=aI("button",wS("ag-charts-input ag-charts-button",b));return void 0!==a.label?c.append(a.label):(c.append(wR(a.icon)),c.ariaLabel=a.altText),c.addEventListener("click",a.onPress),cH(c,b),c}function wO(a,b){let c=aI("input",wS("ag-charts-input ag-charts-checkbox",b));return c.type="checkbox",c.checked=a.checked,c.addEventListener("change",b=>a.onChange(c.checked,b)),c.addEventListener("keydown",a=>{gK(a)&&(a.preventDefault(),c.click())}),cH(c,b),c}function wP(a,b){let c=aI("select",wS("ag-charts-input ag-charts-select",b));return c.append(...a.options.map(a=>{let b=aI("option");return b.value=a.value,b.textContent=a.label,b})),cG(c,"data-preventdefault",!1),c.value=a.value,c.addEventListener("change",b=>a.onChange(c.value,b)),cH(c,b),c}function wQ(a,b){let c=aI("textarea",wS("ag-charts-input ag-charts-textarea",b));return c.value=a.value,c.addEventListener("input",b=>a.onChange(c.value,b)),cH(c,b),cG(c,"data-preventdefault",!1),c}function wR(a){let b=aI("span",`ag-charts-icon ag-charts-icon-${a}`);return cG(b,"aria-hidden",!0),b}function wS(a,b){return null==b?a:`${a} ${b.class}`}var wT=class extends f6{constructor(a=""){super(),this._d="",this.d=a}get d(){return this._d}set d(a){a!==this._d&&(this._d=a,this.path.clear(),this.path.appendSvg(a),this.checkPathDirty())}},wU=class extends fe(wT){isPointInPath(a,b){return super.isPointInPath(a-this.translationX,b-this.translationY)}},wV=class extends d7{constructor(a){super(),this.sourceImage=a,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}render(a){let{ctx:b}=a,c=this.sourceImage;c&&(b.globalAlpha=this.opacity,b.drawImage(c,0,0,c.width,c.height,this.x,this.y,this.width,this.height)),super.render(a)}};dl([d$()],wV.prototype,"x",2),dl([d$()],wV.prototype,"y",2),dl([d$()],wV.prototype,"width",2),dl([d$()],wV.prototype,"height",2),dl([d$()],wV.prototype,"opacity",2),dk({},{ButtonWidget:()=>g$,MenuItemRadioWidget:()=>wX,MenuItemWidget:()=>wW,MenuWidget:()=>wZ,NativeWidget:()=>g2,SliderWidget:()=>g8,ToolbarWidget:()=>ha,WIDGET_HTML_EVENTS:()=>fM,Widget:()=>f$,WidgetEventUtil:()=>fQ});var wW=class extends gZ{constructor(){super(aI("div"),"menuitem")}},wX=class extends gZ{constructor(){super(aI("div"),"menuitemradio")}setChecked(a){cG(this.elem,"aria-checked",a)}},wY=["Escape","ArrowLeft"],wZ=class a extends g0{constructor(a="vertical"){super(a,"menu"),this.handleMouseEnter=(a,b)=>{b.hasPopup()||this.expandSubMenu(a,void 0)},this.handleMouseMove=(a,b)=>{b.focus({preventScroll:!0})}}destructor(){this.collapse({mode:"2"})}addSeparator(){let a=aG().createElement("div");return cG(a,"role","separator"),this.elem.appendChild(a),a}onChildAdded(a){super.onChildAdded(a),a.addListener("mouseenter",this.handleMouseEnter),a.addListener("mousemove",this.handleMouseMove)}onChildRemoved(a){super.onChildRemoved(a),a.removeListener("mouseenter",this.handleMouseEnter),a.removeListener("mousemove",this.handleMouseMove)}addSubMenu(){let b=new wW,c=new a(this.orientation);c.id=c0();let d=()=>{this.collapseExpandedSubMenu(c),b.expandControlled()},e=a=>{gE(a.sourceEvent)&&"ArrowRight"===a.sourceEvent.code&&(this.collapseExpandedSubMenu(c),b.expandControlled())};return b.setControlled(c),b.setAriaHasPopup("menu"),b.addListener("click",d),b.addListener("mouseenter",d),b.addListener("keydown",e),this.addChild(b),{subMenuButton:b,subMenu:c}}expandSubMenu(a,b){let{expansionScope:c}=this;c&&(this.collapseExpandedSubMenu(b),b?.expand(a))}collapseExpandedSubMenu(a){let{expansionScope:b}=this;b&&(b.expandedSubMenu?.collapse({mode:"4"}),b.expandedSubMenu=a)}expand(a){if(null!=this.expansionScope)return;this.expansionScope={lastFocus:gL(a.sourceEvent),expandedSubMenu:void 0,abort:()=>this.collapse({mode:"1"}),close:()=>this.collapse({mode:"0"}),removers:new cQ};let b=this.expansionScope,c=this.children.map(a=>a.getElement());cG(b.lastFocus,"aria-expanded",!0),b.removers.register(gA(this.elem,b.abort),gB(this.elem,b.abort),...this.children.map(a=>gz(a.getElement(),b.close,wY)),a?.overrideFocusVisible&&gD(this.elem,c,a.overrideFocusVisible)),this.internalListener?.dispatch("expand-widget",this,{type:"expand-widget"}),this.children[0]?.focus({preventScroll:!0})}collapse(a){let{mode:b="0"}=a??{};if(void 0===this.expansionScope)return;let{lastFocus:c,removers:d,expandedSubMenu:e}=this.expansionScope;this.expansionScope=void 0,e?.collapse({mode:"3"}),cG(c,"aria-expanded",!1),"0"===b&&c?.focus({preventScroll:!0}),d.flush(),this.internalListener?.dispatch("collapse-widget",this,{type:"collapse-widget",mode:b})}},w$="canvas-overlay",w_=class extends dm{constructor(a,b,c){super(),this.ctx=a,this.hideFns=[],this.setOwnedWidget=(()=>{let a;return b=>{a?.destroy(),a=b}})(),this.moduleId=`popover-${b}`,c?.detached?this.element=aI("div"):this.element=a.domManager.addChild(w$,this.moduleId),this.element.setAttribute("role","presentation"),this.hideFns.push(()=>this.setOwnedWidget(void 0)),this.cleanup.register(()=>a.domManager.removeChild(w$,this.moduleId))}attachTo(a){this.element.parentElement||a.element.append(this.element)}hide(a){let{lastFocus:b=this.lastFocus}=a??{};0!==this.element.children.length&&(this.hideFns.forEach(a=>a()),b?.focus(),this.lastFocus=void 0)}removeChildren(){this.element.replaceChildren()}initPopoverElement(a,b){if(!this.element.parentElement)throw Error("Can not show popover that has not been attached to a parent.");return a??(a=aI("div","ag-charts-popover")),a.classList.toggle("ag-charts-popover",!0),null!=b.ariaLabel&&a.setAttribute("aria-label",b.ariaLabel),null!=b.class&&a.classList.add(b.class),this.element.replaceChildren(a),a}showWidget(a,b,c){this.setOwnedWidget(b),this.initPopoverElement(b.getElement(),c),b.addListener("collapse-widget",()=>{a.setControlled(void 0),this.setOwnedWidget(void 0)}),a.setControlled(b),a.expandControlled()}showWithChildren(a,b){let c=this.initPopoverElement(void 0,b);if(c.replaceChildren(...a),this.hideFns.push(()=>this.removeChildren()),b.onHide&&this.hideFns.push(b.onHide),b.initialFocus&&b.sourceEvent){let a=gL(b.sourceEvent);void 0!==a&&(this.lastFocus=a,this.initialFocus=b.initialFocus)}return c}getPopoverElement(){return this.element.firstElementChild}updatePosition(a){let b=this.getPopoverElement();b&&(b.style.setProperty("right","unset"),b.style.setProperty("bottom","unset"),null!=a.x&&b.style.setProperty("left",`${Math.floor(a.x)}px`),null!=a.y&&b.style.setProperty("top",`${Math.floor(a.y)}px`),this.initialFocus?.focus(),this.initialFocus=void 0)}},w0=class extends w_{setAnchor(a,b){this.anchor=a,this.fallbackAnchor=b,this.updatePosition(a),this.repositionWithinBounds()}updateAnchor(a){let b=a.anchor??this.anchor,c=a.fallbackAnchor??this.fallbackAnchor;b&&this.setAnchor(b,c)}showWidget(a,b,c){super.showWidget(a,b,c),this.updateAnchor(c)}showWithChildren(a,b){let c=super.showWithChildren(a,b);return this.updateAnchor(b),aH().requestAnimationFrame(()=>{this.repositionWithinBounds()}),c}repositionWithinBounds(){let{anchor:a,ctx:b,fallbackAnchor:c}=this,d=this.getPopoverElement();if(!a||!d)return;let e=b.domManager.getBoundingClientRect(),{offsetWidth:f,offsetHeight:g}=d,h=aA(0,a.x,e.width-f),i=aA(0,a.y,e.height-g);h!==a.x&&c?.x!=null&&(h=aA(0,c.x-f,e.width-f)),i!==a.y&&c?.y!=null&&(i=aA(0,c.y-g,e.height-g)),this.updatePosition({x:h,y:i})}},w1=class extends w0{show(a,b){let c=new wZ("vertical");for(let a of b.items)c.addChild(this.createRow(b,a,c));c.addClass("ag-charts-menu"),this.showWidget(a,c,b)}allocRow(a,b){if(null==a.menuItemRole||"menuitem"===a.menuItemRole)return new wW;{a.menuItemRole;let c=new wX;return c.setChecked(a.value===b.value),c}}createRow(a,b,c){let d=b.value===a.value,e=this.allocRow(a,b);if(e.addClass("ag-charts-menu__row"),e.toggleClass("ag-charts-menu__row--active",d),"string"==typeof b.value&&(e.getElement().dataset.popoverId=b.value),null!=b.icon){let a=aI("span",`ag-charts-menu__icon ${ft(b.icon)}`);e.getElement().appendChild(a)}let f=null!=b.strokeWidth;if(f&&(e.toggleClass("ag-charts-menu__row--stroke-width-visible",f),e.setCSSVariable("--strokeWidth",f?`${b.strokeWidth}px`:null)),null!=b.label){let a=aI("span","ag-charts-menu__label");a.textContent=this.ctx.localeManager.t(b.label),e.getElement().appendChild(a)}return"altText"in b&&e.setAriaLabel(this.ctx.localeManager.t(b.altText)),e.addListener("click",({sourceEvent:d})=>{a.onPress?.(b),d.preventDefault(),d.stopPropagation(),c.collapse()}),e}},w2=class extends w_{constructor(){super(...arguments),this.dragged=!1}setDragHandle(a){a.addListener("drag-start",b=>{a.addClass(this.dragHandleDraggingClass),this.onDragStart(b)}),a.addListener("drag-move",this.onDragMove.bind(this)),a.addListener("drag-end",()=>{a.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)})}onDragStart(a){let b=this.getPopoverElement();b&&(a.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:wx.from(a.clientX,a.clientY),position:wx.from(Number(b.style.getPropertyValue("left").replace("px","")),Number(b.style.getPropertyValue("top").replace("px","")))})}onDragMove(a){let{dragStartState:b}=this,c=this.getPopoverElement();if(!b||!c)return;let d=wx.sub(wx.from(a.clientX,a.clientY),b.client),e=wx.add(b.position,d),f=this.ctx.domManager.getBoundingClientRect(),g={};e.x>=0&&e.x+c.offsetWidth<=f.width&&(g.x=e.x),e.y>=0&&e.y+c.offsetHeight<=f.height&&(g.y=e.y),this.updatePosition(g)}onDragEnd(){this.dragStartState=void 0}},w3=class extends ez{};dl([ey],w3.prototype,"icon",2),dl([ey],w3.prototype,"label",2),dl([ey],w3.prototype,"ariaLabel",2),dl([ey],w3.prototype,"tooltip",2);var w4={"disjoint-channel":"false","fibonacci-menu":"menu","fibonacci-retracement":"false","fibonacci-retracement-trend-based":"false","fill-color":"dialog","horizontal-line":"false","line-color":"dialog","line-menu":"menu","line-stroke-width":"menu","line-style-type":"menu","measurer-menu":"menu","pan-end":"false","pan-left":"false","pan-right":"false","pan-start":"false","parallel-channel":"false","shape-menu":"menu","text-color":"dialog","text-menu":"menu","text-size":"menu","vertical-line":"false","zoom-in":"false","zoom-out":"false",callout:"false",clear:"false",comment:"false",delete:"false",line:"false",lock:"false",menu:"menu",note:"false",reset:"false",settings:"dialog",text:"false"},w5=class extends g${constructor(a){super(),this.localeManager=a}update(a){var b;let{localeManager:c}=this;a.tooltip&&(this.elem.title=c.t(a.tooltip));let d="";if(null!=a.icon&&(d=`<span class="${ft(a.icon)} ag-charts-toolbar__icon"></span>`),null!=a.label){let b=c.t(a.label);d=`${d}<span class="ag-charts-toolbar__label">${b}</span>`}let e="string"!=typeof(b=a.value)?"false":w4[b];"false"==e?(this.setAriaHasPopup(void 0),this.setAriaExpanded(void 0)):(this.setAriaHasPopup(e),this.setAriaExpanded(!1)),this.elem.innerHTML=d}setChecked(a){cG(this.elem,"aria-checked",a)}},w6="ag-charts-toolbar__button--active",w7=class extends ha{constructor({eventsHub:a,localeManager:b},c,d){super(d),this.ariaLabelId=c,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new hu,this.hasPrefix=!1,this.buttonWidgets=[],this.updateAriaLabel=()=>this.setAriaLabel(this.localeManager.t(this.ariaLabelId)),this.eventsHub=a,this.localeManager=b,this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal","horizontal"===d),this.toggleClass("ag-charts-toolbar--vertical","vertical"===d),this.eventsHub.on("locale:change",this.updateAriaLabel),this.updateAriaLabel()}setAriaLabelId(a){this.ariaLabelId=a,this.updateAriaLabel()}addToolbarListener(a,b){return this.events.addListener(a,b)}clearButtons(){for(let a of(this.expanded?.collapse({mode:"2"}),this.buttonWidgets))a.destroy();this.buttonWidgets.splice(0)}updateButtons(a){let{buttonWidgets:b}=this;for(let[b,c]of a.entries())(this.buttonWidgets.at(b)??this.createButton(b,c)).update(c);for(let c=a.length;c<b.length;c++){let a=this.buttonWidgets.at(c);a?.destroy()}this.buttonWidgets.splice(a.length),this.refreshButtonClasses()}updateButtonByIndex(a,b){this.buttonWidgets.at(a)?.update(b)}clearActiveButton(){for(let a of this.buttonWidgets)a.toggleClass(w6,!1)}toggleActiveButtonByIndex(a){if(-1!==a)for(let[b,c]of this.buttonWidgets.entries())c.toggleClass(w6,null!=a&&a===b)}toggleButtonEnabledByIndex(a,b){-1!==a&&this.buttonWidgets.at(a)?.setEnabled(b)}toggleSwitchCheckedByIndex(a,b){-1!==a&&this.buttonWidgets.at(a)?.setChecked(b)}getButtonBounds(){return this.buttonWidgets.map(a=>this.getButtonWidgetBounds(a))}setButtonHiddenByIndex(a,b){this.buttonWidgets.at(a)?.setHidden(b)}getButtonWidgetBounds(a){let b=this.getBounds(),c=a.getBounds();return new dt(c.x+b.x,c.y+b.y,c.width,c.height)}refreshButtonClasses(){let a,b,c,{buttonWidgets:d,hasPrefix:e}=this;for(let[f,g]of d.entries())a=!e&&0===f||c!=g.section,b=f===d.length-1||g.section!=d.at(f+1)?.section,g.toggleClass("ag-charts-toolbar__button--first",a),g.toggleClass("ag-charts-toolbar__button--last",b),g.toggleClass("ag-charts-toolbar__button--gap",f>0&&a),c=g.section}createButton(a,b){let c=this.createButtonWidget();return c.addClass("ag-charts-toolbar__button"),c.addListener("click",d=>{let e={index:a,...b instanceof ez?b.toJson():b},f=this.getButtonWidgetBounds(c);this.events.dispatch("button-pressed",{event:d,button:e,buttonBounds:f,buttonWidget:c})}),c.addListener("focus",()=>{this.events.dispatch("button-focused",{button:{index:a}})}),c.addListener("expand-controlled-widget",a=>{this.expanded?.collapse({mode:"4"}),this.expanded=a.controlled;let b=this.expanded.addListener("collapse-widget",()=>{this.expanded=void 0,b()})}),b.section&&(c.section=b.section),this.buttonWidgets.push(c),this.addChild(c),c}},w8=class extends w7{createButtonWidget(){return new w5(this.localeManager)}},w9=class extends w2{constructor(a,b,c){super(a,b),this.onPopoverMoved=c,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(a,b={}){this.showWithChildren(a,{...b,class:"ag-charts-floating-toolbar"})}hide(){this.dragged=!1,super.hide()}getBounds(){let a=this.getPopoverElement();return new dt(a?.offsetLeft??0,a?.offsetTop??0,a?.offsetWidth??0,a?.offsetHeight??0)}hasBeenDragged(){return this.dragged}setAnchor(a,b,c){let d=this.getPopoverElement();if(!d)return;let e=a.position??"above",{offsetWidth:f,offsetHeight:g}=d,h=a.y-g-c,i=a.x-f/2;"below"===e?h=a.y+c:"right"===e?(h=a.y-g/2,i=a.x+b):"above-left"===e&&(i=a.x),this.updatePosition({x:i,y:h})}ignorePointerEvents(){let a=this.getPopoverElement();a&&(a.style.pointerEvents="none")}capturePointerEvents(){let a=this.getPopoverElement();a&&(a.style.pointerEvents="unset")}updatePosition(a){let b=this.getBounds(),c=this.ctx.domManager.getBoundingClientRect();a.x=Math.floor(aA(0,a.x,c.width-b.width)),a.y=Math.floor(aA(0,a.y,c.height-b.height)),super.updatePosition(a),this.onPopoverMoved()}},xa=class extends w7{constructor(a,b,c){super(a,b,"horizontal"),this.hasPrefix=!0,this.popover=new w9(a,c,this.onPopoverMoved.bind(this)),this.dragHandle=new xb(a.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}destroy(){super.destroy(),this.popover.destroy()}show(a={}){this.popover.show([this.dragHandle.getElement(),this.getElement()],a)}hide(){this.popover.hide()}setAnchor(a){this.popover.setAnchor(a,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){let a=this.popover.getBounds();if(this.popoverBounds?.equals(a))return;this.popoverBounds=a.clone();let b=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:a,buttonBounds:b})}getButtonWidgetBounds(a){let b=this.popover.getBounds(),c=super.getButtonWidgetBounds(a),d=this.dragHandle.getBounds();return new dt(c.x+b.x-d.width,c.y+b.y,c.width,c.height)}},xb=class extends g2{constructor(a){super(aI("div","ag-charts-floating-toolbar__drag-handle"));let b=new g2(aI("span",`${ft("drag-handle")} ag-charts-toolbar__icon`));b.setAriaHidden(!0),this.addChild(b),this.elem.title=a}},xc={...ju,...jy};function xd(a,b){return{...a,container:b.current}}wl.create.bind(wl),wl.__createSparkline.bind(wl);var xe=function(a,b){let c=(0,j.forwardRef)(function(b,c){let{options:d,style:e,className:f}=b,g=(0,j.useRef)(null),h=(0,j.useRef)();(0,j.useLayoutEffect)(()=>{let b=a(xd(d,g));return h.current=b,()=>{b.destroy()}},[]);let i=void 0===h.current;return(0,j.useEffect)(()=>{i||h.current?.update(xd(d,g)).catch(a=>console.error(a))},[d]),(0,j.useImperativeHandle)(c,()=>h.current,[]),(0,j.useMemo)(()=>(0,j.createElement)("div",{ref:g,style:e,className:f}),[e,f])});return c.displayName=b,c}(a=>wl.create(a),"AgCharts"),xf=a.i(13902),xg=function(a,b){return(xg=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)};function xh(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}xg(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var xi=function(){return(xi=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function xj(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function xk(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(f){return function(h){var i=[f,h];if(c)throw TypeError("Generator is already executing.");for(;g;)try{if(c=1,d&&(e=2&i[0]?d.return:i[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,i[1])).done)return e;switch(d=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return g.label++,{value:i[1],done:!1};case 5:g.label++,d=i[1],i=[0];continue;case 7:i=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){g=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){g.label=i[1];break}if(6===i[0]&&g.label<e[1]){g.label=e[1],e=i;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(i);break}e[2]&&g.ops.pop(),g.trys.pop();continue}i=b.call(a,g)}catch(a){i=[6,a],d=0}finally{c=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}}for(var xl=function(){function a(a,b,c,d){this.left=a,this.top=b,this.width=c,this.height=d}return a.prototype.add=function(b,c,d,e){return new a(this.left+b,this.top+c,this.width+d,this.height+e)},a.fromClientRect=function(b,c){return new a(c.left+b.windowBounds.left,c.top+b.windowBounds.top,c.width,c.height)},a.fromDOMRectList=function(b,c){var d=Array.from(c).find(function(a){return 0!==a.width});return d?new a(d.left+b.windowBounds.left,d.top+b.windowBounds.top,d.width,d.height):a.EMPTY},a.EMPTY=new a(0,0,0,0),a}(),xm=function(a,b){return xl.fromClientRect(a,b.getBoundingClientRect())},xn=function(a){var b=a.body,c=a.documentElement;if(!b||!c)throw Error("Unable to get document size");return new xl(0,0,Math.max(Math.max(b.scrollWidth,c.scrollWidth),Math.max(b.offsetWidth,c.offsetWidth),Math.max(b.clientWidth,c.clientWidth)),Math.max(Math.max(b.scrollHeight,c.scrollHeight),Math.max(b.offsetHeight,c.offsetHeight),Math.max(b.clientHeight,c.clientHeight)))},xo=function(a){for(var b=[],c=0,d=a.length;c<d;){var e=a.charCodeAt(c++);if(e>=55296&&e<=56319&&c<d){var f=a.charCodeAt(c++);(64512&f)==56320?b.push(((1023&e)<<10)+(1023&f)+65536):(b.push(e),c--)}else b.push(e)}return b},xp=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(String.fromCodePoint)return String.fromCodePoint.apply(String,a);var c=a.length;if(!c)return"";for(var d=[],e=-1,f="";++e<c;){var g=a[e];g<=65535?d.push(g):(g-=65536,d.push((g>>10)+55296,g%1024+56320)),(e+1===c||d.length>16384)&&(f+=String.fromCharCode.apply(String,d),d.length=0)}return f},xq="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xr="undefined"==typeof Uint8Array?[]:new Uint8Array(256),xs=0;xs<xq.length;xs++)xr[xq.charCodeAt(xs)]=xs;for(var xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xu="undefined"==typeof Uint8Array?[]:new Uint8Array(256),xv=0;xv<xt.length;xv++)xu[xt.charCodeAt(xv)]=xv;for(var xw=function(a){var b,c,d,e,f,g=.75*a.length,h=a.length,i=0;"="===a[a.length-1]&&(g--,"="===a[a.length-2]&&g--);var j="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(g):Array(g),k=Array.isArray(j)?j:new Uint8Array(j);for(b=0;b<h;b+=4)c=xu[a.charCodeAt(b)],d=xu[a.charCodeAt(b+1)],e=xu[a.charCodeAt(b+2)],f=xu[a.charCodeAt(b+3)],k[i++]=c<<2|d>>4,k[i++]=(15&d)<<4|e>>2,k[i++]=(3&e)<<6|63&f;return j},xx=function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c.push(a[d+1]<<8|a[d]);return c},xy=function(a){for(var b=a.length,c=[],d=0;d<b;d+=4)c.push(a[d+3]<<24|a[d+2]<<16|a[d+1]<<8|a[d]);return c},xz=2112,xA=function(a,b,c){return a.slice?a.slice(b,c):new Uint16Array(Array.prototype.slice.call(a,b,c))},xB=function(){function a(a,b,c,d,e,f){this.initialValue=a,this.errorValue=b,this.highStart=c,this.highValueIndex=d,this.index=e,this.data=f}return a.prototype.get=function(a){var b;if(a>=0){if(a<55296||a>56319&&a<=65535)return b=((b=this.index[a>>5])<<2)+(31&a),this.data[b];if(a<=65535)return b=((b=this.index[2048+(a-55296>>5)])<<2)+(31&a),this.data[b];if(a<this.highStart)return b=xz-32+(a>>11),b=this.index[b]+(a>>5&63),b=((b=this.index[b])<<2)+(31&a),this.data[b];if(a<=1114111)return this.data[this.highValueIndex]}return this.errorValue},a}(),xC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xD="undefined"==typeof Uint8Array?[]:new Uint8Array(256),xE=0;xE<xC.length;xE++)xD[xC.charCodeAt(xE)]=xE;var xF=[9001,65288],xG=function(a,b){var c,d,e=xw(a),f=Array.isArray(e)?xy(e):new Uint32Array(e),g=Array.isArray(e)?xx(e):new Uint16Array(e),h=xA(g,12,f[4]/2),i=2===f[5]?xA(g,(24+f[4])/2):(c=Math.ceil((24+f[4])/4),f.slice?f.slice(c,void 0):new Uint32Array(Array.prototype.slice.call(f,c,d)));return new xB(f[0],f[1],f[2],f[3],h,i)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),xH=[30,36],xI=[1,2,3,5],xJ=[10,8],xK=[27,26],xL=xI.concat(xJ),xM=[38,39,40,34,35],xN=[15,13],xO=function(a,b){void 0===b&&(b="strict");var c=[],d=[],e=[];return a.forEach(function(a,f){var g=xG.get(a);if(g>50?(e.push(!0),g-=50):e.push(!1),-1!==["normal","auto","loose"].indexOf(b)&&-1!==[8208,8211,12316,12448].indexOf(a))return d.push(f),c.push(16);if(4===g||11===g){if(0===f)return d.push(f),c.push(30);var h=c[f-1];return -1===xL.indexOf(h)?(d.push(d[f-1]),c.push(h)):(d.push(f),c.push(30))}if(d.push(f),31===g)return c.push("strict"===b?21:37);if(42===g||29===g)return c.push(30);if(43===g)if(a>=131072&&a<=196605||a>=196608&&a<=262141)return c.push(37);else return c.push(30);c.push(g)}),[d,c,e]},xP=function(a,b,c,d){var e=d[c];if(Array.isArray(a)?-1!==a.indexOf(e):a===e)for(var f=c;f<=d.length;){var g=d[++f];if(g===b)return!0;if(10!==g)break}if(10===e)for(var f=c;f>0;){var h=d[--f];if(Array.isArray(a)?-1!==a.indexOf(h):a===h)for(var i=c;i<=d.length;){var g=d[++i];if(g===b)return!0;if(10!==g)break}if(10!==h)break}return!1},xQ=function(a,b){for(var c=a;c>=0;){var d=b[c];if(10!==d)return d;c--}return 0},xR=function(a,b,c,d,e){if(0===c[d])return"×";var f=d-1;if(Array.isArray(e)&&!0===e[f])return"×";var g=f-1,h=f+1,i=b[f],j=g>=0?b[g]:0,k=b[h];if(2===i&&3===k)return"×";if(-1!==xI.indexOf(i))return"!";if(-1!==xI.indexOf(k)||-1!==xJ.indexOf(k))return"×";if(8===xQ(f,b))return"÷";if(11===xG.get(a[f])||(32===i||33===i)&&11===xG.get(a[h])||7===i||7===k||9===i||-1===[10,13,15].indexOf(i)&&9===k||-1!==[17,18,19,24,28].indexOf(k)||22===xQ(f,b)||xP(23,22,f,b)||xP([17,18],21,f,b)||xP(12,12,f,b))return"×";if(10===i)return"÷";if(23===i||23===k)return"×";if(16===k||16===i)return"÷";if(-1!==[13,15,21].indexOf(k)||14===i||36===j&&-1!==xN.indexOf(i)||28===i&&36===k||20===k||-1!==xH.indexOf(k)&&25===i||-1!==xH.indexOf(i)&&25===k||27===i&&-1!==[37,32,33].indexOf(k)||-1!==[37,32,33].indexOf(i)&&26===k||-1!==xH.indexOf(i)&&-1!==xK.indexOf(k)||-1!==xK.indexOf(i)&&-1!==xH.indexOf(k)||-1!==[27,26].indexOf(i)&&(25===k||-1!==[22,15].indexOf(k)&&25===b[h+1])||-1!==[22,15].indexOf(i)&&25===k||25===i&&-1!==[25,28,24].indexOf(k))return"×";if(-1!==[25,28,24,17,18].indexOf(k))for(var l=f;l>=0;){var m=b[l];if(25===m)return"×";if(-1!==[28,24].indexOf(m))l--;else break}if(-1!==[27,26].indexOf(k))for(var l=-1!==[17,18].indexOf(i)?g:f;l>=0;){var m=b[l];if(25===m)return"×";if(-1!==[28,24].indexOf(m))l--;else break}if(38===i&&-1!==[38,39,34,35].indexOf(k)||-1!==[39,34].indexOf(i)&&-1!==[39,40].indexOf(k)||-1!==[40,35].indexOf(i)&&40===k||-1!==xM.indexOf(i)&&-1!==[20,26].indexOf(k)||-1!==xM.indexOf(k)&&27===i||-1!==xH.indexOf(i)&&-1!==xH.indexOf(k)||24===i&&-1!==xH.indexOf(k)||-1!==xH.concat(25).indexOf(i)&&22===k&&-1===xF.indexOf(a[h])||-1!==xH.concat(25).indexOf(k)&&18===i)return"×";if(41===i&&41===k){for(var n=c[f],o=1;n>0;)if(41===b[--n])o++;else break;if(o%2!=0)return"×"}return 32===i&&33===k?"×":"÷"},xS=function(a,b){b||(b={lineBreak:"normal",wordBreak:"normal"});var c=xO(a,b.lineBreak),d=c[0],e=c[1],f=c[2];return("break-all"===b.wordBreak||"break-word"===b.wordBreak)&&(e=e.map(function(a){return -1!==[25,30,42].indexOf(a)?37:a})),[d,e,"keep-all"===b.wordBreak?f.map(function(b,c){return b&&a[c]>=19968&&a[c]<=40959}):void 0]},xT=function(){function a(a,b,c,d){this.codePoints=a,this.required="!"===b,this.start=c,this.end=d}return a.prototype.slice=function(){return xp.apply(void 0,this.codePoints.slice(this.start,this.end))},a}(),xU=function(a,b){var c=xo(a),d=xS(c,b),e=d[0],f=d[1],g=d[2],h=c.length,i=0,j=0;return{next:function(){if(j>=h)return{done:!0,value:null};for(var a="×";j<h&&"×"===(a=xR(c,f,e,++j,g)););if("×"!==a||j===h){var b=new xT(c,a,i,j);return i=j,{value:b,done:!1}}return{done:!0,value:null}}}},xV=function(a){return a>=48&&a<=57},xW=function(a){return xV(a)||a>=65&&a<=70||a>=97&&a<=102},xX=function(a){return a>=97&&a<=122||a>=65&&a<=90},xY=function(a){return 10===a||9===a||32===a},xZ=function(a){return xX(a)||a>=128||95===a},x$=function(a){return xZ(a)||xV(a)||45===a},x_=function(a,b){return 92===a&&10!==b},x0=function(a,b,c){return 45===a?xZ(b)||x_(b,c):!!(xZ(a)||92===a&&x_(a,b))||!1},x1=function(a,b,c){return 43===a||45===a?!!xV(b)||46===b&&xV(c):46===a?xV(b):xV(a)},x2=function(a){var b=0,c=1;(43===a[0]||45===a[b])&&(45===a[b]&&(c=-1),b++);for(var d=[];xV(a[b]);)d.push(a[b++]);var e=d.length?parseInt(xp.apply(void 0,d),10):0;46===a[b]&&b++;for(var f=[];xV(a[b]);)f.push(a[b++]);var g=f.length,h=g?parseInt(xp.apply(void 0,f),10):0;(69===a[b]||101===a[b])&&b++;var i=1;(43===a[b]||45===a[b])&&(45===a[b]&&(i=-1),b++);for(var j=[];xV(a[b]);)j.push(a[b++]);return c*(e+h*Math.pow(10,-g))*Math.pow(10,i*(j.length?parseInt(xp.apply(void 0,j),10):0))},x3={type:2},x4={type:3},x5={type:4},x6={type:13},x7={type:8},x8={type:21},x9={type:9},ya={type:10},yb={type:11},yc={type:12},yd={type:14},ye={type:23},yf={type:1},yg={type:25},yh={type:24},yi={type:26},yj={type:27},yk={type:28},yl={type:29},ym={type:31},yn={type:32},yo=function(){function a(){this._value=[]}return a.prototype.write=function(a){this._value=this._value.concat(xo(a))},a.prototype.read=function(){for(var a=[],b=this.consumeToken();b!==yn;)a.push(b),b=this.consumeToken();return a},a.prototype.consumeToken=function(){var a=this.consumeCodePoint();switch(a){case 34:return this.consumeStringToken(34);case 35:var b=this.peekCodePoint(0),c=this.peekCodePoint(1),d=this.peekCodePoint(2);if(x$(b)||x_(c,d)){var e=x0(b,c,d)?2:1,f=this.consumeName();return{type:5,value:f,flags:e}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),x6;break;case 39:return this.consumeStringToken(39);case 40:return x3;case 41:return x4;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),yd;break;case 43:case 46:if(x1(a,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(a),this.consumeNumericToken();break;case 44:return x5;case 45:var g=this.peekCodePoint(0),h=this.peekCodePoint(1);if(x1(a,g,h))return this.reconsumeCodePoint(a),this.consumeNumericToken();if(x0(a,g,h))return this.reconsumeCodePoint(a),this.consumeIdentLikeToken();if(45===g&&62===h)return this.consumeCodePoint(),this.consumeCodePoint(),yh;break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var i=this.consumeCodePoint();if(42===i&&47===(i=this.consumeCodePoint())||-1===i)return this.consumeToken()}break;case 58:return yi;case 59:return yj;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),yg;break;case 64:if(x0(this.peekCodePoint(0),this.peekCodePoint(1),this.peekCodePoint(2))){var f=this.consumeName();return{type:7,value:f}}break;case 91:return yk;case 92:if(x_(a,this.peekCodePoint(0)))return this.reconsumeCodePoint(a),this.consumeIdentLikeToken();break;case 93:return yl;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),x7;break;case 123:return yb;case 125:return yc;case 117:case 85:var j=this.peekCodePoint(0),k=this.peekCodePoint(1);return 43===j&&(xW(k)||63===k)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(a),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),x9;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),x8;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ya;break;case -1:return yn}return xY(a)?(this.consumeWhiteSpace(),ym):xV(a)?(this.reconsumeCodePoint(a),this.consumeNumericToken()):xZ(a)?(this.reconsumeCodePoint(a),this.consumeIdentLikeToken()):{type:6,value:xp(a)}},a.prototype.consumeCodePoint=function(){var a=this._value.shift();return void 0===a?-1:a},a.prototype.reconsumeCodePoint=function(a){this._value.unshift(a)},a.prototype.peekCodePoint=function(a){return a>=this._value.length?-1:this._value[a]},a.prototype.consumeUnicodeRangeToken=function(){for(var a=[],b=this.consumeCodePoint();xW(b)&&a.length<6;)a.push(b),b=this.consumeCodePoint();for(var c=!1;63===b&&a.length<6;)a.push(b),b=this.consumeCodePoint(),c=!0;if(c){var d=parseInt(xp.apply(void 0,a.map(function(a){return 63===a?48:a})),16),e=parseInt(xp.apply(void 0,a.map(function(a){return 63===a?70:a})),16);return{type:30,start:d,end:e}}var f=parseInt(xp.apply(void 0,a),16);if(!(45===this.peekCodePoint(0)&&xW(this.peekCodePoint(1))))return{type:30,start:f,end:f};this.consumeCodePoint(),b=this.consumeCodePoint();for(var g=[];xW(b)&&g.length<6;)g.push(b),b=this.consumeCodePoint();var e=parseInt(xp.apply(void 0,g),16);return{type:30,start:f,end:e}},a.prototype.consumeIdentLikeToken=function(){var a=this.consumeName();return"url"===a.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:a}):{type:20,value:a}},a.prototype.consumeUrlToken=function(){var a=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var b=this.peekCodePoint(0);if(39===b||34===b){var c=this.consumeStringToken(this.consumeCodePoint());return 0===c.type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:c.value}):(this.consumeBadUrlRemnants(),ye)}for(;;){var d,e=this.consumeCodePoint();if(-1===e||41===e)return{type:22,value:xp.apply(void 0,a)};if(xY(e)){if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))return this.consumeCodePoint(),{type:22,value:xp.apply(void 0,a)};return this.consumeBadUrlRemnants(),ye}if(34===e||39===e||40===e||(d=e)>=0&&d<=8||11===d||d>=14&&d<=31||127===d)return this.consumeBadUrlRemnants(),ye;if(92===e)if(!x_(e,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),ye;else a.push(this.consumeEscapedCodePoint());else a.push(e)}},a.prototype.consumeWhiteSpace=function(){for(;xY(this.peekCodePoint(0));)this.consumeCodePoint()},a.prototype.consumeBadUrlRemnants=function(){for(;;){var a=this.consumeCodePoint();if(41===a||-1===a)return;x_(a,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},a.prototype.consumeStringSlice=function(a){for(var b="";a>0;){var c=Math.min(5e4,a);b+=xp.apply(void 0,this._value.splice(0,c)),a-=c}return this._value.shift(),b},a.prototype.consumeStringToken=function(a){for(var b="",c=0;;){var d=this._value[c];if(-1===d||void 0===d||d===a)return{type:0,value:b+=this.consumeStringSlice(c)};if(10===d)return this._value.splice(0,c),yf;if(92===d){var e=this._value[c+1];-1!==e&&void 0!==e&&(10===e?(b+=this.consumeStringSlice(c),c=-1,this._value.shift()):x_(d,e)&&(b+=this.consumeStringSlice(c),b+=xp(this.consumeEscapedCodePoint()),c=-1))}c++}},a.prototype.consumeNumber=function(){var a=[],b=4,c=this.peekCodePoint(0);for((43===c||45===c)&&a.push(this.consumeCodePoint());xV(this.peekCodePoint(0));)a.push(this.consumeCodePoint());c=this.peekCodePoint(0);var d=this.peekCodePoint(1);if(46===c&&xV(d))for(a.push(this.consumeCodePoint(),this.consumeCodePoint()),b=8;xV(this.peekCodePoint(0));)a.push(this.consumeCodePoint());c=this.peekCodePoint(0),d=this.peekCodePoint(1);var e=this.peekCodePoint(2);if((69===c||101===c)&&((43===d||45===d)&&xV(e)||xV(d)))for(a.push(this.consumeCodePoint(),this.consumeCodePoint()),b=8;xV(this.peekCodePoint(0));)a.push(this.consumeCodePoint());return[x2(a),b]},a.prototype.consumeNumericToken=function(){var a=this.consumeNumber(),b=a[0],c=a[1],d=this.peekCodePoint(0);return x0(d,this.peekCodePoint(1),this.peekCodePoint(2))?{type:15,number:b,flags:c,unit:this.consumeName()}:37===d?(this.consumeCodePoint(),{type:16,number:b,flags:c}):{type:17,number:b,flags:c}},a.prototype.consumeEscapedCodePoint=function(){var a=this.consumeCodePoint();if(xW(a)){for(var b=xp(a);xW(this.peekCodePoint(0))&&b.length<6;)b+=xp(this.consumeCodePoint());xY(this.peekCodePoint(0))&&this.consumeCodePoint();var c=parseInt(b,16);return 0===c||c>=55296&&c<=57343||c>1114111?65533:c}return -1===a?65533:a},a.prototype.consumeName=function(){for(var a="";;){var b=this.consumeCodePoint();if(x$(b))a+=xp(b);else{if(!x_(b,this.peekCodePoint(0)))return this.reconsumeCodePoint(b),a;a+=xp(this.consumeEscapedCodePoint())}}},a}(),yp=function(){function a(a){this._tokens=a}return a.create=function(b){var c=new yo;return c.write(b),new a(c.read())},a.parseValue=function(b){return a.create(b).parseComponentValue()},a.parseValues=function(b){return a.create(b).parseComponentValues()},a.prototype.parseComponentValue=function(){for(var a=this.consumeToken();31===a.type;)a=this.consumeToken();if(32===a.type)throw SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(a);var b=this.consumeComponentValue();do a=this.consumeToken();while(31===a.type)if(32===a.type)return b;throw SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},a.prototype.parseComponentValues=function(){for(var a=[];;){var b=this.consumeComponentValue();if(32===b.type)return a;a.push(b),a.push()}},a.prototype.consumeComponentValue=function(){var a=this.consumeToken();switch(a.type){case 11:case 28:case 2:return this.consumeSimpleBlock(a.type);case 19:return this.consumeFunction(a)}return a},a.prototype.consumeSimpleBlock=function(a){for(var b={type:a,values:[]},c=this.consumeToken();;){if(32===c.type||yy(c,a))return b;this.reconsumeToken(c),b.values.push(this.consumeComponentValue()),c=this.consumeToken()}},a.prototype.consumeFunction=function(a){for(var b={name:a.value,values:[],type:18};;){var c=this.consumeToken();if(32===c.type||3===c.type)return b;this.reconsumeToken(c),b.values.push(this.consumeComponentValue())}},a.prototype.consumeToken=function(){var a=this._tokens.shift();return void 0===a?yn:a},a.prototype.reconsumeToken=function(a){this._tokens.unshift(a)},a}(),yq=function(a){return 15===a.type},yr=function(a){return 17===a.type},ys=function(a){return 20===a.type},yt=function(a){return 0===a.type},yu=function(a,b){return ys(a)&&a.value===b},yv=function(a){return 31!==a.type},yw=function(a){return 31!==a.type&&4!==a.type},yx=function(a){var b=[],c=[];return a.forEach(function(a){if(4===a.type){if(0===c.length)throw Error("Error parsing function args, zero tokens for arg");b.push(c),c=[];return}31!==a.type&&c.push(a)}),c.length&&b.push(c),b},yy=function(a,b){return 11===b&&12===a.type||28===b&&29===a.type||2===b&&3===a.type},yz=function(a){return 17===a.type||15===a.type},yA=function(a){return 16===a.type||yz(a)},yB=function(a){return a.length>1?[a[0],a[1]]:[a[0]]},yC={type:17,number:0,flags:4},yD={type:16,number:50,flags:4},yE={type:16,number:100,flags:4},yF=function(a,b,c){var d=a[0],e=a[1];return[yG(d,b),yG(void 0!==e?e:d,c)]},yG=function(a,b){if(16===a.type)return a.number/100*b;if(yq(a))switch(a.unit){case"rem":case"em":return 16*a.number}return a.number},yH="grad",yI="turn",yJ={parse:function(a,b){if(15===b.type)switch(b.unit){case"deg":return Math.PI*b.number/180;case yH:return Math.PI/200*b.number;case"rad":return b.number;case yI:return 2*Math.PI*b.number}throw Error("Unsupported angle type")}},yK=function(a){return 15===a.type&&("deg"===a.unit||a.unit===yH||"rad"===a.unit||a.unit===yI)},yL=function(a){switch(a.filter(ys).map(function(a){return a.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[yC,yC];case"to top":case"bottom":return yM(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[yC,yE];case"to right":case"left":return yM(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[yE,yE];case"to bottom":case"top":return yM(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[yE,yC];case"to left":case"right":return yM(270)}return 0},yM=function(a){return Math.PI*a/180},yN={parse:function(a,b){if(18===b.type){var c=yV[b.name];if(void 0===c)throw Error('Attempting to parse an unsupported color function "'+b.name+'"');return c(a,b.values)}if(5===b.type){if(3===b.value.length){var d=b.value.substring(0,1),e=b.value.substring(1,2),f=b.value.substring(2,3);return yQ(parseInt(d+d,16),parseInt(e+e,16),parseInt(f+f,16),1)}if(4===b.value.length){var d=b.value.substring(0,1),e=b.value.substring(1,2),f=b.value.substring(2,3),g=b.value.substring(3,4);return yQ(parseInt(d+d,16),parseInt(e+e,16),parseInt(f+f,16),parseInt(g+g,16)/255)}if(6===b.value.length){var d=b.value.substring(0,2),e=b.value.substring(2,4),f=b.value.substring(4,6);return yQ(parseInt(d,16),parseInt(e,16),parseInt(f,16),1)}if(8===b.value.length){var d=b.value.substring(0,2),e=b.value.substring(2,4),f=b.value.substring(4,6),g=b.value.substring(6,8);return yQ(parseInt(d,16),parseInt(e,16),parseInt(f,16),parseInt(g,16)/255)}}if(20===b.type){var h=yX[b.value.toUpperCase()];if(void 0!==h)return h}return yX.TRANSPARENT}},yO=function(a){return(255&a)==0},yP=function(a){var b=255&a,c=255&a>>8,d=255&a>>16,e=255&a>>24;return b<255?"rgba("+e+","+d+","+c+","+b/255+")":"rgb("+e+","+d+","+c+")"},yQ=function(a,b,c,d){return(a<<24|b<<16|c<<8|(0|Math.round(255*d)))>>>0},yR=function(a,b){if(17===a.type)return a.number;if(16===a.type){var c=3===b?1:255;return 3===b?a.number/100*c:Math.round(a.number/100*c)}return 0},yS=function(a,b){var c=b.filter(yw);if(3===c.length){var d=c.map(yR),e=d[0],f=d[1],g=d[2];return yQ(e,f,g,1)}if(4===c.length){var h=c.map(yR),e=h[0],f=h[1],g=h[2];return yQ(e,f,g,h[3])}return 0};function yT(a,b,c){return(c<0&&(c+=1),c>=1&&(c-=1),c<1/6)?(b-a)*c*6+a:c<.5?b:c<2/3?(b-a)*6*(2/3-c)+a:a}var yU=function(a,b){var c=b.filter(yw),d=c[0],e=c[1],f=c[2],g=c[3],h=(17===d.type?yM(d.number):yJ.parse(a,d))/(2*Math.PI),i=yA(e)?e.number/100:0,j=yA(f)?f.number/100:0,k=void 0!==g&&yA(g)?yG(g,1):1;if(0===i)return yQ(255*j,255*j,255*j,1);var l=j<=.5?j*(i+1):j+i-j*i,m=2*j-l;return yQ(255*yT(m,l,h+1/3),255*yT(m,l,h),255*yT(m,l,h-1/3),k)},yV={hsl:yU,hsla:yU,rgb:yS,rgba:yS},yW=function(a,b){return yN.parse(a,yp.create(b).parseComponentValue())},yX={ALICEBLUE:0xf0f8ffff,ANTIQUEWHITE:0xfaebd7ff,AQUA:0xffffff,AQUAMARINE:0x7fffd4ff,AZURE:0xf0ffffff,BEIGE:0xf5f5dcff,BISQUE:0xffe4c4ff,BLACK:255,BLANCHEDALMOND:0xffebcdff,BLUE:65535,BLUEVIOLET:0x8a2be2ff,BROWN:0xa52a2aff,BURLYWOOD:0xdeb887ff,CADETBLUE:0x5f9ea0ff,CHARTREUSE:0x7fff00ff,CHOCOLATE:0xd2691eff,CORAL:0xff7f50ff,CORNFLOWERBLUE:0x6495edff,CORNSILK:0xfff8dcff,CRIMSON:0xdc143cff,CYAN:0xffffff,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:0xb886bbff,DARKGRAY:0xa9a9a9ff,DARKGREEN:6553855,DARKGREY:0xa9a9a9ff,DARKKHAKI:0xbdb76bff,DARKMAGENTA:0x8b008bff,DARKOLIVEGREEN:0x556b2fff,DARKORANGE:0xff8c00ff,DARKORCHID:0x9932ccff,DARKRED:0x8b0000ff,DARKSALMON:0xe9967aff,DARKSEAGREEN:0x8fbc8fff,DARKSLATEBLUE:0x483d8bff,DARKSLATEGRAY:0x2f4f4fff,DARKSLATEGREY:0x2f4f4fff,DARKTURQUOISE:0xced1ff,DARKVIOLET:0x9400d3ff,DEEPPINK:0xff1493ff,DEEPSKYBLUE:0xbfffff,DIMGRAY:0x696969ff,DIMGREY:0x696969ff,DODGERBLUE:0x1e90ffff,FIREBRICK:0xb22222ff,FLORALWHITE:0xfffaf0ff,FORESTGREEN:0x228b22ff,FUCHSIA:0xff00ffff,GAINSBORO:0xdcdcdcff,GHOSTWHITE:0xf8f8ffff,GOLD:0xffd700ff,GOLDENROD:0xdaa520ff,GRAY:0x808080ff,GREEN:8388863,GREENYELLOW:0xadff2fff,GREY:0x808080ff,HONEYDEW:0xf0fff0ff,HOTPINK:0xff69b4ff,INDIANRED:0xcd5c5cff,INDIGO:0x4b0082ff,IVORY:0xfffff0ff,KHAKI:0xf0e68cff,LAVENDER:0xe6e6faff,LAVENDERBLUSH:0xfff0f5ff,LAWNGREEN:0x7cfc00ff,LEMONCHIFFON:0xfffacdff,LIGHTBLUE:0xadd8e6ff,LIGHTCORAL:0xf08080ff,LIGHTCYAN:0xe0ffffff,LIGHTGOLDENRODYELLOW:0xfafad2ff,LIGHTGRAY:0xd3d3d3ff,LIGHTGREEN:0x90ee90ff,LIGHTGREY:0xd3d3d3ff,LIGHTPINK:0xffb6c1ff,LIGHTSALMON:0xffa07aff,LIGHTSEAGREEN:0x20b2aaff,LIGHTSKYBLUE:0x87cefaff,LIGHTSLATEGRAY:0x778899ff,LIGHTSLATEGREY:0x778899ff,LIGHTSTEELBLUE:0xb0c4deff,LIGHTYELLOW:0xffffe0ff,LIME:0xff00ff,LIMEGREEN:0x32cd32ff,LINEN:0xfaf0e6ff,MAGENTA:0xff00ffff,MAROON:0x800000ff,MEDIUMAQUAMARINE:0x66cdaaff,MEDIUMBLUE:52735,MEDIUMORCHID:0xba55d3ff,MEDIUMPURPLE:0x9370dbff,MEDIUMSEAGREEN:0x3cb371ff,MEDIUMSLATEBLUE:0x7b68eeff,MEDIUMSPRINGGREEN:0xfa9aff,MEDIUMTURQUOISE:0x48d1ccff,MEDIUMVIOLETRED:0xc71585ff,MIDNIGHTBLUE:0x191970ff,MINTCREAM:0xf5fffaff,MISTYROSE:0xffe4e1ff,MOCCASIN:0xffe4b5ff,NAVAJOWHITE:0xffdeadff,NAVY:33023,OLDLACE:0xfdf5e6ff,OLIVE:0x808000ff,OLIVEDRAB:0x6b8e23ff,ORANGE:0xffa500ff,ORANGERED:0xff4500ff,ORCHID:0xda70d6ff,PALEGOLDENROD:0xeee8aaff,PALEGREEN:0x98fb98ff,PALETURQUOISE:0xafeeeeff,PALEVIOLETRED:0xdb7093ff,PAPAYAWHIP:0xffefd5ff,PEACHPUFF:0xffdab9ff,PERU:0xcd853fff,PINK:0xffc0cbff,PLUM:0xdda0ddff,POWDERBLUE:0xb0e0e6ff,PURPLE:0x800080ff,REBECCAPURPLE:0x663399ff,RED:0xff0000ff,ROSYBROWN:0xbc8f8fff,ROYALBLUE:0x4169e1ff,SADDLEBROWN:0x8b4513ff,SALMON:0xfa8072ff,SANDYBROWN:0xf4a460ff,SEAGREEN:0x2e8b57ff,SEASHELL:0xfff5eeff,SIENNA:0xa0522dff,SILVER:0xc0c0c0ff,SKYBLUE:0x87ceebff,SLATEBLUE:0x6a5acdff,SLATEGRAY:0x708090ff,SLATEGREY:0x708090ff,SNOW:0xfffafaff,SPRINGGREEN:0xff7fff,STEELBLUE:0x4682b4ff,TAN:0xd2b48cff,TEAL:8421631,THISTLE:0xd8bfd8ff,TOMATO:0xff6347ff,TRANSPARENT:0,TURQUOISE:0x40e0d0ff,VIOLET:0xee82eeff,WHEAT:0xf5deb3ff,WHITE:0xffffffff,WHITESMOKE:0xf5f5f5ff,YELLOW:0xffff00ff,YELLOWGREEN:0x9acd32ff},yY={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(a,b){return b.map(function(a){if(ys(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},yZ={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},y$=function(a,b){var c=yN.parse(a,b[0]),d=b[1];return d&&yA(d)?{color:c,stop:d}:{color:c,stop:null}},y_=function(a,b){var c=a[0],d=a[a.length-1];null===c.stop&&(c.stop=yC),null===d.stop&&(d.stop=yE);for(var e=[],f=0,g=0;g<a.length;g++){var h=a[g].stop;if(null!==h){var i=yG(h,b);i>f?e.push(i):e.push(f),f=i}else e.push(null)}for(var j=null,g=0;g<e.length;g++){var k=e[g];if(null===k)null===j&&(j=g);else if(null!==j){for(var l=g-j,m=(k-e[j-1])/(l+1),n=1;n<=l;n++)e[j+n-1]=m*n;j=null}}return a.map(function(a,c){return{color:a.color,stop:Math.max(Math.min(1,e[c]/b),0)}})},y0=function(a,b,c){var d=b/2,e=c/2,f=yG(a[0],b)-d;return(Math.atan2(e-yG(a[1],c),f)+2*Math.PI)%(2*Math.PI)},y1=function(a,b,c){var d="number"==typeof a?a:y0(a,b,c),e=Math.abs(b*Math.sin(d))+Math.abs(c*Math.cos(d)),f=b/2,g=c/2,h=e/2,i=Math.sin(d-Math.PI/2)*h,j=Math.cos(d-Math.PI/2)*h;return[e,f-j,f+j,g-i,g+i]},y2=function(a,b){return Math.sqrt(a*a+b*b)},y3=function(a,b,c,d,e){return[[0,0],[0,b],[a,0],[a,b]].reduce(function(a,b){var f=y2(c-b[0],d-b[1]);return(e?f<a.optimumDistance:f>a.optimumDistance)?{optimumCorner:b,optimumDistance:f}:a},{optimumDistance:e?1/0:-1/0,optimumCorner:null}).optimumCorner},y4=function(a,b,c,d,e){var f=0,g=0;switch(a.size){case 0:0===a.shape?f=g=Math.min(Math.abs(b),Math.abs(b-d),Math.abs(c),Math.abs(c-e)):1===a.shape&&(f=Math.min(Math.abs(b),Math.abs(b-d)),g=Math.min(Math.abs(c),Math.abs(c-e)));break;case 2:if(0===a.shape)f=g=Math.min(y2(b,c),y2(b,c-e),y2(b-d,c),y2(b-d,c-e));else if(1===a.shape){var h=Math.min(Math.abs(c),Math.abs(c-e))/Math.min(Math.abs(b),Math.abs(b-d)),i=y3(d,e,b,c,!0),j=i[0],k=i[1];f=y2(j-b,(k-c)/h),g=h*f}break;case 1:0===a.shape?f=g=Math.max(Math.abs(b),Math.abs(b-d),Math.abs(c),Math.abs(c-e)):1===a.shape&&(f=Math.max(Math.abs(b),Math.abs(b-d)),g=Math.max(Math.abs(c),Math.abs(c-e)));break;case 3:if(0===a.shape)f=g=Math.max(y2(b,c),y2(b,c-e),y2(b-d,c),y2(b-d,c-e));else if(1===a.shape){var h=Math.max(Math.abs(c),Math.abs(c-e))/Math.max(Math.abs(b),Math.abs(b-d)),l=y3(d,e,b,c,!1),j=l[0],k=l[1];f=y2(j-b,(k-c)/h),g=h*f}}return Array.isArray(a.size)&&(f=yG(a.size[0],d),g=2===a.size.length?yG(a.size[1],e):f),[f,g]},y5=function(a,b){var c=yM(180),d=[];return yx(b).forEach(function(b,e){if(0===e){var f=b[0];if(20===f.type&&-1!==["top","left","right","bottom"].indexOf(f.value)){c=yL(b);return}if(yK(f)){c=(yJ.parse(a,f)+yM(270))%yM(360);return}}var g=y$(a,b);d.push(g)}),{angle:c,stops:d,type:1}},y6="closest-side",y7="farthest-side",y8="closest-corner",y9="farthest-corner",za="circle",zb="ellipse",zc="cover",zd="contain",ze=function(a,b){var c=0,d=3,e=[],f=[];return yx(b).forEach(function(b,g){var h=!0;if(0===g?h=b.reduce(function(a,b){if(ys(b))switch(b.value){case"center":return f.push(yD),!1;case"top":case"left":return f.push(yC),!1;case"right":case"bottom":return f.push(yE),!1}else if(yA(b)||yz(b))return f.push(b),!1;return a},h):1===g&&(h=b.reduce(function(a,b){if(ys(b))switch(b.value){case za:return c=0,!1;case zb:return c=1,!1;case zd:case y6:return d=0,!1;case y7:return d=1,!1;case y8:return d=2,!1;case zc:case y9:return d=3,!1}else if(yz(b)||yA(b))return Array.isArray(d)||(d=[]),d.push(b),!1;return a},h)),h){var i=y$(a,b);e.push(i)}}),{size:d,shape:c,stops:e,position:f,type:2}},zf={parse:function(a,b){if(22===b.type){var c={url:b.value,type:0};return a.cache.addImage(b.value),c}if(18===b.type){var d=zg[b.name];if(void 0===d)throw Error('Attempting to parse an unsupported image function "'+b.name+'"');return d(a,b.values)}throw Error("Unsupported image type "+b.type)}},zg={"linear-gradient":function(a,b){var c=yM(180),d=[];return yx(b).forEach(function(b,e){if(0===e){var f=b[0];if(20===f.type&&"to"===f.value){c=yL(b);return}if(yK(f)){c=yJ.parse(a,f);return}}var g=y$(a,b);d.push(g)}),{angle:c,stops:d,type:1}},"-moz-linear-gradient":y5,"-ms-linear-gradient":y5,"-o-linear-gradient":y5,"-webkit-linear-gradient":y5,"radial-gradient":function(a,b){var c=0,d=3,e=[],f=[];return yx(b).forEach(function(b,g){var h=!0;if(0===g){var i=!1;h=b.reduce(function(a,b){if(i)if(ys(b))switch(b.value){case"center":f.push(yD);break;case"top":case"left":f.push(yC);break;case"right":case"bottom":f.push(yE)}else(yA(b)||yz(b))&&f.push(b);else if(ys(b))switch(b.value){case za:return c=0,!1;case zb:return c=1,!1;case"at":return i=!0,!1;case y6:return d=0,!1;case zc:case y7:return d=1,!1;case zd:case y8:return d=2,!1;case y9:return d=3,!1}else if(yz(b)||yA(b))return Array.isArray(d)||(d=[]),d.push(b),!1;return a},h)}if(h){var j=y$(a,b);e.push(j)}}),{size:d,shape:c,stops:e,position:f,type:2}},"-moz-radial-gradient":ze,"-ms-radial-gradient":ze,"-o-radial-gradient":ze,"-webkit-radial-gradient":ze,"-webkit-gradient":function(a,b){var c=yM(180),d=[],e=1;return yx(b).forEach(function(b,c){var f=b[0];if(0===c){if(ys(f)&&"linear"===f.value){e=1;return}else if(ys(f)&&"radial"===f.value){e=2;return}}if(18===f.type){if("from"===f.name){var g=yN.parse(a,f.values[0]);d.push({stop:yC,color:g})}else if("to"===f.name){var g=yN.parse(a,f.values[0]);d.push({stop:yE,color:g})}else if("color-stop"===f.name){var h=f.values.filter(yw);if(2===h.length){var g=yN.parse(a,h[1]),i=h[0];yr(i)&&d.push({stop:{type:16,number:100*i.number,flags:i.flags},color:g})}}}}),1===e?{angle:(c+yM(180))%yM(360),stops:d,type:e}:{size:3,shape:0,stops:d,position:[],type:e}}},zh={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(a,b){if(0===b.length)return[];var c=b[0];return 20===c.type&&"none"===c.value?[]:b.filter(function(a){var b;return yw(a)&&(20!==(b=a).type||"none"!==b.value)&&(18!==b.type||!!zg[b.name])}).map(function(b){return zf.parse(a,b)})}},zi={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(a,b){return b.map(function(a){if(ys(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},zj={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(a,b){return yx(b).map(function(a){return a.filter(yA)}).map(yB)}},zk={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(a,b){return yx(b).map(function(a){return a.filter(ys).map(function(a){return a.value}).join(" ")}).map(zl)}},zl=function(a){switch(a){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(a){a.AUTO="auto",a.CONTAIN="contain",a.COVER="cover"}(d||(d={}));var zm={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(a,b){return yx(b).map(function(a){return a.filter(zn)})}},zn=function(a){return ys(a)||yA(a)},zo=function(a){return{name:"border-"+a+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},zp=zo("top"),zq=zo("right"),zr=zo("bottom"),zs=zo("left"),zt=function(a){return{name:"border-radius-"+a,initialValue:"0 0",prefix:!1,type:1,parse:function(a,b){return yB(b.filter(yA))}}},zu=zt("top-left"),zv=zt("top-right"),zw=zt("bottom-right"),zx=zt("bottom-left"),zy=function(a){return{name:"border-"+a+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(a,b){switch(b){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},zz=zy("top"),zA=zy("right"),zB=zy("bottom"),zC=zy("left"),zD=function(a){return{name:"border-"+a+"-width",initialValue:"0",type:0,prefix:!1,parse:function(a,b){return yq(b)?b.number:0}}},zE=zD("top"),zF=zD("right"),zG=zD("bottom"),zH=zD("left"),zI={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},zJ={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(a,b){return+("rtl"===b)}},zK={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(a,b){return b.filter(ys).reduce(function(a,b){return a|zL(b.value)},0)}},zL=function(a){switch(a){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 0x1000000;case"inline-block":return 0x2000000;case"inline-list-item":return 0x4000000;case"inline-table":return 0x8000000;case"inline-flex":return 0x10000000;case"inline-grid":return 0x20000000}return 0},zM={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(a,b){switch(b){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},zN={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(a,b){return 20===b.type&&"normal"===b.value?0:17===b.type||15===b.type?b.number:0}};!function(a){a.NORMAL="normal",a.STRICT="strict"}(e||(e={}));var zO={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(a,b){return"strict"===b?e.STRICT:e.NORMAL}},zP={name:"line-height",initialValue:"normal",prefix:!1,type:4},zQ=function(a,b){return ys(a)&&"normal"===a.value?1.2*b:17===a.type?b*a.number:yA(a)?yG(a,b):b},zR={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(a,b){return 20===b.type&&"none"===b.value?null:zf.parse(a,b)}},zS={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(a,b){return+("inside"!==b)}},zT={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(a,b){switch(b){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return -1}}},zU=function(a){return{name:"margin-"+a,initialValue:"0",prefix:!1,type:4}},zV=zU("top"),zW=zU("right"),zX=zU("bottom"),zY=zU("left"),zZ={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(a,b){return b.filter(ys).map(function(a){switch(a.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},z$={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(a,b){return"break-word"===b?"break-word":"normal"}},z_=function(a){return{name:"padding-"+a,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},z0=z_("top"),z1=z_("right"),z2=z_("bottom"),z3=z_("left"),z4={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(a,b){switch(b){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},z5={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(a,b){switch(b){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},z6={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(a,b){return 1===b.length&&yu(b[0],"none")?[]:yx(b).map(function(b){for(var c={color:yX.TRANSPARENT,offsetX:yC,offsetY:yC,blur:yC},d=0,e=0;e<b.length;e++){var f=b[e];yz(f)?(0===d?c.offsetX=f:1===d?c.offsetY=f:c.blur=f,d++):c.color=yN.parse(a,f)}return c})}},z7={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(a,b){switch(b){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},z8={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(a,b){if(20===b.type&&"none"===b.value)return null;if(18===b.type){var c=z9[b.name];if(void 0===c)throw Error('Attempting to parse an unsupported transform function "'+b.name+'"');return c(b.values)}return null}},z9={matrix:function(a){var b=a.filter(function(a){return 17===a.type}).map(function(a){return a.number});return 6===b.length?b:null},matrix3d:function(a){var b=a.filter(function(a){return 17===a.type}).map(function(a){return a.number}),c=b[0],d=b[1];b[2],b[3];var e=b[4],f=b[5];b[6],b[7],b[8],b[9],b[10],b[11];var g=b[12],h=b[13];return b[14],b[15],16===b.length?[c,d,e,f,g,h]:null}},Aa={type:16,number:50,flags:4},Ab=[Aa,Aa],Ac={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(a,b){var c=b.filter(yA);return 2!==c.length?Ab:[c[0],c[1]]}},Ad={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(a,b){switch(b){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(a){a.NORMAL="normal",a.BREAK_ALL="break-all",a.KEEP_ALL="keep-all"}(f||(f={}));for(var Ae={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(a,b){switch(b){case"break-all":return f.BREAK_ALL;case"keep-all":return f.KEEP_ALL;default:return f.NORMAL}}},Af={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(a,b){if(20===b.type)return{auto:!0,order:0};if(yr(b))return{auto:!1,order:b.number};throw Error("Invalid z-index number parsed")}},Ag={parse:function(a,b){if(15===b.type)switch(b.unit.toLowerCase()){case"s":return 1e3*b.number;case"ms":return b.number}throw Error("Unsupported time type")}},Ah={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(a,b){return yr(b)?b.number:1}},Ai={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Aj={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(a,b){return b.filter(ys).map(function(a){switch(a.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(a){return 0!==a})}},Ak={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(a,b){var c=[],d=[];return b.forEach(function(a){switch(a.type){case 20:case 0:c.push(a.value);break;case 17:c.push(a.number.toString());break;case 4:d.push(c.join(" ")),c.length=0}}),c.length&&d.push(c.join(" ")),d.map(function(a){return -1===a.indexOf(" ")?a:"'"+a+"'"})}},Al={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Am={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(a,b){return yr(b)?b.number:ys(b)&&"bold"===b.value?700:400}},An={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(a,b){return b.filter(ys).map(function(a){return a.value})}},Ao={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(a,b){switch(b){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Ap=function(a,b){return(a&b)!=0},Aq={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(a,b){if(0===b.length)return[];var c=b[0];return 20===c.type&&"none"===c.value?[]:b}},Ar={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(a,b){if(0===b.length)return null;var c=b[0];if(20===c.type&&"none"===c.value)return null;for(var d=[],e=b.filter(yv),f=0;f<e.length;f++){var g=e[f],h=e[f+1];if(20===g.type){var i=h&&yr(h)?h.number:1;d.push({counter:g.value,increment:i})}}return d}},As={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(a,b){if(0===b.length)return[];for(var c=[],d=b.filter(yv),e=0;e<d.length;e++){var f=d[e],g=d[e+1];if(ys(f)&&"none"!==f.value){var h=g&&yr(g)?g.number:0;c.push({counter:f.value,reset:h})}}return c}},At={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(a,b){return b.filter(yq).map(function(b){return Ag.parse(a,b)})}},Au={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(a,b){if(0===b.length)return null;var c=b[0];if(20===c.type&&"none"===c.value)return null;var d=[],e=b.filter(yt);if(e.length%2!=0)return null;for(var f=0;f<e.length;f+=2){var g=e[f].value,h=e[f+1].value;d.push({open:g,close:h})}return d}},Av=function(a,b,c){if(!a)return"";var d=a[Math.min(b,a.length-1)];return d?c?d.open:d.close:""},Aw={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(a,b){return 1===b.length&&yu(b[0],"none")?[]:yx(b).map(function(b){for(var c={color:255,offsetX:yC,offsetY:yC,blur:yC,spread:yC,inset:!1},d=0,e=0;e<b.length;e++){var f=b[e];yu(f,"inset")?c.inset=!0:yz(f)?(0===d?c.offsetX=f:1===d?c.offsetY=f:2===d?c.blur=f:c.spread=f,d++):c.color=yN.parse(a,f)}return c})}},Ax={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(a,b){var c=[];return b.filter(ys).forEach(function(a){switch(a.value){case"stroke":c.push(1);break;case"fill":c.push(0);break;case"markers":c.push(2)}}),[0,1,2].forEach(function(a){-1===c.indexOf(a)&&c.push(a)}),c}},Ay={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Az={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(a,b){return yq(b)?b.number:0}},AA=function(){function a(a,b){this.animationDuration=AD(a,At,b.animationDuration),this.backgroundClip=AD(a,yY,b.backgroundClip),this.backgroundColor=AD(a,yZ,b.backgroundColor),this.backgroundImage=AD(a,zh,b.backgroundImage),this.backgroundOrigin=AD(a,zi,b.backgroundOrigin),this.backgroundPosition=AD(a,zj,b.backgroundPosition),this.backgroundRepeat=AD(a,zk,b.backgroundRepeat),this.backgroundSize=AD(a,zm,b.backgroundSize),this.borderTopColor=AD(a,zp,b.borderTopColor),this.borderRightColor=AD(a,zq,b.borderRightColor),this.borderBottomColor=AD(a,zr,b.borderBottomColor),this.borderLeftColor=AD(a,zs,b.borderLeftColor),this.borderTopLeftRadius=AD(a,zu,b.borderTopLeftRadius),this.borderTopRightRadius=AD(a,zv,b.borderTopRightRadius),this.borderBottomRightRadius=AD(a,zw,b.borderBottomRightRadius),this.borderBottomLeftRadius=AD(a,zx,b.borderBottomLeftRadius),this.borderTopStyle=AD(a,zz,b.borderTopStyle),this.borderRightStyle=AD(a,zA,b.borderRightStyle),this.borderBottomStyle=AD(a,zB,b.borderBottomStyle),this.borderLeftStyle=AD(a,zC,b.borderLeftStyle),this.borderTopWidth=AD(a,zE,b.borderTopWidth),this.borderRightWidth=AD(a,zF,b.borderRightWidth),this.borderBottomWidth=AD(a,zG,b.borderBottomWidth),this.borderLeftWidth=AD(a,zH,b.borderLeftWidth),this.boxShadow=AD(a,Aw,b.boxShadow),this.color=AD(a,zI,b.color),this.direction=AD(a,zJ,b.direction),this.display=AD(a,zK,b.display),this.float=AD(a,zM,b.cssFloat),this.fontFamily=AD(a,Ak,b.fontFamily),this.fontSize=AD(a,Al,b.fontSize),this.fontStyle=AD(a,Ao,b.fontStyle),this.fontVariant=AD(a,An,b.fontVariant),this.fontWeight=AD(a,Am,b.fontWeight),this.letterSpacing=AD(a,zN,b.letterSpacing),this.lineBreak=AD(a,zO,b.lineBreak),this.lineHeight=AD(a,zP,b.lineHeight),this.listStyleImage=AD(a,zR,b.listStyleImage),this.listStylePosition=AD(a,zS,b.listStylePosition),this.listStyleType=AD(a,zT,b.listStyleType),this.marginTop=AD(a,zV,b.marginTop),this.marginRight=AD(a,zW,b.marginRight),this.marginBottom=AD(a,zX,b.marginBottom),this.marginLeft=AD(a,zY,b.marginLeft),this.opacity=AD(a,Ah,b.opacity);var c,d,e=AD(a,zZ,b.overflow);this.overflowX=e[0],this.overflowY=e[+(e.length>1)],this.overflowWrap=AD(a,z$,b.overflowWrap),this.paddingTop=AD(a,z0,b.paddingTop),this.paddingRight=AD(a,z1,b.paddingRight),this.paddingBottom=AD(a,z2,b.paddingBottom),this.paddingLeft=AD(a,z3,b.paddingLeft),this.paintOrder=AD(a,Ax,b.paintOrder),this.position=AD(a,z5,b.position),this.textAlign=AD(a,z4,b.textAlign),this.textDecorationColor=AD(a,Ai,null!=(c=b.textDecorationColor)?c:b.color),this.textDecorationLine=AD(a,Aj,null!=(d=b.textDecorationLine)?d:b.textDecoration),this.textShadow=AD(a,z6,b.textShadow),this.textTransform=AD(a,z7,b.textTransform),this.transform=AD(a,z8,b.transform),this.transformOrigin=AD(a,Ac,b.transformOrigin),this.visibility=AD(a,Ad,b.visibility),this.webkitTextStrokeColor=AD(a,Ay,b.webkitTextStrokeColor),this.webkitTextStrokeWidth=AD(a,Az,b.webkitTextStrokeWidth),this.wordBreak=AD(a,Ae,b.wordBreak),this.zIndex=AD(a,Af,b.zIndex)}return a.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},a.prototype.isTransparent=function(){return yO(this.backgroundColor)},a.prototype.isTransformed=function(){return null!==this.transform},a.prototype.isPositioned=function(){return 0!==this.position},a.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},a.prototype.isFloating=function(){return 0!==this.float},a.prototype.isInlineLevel=function(){return Ap(this.display,4)||Ap(this.display,0x2000000)||Ap(this.display,0x10000000)||Ap(this.display,0x20000000)||Ap(this.display,0x4000000)||Ap(this.display,0x8000000)},a}(),AB=function(a,b){this.content=AD(a,Aq,b.content),this.quotes=AD(a,Au,b.quotes)},AC=function(a,b){this.counterIncrement=AD(a,Ar,b.counterIncrement),this.counterReset=AD(a,As,b.counterReset)},AD=function(a,b,c){var d=new yo,e=null!=c?c.toString():b.initialValue;d.write(e);var f=new yp(d.read());switch(b.type){case 2:var g=f.parseComponentValue();return b.parse(a,ys(g)?g.value:b.initialValue);case 0:return b.parse(a,f.parseComponentValue());case 1:return b.parse(a,f.parseComponentValues());case 4:return f.parseComponentValue();case 3:switch(b.format){case"angle":return yJ.parse(a,f.parseComponentValue());case"color":return yN.parse(a,f.parseComponentValue());case"image":return zf.parse(a,f.parseComponentValue());case"length":var h=f.parseComponentValue();return yz(h)?h:yC;case"length-percentage":var i=f.parseComponentValue();return yA(i)?i:yC;case"time":return Ag.parse(a,f.parseComponentValue())}}},AE=function(a){switch(a.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},AF=function(a,b){var c=AE(a);return 1===c||b===c},AG=function(a,b){this.context=a,this.textNodes=[],this.elements=[],this.flags=0,AF(b,3),this.styles=new AA(a,window.getComputedStyle(b,null)),BN(b)&&(this.styles.animationDuration.some(function(a){return a>0})&&(b.style.animationDuration="0s"),null!==this.styles.transform&&(b.style.transform="none")),this.bounds=xm(this.context,b),AF(b,4)&&(this.flags|=16)},AH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AI="undefined"==typeof Uint8Array?[]:new Uint8Array(256),AJ=0;AJ<AH.length;AJ++)AI[AH.charCodeAt(AJ)]=AJ;for(var AK=function(a){var b,c,d,e,f,g=.75*a.length,h=a.length,i=0;"="===a[a.length-1]&&(g--,"="===a[a.length-2]&&g--);var j="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(g):Array(g),k=Array.isArray(j)?j:new Uint8Array(j);for(b=0;b<h;b+=4)c=AI[a.charCodeAt(b)],d=AI[a.charCodeAt(b+1)],e=AI[a.charCodeAt(b+2)],f=AI[a.charCodeAt(b+3)],k[i++]=c<<2|d>>4,k[i++]=(15&d)<<4|e>>2,k[i++]=(3&e)<<6|63&f;return j},AL=function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c.push(a[d+1]<<8|a[d]);return c},AM=function(a){for(var b=a.length,c=[],d=0;d<b;d+=4)c.push(a[d+3]<<24|a[d+2]<<16|a[d+1]<<8|a[d]);return c},AN=2112,AO=function(a,b,c){return a.slice?a.slice(b,c):new Uint16Array(Array.prototype.slice.call(a,b,c))},AP=function(){function a(a,b,c,d,e,f){this.initialValue=a,this.errorValue=b,this.highStart=c,this.highValueIndex=d,this.index=e,this.data=f}return a.prototype.get=function(a){var b;if(a>=0){if(a<55296||a>56319&&a<=65535)return b=((b=this.index[a>>5])<<2)+(31&a),this.data[b];if(a<=65535)return b=((b=this.index[2048+(a-55296>>5)])<<2)+(31&a),this.data[b];if(a<this.highStart)return b=AN-32+(a>>11),b=this.index[b]+(a>>5&63),b=((b=this.index[b])<<2)+(31&a),this.data[b];if(a<=1114111)return this.data[this.highValueIndex]}return this.errorValue},a}(),AQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AR="undefined"==typeof Uint8Array?[]:new Uint8Array(256),AS=0;AS<AQ.length;AS++)AR[AQ.charCodeAt(AS)]=AS;var AT=function(a){for(var b=[],c=0,d=a.length;c<d;){var e=a.charCodeAt(c++);if(e>=55296&&e<=56319&&c<d){var f=a.charCodeAt(c++);(64512&f)==56320?b.push(((1023&e)<<10)+(1023&f)+65536):(b.push(e),c--)}else b.push(e)}return b},AU=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(String.fromCodePoint)return String.fromCodePoint.apply(String,a);var c=a.length;if(!c)return"";for(var d=[],e=-1,f="";++e<c;){var g=a[e];g<=65535?d.push(g):(g-=65536,d.push((g>>10)+55296,g%1024+56320)),(e+1===c||d.length>16384)&&(f+=String.fromCharCode.apply(String,d),d.length=0)}return f},AV=function(a,b){var c,d,e=AK(a),f=Array.isArray(e)?AM(e):new Uint32Array(e),g=Array.isArray(e)?AL(e):new Uint16Array(e),h=AO(g,12,f[4]/2),i=2===f[5]?AO(g,(24+f[4])/2):(c=Math.ceil((24+f[4])/4),f.slice?f.slice(c,void 0):new Uint32Array(Array.prototype.slice.call(f,c,d)));return new AP(f[0],f[1],f[2],f[3],h,i)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),AW=function(a){return AV.get(a)},AX=function(a,b,c){var d=c-2,e=b[d],f=b[c-1],g=b[c];if(2===f&&3===g)return"×";if(2===f||3===f||4===f||2===g||3===g||4===g)return"÷";if(8===f&&-1!==[8,9,11,12].indexOf(g)||(11===f||9===f)&&(9===g||10===g)||(12===f||10===f)&&10===g||13===g||5===g||7===g||1===f)return"×";if(13===f&&14===g){for(;5===e;)e=b[--d];if(14===e)return"×"}if(15===f&&15===g){for(var h=0;15===e;)h++,e=b[--d];if(h%2==0)return"×"}return"÷"},AY=function(a){var b=AT(a),c=b.length,d=0,e=0,f=b.map(AW);return{next:function(){if(d>=c)return{done:!0,value:null};for(var a="×";d<c&&"×"===(a=AX(b,f,++d)););if("×"!==a||d===c){var g=AU.apply(null,b.slice(e,d));return e=d,{value:g,done:!1}}return{done:!0,value:null}}}},AZ=function(a){for(var b,c=AY(a),d=[];!(b=c.next()).done;)b.value&&d.push(b.value.slice());return d},A$=function(a){if(a.createRange){var b=a.createRange();if(b.getBoundingClientRect){var c=a.createElement("boundtest");c.style.height="123px",c.style.display="block",a.body.appendChild(c),b.selectNode(c);var d=Math.round(b.getBoundingClientRect().height);if(a.body.removeChild(c),123===d)return!0}}return!1},A_=function(a){var b=a.createElement("boundtest");b.style.width="50px",b.style.display="block",b.style.fontSize="12px",b.style.letterSpacing="0px",b.style.wordSpacing="0px",a.body.appendChild(b);var c=a.createRange();b.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var d=b.firstChild,e=xo(d.data).map(function(a){return xp(a)}),f=0,g={},h=e.every(function(a,b){c.setStart(d,f),c.setEnd(d,f+a.length);var e=c.getBoundingClientRect();f+=a.length;var h=e.x>g.x||e.y>g.y;return g=e,0===b||h});return a.body.removeChild(b),h},A0=function(a){var b=new Image,c=a.createElement("canvas"),d=c.getContext("2d");if(!d)return!1;b.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{d.drawImage(b,0,0),c.toDataURL()}catch(a){return!1}return!0},A1=function(a){return 0===a[0]&&255===a[1]&&0===a[2]&&255===a[3]},A2=function(a){var b=a.createElement("canvas");b.width=100,b.height=100;var c=b.getContext("2d");if(!c)return Promise.reject(!1);c.fillStyle="rgb(0, 255, 0)",c.fillRect(0,0,100,100);var d=new Image,e=b.toDataURL();d.src=e;var f=A3(100,100,0,0,d);return c.fillStyle="red",c.fillRect(0,0,100,100),A4(f).then(function(b){c.drawImage(b,0,0);var d=c.getImageData(0,0,100,100).data;c.fillStyle="red",c.fillRect(0,0,100,100);var f=a.createElement("div");return f.style.backgroundImage="url("+e+")",f.style.height="100px",A1(d)?A4(A3(100,100,0,0,f)):Promise.reject(!1)}).then(function(a){return c.drawImage(a,0,0),A1(c.getImageData(0,0,100,100).data)}).catch(function(){return!1})},A3=function(a,b,c,d,e){var f="http://www.w3.org/2000/svg",g=document.createElementNS(f,"svg"),h=document.createElementNS(f,"foreignObject");return g.setAttributeNS(null,"width",a.toString()),g.setAttributeNS(null,"height",b.toString()),h.setAttributeNS(null,"width","100%"),h.setAttributeNS(null,"height","100%"),h.setAttributeNS(null,"x",c.toString()),h.setAttributeNS(null,"y",d.toString()),h.setAttributeNS(null,"externalResourcesRequired","true"),g.appendChild(h),h.appendChild(e),g},A4=function(a){return new Promise(function(b,c){var d=new Image;d.onload=function(){return b(d)},d.onerror=c,d.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(a))})},A5={get SUPPORT_RANGE_BOUNDS(){var A6=A$(document);return Object.defineProperty(A5,"SUPPORT_RANGE_BOUNDS",{value:A6}),A6},get SUPPORT_WORD_BREAKING(){var A7=A5.SUPPORT_RANGE_BOUNDS&&A_(document);return Object.defineProperty(A5,"SUPPORT_WORD_BREAKING",{value:A7}),A7},get SUPPORT_SVG_DRAWING(){var A8=A0(document);return Object.defineProperty(A5,"SUPPORT_SVG_DRAWING",{value:A8}),A8},get SUPPORT_FOREIGNOBJECT_DRAWING(){var A9="function"==typeof Array.from&&"function"==typeof window.fetch?A2(document):Promise.resolve(!1);return Object.defineProperty(A5,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A9}),A9},get SUPPORT_CORS_IMAGES(){var Ba=void 0!==new Image().crossOrigin;return Object.defineProperty(A5,"SUPPORT_CORS_IMAGES",{value:Ba}),Ba},get SUPPORT_RESPONSE_TYPE(){var Bb="string"==typeof new XMLHttpRequest().responseType;return Object.defineProperty(A5,"SUPPORT_RESPONSE_TYPE",{value:Bb}),Bb},get SUPPORT_CORS_XHR(){var Bc="withCredentials"in new XMLHttpRequest;return Object.defineProperty(A5,"SUPPORT_CORS_XHR",{value:Bc}),Bc},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var Bd=!!("undefined"!=typeof Intl&&Intl.Segmenter);return Object.defineProperty(A5,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:Bd}),Bd}},Be=function(a,b){this.text=a,this.bounds=b},Bf=function(a,b,c,d){var e=Bj(b,c),f=[],g=0;return e.forEach(function(b){if(c.textDecorationLine.length||b.trim().length>0)if(A5.SUPPORT_RANGE_BOUNDS){var e=Bh(d,g,b.length).getClientRects();if(e.length>1){var h=Bi(b),i=0;h.forEach(function(b){f.push(new Be(b,xl.fromDOMRectList(a,Bh(d,i+g,b.length).getClientRects()))),i+=b.length})}else f.push(new Be(b,xl.fromDOMRectList(a,e)))}else{var j=d.splitText(b.length);f.push(new Be(b,Bg(a,d))),d=j}else A5.SUPPORT_RANGE_BOUNDS||(d=d.splitText(b.length));g+=b.length}),f},Bg=function(a,b){var c=b.ownerDocument;if(c){var d=c.createElement("html2canvaswrapper");d.appendChild(b.cloneNode(!0));var e=b.parentNode;if(e){e.replaceChild(d,b);var f=xm(a,d);return d.firstChild&&e.replaceChild(d.firstChild,d),f}}return xl.EMPTY},Bh=function(a,b,c){var d=a.ownerDocument;if(!d)throw Error("Node has no owner document");var e=d.createRange();return e.setStart(a,b),e.setEnd(a,b+c),e},Bi=function(a){return A5.SUPPORT_NATIVE_TEXT_SEGMENTATION?Array.from(new Intl.Segmenter(void 0,{granularity:"grapheme"}).segment(a)).map(function(a){return a.segment}):AZ(a)},Bj=function(a,b){return 0!==b.letterSpacing?Bi(a):A5.SUPPORT_NATIVE_TEXT_SEGMENTATION?Array.from(new Intl.Segmenter(void 0,{granularity:"word"}).segment(a)).map(function(a){return a.segment}):Bl(a,b)},Bk=[32,160,4961,65792,65793,4153,4241],Bl=function(a,b){for(var c,d=xU(a,{lineBreak:b.lineBreak,wordBreak:"break-word"===b.overflowWrap?"break-word":b.wordBreak}),e=[];!(c=d.next()).done;)!function(){if(c.value){var a=xo(c.value.slice()),b="";a.forEach(function(a){-1===Bk.indexOf(a)?b+=xp(a):(b.length&&e.push(b),e.push(xp(a)),b="")}),b.length&&e.push(b)}}();return e},Bm=function(a,b,c){this.text=Bn(b.data,c.textTransform),this.textBounds=Bf(a,this.text,c,b)},Bn=function(a,b){switch(b){case 1:return a.toLowerCase();case 3:return a.replace(Bo,Bp);case 2:return a.toUpperCase();default:return a}},Bo=/(^|\s|:|-|\(|\))([a-z])/g,Bp=function(a,b,c){return a.length>0?b+c.toUpperCase():a},Bq=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.src=c.currentSrc||c.src,d.intrinsicWidth=c.naturalWidth,d.intrinsicHeight=c.naturalHeight,d.context.cache.addImage(d.src),d}return xh(b,a),b}(AG),Br=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.canvas=c,d.intrinsicWidth=c.width,d.intrinsicHeight=c.height,d}return xh(b,a),b}(AG),Bs=function(a){function b(b,c){var d=a.call(this,b,c)||this,e=new XMLSerializer,f=xm(b,c);return c.setAttribute("width",f.width+"px"),c.setAttribute("height",f.height+"px"),d.svg="data:image/svg+xml,"+encodeURIComponent(e.serializeToString(c)),d.intrinsicWidth=c.width.baseVal.value,d.intrinsicHeight=c.height.baseVal.value,d.context.cache.addImage(d.svg),d}return xh(b,a),b}(AG),Bt=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.value=c.value,d}return xh(b,a),b}(AG),Bu=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.start=c.start,d.reversed="boolean"==typeof c.reversed&&!0===c.reversed,d}return xh(b,a),b}(AG),Bv=[{type:15,flags:0,unit:"px",number:3}],Bw=[{type:16,flags:0,number:50}],Bx=function(a){var b=a.type===BA?Array(a.value.length+1).join("•"):a.value;return 0===b.length?a.placeholder||"":b},By="checkbox",Bz="radio",BA="password",BB=function(a){function b(b,c){var d,e=a.call(this,b,c)||this;switch(e.type=c.type.toLowerCase(),e.checked=c.checked,e.value=Bx(c),(e.type===By||e.type===Bz)&&(e.styles.backgroundColor=0xdededeff,e.styles.borderTopColor=e.styles.borderRightColor=e.styles.borderBottomColor=e.styles.borderLeftColor=0xa5a5a5ff,e.styles.borderTopWidth=e.styles.borderRightWidth=e.styles.borderBottomWidth=e.styles.borderLeftWidth=1,e.styles.borderTopStyle=e.styles.borderRightStyle=e.styles.borderBottomStyle=e.styles.borderLeftStyle=1,e.styles.backgroundClip=[0],e.styles.backgroundOrigin=[0],e.bounds=(d=e.bounds).width>d.height?new xl(d.left+(d.width-d.height)/2,d.top,d.height,d.height):d.width<d.height?new xl(d.left,d.top+(d.height-d.width)/2,d.width,d.width):d),e.type){case By:e.styles.borderTopRightRadius=e.styles.borderTopLeftRadius=e.styles.borderBottomRightRadius=e.styles.borderBottomLeftRadius=Bv;break;case Bz:e.styles.borderTopRightRadius=e.styles.borderTopLeftRadius=e.styles.borderBottomRightRadius=e.styles.borderBottomLeftRadius=Bw}return e}return xh(b,a),b}(AG),BC=function(a){function b(b,c){var d=a.call(this,b,c)||this,e=c.options[c.selectedIndex||0];return d.value=e&&e.text||"",d}return xh(b,a),b}(AG),BD=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.value=c.value,d}return xh(b,a),b}(AG),BE=function(a){function b(b,c){var d=a.call(this,b,c)||this;d.src=c.src,d.width=parseInt(c.width,10)||0,d.height=parseInt(c.height,10)||0,d.backgroundColor=d.styles.backgroundColor;try{if(c.contentWindow&&c.contentWindow.document&&c.contentWindow.document.documentElement){d.tree=BI(b,c.contentWindow.document.documentElement);var e=c.contentWindow.document.documentElement?yW(b,getComputedStyle(c.contentWindow.document.documentElement).backgroundColor):yX.TRANSPARENT,f=c.contentWindow.document.body?yW(b,getComputedStyle(c.contentWindow.document.body).backgroundColor):yX.TRANSPARENT;d.backgroundColor=yO(e)?yO(f)?d.styles.backgroundColor:f:e}}catch(a){}return d}return xh(b,a),b}(AG),BF=["OL","UL","MENU"],BG=function(a,b,c,d){for(var e=b.firstChild,f=void 0;e;e=f)if(f=e.nextSibling,BL(e)&&e.data.trim().length>0)c.textNodes.push(new Bm(a,e,c.styles));else if(BM(e))if(B_(e)&&e.assignedNodes)e.assignedNodes().forEach(function(b){return BG(a,b,c,d)});else{var g=BH(a,e);g.styles.isVisible()&&(BJ(e,g,d)?g.flags|=4:BK(g.styles)&&(g.flags|=2),-1!==BF.indexOf(e.tagName)&&(g.flags|=8),c.elements.push(g),e.slot,e.shadowRoot?BG(a,e.shadowRoot,g,d):BZ(e)||BS(e)||B$(e)||BG(a,e,g,d))}},BH=function(a,b){return BW(b)?new Bq(a,b):BU(b)?new Br(a,b):BS(b)?new Bs(a,b):BP(b)?new Bt(a,b):BQ(b)?new Bu(a,b):BR(b)?new BB(a,b):B$(b)?new BC(a,b):BZ(b)?new BD(a,b):BX(b)?new BE(a,b):new AG(a,b)},BI=function(a,b){var c=BH(a,b);return c.flags|=4,BG(a,b,c,c),c},BJ=function(a,b,c){return b.styles.isPositionedWithZIndex()||b.styles.opacity<1||b.styles.isTransformed()||BT(a)&&c.styles.isTransparent()},BK=function(a){return a.isPositioned()||a.isFloating()},BL=function(a){return a.nodeType===Node.TEXT_NODE},BM=function(a){return a.nodeType===Node.ELEMENT_NODE},BN=function(a){return BM(a)&&void 0!==a.style&&!BO(a)},BO=function(a){return"object"==typeof a.className},BP=function(a){return"LI"===a.tagName},BQ=function(a){return"OL"===a.tagName},BR=function(a){return"INPUT"===a.tagName},BS=function(a){return"svg"===a.tagName},BT=function(a){return"BODY"===a.tagName},BU=function(a){return"CANVAS"===a.tagName},BV=function(a){return"VIDEO"===a.tagName},BW=function(a){return"IMG"===a.tagName},BX=function(a){return"IFRAME"===a.tagName},BY=function(a){return"STYLE"===a.tagName},BZ=function(a){return"TEXTAREA"===a.tagName},B$=function(a){return"SELECT"===a.tagName},B_=function(a){return"SLOT"===a.tagName},B0=function(a){return a.tagName.indexOf("-")>0},B1=function(){function a(){this.counters={}}return a.prototype.getCounterValue=function(a){var b=this.counters[a];return b&&b.length?b[b.length-1]:1},a.prototype.getCounterValues=function(a){return this.counters[a]||[]},a.prototype.pop=function(a){var b=this;a.forEach(function(a){return b.counters[a].pop()})},a.prototype.parse=function(a){var b=this,c=a.counterIncrement,d=a.counterReset,e=!0;null!==c&&c.forEach(function(a){var c=b.counters[a.counter];c&&0!==a.increment&&(e=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=a.increment)});var f=[];return e&&d.forEach(function(a){var c=b.counters[a.counter];f.push(a.counter),c||(c=b.counters[a.counter]=[]),c.push(a.reset)}),f},a}(),B2={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},B3={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},B4={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},B5={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},B6=function(a,b,c,d,e,f){return a<b||a>c?Cf(a,e,f.length>0):d.integers.reduce(function(b,c,e){for(;a>=c;)a-=c,b+=d.values[e];return b},"")+f},B7=function(a,b,c,d){var e="";do!c&&a--,e=d(a)+e,a/=b;while(a*b>=b)return e},B8=function(a,b,c,d,e){var f=c-b+1;return(a<0?"-":"")+(B7(Math.abs(a),f,d,function(a){return xp(Math.floor(a%f)+b)})+e)},B9=function(a,b,c){void 0===c&&(c=". ");var d=b.length;return B7(Math.abs(a),d,!1,function(a){return b[Math.floor(a%d)]})+c},Ca=function(a,b,c,d,e,f){if(a<-9999||a>9999)return Cf(a,4,e.length>0);var g=Math.abs(a),h=e;if(0===g)return b[0]+h;for(var i=0;g>0&&i<=4;i++){var j=g%10;0===j&&Ap(f,1)&&""!==h?h=b[j]+h:j>1||1===j&&0===i||1===j&&1===i&&Ap(f,2)||1===j&&1===i&&Ap(f,4)&&a>100||1===j&&i>1&&Ap(f,8)?h=b[j]+(i>0?c[i-1]:"")+h:1===j&&i>0&&(h=c[i-1]+h),g=Math.floor(g/10)}return(a<0?d:"")+h},Cb="十百千萬",Cc="拾佰仟萬",Cd="マイナス",Ce="마이너스",Cf=function(a,b,c){var d=c?". ":"",e=c?"、":"",f=c?", ":"",g=c?" ":"";switch(b){case 0:return"•"+g;case 1:return"◦"+g;case 2:return"◾"+g;case 5:var h=B8(a,48,57,!0,d);return h.length<4?"0"+h:h;case 4:return B9(a,"〇一二三四五六七八九",e);case 6:return B6(a,1,3999,B2,3,d).toLowerCase();case 7:return B6(a,1,3999,B2,3,d);case 8:return B8(a,945,969,!1,d);case 9:return B8(a,97,122,!1,d);case 10:return B8(a,65,90,!1,d);case 11:return B8(a,1632,1641,!0,d);case 12:case 49:return B6(a,1,9999,B3,3,d);case 35:return B6(a,1,9999,B3,3,d).toLowerCase();case 13:return B8(a,2534,2543,!0,d);case 14:case 30:return B8(a,6112,6121,!0,d);case 15:return B9(a,"子丑寅卯辰巳午未申酉戌亥",e);case 16:return B9(a,"甲乙丙丁戊己庚辛壬癸",e);case 17:case 48:return Ca(a,"零一二三四五六七八九",Cb,"負",e,14);case 47:return Ca(a,"零壹貳參肆伍陸柒捌玖",Cc,"負",e,15);case 42:return Ca(a,"零一二三四五六七八九",Cb,"负",e,14);case 41:return Ca(a,"零壹贰叁肆伍陆柒捌玖",Cc,"负",e,15);case 26:return Ca(a,"〇一二三四五六七八九","十百千万",Cd,e,0);case 25:return Ca(a,"零壱弐参四伍六七八九","拾百千万",Cd,e,7);case 31:return Ca(a,"영일이삼사오육칠팔구","십백천만",Ce,f,7);case 33:return Ca(a,"零一二三四五六七八九","十百千萬",Ce,f,0);case 32:return Ca(a,"零壹貳參四五六七八九","拾百千",Ce,f,7);case 18:return B8(a,2406,2415,!0,d);case 20:return B6(a,1,19999,B5,3,d);case 21:return B8(a,2790,2799,!0,d);case 22:return B8(a,2662,2671,!0,d);case 22:return B6(a,1,10999,B4,3,d);case 23:return B9(a,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return B9(a,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return B8(a,3302,3311,!0,d);case 28:return B9(a,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",e);case 29:return B9(a,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",e);case 34:return B8(a,3792,3801,!0,d);case 37:return B8(a,6160,6169,!0,d);case 38:return B8(a,4160,4169,!0,d);case 39:return B8(a,2918,2927,!0,d);case 40:return B8(a,1776,1785,!0,d);case 43:return B8(a,3046,3055,!0,d);case 44:return B8(a,3174,3183,!0,d);case 45:return B8(a,3664,3673,!0,d);case 46:return B8(a,3872,3881,!0,d);default:return B8(a,48,57,!0,d)}},Cg="data-html2canvas-ignore",Ch=function(){function a(a,b,c){if(this.context=a,this.options=c,this.scrolledElements=[],this.referenceElement=b,this.counters=new B1,this.quoteDepth=0,!b.ownerDocument)throw Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(b.ownerDocument.documentElement,!1)}return a.prototype.toIFrame=function(a,b){var c=this,d=Ci(a,b);if(!d.contentWindow)return Promise.reject("Unable to find iframe window");var e=a.defaultView.pageXOffset,f=a.defaultView.pageYOffset,g=d.contentWindow,h=g.document,i=Cl(d).then(function(){return xj(c,void 0,void 0,function(){var a,c;return xk(this,function(e){switch(e.label){case 0:if(this.scrolledElements.forEach(Cq),g&&(g.scrollTo(b.left,b.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(g.scrollY!==b.top||g.scrollX!==b.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(g.scrollX-b.left,g.scrollY-b.top,0,0))),a=this.options.onclone,void 0===(c=this.clonedReferenceElement))return[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")];if(!(h.fonts&&h.fonts.ready))return[3,2];return[4,h.fonts.ready];case 1:e.sent(),e.label=2;case 2:if(!/(AppleWebKit)/g.test(navigator.userAgent))return[3,4];return[4,Ck(h)];case 3:e.sent(),e.label=4;case 4:if("function"==typeof a)return[2,Promise.resolve().then(function(){return a(h,c)}).then(function(){return d})];return[2,d]}})})});return h.open(),h.write(Co(document.doctype)+"<html></html>"),Cp(this.referenceElement.ownerDocument,e,f),h.replaceChild(h.adoptNode(this.documentElement),h.documentElement),h.close(),i},a.prototype.createElementClone=function(a){if(AF(a,2),BU(a))return this.createCanvasClone(a);if(BV(a))return this.createVideoClone(a);if(BY(a))return this.createStyleClone(a);var b=a.cloneNode(!1);return(BW(b)&&(BW(a)&&a.currentSrc&&a.currentSrc!==a.src&&(b.src=a.currentSrc,b.srcset=""),"lazy"===b.loading&&(b.loading="eager")),B0(b))?this.createCustomElementClone(b):b},a.prototype.createCustomElementClone=function(a){var b=document.createElement("html2canvascustomelement");return Cn(a.style,b),b},a.prototype.createStyleClone=function(a){try{var b=a.sheet;if(b&&b.cssRules){var c=[].slice.call(b.cssRules,0).reduce(function(a,b){return b&&"string"==typeof b.cssText?a+b.cssText:a},""),d=a.cloneNode(!1);return d.textContent=c,d}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),"SecurityError"!==a.name)throw a}return a.cloneNode(!1)},a.prototype.createCanvasClone=function(a){if(this.options.inlineImages&&a.ownerDocument){var b,c=a.ownerDocument.createElement("img");try{return c.src=a.toDataURL(),c}catch(b){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",a)}}var d=a.cloneNode(!1);try{d.width=a.width,d.height=a.height;var e=a.getContext("2d"),f=d.getContext("2d");if(f)if(!this.options.allowTaint&&e)f.putImageData(e.getImageData(0,0,a.width,a.height),0,0);else{var g=null!=(b=a.getContext("webgl2"))?b:a.getContext("webgl");if(g){var h=g.getContextAttributes();(null==h?void 0:h.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",a)}f.drawImage(a,0,0)}}catch(b){this.context.logger.info("Unable to clone canvas as it is tainted",a)}return d},a.prototype.createVideoClone=function(a){var b=a.ownerDocument.createElement("canvas");b.width=a.offsetWidth,b.height=a.offsetHeight;var c=b.getContext("2d");try{return c&&(c.drawImage(a,0,0,b.width,b.height),this.options.allowTaint||c.getImageData(0,0,b.width,b.height)),b}catch(b){this.context.logger.info("Unable to clone video as it is tainted",a)}var d=a.ownerDocument.createElement("canvas");return d.width=a.offsetWidth,d.height=a.offsetHeight,d},a.prototype.appendChildNode=function(a,b,c){BM(b)&&("SCRIPT"===b.tagName||b.hasAttribute(Cg)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(b))||this.options.copyStyles&&BM(b)&&BY(b)||a.appendChild(this.cloneNode(b,c))},a.prototype.cloneChildNodes=function(a,b,c){for(var d=this,e=a.shadowRoot?a.shadowRoot.firstChild:a.firstChild;e;e=e.nextSibling)if(BM(e)&&B_(e)&&"function"==typeof e.assignedNodes){var f=e.assignedNodes();f.length&&f.forEach(function(a){return d.appendChildNode(b,a,c)})}else this.appendChildNode(b,e,c)},a.prototype.cloneNode=function(a,b){if(BL(a))return document.createTextNode(a.data);if(!a.ownerDocument)return a.cloneNode(!1);var c=a.ownerDocument.defaultView;if(c&&BM(a)&&(BN(a)||BO(a))){var d=this.createElementClone(a);d.style.transitionProperty="none";var e=c.getComputedStyle(a),f=c.getComputedStyle(a,":before"),h=c.getComputedStyle(a,":after");this.referenceElement===a&&BN(d)&&(this.clonedReferenceElement=d),BT(d)&&Cu(d);var i=this.counters.parse(new AC(this.context,e)),j=this.resolvePseudoContent(a,d,f,g.BEFORE);B0(a)&&(b=!0),BV(a)||this.cloneChildNodes(a,d,b),j&&d.insertBefore(j,d.firstChild);var k=this.resolvePseudoContent(a,d,h,g.AFTER);return k&&d.appendChild(k),this.counters.pop(i),(e&&(this.options.copyStyles||BO(a))&&!BX(a)||b)&&Cn(e,d),(0!==a.scrollTop||0!==a.scrollLeft)&&this.scrolledElements.push([d,a.scrollLeft,a.scrollTop]),(BZ(a)||B$(a))&&(BZ(d)||B$(d))&&(d.value=a.value),d}return a.cloneNode(!1)},a.prototype.resolvePseudoContent=function(a,b,c,d){var e=this;if(c){var f=c.content,h=b.ownerDocument;if(h&&f&&"none"!==f&&"-moz-alt-content"!==f&&"none"!==c.display){this.counters.parse(new AC(this.context,c));var i=new AB(this.context,c),j=h.createElement("html2canvaspseudoelement");Cn(c,j),i.content.forEach(function(b){if(0===b.type)j.appendChild(h.createTextNode(b.value));else if(22===b.type){var c=h.createElement("img");c.src=b.value,c.style.opacity="1",j.appendChild(c)}else if(18===b.type){if("attr"===b.name){var d=b.values.filter(ys);d.length&&j.appendChild(h.createTextNode(a.getAttribute(d[0].value)||""))}else if("counter"===b.name){var f=b.values.filter(yw),g=f[0],k=f[1];if(g&&ys(g)){var l=e.counters.getCounterValue(g.value),m=k&&ys(k)?zT.parse(e.context,k.value):3;j.appendChild(h.createTextNode(Cf(l,m,!1)))}}else if("counters"===b.name){var n=b.values.filter(yw),g=n[0],o=n[1],k=n[2];if(g&&ys(g)){var p=e.counters.getCounterValues(g.value),q=k&&ys(k)?zT.parse(e.context,k.value):3,r=o&&0===o.type?o.value:"",s=p.map(function(a){return Cf(a,q,!1)}).join(r);j.appendChild(h.createTextNode(s))}}}else if(20===b.type)switch(b.value){case"open-quote":j.appendChild(h.createTextNode(Av(i.quotes,e.quoteDepth++,!0)));break;case"close-quote":j.appendChild(h.createTextNode(Av(i.quotes,--e.quoteDepth,!1)));break;default:j.appendChild(h.createTextNode(b.value))}}),j.className=Cr+" "+Cs;var k=d===g.BEFORE?" "+Cr:" "+Cs;return BO(b)?b.className.baseValue+=k:b.className+=k,j}}},a.destroy=function(a){return!!a.parentNode&&(a.parentNode.removeChild(a),!0)},a}();!function(a){a[a.BEFORE=0]="BEFORE",a[a.AFTER=1]="AFTER"}(g||(g={}));var Ci=function(a,b){var c=a.createElement("iframe");return c.className="html2canvas-container",c.style.visibility="hidden",c.style.position="fixed",c.style.left="-10000px",c.style.top="0px",c.style.border="0",c.width=b.width.toString(),c.height=b.height.toString(),c.scrolling="no",c.setAttribute(Cg,"true"),a.body.appendChild(c),c},Cj=function(a){return new Promise(function(b){if(a.complete||!a.src)return void b();a.onload=b,a.onerror=b})},Ck=function(a){return Promise.all([].slice.call(a.images,0).map(Cj))},Cl=function(a){return new Promise(function(b,c){var d=a.contentWindow;if(!d)return c("No window assigned for iframe");var e=d.document;d.onload=a.onload=function(){d.onload=a.onload=null;var c=setInterval(function(){e.body.childNodes.length>0&&"complete"===e.readyState&&(clearInterval(c),b(a))},50)}})},Cm=["all","d","content"],Cn=function(a,b){for(var c=a.length-1;c>=0;c--){var d=a.item(c);-1===Cm.indexOf(d)&&b.style.setProperty(d,a.getPropertyValue(d))}return b},Co=function(a){var b="";return a&&(b+="<!DOCTYPE ",a.name&&(b+=a.name),a.internalSubset&&(b+=a.internalSubset),a.publicId&&(b+='"'+a.publicId+'"'),a.systemId&&(b+='"'+a.systemId+'"'),b+=">"),b},Cp=function(a,b,c){a&&a.defaultView&&(b!==a.defaultView.pageXOffset||c!==a.defaultView.pageYOffset)&&a.defaultView.scrollTo(b,c)},Cq=function(a){var b=a[0],c=a[1],d=a[2];b.scrollLeft=c,b.scrollTop=d},Cr="___html2canvas___pseudoelement_before",Cs="___html2canvas___pseudoelement_after",Ct='{\n    content: "" !important;\n    display: none !important;\n}',Cu=function(a){Cv(a,"."+Cr+":before"+Ct+"\n         ."+Cs+":after"+Ct)},Cv=function(a,b){var c=a.ownerDocument;if(c){var d=c.createElement("style");d.textContent=b,a.appendChild(d)}},Cw=function(){function a(){}return a.getOrigin=function(b){var c=a._link;return c?(c.href=b,c.href=c.href,c.protocol+c.hostname+c.port):"about:blank"},a.isSameOrigin=function(b){return a.getOrigin(b)===a._origin},a.setContext=function(b){a._link=b.document.createElement("a"),a._origin=a.getOrigin(b.location.href)},a._origin="about:blank",a}(),Cx=function(){function a(a,b){this.context=a,this._options=b,this._cache={}}return a.prototype.addImage=function(a){var b=Promise.resolve();return this.has(a)||(CE(a)||CB(a))&&(this._cache[a]=this.loadImage(a)).catch(function(){}),b},a.prototype.match=function(a){return this._cache[a]},a.prototype.loadImage=function(a){return xj(this,void 0,void 0,function(){var b,c,d,e,f=this;return xk(this,function(g){switch(g.label){case 0:if(b=Cw.isSameOrigin(a),c=!CC(a)&&!0===this._options.useCORS&&A5.SUPPORT_CORS_IMAGES&&!b,d=!CC(a)&&!b&&!CE(a)&&"string"==typeof this._options.proxy&&A5.SUPPORT_CORS_XHR&&!c,!b&&!1===this._options.allowTaint&&!CC(a)&&!CE(a)&&!d&&!c)return[2];if(e=a,!d)return[3,2];return[4,this.proxy(e)];case 1:e=g.sent(),g.label=2;case 2:return this.context.logger.debug("Added image "+a.substring(0,256)),[4,new Promise(function(a,b){var d=new Image;d.onload=function(){return a(d)},d.onerror=b,(CD(e)||c)&&(d.crossOrigin="anonymous"),d.src=e,!0===d.complete&&setTimeout(function(){return a(d)},500),f._options.imageTimeout>0&&setTimeout(function(){return b("Timed out ("+f._options.imageTimeout+"ms) loading image")},f._options.imageTimeout)})];case 3:return[2,g.sent()]}})})},a.prototype.has=function(a){return void 0!==this._cache[a]},a.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},a.prototype.proxy=function(a){var b=this,c=this._options.proxy;if(!c)throw Error("No proxy defined");var d=a.substring(0,256);return new Promise(function(e,f){var g=A5.SUPPORT_RESPONSE_TYPE?"blob":"text",h=new XMLHttpRequest;h.onload=function(){if(200===h.status)if("text"===g)e(h.response);else{var a=new FileReader;a.addEventListener("load",function(){return e(a.result)},!1),a.addEventListener("error",function(a){return f(a)},!1),a.readAsDataURL(h.response)}else f("Failed to proxy resource "+d+" with status code "+h.status)},h.onerror=f;var i=c.indexOf("?")>-1?"&":"?";if(h.open("GET",""+c+i+"url="+encodeURIComponent(a)+"&responseType="+g),"text"!==g&&h instanceof XMLHttpRequest&&(h.responseType=g),b._options.imageTimeout){var j=b._options.imageTimeout;h.timeout=j,h.ontimeout=function(){return f("Timed out ("+j+"ms) proxying "+d)}}h.send()})},a}(),Cy=/^data:image\/svg\+xml/i,Cz=/^data:image\/.*;base64,/i,CA=/^data:image\/.*/i,CB=function(a){return A5.SUPPORT_SVG_DRAWING||!CF(a)},CC=function(a){return CA.test(a)},CD=function(a){return Cz.test(a)},CE=function(a){return"blob"===a.substr(0,4)},CF=function(a){return"svg"===a.substr(-3).toLowerCase()||Cy.test(a)},CG=function(){function a(a,b){this.type=0,this.x=a,this.y=b}return a.prototype.add=function(b,c){return new a(this.x+b,this.y+c)},a}(),CH=function(a,b,c){return new CG(a.x+(b.x-a.x)*c,a.y+(b.y-a.y)*c)},CI=function(){function a(a,b,c,d){this.type=1,this.start=a,this.startControl=b,this.endControl=c,this.end=d}return a.prototype.subdivide=function(b,c){var d=CH(this.start,this.startControl,b),e=CH(this.startControl,this.endControl,b),f=CH(this.endControl,this.end,b),g=CH(d,e,b),h=CH(e,f,b),i=CH(g,h,b);return c?new a(this.start,d,g,i):new a(i,h,f,this.end)},a.prototype.add=function(b,c){return new a(this.start.add(b,c),this.startControl.add(b,c),this.endControl.add(b,c),this.end.add(b,c))},a.prototype.reverse=function(){return new a(this.end,this.endControl,this.startControl,this.start)},a}(),CJ=function(a){return 1===a.type},CK=function(a){var b=a.styles,c=a.bounds,d=yF(b.borderTopLeftRadius,c.width,c.height),e=d[0],f=d[1],g=yF(b.borderTopRightRadius,c.width,c.height),i=g[0],j=g[1],k=yF(b.borderBottomRightRadius,c.width,c.height),l=k[0],m=k[1],n=yF(b.borderBottomLeftRadius,c.width,c.height),o=n[0],p=n[1],q=[];q.push((e+i)/c.width),q.push((o+l)/c.width),q.push((f+p)/c.height),q.push((j+m)/c.height);var r=Math.max.apply(Math,q);r>1&&(e/=r,f/=r,i/=r,j/=r,l/=r,m/=r,o/=r,p/=r);var s=c.width-i,t=c.height-m,u=c.width-l,v=c.height-p,w=b.borderTopWidth,x=b.borderRightWidth,y=b.borderBottomWidth,z=b.borderLeftWidth,A=yG(b.paddingTop,a.bounds.width),B=yG(b.paddingRight,a.bounds.width),C=yG(b.paddingBottom,a.bounds.width),D=yG(b.paddingLeft,a.bounds.width);this.topLeftBorderDoubleOuterBox=e>0||f>0?CL(c.left+z/3,c.top+w/3,e-z/3,f-w/3,h.TOP_LEFT):new CG(c.left+z/3,c.top+w/3),this.topRightBorderDoubleOuterBox=e>0||f>0?CL(c.left+s,c.top+w/3,i-x/3,j-w/3,h.TOP_RIGHT):new CG(c.left+c.width-x/3,c.top+w/3),this.bottomRightBorderDoubleOuterBox=l>0||m>0?CL(c.left+u,c.top+t,l-x/3,m-y/3,h.BOTTOM_RIGHT):new CG(c.left+c.width-x/3,c.top+c.height-y/3),this.bottomLeftBorderDoubleOuterBox=o>0||p>0?CL(c.left+z/3,c.top+v,o-z/3,p-y/3,h.BOTTOM_LEFT):new CG(c.left+z/3,c.top+c.height-y/3),this.topLeftBorderDoubleInnerBox=e>0||f>0?CL(c.left+2*z/3,c.top+2*w/3,e-2*z/3,f-2*w/3,h.TOP_LEFT):new CG(c.left+2*z/3,c.top+2*w/3),this.topRightBorderDoubleInnerBox=e>0||f>0?CL(c.left+s,c.top+2*w/3,i-2*x/3,j-2*w/3,h.TOP_RIGHT):new CG(c.left+c.width-2*x/3,c.top+2*w/3),this.bottomRightBorderDoubleInnerBox=l>0||m>0?CL(c.left+u,c.top+t,l-2*x/3,m-2*y/3,h.BOTTOM_RIGHT):new CG(c.left+c.width-2*x/3,c.top+c.height-2*y/3),this.bottomLeftBorderDoubleInnerBox=o>0||p>0?CL(c.left+2*z/3,c.top+v,o-2*z/3,p-2*y/3,h.BOTTOM_LEFT):new CG(c.left+2*z/3,c.top+c.height-2*y/3),this.topLeftBorderStroke=e>0||f>0?CL(c.left+z/2,c.top+w/2,e-z/2,f-w/2,h.TOP_LEFT):new CG(c.left+z/2,c.top+w/2),this.topRightBorderStroke=e>0||f>0?CL(c.left+s,c.top+w/2,i-x/2,j-w/2,h.TOP_RIGHT):new CG(c.left+c.width-x/2,c.top+w/2),this.bottomRightBorderStroke=l>0||m>0?CL(c.left+u,c.top+t,l-x/2,m-y/2,h.BOTTOM_RIGHT):new CG(c.left+c.width-x/2,c.top+c.height-y/2),this.bottomLeftBorderStroke=o>0||p>0?CL(c.left+z/2,c.top+v,o-z/2,p-y/2,h.BOTTOM_LEFT):new CG(c.left+z/2,c.top+c.height-y/2),this.topLeftBorderBox=e>0||f>0?CL(c.left,c.top,e,f,h.TOP_LEFT):new CG(c.left,c.top),this.topRightBorderBox=i>0||j>0?CL(c.left+s,c.top,i,j,h.TOP_RIGHT):new CG(c.left+c.width,c.top),this.bottomRightBorderBox=l>0||m>0?CL(c.left+u,c.top+t,l,m,h.BOTTOM_RIGHT):new CG(c.left+c.width,c.top+c.height),this.bottomLeftBorderBox=o>0||p>0?CL(c.left,c.top+v,o,p,h.BOTTOM_LEFT):new CG(c.left,c.top+c.height),this.topLeftPaddingBox=e>0||f>0?CL(c.left+z,c.top+w,Math.max(0,e-z),Math.max(0,f-w),h.TOP_LEFT):new CG(c.left+z,c.top+w),this.topRightPaddingBox=i>0||j>0?CL(c.left+Math.min(s,c.width-x),c.top+w,s>c.width+x?0:Math.max(0,i-x),Math.max(0,j-w),h.TOP_RIGHT):new CG(c.left+c.width-x,c.top+w),this.bottomRightPaddingBox=l>0||m>0?CL(c.left+Math.min(u,c.width-z),c.top+Math.min(t,c.height-y),Math.max(0,l-x),Math.max(0,m-y),h.BOTTOM_RIGHT):new CG(c.left+c.width-x,c.top+c.height-y),this.bottomLeftPaddingBox=o>0||p>0?CL(c.left+z,c.top+Math.min(v,c.height-y),Math.max(0,o-z),Math.max(0,p-y),h.BOTTOM_LEFT):new CG(c.left+z,c.top+c.height-y),this.topLeftContentBox=e>0||f>0?CL(c.left+z+D,c.top+w+A,Math.max(0,e-(z+D)),Math.max(0,f-(w+A)),h.TOP_LEFT):new CG(c.left+z+D,c.top+w+A),this.topRightContentBox=i>0||j>0?CL(c.left+Math.min(s,c.width+z+D),c.top+w+A,s>c.width+z+D?0:i-z+D,j-(w+A),h.TOP_RIGHT):new CG(c.left+c.width-(x+B),c.top+w+A),this.bottomRightContentBox=l>0||m>0?CL(c.left+Math.min(u,c.width-(z+D)),c.top+Math.min(t,c.height+w+A),Math.max(0,l-(x+B)),m-(y+C),h.BOTTOM_RIGHT):new CG(c.left+c.width-(x+B),c.top+c.height-(y+C)),this.bottomLeftContentBox=o>0||p>0?CL(c.left+z+D,c.top+v,Math.max(0,o-(z+D)),p-(y+C),h.BOTTOM_LEFT):new CG(c.left+z+D,c.top+c.height-(y+C))};!function(a){a[a.TOP_LEFT=0]="TOP_LEFT",a[a.TOP_RIGHT=1]="TOP_RIGHT",a[a.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",a[a.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(h||(h={}));var CL=function(a,b,c,d,e){var f=(Math.sqrt(2)-1)/3*4,g=c*f,i=d*f,j=a+c,k=b+d;switch(e){case h.TOP_LEFT:return new CI(new CG(a,k),new CG(a,k-i),new CG(j-g,b),new CG(j,b));case h.TOP_RIGHT:return new CI(new CG(a,b),new CG(a+g,b),new CG(j,k-i),new CG(j,k));case h.BOTTOM_RIGHT:return new CI(new CG(j,b),new CG(j,b+i),new CG(a+g,k),new CG(a,k));case h.BOTTOM_LEFT:default:return new CI(new CG(j,k),new CG(j-g,k),new CG(a,b+i),new CG(a,b))}},CM=function(a){return[a.topLeftBorderBox,a.topRightBorderBox,a.bottomRightBorderBox,a.bottomLeftBorderBox]},CN=function(a){return[a.topLeftPaddingBox,a.topRightPaddingBox,a.bottomRightPaddingBox,a.bottomLeftPaddingBox]},CO=function(a,b,c){this.offsetX=a,this.offsetY=b,this.matrix=c,this.type=0,this.target=6},CP=function(a,b){this.path=a,this.target=b,this.type=1},CQ=function(a){this.opacity=a,this.type=2,this.target=6},CR=function(a){return 1===a.type},CS=function(a,b){return a.length===b.length&&a.some(function(a,c){return a===b[c]})},CT=function(a){this.element=a,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},CU=function(){function a(a,b){if(this.container=a,this.parent=b,this.effects=[],this.curves=new CK(this.container),this.container.styles.opacity<1&&this.effects.push(new CQ(this.container.styles.opacity)),null!==this.container.styles.transform){var c=this.container.bounds.left+this.container.styles.transformOrigin[0].number,d=this.container.bounds.top+this.container.styles.transformOrigin[1].number,e=this.container.styles.transform;this.effects.push(new CO(c,d,e))}if(0!==this.container.styles.overflowX){var f=CM(this.curves),g=CN(this.curves);CS(f,g)?this.effects.push(new CP(f,6)):(this.effects.push(new CP(f,2)),this.effects.push(new CP(g,4)))}}return a.prototype.getEffects=function(a){for(var b=-1===[2,3].indexOf(this.container.styles.position),c=this.parent,d=this.effects.slice(0);c;){var e=c.effects.filter(function(a){return!CR(a)});if(b||0!==c.container.styles.position||!c.parent){if(d.unshift.apply(d,e),b=-1===[2,3].indexOf(c.container.styles.position),0!==c.container.styles.overflowX){var f=CM(c.curves),g=CN(c.curves);CS(f,g)||d.unshift(new CP(g,6))}}else d.unshift.apply(d,e);c=c.parent}return d.filter(function(b){return Ap(b.target,a)})},a}(),CV=function(a,b,c,d){a.container.elements.forEach(function(e){var f=Ap(e.flags,4),g=Ap(e.flags,2),h=new CU(e,a);Ap(e.styles.display,2048)&&d.push(h);var i=Ap(e.flags,8)?[]:d;if(f||g){var j=f||e.styles.isPositioned()?c:b,k=new CT(h);if(e.styles.isPositioned()||e.styles.opacity<1||e.styles.isTransformed()){var l=e.styles.zIndex.order;if(l<0){var m=0;j.negativeZIndex.some(function(a,b){if(l>a.element.container.styles.zIndex.order)m=b;else if(m>0)return!0;return!1}),j.negativeZIndex.splice(m,0,k)}else if(l>0){var n=0;j.positiveZIndex.some(function(a,b){if(l>=a.element.container.styles.zIndex.order)n=b+1;else if(n>0)return!0;return!1}),j.positiveZIndex.splice(n,0,k)}else j.zeroOrAutoZIndexOrTransformedOrOpacity.push(k)}else e.styles.isFloating()?j.nonPositionedFloats.push(k):j.nonPositionedInlineLevel.push(k);CV(h,k,f?k:c,i)}else e.styles.isInlineLevel()?b.inlineLevel.push(h):b.nonInlineLevel.push(h),CV(h,b,c,i);Ap(e.flags,8)&&CW(e,i)})},CW=function(a,b){for(var c=a instanceof Bu?a.start:1,d=a instanceof Bu&&a.reversed,e=0;e<b.length;e++){var f=b[e];f.container instanceof Bt&&"number"==typeof f.container.value&&0!==f.container.value&&(c=f.container.value),f.listValue=Cf(c,f.container.styles.listStyleType,!0),c+=d?-1:1}},CX=function(a){var b=new CU(a,null),c=new CT(b),d=[];return CV(b,c,c,d),CW(b.container,d),c},CY=function(a,b){switch(b){case 0:return C1(a.topLeftBorderBox,a.topLeftPaddingBox,a.topRightBorderBox,a.topRightPaddingBox);case 1:return C1(a.topRightBorderBox,a.topRightPaddingBox,a.bottomRightBorderBox,a.bottomRightPaddingBox);case 2:return C1(a.bottomRightBorderBox,a.bottomRightPaddingBox,a.bottomLeftBorderBox,a.bottomLeftPaddingBox);default:return C1(a.bottomLeftBorderBox,a.bottomLeftPaddingBox,a.topLeftBorderBox,a.topLeftPaddingBox)}},CZ=function(a,b){switch(b){case 0:return C1(a.topLeftBorderBox,a.topLeftBorderDoubleOuterBox,a.topRightBorderBox,a.topRightBorderDoubleOuterBox);case 1:return C1(a.topRightBorderBox,a.topRightBorderDoubleOuterBox,a.bottomRightBorderBox,a.bottomRightBorderDoubleOuterBox);case 2:return C1(a.bottomRightBorderBox,a.bottomRightBorderDoubleOuterBox,a.bottomLeftBorderBox,a.bottomLeftBorderDoubleOuterBox);default:return C1(a.bottomLeftBorderBox,a.bottomLeftBorderDoubleOuterBox,a.topLeftBorderBox,a.topLeftBorderDoubleOuterBox)}},C$=function(a,b){switch(b){case 0:return C1(a.topLeftBorderDoubleInnerBox,a.topLeftPaddingBox,a.topRightBorderDoubleInnerBox,a.topRightPaddingBox);case 1:return C1(a.topRightBorderDoubleInnerBox,a.topRightPaddingBox,a.bottomRightBorderDoubleInnerBox,a.bottomRightPaddingBox);case 2:return C1(a.bottomRightBorderDoubleInnerBox,a.bottomRightPaddingBox,a.bottomLeftBorderDoubleInnerBox,a.bottomLeftPaddingBox);default:return C1(a.bottomLeftBorderDoubleInnerBox,a.bottomLeftPaddingBox,a.topLeftBorderDoubleInnerBox,a.topLeftPaddingBox)}},C_=function(a,b){switch(b){case 0:return C0(a.topLeftBorderStroke,a.topRightBorderStroke);case 1:return C0(a.topRightBorderStroke,a.bottomRightBorderStroke);case 2:return C0(a.bottomRightBorderStroke,a.bottomLeftBorderStroke);default:return C0(a.bottomLeftBorderStroke,a.topLeftBorderStroke)}},C0=function(a,b){var c=[];return CJ(a)?c.push(a.subdivide(.5,!1)):c.push(a),CJ(b)?c.push(b.subdivide(.5,!0)):c.push(b),c},C1=function(a,b,c,d){var e=[];return CJ(a)?e.push(a.subdivide(.5,!1)):e.push(a),CJ(c)?e.push(c.subdivide(.5,!0)):e.push(c),CJ(d)?e.push(d.subdivide(.5,!0).reverse()):e.push(d),CJ(b)?e.push(b.subdivide(.5,!1).reverse()):e.push(b),e},C2=function(a){var b=a.bounds,c=a.styles;return b.add(c.borderLeftWidth,c.borderTopWidth,-(c.borderRightWidth+c.borderLeftWidth),-(c.borderTopWidth+c.borderBottomWidth))},C3=function(a){var b=a.styles,c=a.bounds,d=yG(b.paddingLeft,c.width),e=yG(b.paddingRight,c.width),f=yG(b.paddingTop,c.width),g=yG(b.paddingBottom,c.width);return c.add(d+b.borderLeftWidth,f+b.borderTopWidth,-(b.borderRightWidth+b.borderLeftWidth+d+e),-(b.borderTopWidth+b.borderBottomWidth+f+g))},C4=function(a,b,c){var d,e,f=(d=C8(a.styles.backgroundOrigin,b),0===d?a.bounds:2===d?C3(a):C2(a)),g=(e=C8(a.styles.backgroundClip,b),0===e?a.bounds:2===e?C3(a):C2(a)),h=C7(C8(a.styles.backgroundSize,b),c,f),i=h[0],j=h[1],k=yF(C8(a.styles.backgroundPosition,b),f.width-i,f.height-j);return[C9(C8(a.styles.backgroundRepeat,b),k,h,f,g),Math.round(f.left+k[0]),Math.round(f.top+k[1]),i,j]},C5=function(a){return ys(a)&&a.value===d.AUTO},C6=function(a){return"number"==typeof a},C7=function(a,b,c){var e=b[0],f=b[1],g=b[2],h=a[0],i=a[1];if(!h)return[0,0];if(yA(h)&&i&&yA(i))return[yG(h,c.width),yG(i,c.height)];var j=C6(g);if(ys(h)&&(h.value===d.CONTAIN||h.value===d.COVER))return C6(g)?c.width/c.height<g!=(h.value===d.COVER)?[c.width,c.width/g]:[c.height*g,c.height]:[c.width,c.height];var k=C6(e),l=C6(f),m=k||l;if(C5(h)&&(!i||C5(i)))return k&&l?[e,f]:j||m?m&&j?[k?e:f*g,l?f:e/g]:[k?e:c.width,l?f:c.height]:[c.width,c.height];if(j){var n=0,o=0;return yA(h)?n=yG(h,c.width):yA(i)&&(o=yG(i,c.height)),C5(h)?n=o*g:(!i||C5(i))&&(o=n/g),[n,o]}var p=null,q=null;if(yA(h)?p=yG(h,c.width):i&&yA(i)&&(q=yG(i,c.height)),null!==p&&(!i||C5(i))&&(q=k&&l?p/e*f:c.height),null!==q&&C5(h)&&(p=k&&l?q/f*e:c.width),null!==p&&null!==q)return[p,q];throw Error("Unable to calculate background-size for element")},C8=function(a,b){var c=a[b];return void 0===c?a[0]:c},C9=function(a,b,c,d,e){var f=b[0],g=b[1],h=c[0],i=c[1];switch(a){case 2:return[new CG(Math.round(d.left),Math.round(d.top+g)),new CG(Math.round(d.left+d.width),Math.round(d.top+g)),new CG(Math.round(d.left+d.width),Math.round(i+d.top+g)),new CG(Math.round(d.left),Math.round(i+d.top+g))];case 3:return[new CG(Math.round(d.left+f),Math.round(d.top)),new CG(Math.round(d.left+f+h),Math.round(d.top)),new CG(Math.round(d.left+f+h),Math.round(d.height+d.top)),new CG(Math.round(d.left+f),Math.round(d.height+d.top))];case 1:return[new CG(Math.round(d.left+f),Math.round(d.top+g)),new CG(Math.round(d.left+f+h),Math.round(d.top+g)),new CG(Math.round(d.left+f+h),Math.round(d.top+g+i)),new CG(Math.round(d.left+f),Math.round(d.top+g+i))];default:return[new CG(Math.round(e.left),Math.round(e.top)),new CG(Math.round(e.left+e.width),Math.round(e.top)),new CG(Math.round(e.left+e.width),Math.round(e.height+e.top)),new CG(Math.round(e.left),Math.round(e.height+e.top))]}},Da="Hidden Text",Db=function(){function a(a){this._data={},this._document=a}return a.prototype.parseMetrics=function(a,b){var c=this._document.createElement("div"),d=this._document.createElement("img"),e=this._document.createElement("span"),f=this._document.body;c.style.visibility="hidden",c.style.fontFamily=a,c.style.fontSize=b,c.style.margin="0",c.style.padding="0",c.style.whiteSpace="nowrap",f.appendChild(c),d.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",d.width=1,d.height=1,d.style.margin="0",d.style.padding="0",d.style.verticalAlign="baseline",e.style.fontFamily=a,e.style.fontSize=b,e.style.margin="0",e.style.padding="0",e.appendChild(this._document.createTextNode(Da)),c.appendChild(e),c.appendChild(d);var g=d.offsetTop-e.offsetTop+2;c.removeChild(e),c.appendChild(this._document.createTextNode(Da)),c.style.lineHeight="normal",d.style.verticalAlign="super";var h=d.offsetTop-c.offsetTop+2;return f.removeChild(c),{baseline:g,middle:h}},a.prototype.getMetrics=function(a,b){var c=a+" "+b;return void 0===this._data[c]&&(this._data[c]=this.parseMetrics(a,b)),this._data[c]},a}(),Dc=function(a,b){this.context=a,this.options=b},Dd=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d._activeEffects=[],d.canvas=c.canvas?c.canvas:document.createElement("canvas"),d.ctx=d.canvas.getContext("2d"),c.canvas||(d.canvas.width=Math.floor(c.width*c.scale),d.canvas.height=Math.floor(c.height*c.scale),d.canvas.style.width=c.width+"px",d.canvas.style.height=c.height+"px"),d.fontMetrics=new Db(document),d.ctx.scale(d.options.scale,d.options.scale),d.ctx.translate(-c.x,-c.y),d.ctx.textBaseline="bottom",d._activeEffects=[],d.context.logger.debug("Canvas renderer initialized ("+c.width+"x"+c.height+") with scale "+c.scale),d}return xh(b,a),b.prototype.applyEffects=function(a){for(var b=this;this._activeEffects.length;)this.popEffect();a.forEach(function(a){return b.applyEffect(a)})},b.prototype.applyEffect=function(a){this.ctx.save(),2===a.type&&(this.ctx.globalAlpha=a.opacity),0===a.type&&(this.ctx.translate(a.offsetX,a.offsetY),this.ctx.transform(a.matrix[0],a.matrix[1],a.matrix[2],a.matrix[3],a.matrix[4],a.matrix[5]),this.ctx.translate(-a.offsetX,-a.offsetY)),CR(a)&&(this.path(a.path),this.ctx.clip()),this._activeEffects.push(a)},b.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},b.prototype.renderStack=function(a){return xj(this,void 0,void 0,function(){return xk(this,function(b){switch(b.label){case 0:if(!a.element.container.styles.isVisible())return[3,2];return[4,this.renderStackContent(a)];case 1:b.sent(),b.label=2;case 2:return[2]}})})},b.prototype.renderNode=function(a){return xj(this,void 0,void 0,function(){return xk(this,function(b){switch(b.label){case 0:if(Ap(a.container.flags,16),!a.container.styles.isVisible())return[3,3];return[4,this.renderNodeBackgroundAndBorders(a)];case 1:return b.sent(),[4,this.renderNodeContent(a)];case 2:b.sent(),b.label=3;case 3:return[2]}})})},b.prototype.renderTextWithLetterSpacing=function(a,b,c){var d=this;0===b?this.ctx.fillText(a.text,a.bounds.left,a.bounds.top+c):Bi(a.text).reduce(function(b,e){return d.ctx.fillText(e,b,a.bounds.top+c),b+d.ctx.measureText(e).width},a.bounds.left)},b.prototype.createFontStyle=function(a){var b=a.fontVariant.filter(function(a){return"normal"===a||"small-caps"===a}).join(""),c=Di(a.fontFamily).join(", "),d=yq(a.fontSize)?""+a.fontSize.number+a.fontSize.unit:a.fontSize.number+"px";return[[a.fontStyle,b,a.fontWeight,d,c].join(" "),c,d]},b.prototype.renderTextNode=function(a,b){return xj(this,void 0,void 0,function(){var c,d,e,f,g,h,i,j,k=this;return xk(this,function(l){return d=(c=this.createFontStyle(b))[0],e=c[1],f=c[2],this.ctx.font=d,this.ctx.direction=1===b.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",h=(g=this.fontMetrics.getMetrics(e,f)).baseline,i=g.middle,j=b.paintOrder,a.textBounds.forEach(function(a){j.forEach(function(c){switch(c){case 0:k.ctx.fillStyle=yP(b.color),k.renderTextWithLetterSpacing(a,b.letterSpacing,h);var d=b.textShadow;d.length&&a.text.trim().length&&(d.slice(0).reverse().forEach(function(c){k.ctx.shadowColor=yP(c.color),k.ctx.shadowOffsetX=c.offsetX.number*k.options.scale,k.ctx.shadowOffsetY=c.offsetY.number*k.options.scale,k.ctx.shadowBlur=c.blur.number,k.renderTextWithLetterSpacing(a,b.letterSpacing,h)}),k.ctx.shadowColor="",k.ctx.shadowOffsetX=0,k.ctx.shadowOffsetY=0,k.ctx.shadowBlur=0),b.textDecorationLine.length&&(k.ctx.fillStyle=yP(b.textDecorationColor||b.color),b.textDecorationLine.forEach(function(b){switch(b){case 1:k.ctx.fillRect(a.bounds.left,Math.round(a.bounds.top+h),a.bounds.width,1);break;case 2:k.ctx.fillRect(a.bounds.left,Math.round(a.bounds.top),a.bounds.width,1);break;case 3:k.ctx.fillRect(a.bounds.left,Math.ceil(a.bounds.top+i),a.bounds.width,1)}}));break;case 1:b.webkitTextStrokeWidth&&a.text.trim().length&&(k.ctx.strokeStyle=yP(b.webkitTextStrokeColor),k.ctx.lineWidth=b.webkitTextStrokeWidth,k.ctx.lineJoin=window.chrome?"miter":"round",k.ctx.strokeText(a.text,a.bounds.left,a.bounds.top+h)),k.ctx.strokeStyle="",k.ctx.lineWidth=0,k.ctx.lineJoin="miter"}})}),[2]})})},b.prototype.renderReplacedElement=function(a,b,c){if(c&&a.intrinsicWidth>0&&a.intrinsicHeight>0){var d=C3(a),e=CN(b);this.path(e),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(c,0,0,a.intrinsicWidth,a.intrinsicHeight,d.left,d.top,d.width,d.height),this.ctx.restore()}},b.prototype.renderNodeContent=function(a){return xj(this,void 0,void 0,function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return xk(this,function(u){switch(u.label){case 0:this.applyEffects(a.getEffects(4)),c=a.container,d=a.curves,e=c.styles,f=0,g=c.textNodes,u.label=1;case 1:if(!(f<g.length))return[3,4];return h=g[f],[4,this.renderTextNode(h,e)];case 2:u.sent(),u.label=3;case 3:return f++,[3,1];case 4:if(!(c instanceof Bq))return[3,8];u.label=5;case 5:return u.trys.push([5,7,,8]),[4,this.context.cache.match(c.src)];case 6:return i=u.sent(),this.renderReplacedElement(c,d,i),[3,8];case 7:return u.sent(),this.context.logger.error("Error loading image "+c.src),[3,8];case 8:if(c instanceof Br&&this.renderReplacedElement(c,d,c.canvas),!(c instanceof Bs))return[3,12];u.label=9;case 9:return u.trys.push([9,11,,12]),[4,this.context.cache.match(c.svg)];case 10:return i=u.sent(),this.renderReplacedElement(c,d,i),[3,12];case 11:return u.sent(),this.context.logger.error("Error loading svg "+c.svg.substring(0,255)),[3,12];case 12:if(!(c instanceof BE&&c.tree))return[3,14];return[4,new b(this.context,{scale:this.options.scale,backgroundColor:c.backgroundColor,x:0,y:0,width:c.width,height:c.height}).render(c.tree)];case 13:j=u.sent(),c.width&&c.height&&this.ctx.drawImage(j,0,0,c.width,c.height,c.bounds.left,c.bounds.top,c.bounds.width,c.bounds.height),u.label=14;case 14:if(c instanceof BB&&(k=Math.min(c.bounds.width,c.bounds.height),c.type===By?c.checked&&(this.ctx.save(),this.path([new CG(c.bounds.left+.39363*k,c.bounds.top+.79*k),new CG(c.bounds.left+.16*k,c.bounds.top+.5549*k),new CG(c.bounds.left+.27347*k,c.bounds.top+.44071*k),new CG(c.bounds.left+.39694*k,c.bounds.top+.5649*k),new CG(c.bounds.left+.72983*k,c.bounds.top+.23*k),new CG(c.bounds.left+.84*k,c.bounds.top+.34085*k),new CG(c.bounds.left+.39363*k,c.bounds.top+.79*k)]),this.ctx.fillStyle=yP(0x2a2a2aff),this.ctx.fill(),this.ctx.restore()):c.type===Bz&&c.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(c.bounds.left+k/2,c.bounds.top+k/2,k/4,0,2*Math.PI,!0),this.ctx.fillStyle=yP(0x2a2a2aff),this.ctx.fill(),this.ctx.restore())),De(c)&&c.value.length){switch(m=(l=this.createFontStyle(e))[0],n=l[1],o=this.fontMetrics.getMetrics(m,n).baseline,this.ctx.font=m,this.ctx.fillStyle=yP(e.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Dg(c.styles.textAlign),p=C3(c),q=0,c.styles.textAlign){case 1:q+=p.width/2;break;case 2:q+=p.width}r=p.add(q,0,0,-p.height/2+1),this.ctx.save(),this.path([new CG(p.left,p.top),new CG(p.left+p.width,p.top),new CG(p.left+p.width,p.top+p.height),new CG(p.left,p.top+p.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Be(c.value,r),e.letterSpacing,o),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ap(c.styles.display,2048))return[3,20];if(null===c.styles.listStyleImage)return[3,19];if(0!==(s=c.styles.listStyleImage).type)return[3,18];i=void 0,t=s.url,u.label=15;case 15:return u.trys.push([15,17,,18]),[4,this.context.cache.match(t)];case 16:return i=u.sent(),this.ctx.drawImage(i,c.bounds.left-(i.width+10),c.bounds.top),[3,18];case 17:return u.sent(),this.context.logger.error("Error loading list-style-image "+t),[3,18];case 18:return[3,20];case 19:a.listValue&&-1!==c.styles.listStyleType&&(m=this.createFontStyle(e)[0],this.ctx.font=m,this.ctx.fillStyle=yP(e.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",p=new xl(c.bounds.left,c.bounds.top+yG(c.styles.paddingTop,c.bounds.width),c.bounds.width,zQ(e.lineHeight,e.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Be(a.listValue,p),e.letterSpacing,zQ(e.lineHeight,e.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),u.label=20;case 20:return[2]}})})},b.prototype.renderStackContent=function(a){return xj(this,void 0,void 0,function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return xk(this,function(q){switch(q.label){case 0:return Ap(a.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(a.element)];case 1:q.sent(),b=0,c=a.negativeZIndex,q.label=2;case 2:if(!(b<c.length))return[3,5];return d=c[b],[4,this.renderStack(d)];case 3:q.sent(),q.label=4;case 4:return b++,[3,2];case 5:return[4,this.renderNodeContent(a.element)];case 6:q.sent(),e=0,f=a.nonInlineLevel,q.label=7;case 7:if(!(e<f.length))return[3,10];return d=f[e],[4,this.renderNode(d)];case 8:q.sent(),q.label=9;case 9:return e++,[3,7];case 10:g=0,h=a.nonPositionedFloats,q.label=11;case 11:if(!(g<h.length))return[3,14];return d=h[g],[4,this.renderStack(d)];case 12:q.sent(),q.label=13;case 13:return g++,[3,11];case 14:i=0,j=a.nonPositionedInlineLevel,q.label=15;case 15:if(!(i<j.length))return[3,18];return d=j[i],[4,this.renderStack(d)];case 16:q.sent(),q.label=17;case 17:return i++,[3,15];case 18:k=0,l=a.inlineLevel,q.label=19;case 19:if(!(k<l.length))return[3,22];return d=l[k],[4,this.renderNode(d)];case 20:q.sent(),q.label=21;case 21:return k++,[3,19];case 22:m=0,n=a.zeroOrAutoZIndexOrTransformedOrOpacity,q.label=23;case 23:if(!(m<n.length))return[3,26];return d=n[m],[4,this.renderStack(d)];case 24:q.sent(),q.label=25;case 25:return m++,[3,23];case 26:o=0,p=a.positiveZIndex,q.label=27;case 27:if(!(o<p.length))return[3,30];return d=p[o],[4,this.renderStack(d)];case 28:q.sent(),q.label=29;case 29:return o++,[3,27];case 30:return[2]}})})},b.prototype.mask=function(a){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(a.slice(0).reverse()),this.ctx.closePath()},b.prototype.path=function(a){this.ctx.beginPath(),this.formatPath(a),this.ctx.closePath()},b.prototype.formatPath=function(a){var b=this;a.forEach(function(a,c){var d=CJ(a)?a.start:a;0===c?b.ctx.moveTo(d.x,d.y):b.ctx.lineTo(d.x,d.y),CJ(a)&&b.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},b.prototype.renderRepeat=function(a,b,c,d){this.path(a),this.ctx.fillStyle=b,this.ctx.translate(c,d),this.ctx.fill(),this.ctx.translate(-c,-d)},b.prototype.resizeImage=function(a,b,c){if(a.width===b&&a.height===c)return a;var d,e=(null!=(d=this.canvas.ownerDocument)?d:document).createElement("canvas");return e.width=Math.max(1,b),e.height=Math.max(1,c),e.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,b,c),e},b.prototype.renderBackgroundImage=function(a){return xj(this,void 0,void 0,function(){var b,c,d,e,f,g;return xk(this,function(h){switch(h.label){case 0:b=a.styles.backgroundImage.length-1,c=function(c){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;return xk(this,function(J){switch(J.label){case 0:if(0!==c.type)return[3,5];e=void 0,f=c.url,J.label=1;case 1:return J.trys.push([1,3,,4]),[4,d.context.cache.match(f)];case 2:return e=J.sent(),[3,4];case 3:return J.sent(),d.context.logger.error("Error loading background-image "+f),[3,4];case 4:return e&&(h=(g=C4(a,b,[e.width,e.height,e.width/e.height]))[0],i=g[1],j=g[2],k=g[3],l=g[4],m=d.ctx.createPattern(d.resizeImage(e,k,l),"repeat"),d.renderRepeat(h,m,i,j)),[3,6];case 5:1===c.type?(h=(n=C4(a,b,[null,null,null]))[0],i=n[1],j=n[2],k=n[3],l=n[4],p=(o=y1(c.angle,k,l))[0],q=o[1],r=o[2],s=o[3],t=o[4],(u=document.createElement("canvas")).width=k,u.height=l,w=(v=u.getContext("2d")).createLinearGradient(q,s,r,t),y_(c.stops,p).forEach(function(a){return w.addColorStop(a.stop,yP(a.color))}),v.fillStyle=w,v.fillRect(0,0,k,l),k>0&&l>0&&(m=d.ctx.createPattern(u,"repeat"),d.renderRepeat(h,m,i,j))):2===c.type&&(h=(x=C4(a,b,[null,null,null]))[0],y=x[1],z=x[2],k=x[3],l=x[4],i=yG((A=0===c.position.length?[yD]:c.position)[0],k),j=yG(A[A.length-1],l),C=(B=y4(c,i,j,k,l))[0],D=B[1],C>0&&D>0&&(E=d.ctx.createRadialGradient(y+i,z+j,0,y+i,z+j,C),y_(c.stops,2*C).forEach(function(a){return E.addColorStop(a.stop,yP(a.color))}),d.path(h),d.ctx.fillStyle=E,C!==D?(F=a.bounds.left+.5*a.bounds.width,G=a.bounds.top+.5*a.bounds.height,I=1/(H=D/C),d.ctx.save(),d.ctx.translate(F,G),d.ctx.transform(1,0,0,H,0,0),d.ctx.translate(-F,-G),d.ctx.fillRect(y,I*(z-G)+G,k,l*I),d.ctx.restore()):d.ctx.fill())),J.label=6;case 6:return b--,[2]}})},d=this,e=0,f=a.styles.backgroundImage.slice(0).reverse(),h.label=1;case 1:if(!(e<f.length))return[3,4];return g=f[e],[5,c(g)];case 2:h.sent(),h.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},b.prototype.renderSolidBorder=function(a,b,c){return xj(this,void 0,void 0,function(){return xk(this,function(d){return this.path(CY(c,b)),this.ctx.fillStyle=yP(a),this.ctx.fill(),[2]})})},b.prototype.renderDoubleBorder=function(a,b,c,d){return xj(this,void 0,void 0,function(){var e,f;return xk(this,function(g){switch(g.label){case 0:if(!(b<3))return[3,2];return[4,this.renderSolidBorder(a,c,d)];case 1:return g.sent(),[2];case 2:return e=CZ(d,c),this.path(e),this.ctx.fillStyle=yP(a),this.ctx.fill(),f=C$(d,c),this.path(f),this.ctx.fill(),[2]}})})},b.prototype.renderNodeBackgroundAndBorders=function(a){return xj(this,void 0,void 0,function(){var b,c,d,e,f,g,h,i,j=this;return xk(this,function(k){switch(k.label){case 0:if(this.applyEffects(a.getEffects(2)),c=!yO((b=a.container.styles).backgroundColor)||b.backgroundImage.length,d=[{style:b.borderTopStyle,color:b.borderTopColor,width:b.borderTopWidth},{style:b.borderRightStyle,color:b.borderRightColor,width:b.borderRightWidth},{style:b.borderBottomStyle,color:b.borderBottomColor,width:b.borderBottomWidth},{style:b.borderLeftStyle,color:b.borderLeftColor,width:b.borderLeftWidth}],e=Df(C8(b.backgroundClip,0),a.curves),!(c||b.boxShadow.length))return[3,2];return this.ctx.save(),this.path(e),this.ctx.clip(),yO(b.backgroundColor)||(this.ctx.fillStyle=yP(b.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(a.container)];case 1:k.sent(),this.ctx.restore(),b.boxShadow.slice(0).reverse().forEach(function(b){j.ctx.save();var c,d,e,f,g=CM(a.curves),h=1e4*!b.inset,i=(c=-h+(b.inset?1:-1)*b.spread.number,d=(b.inset?1:-1)*b.spread.number,e=b.spread.number*(b.inset?-2:2),f=b.spread.number*(b.inset?-2:2),g.map(function(a,b){switch(b){case 0:return a.add(c,d);case 1:return a.add(c+e,d);case 2:return a.add(c+e,d+f);case 3:return a.add(c,d+f)}return a}));b.inset?(j.path(g),j.ctx.clip(),j.mask(i)):(j.mask(g),j.ctx.clip(),j.path(i)),j.ctx.shadowOffsetX=b.offsetX.number+h,j.ctx.shadowOffsetY=b.offsetY.number,j.ctx.shadowColor=yP(b.color),j.ctx.shadowBlur=b.blur.number,j.ctx.fillStyle=b.inset?yP(b.color):"rgba(0,0,0,1)",j.ctx.fill(),j.ctx.restore()}),k.label=2;case 2:f=0,g=0,h=d,k.label=3;case 3:if(!(g<h.length))return[3,13];if(!(0!==(i=h[g]).style&&!yO(i.color)&&i.width>0))return[3,11];if(2!==i.style)return[3,5];return[4,this.renderDashedDottedBorder(i.color,i.width,f,a.curves,2)];case 4:case 6:case 8:return k.sent(),[3,11];case 5:if(3!==i.style)return[3,7];return[4,this.renderDashedDottedBorder(i.color,i.width,f,a.curves,3)];case 7:if(4!==i.style)return[3,9];return[4,this.renderDoubleBorder(i.color,i.width,f,a.curves)];case 9:return[4,this.renderSolidBorder(i.color,f,a.curves)];case 10:k.sent(),k.label=11;case 11:f++,k.label=12;case 12:return g++,[3,3];case 13:return[2]}})})},b.prototype.renderDashedDottedBorder=function(a,b,c,d,e){return xj(this,void 0,void 0,function(){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return xk(this,function(v){return this.ctx.save(),f=C_(d,c),g=CY(d,c),2===e&&(this.path(g),this.ctx.clip()),CJ(g[0])?(h=g[0].start.x,i=g[0].start.y):(h=g[0].x,i=g[0].y),CJ(g[1])?(j=g[1].end.x,k=g[1].end.y):(j=g[1].x,k=g[1].y),l=0===c||2===c?Math.abs(h-j):Math.abs(i-k),this.ctx.beginPath(),3===e?this.formatPath(f):this.formatPath(g.slice(0,2)),m=b<3?3*b:2*b,n=b<3?2*b:b,3===e&&(m=b,n=b),o=!0,l<=2*m?o=!1:l<=2*m+n?(p=l/(2*m+n),m*=p,n*=p):(q=Math.floor((l+n)/(m+n)),r=(l-q*m)/(q-1),n=(s=(l-(q+1)*m)/q)<=0||Math.abs(n-r)<Math.abs(n-s)?r:s),o&&(3===e?this.ctx.setLineDash([0,m+n]):this.ctx.setLineDash([m,n])),3===e?(this.ctx.lineCap="round",this.ctx.lineWidth=b):this.ctx.lineWidth=2*b+1.1,this.ctx.strokeStyle=yP(a),this.ctx.stroke(),this.ctx.setLineDash([]),2===e&&(CJ(g[0])&&(t=g[3],u=g[0],this.ctx.beginPath(),this.formatPath([new CG(t.end.x,t.end.y),new CG(u.start.x,u.start.y)]),this.ctx.stroke()),CJ(g[1])&&(t=g[1],u=g[2],this.ctx.beginPath(),this.formatPath([new CG(t.end.x,t.end.y),new CG(u.start.x,u.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},b.prototype.render=function(a){return xj(this,void 0,void 0,function(){var b;return xk(this,function(c){switch(c.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=yP(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),b=CX(a),[4,this.renderStack(b)];case 1:return c.sent(),this.applyEffects([]),[2,this.canvas]}})})},b}(Dc),De=function(a){return a instanceof BD||a instanceof BC||a instanceof BB&&a.type!==Bz&&a.type!==By||!1},Df=function(a,b){switch(a){case 0:return CM(b);case 2:return[b.topLeftContentBox,b.topRightContentBox,b.bottomRightContentBox,b.bottomLeftContentBox];default:return CN(b)}},Dg=function(a){switch(a){case 1:return"center";case 2:return"right";default:return"left"}},Dh=["-apple-system","system-ui"],Di=function(a){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?a.filter(function(a){return -1===Dh.indexOf(a)}):a},Dj=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.canvas=c.canvas?c.canvas:document.createElement("canvas"),d.ctx=d.canvas.getContext("2d"),d.options=c,d.canvas.width=Math.floor(c.width*c.scale),d.canvas.height=Math.floor(c.height*c.scale),d.canvas.style.width=c.width+"px",d.canvas.style.height=c.height+"px",d.ctx.scale(d.options.scale,d.options.scale),d.ctx.translate(-c.x,-c.y),d.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+c.width+"x"+c.height+" at "+c.x+","+c.y+") with scale "+c.scale),d}return xh(b,a),b.prototype.render=function(a){return xj(this,void 0,void 0,function(){var b;return xk(this,function(c){switch(c.label){case 0:return[4,Dk(A3(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,a))];case 1:return b=c.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=yP(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(b,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},b}(Dc),Dk=function(a){return new Promise(function(b,c){var d=new Image;d.onload=function(){b(d)},d.onerror=c,d.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(a))})},Dl=function(){function a(a){var b=a.id,c=a.enabled;this.id=b,this.enabled=c,this.start=Date.now()}return a.prototype.debug=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.enabled&&this.info.apply(this,a)},a.prototype.getTime=function(){return Date.now()-this.start},a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.enabled},a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.enabled&&this.info.apply(this,a)},a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.enabled&&this.info.apply(this,a)},a.instances={},a}(),Dm=function(){function a(b,c){var d;this.windowBounds=c,this.instanceName="#"+a.instanceCount++,this.logger=new Dl({id:this.instanceName,enabled:b.logging}),this.cache=null!=(d=b.cache)?d:new Cx(this,b)}return a.instanceCount=1,a}(),Dn=function(a,b,c){var d=b.ownerDocument,e=d.documentElement?yW(a,getComputedStyle(d.documentElement).backgroundColor):yX.TRANSPARENT,f=d.body?yW(a,getComputedStyle(d.body).backgroundColor):yX.TRANSPARENT,g="string"==typeof c?yW(a,c):null===c?yX.TRANSPARENT:0xffffffff;return b===d.documentElement?yO(e)?yO(f)?g:f:e:g};let Do=new B.default;function Dp({title:a,key:b,onClose:c,data:d,loading:e,wardName:f,token:g}){let{hname:h,hcode:k}=(0,P.default)(),{resolvedTheme:l}=(0,xf.useTheme)(),[n,o]=(0,j.useState)(!1),p=(0,j.useRef)(null);if((0,j.useEffect)(()=>o(!0),[]),!g)return c(),null;let q={theme:n&&"dark"===l?"ag-default-dark":"ag-default",title:{text:`ค่าเฉลี่ยแต่ละข้อของ${f}และค่าเฉลี่ยทั้งหมด`,fontSize:16,fontFamily:"Sarabun, sans-serif",fontWeight:"bold",spacing:30},data:(0,j.useMemo)(()=>{let a=Array.isArray(d?.wardAverage)?d.wardAverage:[],b=Array.isArray(d?.allAverage)?d.allAverage:[],c=new Map(a.map(a=>[a.name,Number(a.AVG)||0])),e=new Map(b.map(a=>[a.name,Number(a.AVG)||0]));return[...new Set([...c.keys(),...e.keys()])].map((a,b)=>({name:`${b+1}. ${a}`,wardAVG:c.get(a)??0,allAVG:e.get(a)??0}))},[d]),overlays:{noData:{text:"ไม่มีข้อมูลที่จะแสดง",fontSize:16,fontFamily:"Sarabun, sans-serif"}},tooltip:{mode:"single"},series:["OPD"!==f&&{type:"bar",xKey:"name",yKey:"wardAVG",yName:f,fill:"#F8C0D8",stroke:"#EC028D",label:{enabled:!0,formatter:a=>a.value?`${a.value.toFixed(2)}`:"0",placement:"outside-end",fontFamily:"Sarabun"}},{type:"bar",xKey:"name",yKey:"allAVG",yName:"OPD"!==f?"ทั้งโรงพยาบาล":"OPD",fill:"OPD"!==f?"#CCE3FF":"#F8C0D8",stroke:"OPD"!==f?"#01499D":"#EC028D",label:{enabled:!0,formatter:a=>a.value?`${a.value.toFixed(2)}`:"0",placement:"outside-end",fontFamily:"Sarabun"}}],axes:[{type:"category",position:"bottom",label:{fontFamily:"Sarabun",wrapping:"hyphenate"}},{type:"number",position:"left",label:{fontFamily:"Sarabun"}}],legend:{enabled:!0,position:"bottom",item:{label:{fontFamily:"Sarabun"}}},background:{fill:"transparent"}},r=Object.keys(d).length,s=async()=>{var a,b,c;let d=document.querySelector("#chartContainer");if(!d)return;let e=String(f??"ไม่มีข้อมูล").replace(/[\\/:*?"<>|]+/g,"-").trim(),g=await (a={scale:1},b=d,c=a,xj(void 0,void 0,void 0,function(){var a,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M;return xk(this,function(N){switch(N.label){case 0:if(!b||"object"!=typeof b)return[2,Promise.reject("Invalid element provided as first argument")];if(!(a=b.ownerDocument))throw Error("Element is not attached to a Document");if(!(d=a.defaultView))throw Error("Document is not attached to a Window");if(e={allowTaint:null!=(w=c.allowTaint)&&w,imageTimeout:null!=(x=c.imageTimeout)?x:15e3,proxy:c.proxy,useCORS:null!=(y=c.useCORS)&&y},h=new Dm(xi({logging:null==(z=c.logging)||z,cache:c.cache},e),g=new xl((f={windowWidth:null!=(A=c.windowWidth)?A:d.innerWidth,windowHeight:null!=(B=c.windowHeight)?B:d.innerHeight,scrollX:null!=(C=c.scrollX)?C:d.pageXOffset,scrollY:null!=(D=c.scrollY)?D:d.pageYOffset}).scrollX,f.scrollY,f.windowWidth,f.windowHeight)),i=null!=(E=c.foreignObjectRendering)&&E,j={allowTaint:null!=(F=c.allowTaint)&&F,onclone:c.onclone,ignoreElements:c.ignoreElements,inlineImages:i,copyStyles:i},h.logger.debug("Starting document clone with size "+g.width+"x"+g.height+" scrolled to "+-g.left+","+-g.top),!(l=(k=new Ch(h,b,j)).clonedReferenceElement))return[2,Promise.reject("Unable to find element in cloned iframe")];return[4,k.toIFrame(a,g)];case 1:if(m=N.sent(),o=(n=BT(l)||"HTML"===l.tagName?xn(l.ownerDocument):xm(h,l)).width,p=n.height,q=n.left,r=n.top,s=Dn(h,l,c.backgroundColor),t={canvas:c.canvas,backgroundColor:s,scale:null!=(H=null!=(G=c.scale)?G:d.devicePixelRatio)?H:1,x:(null!=(I=c.x)?I:0)+q,y:(null!=(J=c.y)?J:0)+r,width:null!=(K=c.width)?K:Math.ceil(o),height:null!=(L=c.height)?L:Math.ceil(p)},!i)return[3,3];return h.logger.debug("Document cloned, using foreign object rendering"),[4,new Dj(h,t).render(l)];case 2:return u=N.sent(),[3,5];case 3:return h.logger.debug("Document cloned, element located at "+q+","+r+" with size "+o+"x"+p+" using computed rendering"),h.logger.debug("Starting DOM parsing"),v=BI(h,l),s===v.styles.backgroundColor&&(v.styles.backgroundColor=yX.TRANSPARENT),h.logger.debug("Starting renderer for element at "+t.x+","+t.y+" with size "+t.width+"x"+t.height),[4,new Dd(h,t).render(v)];case 4:u=N.sent(),N.label=5;case 5:return(null==(M=c.removeContainer)||M)&&!Ch.destroy(m)&&h.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore"),h.logger.debug("Finished rendering"),[2,u]}})})),h=document.createElement("a");h.download=`ค่าเฉลี่ยแต่ละข้อของ${e}.jpg`,h.href=g.toDataURL("image/jpeg",1),h.click()};return(0,i.jsx)(m.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 flex items-center justify-center z-50 backdrop-blur-xs bg-black/30 dark:bg-white/5 px-4",children:(0,i.jsxs)(m.motion.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3,ease:"easeInOut"},className:"relative z-[71] w-full max-w-7xl rounded-2xl border border-zinc-300 bg-white shadow-xl dark:border-[#3a3a3a] dark:bg-[#1f1f1f]",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b border-zinc-200 px-4 py-3 dark:border-[#3a3a3a]",children:[(0,i.jsx)("div",{className:"flex min-w-0 items-center gap-2",children:(0,i.jsxs)("span",{className:"text-base font-semibold",children:[a," ",f]})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("button",{onMouseDown:a=>Do.create(a),onClick:()=>{let a=p.current?.chart;if(!a)return;let b=String(f??"ไม่มีข้อมูล").replace(/[\\/:*?"<>|]+/g,"-").trim();a.download(`ค่าเฉลี่ยแต่ละข้อของ${b}.png`,{background:"dark"===l?"#181818":"#ffffff",scale:2,padding:{top:20,right:20,bottom:20,left:20},type:"png"})},className:"mx-0.5 cursor-pointer inline-flex items-center gap-2 rounded-lg border border-zinc-200 px-3 py-1.5 text-xs hover:bg-zinc-50 dark:border-[#3a3a3a] dark:hover:bg-[#222]",children:[(0,i.jsx)(Z,{size:14})," บันทึก (PNG)"]}),(0,i.jsxs)("button",{onMouseDown:a=>Do.create(a),onClick:s,className:"mx-0.5 cursor-pointer inline-flex items-center gap-2 rounded-lg border border-zinc-200 px-3 py-1.5 text-xs hover:bg-zinc-50 dark:border-[#3a3a3a] dark:hover:bg-[#222]",children:[(0,i.jsx)(Z,{size:14})," บันทึก (JPG)"]}),(0,i.jsx)(X.Tooltip,{content:(0,i.jsx)("p",{className:"text-zinc-900 dark:text-zinc-50 px-2",children:"ปิด"}),showArrow:!0,children:(0,i.jsx)(m.motion.button,{whileTap:{scale:.98},onMouseDown:a=>Do.create(a),onClick:c,onPointerDownCapture:a=>a.stopPropagation(),className:"ml-2 text-zinc-400 rounded-full p-1.5 focus:outline-none hover:bg-zinc-200 dark:hover:bg-zinc-800 transition cursor-pointer","aria-label":"ปิด",children:(0,i.jsx)(K.X,{size:16})})})]})]}),(0,i.jsx)(m.motion.div,{id:"chartContainer",className:"p-4 overflow-y-auto max-h-[calc(100vh-30vh)] bg-white dark:bg-[#1f1f1f]",children:r>0&&!e?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(xe,{ref:p,options:q,style:{minWidth:"75rem",height:"500px"}})}):(0,i.jsx)(O.default,{title:"กําลังโหลดข้อมูล..."})}),(0,i.jsx)("div",{className:"flex items-center justify-end gap-2 border-t border-zinc-200 px-4 py-3 dark:border-[#3a3a3a]",children:(0,i.jsxs)("p",{className:"text-xs ",children:[h," (",k,")"]})})]})},b)}function Dq(){let{hnameStatus:a}=(0,P.default)(),[b,c]=(0,j.useState)({countAll:0,countWard:[],countPatientService:[]}),[d,e]=(0,j.useState)(!0),[f,g]=(0,j.useState)(null),[h,n]=(0,j.useState)(""),[v,w]=(0,j.useState)([]),[x,y]=(0,j.useState)([]),[C,D]=(0,j.useState)(!1),[H,I]=(0,j.useState)(!1),[J,K]=(0,j.useState)(!1),[M,N]=(0,j.useState)(!1),[O,Q]=(0,j.useState)({}),[R,T]=(0,j.useState)(!1),U=(0,Y.useRouter)(),Z=(0,Y.useSearchParams)().get("chart"),$=new B.default,_=async a=>{let b=await (0,L.cryptoEncode)(a);ak(a,"OPD"===a&&"vn"),U.push(`/?chart=${encodeURIComponent(b)}`,{scroll:!1})},aa=localStorage.getItem("token");(0,j.useEffect)(()=>{ab()},[]);let ab=async()=>{try{let a=await k.default.get("/dashboard");c(a.data??{}),g(null)}catch(a){g(a)}finally{e(!1)}},ac=async a=>{n(""),D(!0);try{let b=await k.default.get(`/dashboard/${a}`,{headers:{Authorization:`Bearer ${aa}`}});w(b.data.data??{}),n(a)}catch(a){console.log(a),(0,u.addToast)({title:"เกิดข้อผิดพลาด",description:a.response.data.message,timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0})}finally{D(!1)}},ad=async a=>{I(!0);try{let a=await k.default.get("/dashboard/fetchAllVn",{headers:{Authorization:`Bearer ${aa}`}});if(200===a.status){let b=await (0,W.cryptoDecode)(a.data.data);y(b)}}catch(a){console.log(a),(0,u.addToast)({title:"เกิดข้อผิดพลาด",description:a?.response?.data?.message,timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0})}finally{I(!1)}};if(f&&!a&&!d)return(0,i.jsx)(t.ErrorBanner,{err:f,onRetry:ab,autoRetrySec:10,onDismiss:()=>g(null)});if(a)return(0,i.jsx)(t.ErrorBanner,{err:{message:"เกิดข้อผิดพลาด 404",config:{url:"/*"},response:{status:404,data:{message:"ระบบตรวจพบว่าไม่มีการตั้งค่าชื่อโรงพยาบาล กรุณาตั้งค่าก่อนใช้งาน",errors:{Hcode:"ไม่มีการตั้งค่ารหัสโรงพยาบาล",Hname:"ไม่มีการตั้งค่าชื่อโรงพยาบาล"}}}}});let ae=Object.entries(b).filter(([a])=>a.includes("countPatientService")).flatMap(([,a])=>a),af=Object.entries(b).filter(([a])=>a.includes("averagePatientService")).flatMap(([,a])=>a),ag=(0,j.useMemo)(()=>Array.isArray(b.countWard)?b.countWard.reduce((a,b)=>a+(Number(b?.result)||0),0):0,[b.countWard]),ah=(0,j.useMemo)(()=>Array.isArray(ae)?ae.reduce((a,b)=>a+(Number(b?.result)||0),0):0,[b.countPatientService]),ai=(0,j.useMemo)(()=>Object.entries(b||{}).filter(([a])=>a.startsWith("countAllPercentageNotNull")).reduce((a,[,b])=>a+Number(b||0),0),[b]),aj=(0,j.useMemo)(()=>Object.entries(b||{}).filter(([a])=>a.startsWith("countAllPercentageNull")).reduce((a,[,b])=>a+Number(b||0),0),[b]),ak=async(a,b="")=>{n(null),T(!0);let c="vn"===b?"/dashboard/averageOPD":`/dashboard/averageIPD/${a}`;try{let b=await k.default.get(`${c}`,{headers:{Authorization:`Bearer ${aa}`}});if(200===b.status){let c=b.data?.data??b.data,d=await (0,W.cryptoDecode)(c);console.log(d),Q({wardAverage:d?.wardAverage??[],allAverage:d?.allAverage??[]}),n(a)}}catch(a){console.log(a),(0,u.addToast)({title:"เกิดข้อผิดพลาด",description:a?.response?.data?.message,timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0})}finally{T(!1)}};return(0,j.useEffect)(()=>{let a=!0;return(async()=>{if(Z)try{let b=await (0,W.cryptoDecode)(Z);a&&b&&await ak(b,"OPD"===b&&"vn")}catch(a){console.error(a)}})(),()=>{a=!1}},[Z]),(0,i.jsxs)("div",{className:"space-y-6 select-none",children:[(0,i.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[(0,i.jsx)(G,{icon:(0,i.jsx)(q,{className:"size-5"}),label:"จำนวนทั้งหมด",value:b?.countAll??0,average:d?void 0:b?.averageAll?.[0]?.average??0,loading:d}),(0,i.jsx)(G,{icon:(0,i.jsx)(o,{className:"size-5"}),label:"จำนวนตามประเภทบริการ",value:ah,hint:ae?.map(a=>a.patient_service_name_english).join(" • "),loading:d}),(0,i.jsx)(G,{icon:(0,i.jsx)(r.FileCheck2,{className:"size-5"}),label:"ฟอร์มที่สมบูรณ์",value:ai||0,hint:`ทั้งหมด ${b.countAll||0} ฟอร์ม`,loading:d}),(0,i.jsx)(G,{icon:(0,i.jsx)(s,{className:"size-5"}),label:"ฟอร์มที่ยังไม่สมบูรณ์",value:aj??0,hint:`ทั้งหมด ${b.countAll||0} ฟอร์ม`,loading:d})]}),(0,i.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,i.jsxs)(m.motion.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"rounded-2xl border border-zinc-300 dark:border-[#505050] bg-white dark:bg-[#181818]",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-200 dark:border-[#3a3a3a]",children:[d?(0,i.jsx)(z,{className:"h-5 w-full max-w-32 rounded-md"}):(0,i.jsx)("p",{className:"font-semibold",children:"จำนวนฟอร์มของตึก"}),d?(0,i.jsx)(z,{className:"h-4 w-12 rounded-md"}):(0,i.jsxs)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["รวม ",ag.toLocaleString("th-TH")]})]}),(0,i.jsx)("div",{className:"p-4 space-y-3",children:Array.isArray(b.countWard)&&b.countWard.length>0?b.countWard.map(a=>(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,i.jsx)("div",{className:`${aa?"col-span-3":"col-span-4"}`,children:(0,i.jsx)(F,{name:a.patient_ward,value:a.result,total:ag||1,token:aa,averageWard:b.averageWard?.find(b=>b.patient_ward===a.patient_ward)?.average||0,fetchDashboardWard:ac,setShowModal:K},a.patient_ward)}),aa&&(0,i.jsx)(X.Tooltip,{content:(0,i.jsx)("p",{className:"px-2",children:a.patient_ward}),showArrow:!0,children:(0,i.jsx)("div",{className:"cursor-pointer rounded-xl border backdrop-blur-2xl bg-white/5 border-zinc-200 dark:border-[#3a3a3a] p-3 shadow-lg shadow-zinc-950/5 dark:shadow-zinc-800/40 flex items-center justify-center relative",onClick:()=>{_(a.patient_ward)},onMouseDown:a=>$.create(a),children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,i.jsx)("p",{className:" absolute top-0 right-0 text-xs text-zinc-600 dark:text-zinc-300 bg-zinc-200 dark:bg-zinc-700 py-0.5 px-2 rounded-full ",children:"Chart"}),(0,i.jsx)(p,{className:"text-neutral-700 dark:text-neutral-200"}),(0,i.jsx)("p",{className:"text-neutral-700 dark:text-neutral-200 font-semibold text-sm line-clamp-1",children:a.patient_ward})]})})})]})):(0,i.jsx)(A,{text:d?"กําลังโหลดข้อมูล...":"ยังไม่มีข้อมูลตึก"})})]}),(0,i.jsxs)(m.motion.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"lg:col-span-2 rounded-2xl border border-zinc-300 dark:border-[#505050] bg-white dark:bg-[#181818]",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-200 dark:border-[#3a3a3a]",children:[d?(0,i.jsx)(z,{className:"h-5 w-full max-w-32 rounded-md"}):(0,i.jsx)("p",{className:"font-semibold",children:"จำนวนฟอร์มตามประเภทบริการ"}),d?(0,i.jsx)(z,{className:"h-4 w-12 rounded-md"}):(0,i.jsxs)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["รวม ",ah.toLocaleString("th-TH")]})]}),(0,i.jsx)("div",{className:"p-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:Array.isArray(ae)&&ae.length>0?ae.map(a=>(0,i.jsx)(E,{name:a.patient_service_name_english,value:a.result,average:af.find(b=>b.patient_service_name_english===a.patient_service_name_english)?.average||0,setShowModal:N,fetchDashboardVN:ad,loading:H,openChartVNModal:()=>_(a.patient_service_name_english)},a.patient_service_name_english)):(0,i.jsx)("div",{className:"col-span-full",children:(0,i.jsx)(A,{text:d?"กําลังโหลดข้อมูล...":"ยังไม่มีข้อมูลประเภทบริการ"})})})]})]}),(0,i.jsx)(l.AnimatePresence,{mode:"sync",children:J&&(0,i.jsx)(S,{title:"จำนวนฟอร์มของตึก",subtitle:h,data:v,onClose:()=>{K(!1),n(""),w([])},loading:C},"ward")}),(0,i.jsx)(l.AnimatePresence,{mode:"sync",children:M&&(0,i.jsx)(V,{title:"จำนวน VN ของประเภทบริการ",data:x,onClose:()=>{N(!1)},loading:H},"ward")}),(0,i.jsx)(l.AnimatePresence,{children:Z&&(0,i.jsx)(Dp,{title:"Chart Bar",data:O,onClose:()=>{Q({}),U.replace("/",{scroll:!1})},loading:R,wardName:h,token:aa},"chart")})]})}}];

//# sourceMappingURL=src_app_%28public%29_page_jsx_7634f626._.js.map