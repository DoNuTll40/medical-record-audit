(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,35382,e=>{"use strict";e.s(["useMotionValue",()=>s]);var t=e.i(86427),a=e.i(71645),r=e.i(37806),n=e.i(47414);function s(e){let s=(0,n.useConstant)(()=>(0,t.motionValue)(e)),{isStatic:l}=(0,a.useContext)(r.MotionConfigContext);if(l){let[,t]=(0,a.useState)(e);(0,a.useEffect)(()=>s.on("change",t),[])}return s}},95187,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(a,{callServer:function(){return r.callServer},createServerReference:function(){return s.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}});let r=e.r(32120),n=e.r(92245),s=e.r(35326)},93383,e=>{"use strict";e.s(["cryptoEncode",()=>a]);var t=e.i(95187),a=(0,t.createServerReference)("7fd29c5109c8a80ad7bcc9fbcd81ed67ce96fc06a3",t.callServer,void 0,t.findSourceMapURL,"cryptoEncode")},13560,(e,t,a)=>{var r=Object.create,n=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,c=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,x=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,p=(e,t,a,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of o(t))u.call(e,s)||s===a||n(e,s,{get:()=>t[s],enumerable:!(r=l(t,s))||r.enumerable});return e},h={};((e,t)=>{for(var a in t)n(e,a,{get:t[a],enumerable:!0})})(h,{useRouter:()=>g}),t.exports=p(n({},"__esModule",{value:!0}),h);var b=e.r(18566),f=e.r(71645),v=((e,t,a)=>(a=null!=e?r(c(e)):{},p(!t&&e&&e.__esModule?a:n(a,"default",{value:e,enumerable:!0}),e)))(e.r(16915)),g=n(()=>{let e=(0,b.useRouter)(),t=(0,b.usePathname)();(0,f.useEffect)(()=>{v.done()},[t]);let a=(0,f.useCallback)((a,r)=>{a!==t&&v.start(),e.replace(a,r)},[e,t]),r=(0,f.useCallback)((a,r)=>{a!==t&&v.start(),e.push(a,r)},[e,t]);return s(((e,t)=>{for(var a in t||(t={}))u.call(t,a)&&x(e,a,t[a]);if(d)for(var a of d(t))m.call(t,a)&&x(e,a,t[a]);return e})({},e),i({replace:a,push:r}))},"name",{value:"useRouter",configurable:!0})},43444,e=>{"use strict";e.s(["ErrorBanner",()=>h],43444);var t=e.i(43476),a=e.i(71645),r=e.i(51737),n=e.i(75254);let s=(0,n.default)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);var l=e.i(64659);let i=(0,n.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),o=(0,n.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var d=e.i(37727),c=e.i(88653),u=e.i(46932),m=e.i(27682),x=e.i(36132),p=e.i(66540);function h(e){let{err:n,onRetry:h,onDismiss:b,errorId:f,autoRetrySec:v}=e,[g,j]=(0,a.useState)(!1),[y,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(null!=v?v:null),z=(0,a.useMemo)(()=>new Date,[]),_=(0,a.useMemo)(()=>null!=f?f:Math.random().toString(36).slice(2,10),[f]),{message:S,details:M}=function(e){var t,a,r,n,s,l,i,o,d;let c=null!=(n=null!=(r=null==e||null==(a=e.response)||null==(t=a.data)?void 0:t.message)?r:null==e?void 0:e.message)?n:"string"==typeof e?e:"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ",u="";try{u=null!=(d=null==e?void 0:e.stack)?d:JSON.stringify({status:null==e||null==(s=e.response)?void 0:s.status,url:(null==e||null==(l=e.config)?void 0:l.url)||(null==e||null==(i=e.request)?void 0:i.responseURL),data:null==e||null==(o=e.response)?void 0:o.data},null,2)}catch(t){u=String(e)}return{message:c,details:u}}(n),P=new m.default;(0,a.useEffect)(()=>{if(!w||!h)return;let e=setInterval(()=>{k(t=>null===t?t:t<=1?(clearInterval(e),N(!0),Promise.resolve(h()).finally(()=>N(!1)),null):t-1)},1e3);return()=>clearInterval(e)},[w,h]);let A=async()=>{let e="Error ID: ".concat(_,"\nTime: ").concat((0,p.default)(z).locale("th").add(543,"years").format("วันที่ DD/MM/YYYY เวลา HH:mm น."),"\nMessage: ").concat(S,"\n\nDetails:\n").concat(M);try{(0,x.addToast)({title:"สําเร็จ",description:"คัดลอกเรียบร้อยแล้ว",color:"success",shouldShowTimeoutProgress:!0}),await navigator.clipboard.writeText(e)}catch(e){}};return(0,t.jsx)(u.motion.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},role:"alert","aria-live":"polite",className:"rounded-2xl border border-rose-300 bg-rose-50 dark:border-rose-800 dark:bg-rose-950 text-rose-700 dark:text-rose-200 p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"border border-rose-700/70 bg-rose-100 dark:border-rose-800 dark:bg-rose-800 text-rose-700 dark:text-rose-200 rounded-full p-2",children:(0,t.jsx)(r.ShieldAlert,{className:"size-5"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1 transition-all ease-in-out duration-300",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsxs)("p",{className:"font-semibold truncate",children:["เกิดข้อผิดพลาด : ",S]}),(0,t.jsxs)("div",{className:"text-xs text-rose-600/80 dark:text-rose-300/80",children:[(0,t.jsxs)("span",{className:"mr-2",children:["ID: ",_]}),(0,t.jsx)("span",{children:(0,p.default)(z).locale("th").add(543,"years").format("วันที่ DD/MM/YYYY เวลา HH:mm น.")})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[h&&(0,t.jsxs)(u.motion.button,{whileTap:{scale:.98},onMouseDown:e=>P.create(e),onClick:async()=>{k(null),N(!0),await Promise.resolve(h()),N(!1)},className:"inline-flex items-center gap-1 rounded-lg bg-rose-600 text-white px-3 py-1.5 text-sm hover:bg-rose-500 disabled:opacity-60 cursor-pointer",disabled:y,children:[(0,t.jsx)(s,{className:"size-4 ".concat(y?"animate-spin":"")}),y?"กำลังลองใหม่...":w?"ลองใหม่ใน ".concat(w,"s"):"ลองใหม่"]}),(0,t.jsxs)(u.motion.button,{whileTap:{scale:.98},onClick:()=>j(e=>!e),onMouseDown:e=>P.create(e),className:"inline-flex items-center gap-1 rounded-lg border border-rose-300 dark:border-rose-700 px-3 py-1.5 text-sm hover:bg-rose-100/60 dark:hover:bg-rose-900/50 cursor-pointer",children:[g?(0,t.jsx)(i,{className:"size-4"}):(0,t.jsx)(l.ChevronDown,{className:"size-4"}),"รายละเอียด"]}),(0,t.jsxs)(u.motion.button,{whileTap:{scale:.98},onMouseDown:e=>P.create(e),onClick:A,className:"inline-flex items-center gap-1 rounded-lg border border-rose-300 dark:border-rose-700 px-3 py-1.5 text-sm hover:bg-rose-100/60 dark:hover:bg-rose-900/50 cursor-pointer",children:[(0,t.jsx)(o,{className:"size-4"}),"คัดลอก"]}),b&&(0,t.jsx)(u.motion.button,{whileTap:{scale:.98},onMouseDown:e=>P.create(e),onClick:b,className:"ml-auto inline-flex items-center gap-1 rounded-full px-2 py-2 text-sm hover:bg-rose-100/60 dark:hover:bg-rose-900/50 cursor-pointer","aria-label":"ปิด",title:"ปิด",children:(0,t.jsx)(d.X,{className:"size-4"})})]}),(0,t.jsx)(c.AnimatePresence,{initial:!1,children:g&&(0,t.jsx)(u.motion.div,{initial:{height:0,opacity:0,y:-10},animate:{height:"auto",opacity:1,y:0},exit:{height:0,opacity:0,y:-10},transition:{duration:.2,ease:"easeInOut"},className:"mt-3",children:(0,t.jsx)("pre",{className:"max-h-48 overflow-auto rounded-xl bg-white/70 dark:bg-black/30 p-3 text-xs text-rose-900 dark:text-rose-100 leading-5",children:M})})})]})]})})}},84647,e=>{"use strict";e.s(["default",()=>O],84647);var t=e.i(43476),a=e.i(71645),r=e.i(20545),n=e.i(88653),s=e.i(46932),l=e.i(35382),i=e.i(75254);let o=(0,i.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),d=(0,i.default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var c=e.i(71285);let u=(0,i.default)("file-pen-line",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);var m=e.i(43444),x=e.i(36132),p=e.i(48656),h=(0,e.i(84898).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-shimmer","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),b=e.i(75540),f=e.i(95494),v=(0,p.forwardRef)((e,r)=>{let{Component:n,children:s,getSkeletonProps:l,getContentProps:i}=function(e){var t,r;let n=(0,f.useProviderContext)(),[s,l]=(0,p.mapPropsVariants)(e,h.variantKeys),{as:i,children:o,isLoaded:d=!1,className:c,classNames:u,...m}=s,x=null!=(r=null!=(t=e.disableAnimation)?t:null==n?void 0:n.disableAnimation)&&r,v=(0,a.useMemo)(()=>h({...l,disableAnimation:x}),[(0,b.objectToDeps)(l),x,o]),g=(0,b.clsx)(null==u?void 0:u.base,c);return{Component:i||"div",children:o,slots:v,classNames:u,getSkeletonProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"data-loaded":(0,b.dataAttr)(d),className:v.base({class:(0,b.clsx)(g,null==e?void 0:e.className)}),...m}},getContentProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{className:v.content({class:(0,b.clsx)(null==u?void 0:u.content,null==e?void 0:e.className)})}}}}({...e});return(0,t.jsx)(n,{ref:r,...l(),children:(0,t.jsx)("div",{...i(),children:s})})});function g(e){let{text:a}=e;return(0,t.jsx)("div",{className:"rounded-xl border border-dashed border-zinc-300 dark:border-zinc-700 p-6 text-center text-sm text-zinc-500 dark:text-zinc-400",children:a})}function j(e){let{name:a,value:r,average:n}=e;return(0,t.jsxs)("div",{className:"rounded-xl border flex justify-between border-zinc-200 dark:border-[#3a3a3a] p-3 bg-white/5 backdrop-blur-2xl shadow-lg shadow-zinc-950/5 dark:shadow-zinc-800/40",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-1",children:a}),(0,t.jsx)("p",{className:"text-xl font-semibold",children:Number(r).toLocaleString("th-TH")})]}),(0,t.jsx)("div",{children:n?(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mb-1 text-right",children:"ค่าเฉลี่ย"}),(0,t.jsx)("p",{className:"text-xl font-semibold",children:Number(n).toLocaleString("th-TH")})]}):null})]})}v.displayName="HeroUI.Skeleton";var y=e.i(27682);function N(e){let{name:r,value:n,total:l,token:i,fetchDashboardWard:o,setShowModal:d,averageWard:c,loading:u}=e,m=Math.min(100,Math.round(Number(n||0)/l*100)),[x,p]=(0,a.useState)(!1),h=new y.default;return(0,a.useEffect)(()=>{i&&p(!0)},[]),console.log(n),(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},onClick:()=>x&&void(d(!0),o(r)),onMouseDown:e=>x&&h.create(e),className:"".concat(x?"cursor-pointer":"cursor-default"," rounded-xl border backdrop-blur-2xl bg-white/5 border-zinc-200 dark:border-[#3a3a3a] p-3 shadow-lg shadow-zinc-950/5 dark:shadow-zinc-800/40"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"font-medium",children:r}),(0,t.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:Number(n).toLocaleString("th-TH")})]}),(0,t.jsx)("div",{className:"mt-2 h-2 w-full rounded-full bg-zinc-100 dark:bg-zinc-600 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full rounded-full shadow bg-gradient-to-r from-emerald-500 to-emerald-600 dark:bg-emerald-600",style:{width:"".concat(m,"%")},"aria-label":"".concat(r," ").concat(m,"%")})}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-300 mt-1",children:c?"ค่าเฉลี่ย ".concat(Number(c).toLocaleString("th-TH")," %"):""})})]})}function w(e){let{icon:a,label:r,value:n,hint:l,average:i,loading:o}=e;return(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},className:"rounded-2xl border border-zinc-300 dark:border-[#505050] bg-white dark:bg-[#181818] p-4 shadow-lg shadow-zinc-950/5",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[o?(0,t.jsx)(v,{className:"h-8 w-8 rounded-xl bg-zinc-200 dark:bg-[#303030]"}):(0,t.jsx)("div",{className:"rounded-xl bg-zinc-100 dark:bg-zinc-800 p-2.5",children:a}),(0,t.jsx)("div",{children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{className:"h-3 w-20 mb-2 rounded-md"}),(0,t.jsx)(v,{className:"h-6 w-24 mb-1 rounded-md"}),(0,t.jsx)(v,{className:"h-3 w-32 rounded-md"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 line-clamp-1",children:r}),(0,t.jsx)("p",{className:"text-2xl font-semibold leading-tight",children:Number(n).toLocaleString("th-TH")}),l?(0,t.jsx)("p",{className:"text-xs text-zinc-400 mt-0.5",children:l}):null]})}),void 0!==i&&(0,t.jsx)("div",{className:"ml-auto text-right",children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{className:"h-3 w-12 mb-2 rounded-md"}),(0,t.jsx)(v,{className:"h-6 w-20 rounded-md"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"ค่าเฉลี่ย"}),(0,t.jsx)("p",{className:"text-2xl font-semibold leading-tight",children:Number(i).toLocaleString("th-TH")})]})})]})})}var k=e.i(7486),z=e.i(37727),_=e.i(93383),S=e.i(13560);function M(e){var a,r,n,l,i,o,d,c;let{data:u}=e,m=new y.default,x=(0,S.useRouter)(),p=!!u.form_ipd.total_score&&!!u.form_ipd.score_obtained&&!!u.form_ipd.percentage,h=u.form_ipd.percentage||0,b=async e=>{let t=await (0,_.cryptoEncode)(e);x.replace("/pdf/".concat(encodeURIComponent(t)))};return(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.25},onClick:()=>p&&b(u.patient_an),onMouseDown:e=>p&&m.create(e),className:"w-full rounded-xl border border-zinc-200 dark:border-[#3a3a3a] p-3 my-2 ".concat(p?"cursor-pointer active:bg-white/5":"cursor-auto"),children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,t.jsxs)("p",{className:"font-bold",children:["AN ",u.patient_an]}),(0,t.jsxs)("p",{className:"text-xs line-clamp-1 w-[20%]",title:"".concat(null==u?void 0:u.patient_id),children:["(",u.patient_id,")"]})]}),(0,t.jsxs)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["คะแนนรวม : ",(null==u||null==(a=u.form_ipd)?void 0:a.total_score)||0," | คะแนนที่ได้ : ",(null==u||null==(r=u.form_ipd)?void 0:r.score_obtained)||0," | ค่าร้อยละ : ",(null==u||null==(n=u.form_ipd)?void 0:n.percentage)||0,"%"]})]}),(0,t.jsx)("p",{className:"text-xs font-semibold flex flex-col items-end h-fit px-4 py-1 rounded-full ".concat(p?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-200":"bg-amber-100 text-amber-600 dark:bg-amber-900 dark:text-amber-200"),children:p?"สมบูรณ์":"ยังไม่สมบูรณ์"})]}),(0,t.jsxs)("div",{className:"my-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"คะแนนที่ได้คิดเป็น %"}),(0,t.jsx)("span",{className:"font-medium",children:null==h?"-":"".concat(h,"%")})]}),(0,t.jsx)("div",{className:"h-2 rounded-full bg-zinc-100 dark:bg-zinc-700 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-500 to-emerald-600",style:{width:"".concat(null!=h?h:0,"%")}})})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["ผู้สร้าง : ",null==u||null==(l=u.form_ipd)?void 0:l.created_by," | เมื่อ ",new Date(null==u||null==(i=u.form_ipd)?void 0:i.created_at).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"})]}),(0,t.jsxs)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["ผู้แก้ไขล่าสุด : ",null==u||null==(o=u.form_ipd)?void 0:o.updated_by," | เมื่อ ",new Date(null==u||null==(d=u.form_ipd)?void 0:d.updated_at).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"})]})]})]})},null==(c=u.form_ipd)?void 0:c.form_ipd_id)}var P=e.i(51497);let A={open:{opacity:1,transition:{duration:.18},pointerEvents:"auto"},closed:{opacity:0,transition:{duration:.18},pointerEvents:"none"}},D={open:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:260,damping:22}},closed:{opacity:0,scale:.96,y:8,transition:{duration:.16}}};function T(e){let{title:r,subtitle:n,data:l=[],onClose:i,loading:o}=e,d=new y.default;return(0,a.useEffect)(()=>{let e=e=>"Escape"===e.key&&i();window.addEventListener("keydown",e);let t=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",e),document.body.style.overflow=t}},[i]),(0,t.jsx)(s.motion.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-[2px] p-4",variants:A,initial:"closed",animate:"open",exit:"closed",onMouseDown:i,children:(0,t.jsxs)(s.motion.div,{variants:D,onMouseDown:e=>e.stopPropagation(),className:"relative w-full max-w-2xl rounded-2xl bg-white dark:bg-[#1f1f1f] shadow-2xl ring-1 ring-black/5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-zinc-200 dark:border-zinc-700 px-4 py-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:r}),!o&&(0,t.jsxs)("p",{className:"font-bold text-xs text-zinc-600 flex items-center gap-1",children:[(0,t.jsx)(k.Building2,{size:14}),n]})]}),(0,t.jsx)("button",{onMouseDown:e=>{d.create(e),i()},className:"cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10","aria-label":"Close",children:(0,t.jsx)(z.X,{size:18})})]}),(0,t.jsx)(s.motion.div,{className:"px-4 py-2 overflow-y-auto max-h-[calc(100vh-40vh)]",children:o?(0,t.jsx)("div",{className:"flex justify-center items-center my-6",children:(0,t.jsx)(P.default,{title:"กําลังโหลดข้อมูล..."})}):l.map((e,a)=>{var r,n,s;return(0,t.jsx)(M,{data:e},null!=(s=null!=(n=null==e||null==(r=e.form_ipd)?void 0:r.form_ipd_id)?n:null==e?void 0:e.patient_an)?s:a)})}),(0,t.jsx)("div",{className:"text-xs text-zinc-400 flex items-center justify-end border-t border-zinc-200 dark:border-zinc-700 px-4 py-3",children:(0,t.jsx)("p",{children:"กลุ่มงานสุขภาพดิจิทัล โรงพยาบาลอากาศอำนวย"})})]})})}var C=e.i(24062);function O(){var e,i,p,h,b;let{hnameStatus:f}=(0,C.default)(),[y,k]=(0,a.useState)({countAll:0,countWard:[],countPatientService:[]}),[z,_]=(0,a.useState)(!0),[S,M]=(0,a.useState)(null),[P,A]=(0,a.useState)(""),[D,O]=(0,a.useState)([]),[E,H]=(0,a.useState)(!1),[L,R]=(0,a.useState)(!1),I=localStorage.getItem("token");(0,l.useMotionValue)(0),(0,l.useMotionValue)(0),(0,a.useEffect)(()=>{W()},[]);let W=async()=>{try{var e;let t=await r.default.get("/dashboard");k(null!=(e=t.data)?e:{}),M(null)}catch(e){M(e)}finally{_(!1)}},U=async e=>{A(""),H(!0);try{var t;let a=await r.default.get("/dashboard/".concat(e),{headers:{Authorization:"Bearer ".concat(I)}});O(null!=(t=a.data.data)?t:{}),A(e)}catch(e){console.log(e),(0,x.addToast)({title:"เกิดข้อผิดพลาด",description:e.response.data.message,timeout:8e3,color:"danger",shouldShowTimeoutProgress:!0})}finally{H(!1)}},V=(0,a.useMemo)(()=>Array.isArray(y.countWard)?y.countWard.reduce((e,t)=>e+(Number(null==t?void 0:t.result)||0),0):0,[y.countWard]),Y=(0,a.useMemo)(()=>Array.isArray(y.countPatientService)?y.countPatientService.reduce((e,t)=>e+(Number(null==t?void 0:t.result)||0),0):0,[y.countPatientService]);return!S||f||z?f?(0,t.jsx)(m.ErrorBanner,{err:{message:"เกิดข้อผิดพลาด 404",config:{url:"/*"},response:{status:404,data:{message:"ระบบตรวจพบว่าไม่มีการตั้งค่าชื่อโรงพยาบาล กรุณาตั้งค่าก่อนใช้งาน",errors:{Hcode:"ไม่มีการตั้งค่ารหัสโรงพยาบาล",Hname:"ไม่มีการตั้งค่าชื่อโรงพยาบาล"}}}}}):(0,t.jsxs)("div",{className:"space-y-6 select-none",children:[(0,t.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(w,{icon:(0,t.jsx)(d,{className:"size-5"}),label:"จำนวนทั้งหมด",value:null!=(h=null==y?void 0:y.countAll)?h:0,average:z?void 0:null!=(b=null==y||null==(i=y.averageAll)||null==(e=i[0])?void 0:e.average)?b:0,loading:z}),(0,t.jsx)(w,{icon:(0,t.jsx)(o,{className:"size-5"}),label:"จำนวนตามประเภทบริการ",value:Y,hint:null==(p=y.countPatientService)?void 0:p.map(e=>e.patient_service_name_english).join(" • "),loading:z}),(0,t.jsx)(w,{icon:(0,t.jsx)(c.FileCheck2,{className:"size-5"}),label:"ฟอร์มที่สมบูรณ์",value:y.countAllPercentageNotNull||0,hint:"ทั้งหมด ".concat(y.countAll||0," ฟอร์ม"),loading:z}),(0,t.jsx)(w,{icon:(0,t.jsx)(u,{className:"size-5"}),label:"ฟอร์มที่ยังไม่สมบูรณ์",value:y.countAllPercentageNull||0,hint:"ทั้งหมด ".concat(y.countAll||0," ฟอร์ม"),loading:z})]}),(0,t.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"rounded-2xl border border-zinc-300 dark:border-[#505050] bg-white dark:bg-[#181818]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-200 dark:border-[#3a3a3a]",children:[z?(0,t.jsx)(v,{className:"h-5 w-full max-w-32 rounded-md"}):(0,t.jsx)("p",{className:"font-semibold",children:"จำนวนฟอร์มของตึก"}),z?(0,t.jsx)(v,{className:"h-4 w-12 rounded-md"}):(0,t.jsxs)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["รวม ",V.toLocaleString("th-TH")]})]}),(0,t.jsx)("div",{className:"p-4 space-y-3",children:Array.isArray(y.countWard)&&y.countWard.length>0?y.countWard.map(e=>{var a;return(0,t.jsx)(N,{name:e.patient_ward,value:e.result,total:V||1,token:I,averageWard:(null==(a=y.averageWard.find(t=>t.patient_ward===e.patient_ward))?void 0:a.average)||0,fetchDashboardWard:U,setShowModal:R},e.patient_ward)}):(0,t.jsx)(g,{text:z?"กําลังโหลดข้อมูล...":"ยังไม่มีข้อมูลตึก"})})]}),(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"lg:col-span-2 rounded-2xl border border-zinc-300 dark:border-[#505050] bg-white dark:bg-[#181818]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-200 dark:border-[#3a3a3a]",children:[z?(0,t.jsx)(v,{className:"h-5 w-full max-w-32 rounded-md"}):(0,t.jsx)("p",{className:"font-semibold",children:"จำนวนฟอร์มตามประเภทบริการ"}),z?(0,t.jsx)(v,{className:"h-4 w-12 rounded-md"}):(0,t.jsxs)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["รวม ",Y.toLocaleString("th-TH")]})]}),(0,t.jsx)("div",{className:"p-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:Array.isArray(y.countPatientService)&&y.countPatientService.length>0?y.countPatientService.map(e=>{var a;return(0,t.jsx)(j,{name:e.patient_service_name_english,value:e.result,average:(null==(a=y.averagePatientServiceNameEnglish.find(t=>t.patient_service_name_english===e.patient_service_name_english))?void 0:a.average)||0},e.patient_service_name_english)}):(0,t.jsx)("div",{className:"col-span-full",children:(0,t.jsx)(g,{text:z?"กําลังโหลดข้อมูล...":"ยังไม่มีข้อมูลประเภทบริการ"})})})]})]}),(0,t.jsx)(n.AnimatePresence,{mode:"sync",children:L&&(0,t.jsx)(T,{title:"จำนวนฟอร์มของตึก",subtitle:P,data:D,onClose:()=>{R(!1),A(""),O([])},loading:E},"ward")})]}):(0,t.jsx)(m.ErrorBanner,{err:S,onRetry:W,autoRetrySec:10,onDismiss:()=>M(null)})}}]);